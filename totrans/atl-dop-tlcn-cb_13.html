<html><head></head><body>
		<div id="_idContainer589">
			<h1 class="chapter-number" id="_idParaDest-256"><a id="_idTextAnchor258"/>13</h1>
			<h1 id="_idParaDest-257"><a id="_idTextAnchor259"/>Putting It All Together with a Real-World Example</h1>
			<p>Let’s take what we’ve learned in the previous chapters and apply this from start <span class="No-Break">to finish.</span></p>
			<p>Let’s say you are an employee at <strong class="bold">DevOps Products Inc.</strong> (<strong class="bold">DPI</strong>). You are responsible for using the toolchain<a id="_idIndexMarker930"/> by using Atlassian products and third-party products to optimize your development for the flagship product, DPI-Sync, which connects to Discord servers and sends messages. How would <span class="No-Break">you begin?</span></p>
			<p>To accomplish this, we are going to simulate this process by completing the <span class="No-Break">following recipes:</span></p>
			<ul>
				<li>Creating an idea in <strong class="bold">Jira Product </strong><span class="No-Break"><strong class="bold">Discovery</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">JPD</strong></span><span class="No-Break">)</span></li>
				<li>Connecting an idea to an epic <span class="No-Break">in Jira</span></li>
				<li>Creating a story <span class="No-Break">in Jira</span></li>
				<li>Creating a code change <span class="No-Break">in Bitbucket</span></li>
				<li>Committing changes in Bitbucket/Start Bitbucket <span class="No-Break">Pipeline Build</span></li>
				<li>Executing Snyk scanning through <span class="No-Break">Bitbucket Pipelines</span></li>
				<li>Displaying the Bitbucket Pipelines build status <span class="No-Break">in Compass</span></li>
				<li>Deploying <span class="No-Break">Bitbucket Pipelines</span></li>
				<li>Creating an Opsgenie alert for the <span class="No-Break">Jira project</span></li>
				<li>Creating a <span class="No-Break">bugfix branch</span></li>
				<li>Committing a bugfix and watching the <span class="No-Break">pipeline’s execution</span></li>
			</ul>
			<p>Remember that more detailed explanations of these recipes can be found in the preceding chapters of this book. For now, let’s learn how to get this sample <span class="No-Break">project going.</span></p>
			<h1 id="_idParaDest-258"><a id="_idTextAnchor260"/>Technical requirements</h1>
			<p>For this chapter, you’ll need to install and configure the following <span class="No-Break">Atlassian products:</span></p>
			<ul>
				<li><span class="No-Break">JPD</span></li>
				<li><span class="No-Break">Jira</span></li>
				<li><span class="No-Break">Bitbucket</span></li>
				<li><span class="No-Break">Compass</span></li>
				<li><span class="No-Break">Opsgenie</span></li>
			</ul>
			<p>The sample code for this chapter can be found in the <strong class="source-inline">Chapter13</strong> folder of this book’s GitHub <span class="No-Break">repository (</span><a href="https://github.com/PacktPublishing/Atlassian-DevOps-Toolchain-Cookbook/tree/main/Chapter13"><span class="No-Break">https://github.com/PacktPublishing/Atlassian-DevOps-Toolchain-Cookbook/tree/main/Chapter13</span></a><span class="No-Break">).</span></p>
			<h1 id="_idParaDest-259"><a id="_idTextAnchor261"/>Creating an idea in JPD</h1>
			<p>We’ll start the development process<a id="_idIndexMarker931"/> by deciding what to build. We can gather<a id="_idIndexMarker932"/> various inputs from our competitors, our customers, and other sources to generate ideas for new features and products <span class="No-Break">to develop.</span></p>
			<p>We will store our <strong class="bold">idea</strong> for a new feature <span class="No-Break">in JPD.</span></p>
			<h2 id="_idParaDest-260"><a id="_idTextAnchor262"/>Getting ready</h2>
			<p>In our <strong class="bold">JPD</strong> project, we must work with the Jira administrator and the Jira project administrator to ensure that we have the appropriate role to create a <span class="No-Break">JPD idea.</span></p>
			<p>Your project administrator can ensure access to create ideas by performing the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Select the <strong class="bold">Project settings</strong> option from <span class="No-Break">the sidebar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer545">
					<img alt="Figure 13.1 – Selecting Project settings" src="image/B21937_13_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.1 – Selecting Project settings</p>
			<ol>
				<li value="2">From the <strong class="bold">Project settings</strong> sidebar<a id="_idIndexMarker933"/> options, expand <strong class="bold">Features</strong> and<a id="_idIndexMarker934"/> select <strong class="bold">Create ideas</strong>. The page that appears should look <span class="No-Break">like this:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer546">
					<img alt="Figure 13.2 – Create ideas" src="image/B21937_13_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.2 – Create ideas</p>
			<ol>
				<li value="3">Enable <strong class="bold">Allow contributors to create ideas</strong> by switching the <span class="No-Break">toggle on.</span><p class="list-inset">Note that while enabled, contributors<a id="_idIndexMarker935"/> can create ideas<a id="_idIndexMarker936"/> but cannot edit them or delete them. For any idea, contributors can add comments, attachments, <span class="No-Break">and insights.</span></p></li>
			</ol>
			<h2 id="_idParaDest-261"><a id="_idTextAnchor263"/>How to do it…</h2>
			<p>We’ve already covered how to create ideas either by using the <strong class="bold">Create</strong> button or from within a view. Let’s review how to create a new idea by using the <span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break"> button:</span></p>
			<ol>
				<li>Click the blue <strong class="bold">Create</strong> button on the <span class="No-Break">navigation bar.</span></li>
				<li>A modal will appear that shows the standard fields needed for the idea. Fill in those fields and click the <span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer547">
					<img alt="Figure 13.3 – Create an idea" src="image/B21937_13_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.3 – Create an idea</p>
			<ol>
				<li value="3">The Jira admin can change what fields appear on the modal by creating forms. This may also include pre-filling the <strong class="bold">Description</strong> field by using <span class="No-Break">a template.</span></li>
			</ol>
			<p>We now have an idea<a id="_idIndexMarker937"/> that we can use to track desirability and customer<a id="_idIndexMarker938"/> sentiment by adding insights and other information. The next step is to create a Jira issue to track development work and link it to the <span class="No-Break">original idea.</span></p>
			<h1 id="_idParaDest-262"><a id="_idTextAnchor264"/>Connecting an idea to an epic in Jira</h1>
			<p>At this point, we’re starting<a id="_idIndexMarker939"/> to move from ideation<a id="_idIndexMarker940"/> to implementation. This will require us to move from JPD to Jira. Let’s see how the handoff <span class="No-Break">is done.</span></p>
			<h2 id="_idParaDest-263"><a id="_idTextAnchor265"/>Getting ready</h2>
			<p>As we saw in the <em class="italic">Delivering ideas for development in Jira </em>recipe in <a href="B21937_02.xhtml#_idTextAnchor038"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, before creating an <strong class="bold">epic</strong>, please verify <span class="No-Break">the following:</span></p>
			<ul>
				<li>There is at least one Jira project available to contain <span class="No-Break">the epic.</span></li>
				<li>The person creating the epic has the appropriate permissions to create the epic in the target project. This same person should be a member of the JPD project or a <span class="No-Break">Jira admin.</span></li>
			</ul>
			<p>When both conditions are met, it’s easy to create an epic as a delivery ticket <span class="No-Break">in JPD.</span></p>
			<h2 id="_idParaDest-264"><a id="_idTextAnchor266"/>How to do it…</h2>
			<p>In the <em class="italic">Delivering ideas for development in Jira </em>recipe in <a href="B21937_02.xhtml#_idTextAnchor038"><span class="No-Break"><em class="italic">Chapter 2</em></span></a>, you saw that you can create an epic from the following <span class="No-Break">two locations:</span></p>
			<ul>
				<li>On the <span class="No-Break">idea’s page</span></li>
				<li>On the <strong class="bold">Idea</strong> panel in <span class="No-Break">a view</span></li>
			</ul>
			<p>Let’s learn how to create<a id="_idIndexMarker941"/> an epic from the <strong class="bold">Idea</strong> page so that we can familiarize<a id="_idIndexMarker942"/> ourselves with <span class="No-Break">this process:</span></p>
			<ol>
				<li>On the <strong class="bold">Idea</strong> page, click on the <span class="No-Break"><strong class="bold">Delivery</strong></span><span class="No-Break"> tab.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer548">
					<img alt="Figure 13.4 – Selecting the Delivery tab on the Idea page" src="image/B21937_13_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.4 – Selecting the Delivery tab on the Idea page</p>
			<ol>
				<li value="2">The <strong class="bold">Delivery</strong> tab will expand, giving you <span class="No-Break">two options:</span><ul><li>Create a new delivery <span class="No-Break">ticket (epic)</span></li><li>Create a link to an existing <span class="No-Break">delivery ticket</span></li></ul><p class="list-inset">Selecting <strong class="bold">Create a delivery ticket</strong> displays text areas for the project, including areas for specifying the <strong class="bold">issue type</strong> and <strong class="bold">summary</strong>. These fields are typically prefilled, as <span class="No-Break">shown here:</span></p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer549">
					<img alt="Figure 13.5 – Create a delivery ticket" src="image/B21937_13_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.5 – Create a delivery ticket</p>
			<ol>
				<li value="3">Select <strong class="bold">Project</strong> and <strong class="bold">Issue type</strong> values and fill in the desired <strong class="bold">Summary</strong> before <span class="No-Break">clicking </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>We now have an epic in Jira that captures the feature described by our idea <span class="No-Break">in JPD.</span></p>
			<p>Our development team cannot<a id="_idIndexMarker943"/> work on the entire scope of an epic in one go. Refining<a id="_idIndexMarker944"/> our epic by creating <em class="italic">stories</em> that can describe small bits of functionality that can be worked on to gradually accumulate the total functionality of our feature is the best way to move forward. So, let’s learn how to <span class="No-Break">do this.</span></p>
			<h1 id="_idParaDest-265"><a id="_idTextAnchor267"/>Creating a story in Jira</h1>
			<p>In Jira, we can use epics<a id="_idIndexMarker945"/> as containers for the small<a id="_idIndexMarker946"/> individual pieces of functionality that are captured as stories. Our epic will refer to these smaller stories as <span class="No-Break">its children.</span></p>
			<p>Let’s create child stories directly from <span class="No-Break">the epic.</span></p>
			<h2 id="_idParaDest-266"><a id="_idTextAnchor268"/>Getting ready</h2>
			<p>Similar to the previous recipe, we require Jira to be installed and configured so that the following conditions can <span class="No-Break">be met:</span></p>
			<ul>
				<li>There is at least one Jira project available to contain the story and it is connected to <span class="No-Break">the epic.</span></li>
				<li>The person creating the story has the appropriate permissions to create the epic and story in the target project. This same person should be a member of the Jira project or a <span class="No-Break">Jira admin.</span></li>
			</ul>
			<p>When both conditions<a id="_idIndexMarker947"/> are met, it becomes easy to create<a id="_idIndexMarker948"/> the epic and any <span class="No-Break">child stories.</span></p>
			<h2 id="_idParaDest-267"><a id="_idTextAnchor269"/>How to do it…</h2>
			<p>You can create a child story that links to the epic at <span class="No-Break">two locations:</span></p>
			<ul>
				<li>On the page for <span class="No-Break">the epic</span></li>
				<li>On the <span class="No-Break"><strong class="bold">Timeline</strong></span><span class="No-Break"> view</span></li>
			</ul>
			<p>Let’s look at creating child stories from <span class="No-Break">each location.</span></p>
			<h3>Creating a child story from the epic page</h3>
			<p>Epics are generally too large<a id="_idIndexMarker949"/> for a single development team<a id="_idIndexMarker950"/> to handle in a single Sprint. As the saying goes, you eat an elephant one bite at <span class="No-Break">a time.</span></p>
			<p>In Jira, this is done by creating child stories. Let’s see how to do this from the <span class="No-Break">epic page.</span></p>
			<ol>
				<li>One of the ways to get to an epic page is to select the <strong class="bold">Issues</strong> page from the <span class="No-Break"><strong class="bold">Project</strong></span><span class="No-Break"> sidebar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer550">
					<img alt="Figure 13.6 – Selecting Issues from the Project sidebar" src="image/B21937_13_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.6 – Selecting Issues from the Project sidebar</p>
			<ol>
				<li value="2">Set the filters of interest<a id="_idIndexMarker951"/> to limit the search. When you see<a id="_idIndexMarker952"/> the epic, click on its <strong class="bold">Key</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="bold">Summary</strong></span><span class="No-Break">.</span></li>
				<li>Once on the epic page, click on the <strong class="bold">Add a child </strong><span class="No-Break"><strong class="bold">issue</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer551">
					<img alt="Figure 13.7 – Add a child issue" src="image/B21937_13_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.7 – Add a child issue</p>
			<ol>
				<li value="4">In the <strong class="bold">Child issues</strong> section, select<a id="_idIndexMarker953"/> the issue type (<strong class="bold">Story</strong> for user stories), fill in a summary<a id="_idIndexMarker954"/> in the <strong class="bold">What needs to be done</strong> area, and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer552">
					<img alt="Figure 13.8 – Creating a child issue" src="image/B21937_13_08.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.8 – Creating a child issue</p>
			<p>The parent epic now has a story linked as <span class="No-Break">a child.</span></p>
			<h3>Creating a child story in the Timeline view</h3>
			<p>The <strong class="bold">Timeline</strong> view shows the issues<a id="_idIndexMarker955"/> of a project laid out against time<a id="_idIndexMarker956"/> to determine the overall progress of all the work that a project does. An epic may be placed in the timeline with an expected start and due date. Child stories can be created and planned for periods between an epic’s expected start and <span class="No-Break">due date.</span></p>
			<p>To create a child story of an epic, perform the following steps in the <strong class="bold">Timeline</strong> view of your <span class="No-Break">Jira project:</span></p>
			<ol>
				<li>To get to the <strong class="bold">Timeline</strong> view, select <strong class="bold">Timeline</strong> in the <span class="No-Break"><strong class="bold">Project</strong></span><span class="No-Break"> sidebar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer553">
					<img alt="Figure 13.9 – Selecting Timeline" src="image/B21937_13_09.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.9 – Selecting Timeline</p>
			<ol>
				<li value="2">Hover over the epic until a plus sign (<strong class="bold">+</strong>) <span class="No-Break">appears.</span></li>
				<li>Select the issue type from the second dropdown and fill in the <strong class="bold">What needs to be done?</strong> area to populate the Summary. Press <em class="italic">Enter</em> when <span class="No-Break">you’re finished.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer554">
					<img alt="Figure 13.10 – Entering a child story in the Timeline view" src="image/B21937_13_10.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.10 – Entering a child story in the Timeline view</p>
			<p>A child story will now appear below the <span class="No-Break">parent epic.</span></p>
			<h1 id="_idParaDest-268"><a id="_idTextAnchor270"/>Creating a code change in Bitbucket</h1>
			<p>At this point, we are ready <a id="_idIndexMarker957"/>to begin developing our story<a id="_idIndexMarker958"/> in Jira. Let’s say you’re on a Scrum team and the story was selected for the upcoming sprint or that capacity opened up on your Kanban team to move the story from the backlog. Regardless, it’s time to <span class="No-Break">start development.</span></p>
			<p>This recipe will have us move from Jira, where the story is planned and designed, to a Git-based tool, where we will create and store our implementation. This<a id="_idIndexMarker959"/> is where our <strong class="bold">continuous integration and continuous Deployment</strong> (<strong class="bold">CI/CD</strong>) pipeline <span class="No-Break">will start.</span></p>
			<p>While the instructions here apply to Jira connected to a Bitbucket repository, this will work for any Git-based server tool, such as GitHub or GitLab, as we saw in <a href="B21937_04.xhtml#_idTextAnchor072"><span class="No-Break"><em class="italic">Chapter 4</em></span></a><span class="No-Break">.</span></p>
			<h2 id="_idParaDest-269"><a id="_idTextAnchor271"/>Getting ready</h2>
			<p>One thing we need to make<a id="_idIndexMarker960"/> sure we have for this recipe is a Bitbucket workspace<a id="_idIndexMarker961"/> that’s been created with a Bitbucket repository. This process was explained in <a href="B21937_05.xhtml#_idTextAnchor087"><span class="No-Break"><em class="italic">Chapter 5</em></span></a>. There, we set up Bitbucket by performing the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>First, we created a Bitbucket workspace. If also desired, we created <span class="No-Break">a project.</span></li>
				<li>Then, we created a <span class="No-Break">Bitbucket repository.</span></li>
			</ol>
			<p>Now that we’ve created our workspace and repository, we need to connect it to our Jira project. We learned how to connect our Jira project to a Bitbucket repository in <a href="B21937_01.xhtml#_idTextAnchor019"><span class="No-Break"><em class="italic">Chapter 1</em></span></a>. There, we performed the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>First, we selected <strong class="bold">Tool Chain</strong> under <strong class="bold">Project settings</strong> as a Jira <span class="No-Break">project administrator.</span></li>
				<li>Then, we selected the <strong class="bold">Build</strong> section on the <span class="No-Break"><strong class="bold">Toolchain</strong></span><span class="No-Break"> page.</span></li>
				<li>On the <strong class="bold">Toolchain</strong> page, we <span class="No-Break">clicked </span><span class="No-Break"><strong class="bold">Add</strong></span><span class="No-Break">.</span></li>
				<li>From here, we selected <strong class="bold">Bitbucket</strong> as the <span class="No-Break">repository provider.</span></li>
				<li>Finally, we selected the repository to add and clicked <span class="No-Break"><strong class="bold">Add repository</strong></span><span class="No-Break">.</span></li>
			</ol>
			<p>We are now ready to start development with a Jira project connected to a <span class="No-Break">Bitbucket repository.</span></p>
			<h2 id="_idParaDest-270"><a id="_idTextAnchor272"/>How to do it…</h2>
			<p>To begin development, we must create a branch in Git to place new or changed files. If our Git repository is connected to our Jira project, we can create the branch directly from Jira and the branch will be linked to the issue describing <span class="No-Break">the context.</span></p>
			<p>To create this branch from the Jira story, perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Look for the <strong class="bold">Development</strong> section of the Jira issue. This set of fields notes the branches, commits, and pull requests associated with the Jira issue. The following screenshot<a id="_idIndexMarker962"/> shows where we<a id="_idIndexMarker963"/> can find these <span class="No-Break"><strong class="bold">Development</strong></span><span class="No-Break"> fields:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer555">
					<img alt="Figure 13.11 – Development information" src="image/B21937_13_11.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.11 – Development information</p>
			<ol>
				<li value="2">To create a branch, click the <strong class="bold">Create branch</strong> link. You’ll be taken to a page that allows you to configure the branch of the repository, the type of branch, and the branch’s name. This can be seen in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer556">
					<img alt="Figure 13.12 – Create branch" src="image/B21937_13_12.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.12 – Create branch</p>
			<p class="list-inset">Click <strong class="bold">Create</strong> to create<a id="_idIndexMarker964"/> your branch. Your branch will be created <a id="_idIndexMarker965"/>on Bitbucket Cloud with instructions on performing <strong class="source-inline">git checkout</strong> on your local repository copy, as <span class="No-Break">shown here:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer557">
					<img alt="Figure 13.13 – Branch page on Bitbucket" src="image/B21937_13_13.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.13 – Branch page on Bitbucket</p>
			<p>With that, you’ve used the Jira-Bitbucket<a id="_idIndexMarker966"/> integration to connect a Jira issue<a id="_idIndexMarker967"/> to a Bitbucket branch so that you can <span class="No-Break">start development.</span></p>
			<h1 id="_idParaDest-271"><a id="_idTextAnchor273"/>Committing changes in Bitbucket/Start Bitbucket Pipeline Build</h1>
			<p>At the moment, we’re performing<a id="_idIndexMarker968"/> implementation in our development process. We make changes in our code and commit those changes in Bitbucket. Once we make a commit against a Bitbucket repository, we want Bitbucket Pipelines to start a CI build that includes any testing and <span class="No-Break">security scans.</span></p>
			<h2 id="_idParaDest-272"><a id="_idTextAnchor274"/>Getting ready</h2>
			<p>Place the code we have in the <strong class="source-inline">Chapter13</strong> folder of this book’s GitHub repository into the Bitbucket repository that you created for the previous recipe. This also includes copying the <strong class="source-inline">bitbucket-pipelines.yml</strong> file and making sure it is at the root level of <span class="No-Break">your repository.</span></p>
			<h2 id="_idParaDest-273"><a id="_idTextAnchor275"/>How to do it…</h2>
			<p>We will be making changes directly on the Bitbucket UI, not remotely. Once we make a commit, the Bitbucket pipeline should execute. To put this process in motion, perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>On the Bitbucket repository page, select <strong class="bold">Source</strong> from the <span class="No-Break">repository sidebar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer558">
					<img alt="Figure 13.14 – Selecting source" src="image/B21937_13_14.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.14 – Selecting source</p>
			<ol>
				<li value="2">In the <strong class="bold">Source</strong> window, open the branch<a id="_idIndexMarker969"/> pulldown and select the branch you created in the <span class="No-Break">previous recipe.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer559">
					<img alt="Figure 13.15 – Selecting a branch" src="image/B21937_13_15.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.15 – Selecting a branch</p>
			<ol>
				<li value="3">Select the file you wish to edit. If the file is nested, select the folder first. In this case, we will <span class="No-Break">edit </span><span class="No-Break"><strong class="source-inline">index.js</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer560">
					<img alt="Figure 13.16 – Selecting a file to edit" src="image/B21937_13_16.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.16 – Selecting a file to edit</p>
			<ol>
				<li value="4">In the editor page<a id="_idIndexMarker970"/> for the <strong class="source-inline">index.js</strong> file, <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Edit</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer561">
					<img alt="Figure 13.17 – Selecting Edit" src="image/B21937_13_17.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.17 – Selecting Edit</p>
			<ol>
				<li value="5">Make your changes. When your changes are complete, select <strong class="bold">Commit</strong> at the bottom of the <strong class="bold">Edit</strong> page to add and track your changes <span class="No-Break">in Git.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer562">
					<img alt="Figure 13.18 – Commit" src="image/B21937_13_18.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.18 – Commit</p>
			<ol>
				<li value="6">In the modal, provide a commit message and select <strong class="bold">Commit</strong>. For the commit to be linked to Jira, the commit message must start with the issue ID of the relevant <span class="No-Break">Jira issue.</span></li>
				<li>Once the commit<a id="_idIndexMarker971"/> occurs, Bitbucket Pipelines should execute, running through the test, scanning, and deployment steps found in <strong class="source-inline">bitbucket-pipelines.yml</strong>. You can view a deployment run and its progress by selecting <strong class="bold">Pipelines</strong> in the <span class="No-Break">repository sidebar.</span></li>
			</ol>
			<p>Now that our pipeline is working, let’s enhance it by integrating Snyk, which will perform security<a id="_idIndexMarker972"/> scanning and move our process more <span class="No-Break">to </span><span class="No-Break"><strong class="bold">DevSecOps</strong></span><span class="No-Break">.</span></p>
			<h1 id="_idParaDest-274"><a id="_idTextAnchor276"/>Execute Snyk scanning through Bitbucket Pipelines</h1>
			<p>Snyk is one of several security<a id="_idIndexMarker973"/> tools that can be tightly integrated<a id="_idIndexMarker974"/> with Bitbucket and Bitbucket Pipelines. This tight integration allows for a Snyk scan to be executed to look for security vulnerabilities as part of testing when it is a step in a <span class="No-Break">Bitbucket pipeline.</span></p>
			<p>Let’s learn how to set up <span class="No-Break">this integration.</span></p>
			<h2 id="_idParaDest-275"><a id="_idTextAnchor277"/>Getting ready</h2>
			<p>Integration between Snyk and Bitbucket takes the <span class="No-Break">following forms:</span></p>
			<ul>
				<li>Snyk is set up as a security provider in Bitbucket so that automated scanning can occur on the repository and its results appear in the <strong class="bold">Security</strong> section of the <span class="No-Break">repository sidebar.</span></li>
				<li>Snyk pipes can<a id="_idIndexMarker975"/> execute Snyk scans as part<a id="_idIndexMarker976"/> of a Bitbucket <span class="No-Break">Pipelines execution.</span></li>
			</ul>
			<p>Let’s look at setting <span class="No-Break">this up.</span></p>
			<h3>Setting up Snyk as a security provider</h3>
			<p>We’ll start by setting up Snyk as a security<a id="_idIndexMarker977"/> provider for Bitbucket. To do that, perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>In your Bitbucket repository, select <strong class="bold">Security</strong> from the <span class="No-Break">repository sidebar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer563">
					<img alt="Figure 13.19 – Security" src="image/B21937_13_19.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.19 – Security</p>
			<ol>
				<li value="2">If you don’t have a Snyk account, select <strong class="bold">Install Snyk</strong> and set up a <span class="No-Break">Snyk account.</span></li>
				<li>A modal will appear, asking you to request access to the entire workspace. Select <strong class="bold">Allow</strong> to proceed with integrating Snyk <span class="No-Break">with Bitbucket.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer564">
					<img alt="Figure 13.20 – Integrating Snyk with Bitbucket" src="image/B21937_13_20.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.20 – Integrating Snyk with Bitbucket</p>
			<ol>
				<li value="4">Snyk will then ask<a id="_idIndexMarker978"/> you to log in or create a new Snyk account. Signing up sets you up for a free trial that moves you to a free plan when the trial period is over. Press <strong class="bold">Sign up or Log in</strong> to create or enter your <span class="No-Break">Snyk account.</span></li>
				<li>Once you have set up your account and integrated it with Bitbucket Cloud, your repositories will have the following section (annotated) in the <span class="No-Break">repository sidebar:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer565">
					<img alt="Figure 13.21 – Snyk security" src="image/B21937_13_21.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.21 – Snyk security</p>
			<p>Importing repositories into Snyk and setting up Snyk projects will allow you to perform regular scans and receive notifications regarding any vulnerabilities that have been discovered. We also discussed running<a id="_idIndexMarker979"/> Snyk as part of the pipeline by using the Snyk Pipe. Let’s learn <span class="No-Break">that’s done.</span></p>
			<h3>Setting up the Snyk Pipe</h3>
			<p>We can add a step to perform<a id="_idIndexMarker980"/> security scans with Snyk in our <strong class="source-inline">bitbucket-pipelines.yml</strong> file. We originally covered this in <a href="B21937_06.xhtml#_idTextAnchor103"><span class="No-Break"><em class="italic">Chapter 6</em></span></a>; we are reinforcing the necessary <span class="No-Break">steps here:</span></p>
			<ol>
				<li>Open the <strong class="source-inline">bitbucket-pipelines.yml</strong> file so that you can edit it in the Bitbucket UI. Editing the file should reveal the Bitbucket Pipelines editor, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer566">
					<img alt="Figure 13.22 – Pipelines editor" src="image/B21937_13_22.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.22 – Pipelines editor</p>
			<ol>
				<li value="2">Add the following code snippet as its own step in the <strong class="source-inline">bitbucket-pipelines.yml</strong> file. To get the Snyk token, go to the <strong class="bold">API Token</strong> section of <strong class="bold">Account settings</strong> for your Snyk account and save it as a secure <span class="No-Break">repository variable:</span><pre class="source-code">
-pipe: snyk/snyk-scan:1.0.1
    variables:
      SNYK_TOKEN: $SNYK_TOKEN
      LANGUAGE: "node"</pre></li>				<li>Commit your changes to the <span class="No-Break"><strong class="source-inline">bitbucket-pipelines.yml</strong></span><span class="No-Break"> file.</span></li>
			</ol>
			<p>With that, Snyk scans have been set up as a step in <span class="No-Break">Bitbucket Pipelines.</span></p>
			<p>Now that Snyk has been<a id="_idIndexMarker981"/> configured, it’s easy to execute Snyk scans in our pipeline. Let’s look into the various methods for <span class="No-Break">doing so.</span></p>
			<h2 id="_idParaDest-276"><a id="_idTextAnchor278"/>How to do it…</h2>
			<p>Now that we’ve configured<a id="_idIndexMarker982"/> Snyk with Bitbucket, let’s learn<a id="_idIndexMarker983"/> how to execute a <span class="No-Break">Snyk scan:</span></p>
			<ol>
				<li>Because any commit will automatically execute the pipeline, place your step in a commonly used branch or the default setting so that a Snyk scan <span class="No-Break">will execute.</span></li>
				<li>If you know in which pipeline you placed the Snyk Pipe, you can execute that pipeline manually by selecting the branch, commit, or tag, selecting that pipeline, and clicking <strong class="bold">Run</strong>. This<a id="_idIndexMarker984"/> was explained<a id="_idIndexMarker985"/> in the <em class="italic">Manual execution</em> recipe in <a href="B21937_06.xhtml#_idTextAnchor103"><span class="No-Break"><em class="italic">Chapter 6</em></span></a><span class="No-Break">.</span></li>
			</ol>
			<p>Next, we’ll consider various scenarios where if the tests pass, we move from CI <span class="No-Break">to CD.</span></p>
			<h1 id="_idParaDest-277"><a id="_idTextAnchor279"/>Displaying Bitbucket Pipeline Build Status in Compass</h1>
			<p>Compass organizes development<a id="_idIndexMarker986"/> into components and displays<a id="_idIndexMarker987"/> the status of these components. Events that affect these components include builds and deployments. Compass can gather information from Jira and Bitbucket and present it in a <span class="No-Break">single interface.</span></p>
			<p>In this recipe, we will make changes in Bitbucket and see their effects <span class="No-Break">in Compass.</span></p>
			<h2 id="_idParaDest-278"><a id="_idTextAnchor280"/>Getting ready</h2>
			<p>If you haven’t already done so, you need to connect Bitbucket to Compass. Instructions for doing so can be found in the <em class="italic">Integrating Compass with Bitbucket Cloud</em> recipe in <a href="B21937_11.xhtml#_idTextAnchor214"><span class="No-Break"><em class="italic">Chapter 11</em></span></a>. Another way administrators can connect Bitbucket to Compass comes about when initially installing Compass. Let’s see what can be done at <span class="No-Break">this time:</span></p>
			<ol>
				<li>Compass identifies if Bitbucket is part of the cloud organization. If it finds Bitbucket repositories, it will offer to map them as Compass components. Verify that Compass has found the desired <span class="No-Break">Bitbucket project.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer567">
					<img alt="Figure 13.23 – Importing repositories as Compass components" src="image/B21937_13_23.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.23 – Importing repositories as Compass components</p>
			<ol>
				<li value="2">At this point, you will have<a id="_idIndexMarker988"/> to allow Compass<a id="_idIndexMarker989"/> to connect with Bitbucket. To do so, click the <strong class="bold">Grant </strong><span class="No-Break"><strong class="bold">access</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer568">
					<img alt="Figure 13.24 – Authorizing Compass" src="image/B21937_13_24.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.24 – Authorizing Compass</p>
			<p class="list-inset">Once authorization has been<a id="_idIndexMarker990"/> completed, you can view information<a id="_idIndexMarker991"/> about your Bitbucket repositories since they’ve been mapped as <span class="No-Break">Compass components.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer569">
					<img alt="Figure 13.25 – Compass components" src="image/B21937_13_25.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.25 – Compass components</p>
			<h2 id="_idParaDest-279"><a id="_idTextAnchor281"/>How to do it…</h2>
			<p>Now that our Bitbucket repositories<a id="_idIndexMarker992"/> have been mapped as Compass<a id="_idIndexMarker993"/> components, let’s see what happens in Compass when we make changes in Bitbucket. For this visualization, it may be beneficial to have Compass and Bitbucket on separate browser tabs or <span class="No-Break">browser windows:</span></p>
			<ol>
				<li>In the <strong class="bold">Compass</strong> tab or window, set the component that corresponds to your Bitbucket repository. Click <strong class="bold">Activity</strong> to view recent activity for <span class="No-Break">the component.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer570">
					<img alt="Figure 13.26 – Selecting Activity for a component" src="image/B21937_13_26.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.26 – Selecting Activity for a component</p>
			<ol>
				<li value="2">In the <strong class="bold">Bitbucket</strong> tab, make a change in the repository. Finalize this by clicking the <strong class="bold">Commit</strong> button in <span class="No-Break">the editor.</span></li>
				<li>In the modal, enter a commit message and other required information. Click <strong class="bold">Commit</strong> to commit <span class="No-Break">the change.</span><p class="list-inset">In Bitbucket, go to the <strong class="bold">Pipelines</strong> view to confirm that a pipeline has <span class="No-Break">been executed.</span></p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer571">
					<img alt="Figure 13.27 – Viewing pipeline executions" src="image/B21937_13_27.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.27 – Viewing pipeline executions</p>
			<ol>
				<li value="4">Go to the browser tab where Compass<a id="_idIndexMarker994"/> is running. On the <strong class="bold">Activity</strong> view of the component<a id="_idIndexMarker995"/> that’s been mapped to the Bitbucket repository, confirm that the <span class="No-Break">deployment occurred.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer572">
					<img alt="Figure 13.28 – Deployments seen in Compass" src="image/B21937_13_28.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.28 – Deployments seen in Compass</p>
			<p>With that, we’ve confirmed that actions in Bitbucket will show up in Compass. This information <span class="No-Break">includes deployments.</span></p>
			<p>In our sample scenario, our development<a id="_idIndexMarker996"/> team will get the same<a id="_idIndexMarker997"/> notifications as operations on any alerts. Let’s see how to <span class="No-Break">do that.</span></p>
			<h1 id="_idParaDest-280"><a id="_idTextAnchor282"/>Creating an Opsgenie alert for the Jira project</h1>
			<p>In the <em class="italic">Setting up Opsgenie teams</em> recipe in <a href="B21937_12.xhtml#_idTextAnchor240"><span class="No-Break"><em class="italic">Chapter 12</em></span></a>, we looked<a id="_idIndexMarker998"/> at setting up Opsgenie. This allows<a id="_idIndexMarker999"/> us to create teams and notification schedules that will react when an <span class="No-Break">alert occurs.</span></p>
			<h2 id="_idParaDest-281"><a id="_idTextAnchor283"/>Getting ready</h2>
			<p>If you didn’t connect your Jira project to Opsgenie in <a href="B21937_12.xhtml#_idTextAnchor240"><span class="No-Break"><em class="italic">Chapter 12</em></span></a> or have created a new Jira project, follow <span class="No-Break">these steps:</span></p>
			<ol>
				<li>In your project, select <strong class="bold">Project settings</strong> and then <span class="No-Break">select </span><span class="No-Break"><strong class="bold">Toolchain</strong></span><span class="No-Break">.</span></li>
				<li>On the <strong class="bold">Toolchain</strong> page, expand the <strong class="bold">Operate</strong> section and select <strong class="bold">+ Add </strong><span class="No-Break"><strong class="bold">on-call team</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer573">
					<img alt="Figure 13.29 – Add on-call team" src="image/B21937_13_29.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.29 – Add on-call team</p>
			<ol>
				<li value="3">In the modal, type in the name<a id="_idIndexMarker1000"/> of your team. As you type, the action<a id="_idIndexMarker1001"/> will appear as a dropdown with the team name you enter. Select the <strong class="bold">Create…</strong> drop-down option that appears below. After the new team name is visible as a dropdown, as shown in the following screenshot, <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer574">
					<img alt="Figure 13.30 – Add on-call team" src="image/B21937_13_30.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.30 – Add on-call team</p>
			<ol>
				<li value="4">Hover over the team<a id="_idIndexMarker1002"/> you created. Click the more<a id="_idIndexMarker1003"/> actions (<strong class="bold">…</strong>) icon and select <strong class="bold">Open </strong><span class="No-Break"><strong class="bold">in Opsgenie</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer575">
					<img alt="Figure 13.31 – Open in Opsgenie" src="image/B21937_13_31.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.31 – Open in Opsgenie</p>
			<ol>
				<li value="5">Opsgenie will open on the team page. Look at the <strong class="bold">On-call</strong> section and verify <span class="No-Break">the following:</span><ol><li class="upper-roman">The routing rule points to an escalation policy. If it doesn’t, refer to the <em class="italic">Escalation policies and rules</em> recipe in <a href="B21937_12.xhtml#_idTextAnchor240"><span class="No-Break"><em class="italic">Chapter 12</em></span></a> to create an escalation policy and set a routing rule. An example is shown in the <span class="No-Break">following screenshot:</span></li></ol></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer576">
					<img alt="Figure 13.32 – Routing rules and Escalation policies" src="image/B21937_13_32.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.32 – Routing rules and Escalation policies</p>
			<ol>
				<li class="upper-roman" value="2">A team member<a id="_idIndexMarker1004"/> has been identified<a id="_idIndexMarker1005"/> in <strong class="bold">On-call schedules</strong>. This is shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer577">
					<img alt="Figure 13.33 – On-call schedules" src="image/B21937_13_33.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.33 – On-call schedules</p>
			<p>If you have members on your team, and your team has an on-call schedule with team members identified and a routing rule that points to an escalation policy, you should be all set to receive alerts directed to your team. Let’s learn how to test this by creating an alert <span class="No-Break">in Opsgenie.</span></p>
			<h2 id="_idParaDest-282"><a id="_idTextAnchor284"/>How to do it…</h2>
			<p>We are going to directly create<a id="_idIndexMarker1006"/> an alert in Opsgenie and verify that notifications<a id="_idIndexMarker1007"/> are sent to the team member on-call. Normally, Opsgenie receives<a id="_idIndexMarker1008"/> alerts through integrations with <strong class="bold">Jira Service Management</strong> or DevOps monitoring tools. We are performing this test to verify <span class="No-Break">our simulation.</span></p>
			<p>To create the alert, perform the following steps <span class="No-Break">in Opsgenie:</span></p>
			<ol>
				<li>In Opsgenie, go to the <strong class="bold">Alerts</strong> item in the <span class="No-Break">menu bar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer578">
					<img alt="Figure 13.34 – Alerts" src="image/B21937_13_34.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.34 – Alerts</p>
			<ol>
				<li value="2">Select <strong class="bold">Create alert</strong> on the <span class="No-Break"><strong class="bold">Alerts</strong></span><span class="No-Break"> page.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer579">
					<img alt="Figure 13.35 – Create alert" src="image/B21937_13_35.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.35 – Create alert</p>
			<ol>
				<li value="3">In the modal, select <strong class="bold">Default API</strong> for <strong class="bold">API integration</strong> and search for your team in the <strong class="bold">Responders</strong> area. Once you<a id="_idIndexMarker1009"/> have selected<a id="_idIndexMarker1010"/> these options, fill in <strong class="bold">Alert message</strong> and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer580">
					<img alt="Figure 13.36 – Setting up and creating a new alert" src="image/B21937_13_36.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.36 – Setting up and creating a new alert</p>
			<ol>
				<li value="4">Verify that the alert has been created <span class="No-Break">in Opsgenie.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer581">
					<img alt="Figure 13.37 – Alert in Opsgenie" src="image/B21937_13_37.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.37 – Alert in Opsgenie</p>
			<ol>
				<li value="5">You can also go to the email tied to the team member who’s on-call and verify that an email notification has <span class="No-Break">been sent.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer582">
					<img alt="Figure 13.38 – Alert email notification" src="image/B21937_13_38.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.38 – Alert email notification</p>
			<p>As we can see, developers can receive<a id="_idIndexMarker1011"/> notifications about incidents<a id="_idIndexMarker1012"/> as well as from operations people, allowing developers and operations to work together on production problems. If the root cause is found to be a bug, developers can add fixes by creating bugfix branches for development. We’ll see how that process may occur in the <span class="No-Break">next recipe.</span></p>
			<h1 id="_idParaDest-283"><a id="_idTextAnchor285"/>Creating a bugfix branch</h1>
			<p>A problem has come up! QA has discovered<a id="_idIndexMarker1013"/> a bug in the new release. They wrote a bug in Jira that has been assigned to you. What you have to do is create a branch in Bitbucket that will contain the solution and connect it to the <span class="No-Break">Jira issue.</span></p>
			<p>We will simulate the preceding scenario in this recipe. The first thing you must do is create the bug <span class="No-Break">in Jira.</span></p>
			<h2 id="_idParaDest-284"><a id="_idTextAnchor286"/>Getting ready</h2>
			<p>Our first stop is to use Jira to create the bug. To do this, perform the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Select the <strong class="bold">Create</strong> button at the top of the <span class="No-Break">Jira screen.</span></li>
				<li>In the modal that appears, fill<a id="_idIndexMarker1014"/> in mandatory fields such as <strong class="bold">Summary</strong> and make sure the <strong class="bold">Project</strong> and <strong class="bold">Issue type</strong> (<strong class="bold">Bug</strong>) fields are correct. <span class="No-Break">Click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span><p class="list-inset">Your new bug should appear in <span class="No-Break">the project.</span></p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer583">
					<img alt="Figure 13.39 – New Bug" src="image/B21937_13_39.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.39 – New Bug</p>
			<p>With the bug created in Jira, it’s time to create the bugfix branch in Bitbucket. Let’s examine <span class="No-Break">that further.</span></p>
			<h2 id="_idParaDest-285"><a id="_idTextAnchor287"/>How to do it…</h2>
			<p>Continuing with the same Jira project tied to the Bitbucket repository provided in the <em class="italic">Creating a code change in Bitbucket</em> recipe, we can easily create our bugfix Bitbucket branch by performing the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>In our Jira bug, go to the <strong class="bold">Development</strong> section and select <span class="No-Break"><strong class="bold">Create branch</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer584">
					<img alt="Figure 13.40 – Create branch" src="image/B21937_13_40.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.40 – Create branch</p>
			<ol>
				<li value="2">A page in Bitbucket<a id="_idIndexMarker1015"/> will appear as a new browser tab or window. It will have the following information <span class="No-Break">filled in:</span><ul><li>The branch name prefilled with the ID of the <span class="No-Break">Jira issue</span></li><li>The <span class="No-Break">parent branch</span></li><li>The type <span class="No-Break">of branch</span></li><li>The <span class="No-Break">repository name</span></li></ul><p class="list-inset">Ensure this information is correct and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break">.</span></p></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer585">
					<img alt="Figure 13.41 – Create branch" src="image/B21937_13_41.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.41 – Create branch</p>
			<ol>
				<li value="3">The branch should appear<a id="_idIndexMarker1016"/> in the <strong class="bold">Branches</strong> view of your repository, with available actions to check out onto a local environment and an area to <span class="No-Break"><strong class="bold">View source</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer586">
					<img alt="Figure 13.42 – Viewing the branch" src="image/B21937_13_42.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.42 – Viewing the branch</p>
			<p>With a branch created, we can begin<a id="_idIndexMarker1017"/> development. Let’s take a closer look at <span class="No-Break">this process.</span></p>
			<h1 id="_idParaDest-286"><a id="_idTextAnchor288"/>Committing a bugfix and watching the pipeline’s execution</h1>
			<p>We have been diligently troubleshooting<a id="_idIndexMarker1018"/> for the root cause of our bug<a id="_idIndexMarker1019"/> and we have developed a fix. What happens when we commit that fix to the repository? We want testing and scanning to occur to ensure <span class="No-Break">high-quality code.</span></p>
			<p>This requires that Bitbucket Pipelines is ready to execute when the commit occurs. Let’s learn how to make <span class="No-Break">that possible.</span></p>
			<h2 id="_idParaDest-287"><a id="_idTextAnchor289"/>Getting ready</h2>
			<p>The prerequisites for this recipe are identical to those for the <em class="italic">Committing changes in Bitbucket/Start Bitbucket Pipeline Build</em> recipe – that is, we need to make sure there is a <strong class="source-inline">bitbucket-pipelines.yml</strong> file in our repository and that it is at the root level of our repository’s <span class="No-Break">directory structure.</span></p>
			<h2 id="_idParaDest-288"><a id="_idTextAnchor290"/>How to do it…</h2>
			<p>Just as with the <em class="italic">Committing changes in Bitbucket/Start Bitbucket Pipeline Build</em> recipe, we are going to observe the pipeline execute by performing the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>In our bugfix branch, we must make a change in our file. We can commit our change by clicking <strong class="bold">Commit</strong> in <span class="No-Break">our editor.</span></li>
				<li>In the modal, enter a value in the <strong class="bold">Commit message</strong> field. To have the commit recorded in our Jira issue, the message needs to start with the ID of our Jira issue. Make the necessary changes and <span class="No-Break">click </span><span class="No-Break"><strong class="bold">Commit</strong></span><span class="No-Break">.</span></li>
				<li>Go to the <strong class="bold">Pipelines</strong> view. The pipeline should be executing based on the most <span class="No-Break">recent commit.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer587">
					<img alt="Figure 13.43 – The Pipelines view" src="image/B21937_13_43.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.43 – The Pipelines view</p>
			<ol>
				<li value="4">Click on the line corresponding<a id="_idIndexMarker1020"/> to the pipeline’s execution<a id="_idIndexMarker1021"/> to see the pipeline <span class="No-Break">execution details.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer588">
					<img alt="Figure 13.44 – Pipeline execution details" src="image/B21937_13_44.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 13.44 – Pipeline execution details</p>
			<p>With that, we’ve learned how to execute<a id="_idIndexMarker1022"/> a pipeline based<a id="_idIndexMarker1023"/> on a commit from a <span class="No-Break">bugfix branch.</span></p>
		</div>
	</body></html>