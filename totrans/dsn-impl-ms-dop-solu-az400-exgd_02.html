<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer015">
<h1 class="chapter-number" id="_idParaDest-35"><a id="_idTextAnchor034"/>2</h1>
<h1 id="_idParaDest-36"><a id="_idTextAnchor035"/>Site Reliability Engineering Fundamentals</h1>
<p>In the previous chapter, you learned about the DevOps culture, goals, and benefits. DevOps practices and habits enable collaboration between teams and shorten the loop within the delivery cycle from idea inception and design to deployment for the end user.</p>
<p><strong class="bold">Site reliability engineering</strong> (<strong class="bold">SRE</strong>) and DevOps methods are complementary rather than <a id="_idIndexMarker098"/>competitive. SRE is not the next logical step after DevOps. Technically, teams that use SRE practices achieve better customer outcomes when measured with DevOps metrics.</p>
<p>Conventionally, organizations have maintained teams as different siloed units, such as <strong class="bold">development</strong> (<strong class="bold">Dev</strong>), <strong class="bold">quality assurance</strong> (<strong class="bold">QA</strong>), and <strong class="bold">operations</strong> (<strong class="bold">Ops</strong>) teams. The development team is primarily responsible for completing feature development, while the QA team is primarily responsible for performing and completing quality checks of developed functionalities. The operations team, on the other hand, is primarily responsible for the deployment and maintenance of applications in the production environment. Additionally, they also monitor and take necessary action to ensure the reliability and scalability of the deployed applications </p>
<p>Both SRE and DevOps have teams of engineers with development and operations expertise. As a result, the organization can prevent teams from working in silos.</p>
<p>The reputation and success of a business or product are dependent on the stability of cloud solutions in a production environment. To boost application stability and scalability, SRE will use automation to reduce repetitive and manual operational tasks. Adopting SRE practices into your software development life cycle is crucial for survival in this current era of building IT solutions.</p>
<p>In this chapter, we’re going to cover the following main topics: </p>
<ul>
<li>Introduction to SRE</li>
<li>Key principles and practices</li>
</ul>
<h1 id="_idParaDest-37"><a id="_idTextAnchor036"/>Technical requirements</h1>
<p>There are no technical requirements for this chapter.</p>
<h1 id="_idParaDest-38"><a id="_idTextAnchor037"/>Introduction to SRE</h1>
<p>The term <em class="italic">SRE</em> was first<a id="_idIndexMarker099"/> coined by Ben Treynor Sloss at Google (<a href="https://sre.google/sre-book/introduction/">https://sre.google/sre-book/introduction/</a>). SRE has enabled Google to manage large-sized complex systems and massive infrastructure in the most efficient, reliable, scalable, and sustainable way.</p>
<p class="callout-heading">Tip</p>
<p class="callout">SRE is primarily focused on the reliability of service.</p>
<h2 id="_idParaDest-39"><a id="_idTextAnchor038"/>Why is reliability so important? </h2>
<p>Reliability is <a id="_idIndexMarker100"/>defined as the likelihood of services performing predictably under specified operational conditions. The most dependable systems will be more accessible, which will result in a better client experience. The reliability of your services is an important quality indicator.</p>
<p>Reliability and availability are interlinked; however, the difference is in the way they are measured. Although availability and reliability go hand in hand, the measures taken might produce different results. A system’s availability may be modeled mathematically as a measure of its reliability. In other words, reliability can be considered as a subset of availability.</p>
<h2 id="_idParaDest-40"><a id="_idTextAnchor039"/>What is availability?</h2>
<p>The availability <a id="_idIndexMarker101"/>of the systems can be measured as the percentage of time in which the system is available or fully operational. A software system is composed of several components, all of which must be evaluated to ensure availability. Let’s assume we have a system that includes components such as database servers, storage servers, and application servers. Your system’s availability will be defined by the combined availability of these components.</p>
<p>Refer to <a href="https://uptime.is/">https://uptime.is/</a> to learn more about the downtime allowed on your services based on availability<a id="_idIndexMarker102"/> guarantees, often known as <strong class="bold">service-level agreements </strong>(<strong class="bold">SLAs</strong>). The <a id="_idIndexMarker103"/>following table illustrates some availability percentages and downtime limits in seconds, minutes, and hours. The phrase <em class="italic">availability</em> or <em class="italic">uptime</em> is commonly given in nines (read as a count of nines) as shown in the table here (accordingly the allowed downtime is calculated):</p>
<table class="No-Table-Style" id="table001-2">
<colgroup>
<col/>
<col/>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold">Availability </strong></p>
</td>
<td class="No-Table-Style" colspan="5">
<p><strong class="bold">Allowed Downtime</strong></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold">Percentage </strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Daily </strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Weekly</strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Monthly</strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Quarterly</strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Yearly</strong></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>99.999%</p>
<p>(Five nines)</p>
</td>
<td class="No-Table-Style">
<p>0 Seconds</p>
</td>
<td class="No-Table-Style">
<p>6 Seconds</p>
</td>
<td class="No-Table-Style">
<p>26 Seconds</p>
</td>
<td class="No-Table-Style">
<p>1 Minute</p>
<p>18 Seconds</p>
</td>
<td class="No-Table-Style">
<p>5 Minutes</p>
<p>15 Seconds</p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>99.99%</p>
<p>(Four nines)</p>
</td>
<td class="No-Table-Style">
<p>8 Seconds</p>
</td>
<td class="No-Table-Style">
<p>1 Minute </p>
<p>0 Seconds</p>
</td>
<td class="No-Table-Style">
<p>4 Minutes 32 seconds</p>
</td>
<td class="No-Table-Style">
<p>13 Minutes </p>
<p>8 Seconds</p>
</td>
<td class="No-Table-Style">
<p>52 Minutes </p>
<p>35 Seconds</p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p>99.95%</p>
<p>(Three nines)</p>
</td>
<td class="No-Table-Style">
<p>43 Seconds</p>
</td>
<td class="No-Table-Style">
<p>5 Minutes </p>
<p>2 Seconds</p>
</td>
<td class="No-Table-Style">
<p>21 Minutes </p>
<p>54 Seconds</p>
</td>
<td class="No-Table-Style">
<p>1 Hour</p>
<p>5 Minutes </p>
<p>44 Seconds</p>
</td>
<td class="No-Table-Style">
<p>4 Hours</p>
<p>22 Minutes </p>
<p>58 Seconds</p>
</td>
</tr>
</tbody>
</table>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 2.1 – Availability percentage and downtime allowance</p>
<p>The formula to calculate the time-based availability percentage is as follows:</p>
<p><em class="italic">Availability % = ((Service Uptime - Service Downtime) ÷ (Service Uptime)) * 100</em></p>
<p>For example, to calculate the availability of production service in a single day, assuming the agreed service is expected to run <em class="italic">24*365, use the following</em>:</p>
<ul>
<li>The total number of seconds within a day that the agreed service is expected to be up and running = 86,400 seconds.</li>
<li>The sum of downtime(s) on a specific day = 60 seconds for deployment + 60 seconds for rollback due to deployment error.</li>
<li>Using the preceding formula for availability = ((86,400 -120) ÷ (86,400)) *100.</li>
<li>The availability for your service on that day is 99.86%.</li>
</ul>
<p>SRE advocates for monitoring and assessing the availability of important services that are essential to the business’s success.</p>
<p>The goal of your IT department should not be to boost service availability across the board. Greater availability increases the cost of doing business because it necessitates more work and resources. However, because a lack of better availability can result in significant monetary losses (often, exceeding the cost of operations), the SRE team will take a pragmatic approach to define availability levels based on business demands.</p>
<p><strong class="bold">Domain Name Services</strong> (<strong class="bold">DNS</strong>), for <a id="_idIndexMarker104"/><a id="_idIndexMarker105"/>example, is the internet’s directory. Domain names are matched with IP addresses using this service. DNS should be available 24 hours a day, 7 days a week. As a result, DNS availability is maintained at 100%.</p>
<p>In general, aiming for 100% dependability for any service or system is not a clever idea. It would be difficult for a user to identify the difference between a service that is 100% available and one that is 99.999% available.</p>
<p>According to <em class="italic">Table 2.1</em>, 99.999% availability allows for 26 seconds of downtime per month and 6 seconds per week, which is little in most circumstances.</p>
<p>However, some mission-critical systems, such as medical devices and aircraft, must be completely dependable and cannot afford any downtime.</p>
<h2 id="_idParaDest-41"><a id="_idTextAnchor040"/>Reliability challenges and SRE </h2>
<p>Cloud architecture must be reliable, scalable, and performant. Cloud services will use auto-scaling to dynamically scale services to meet changing demand, and observability will be used for applications that provide support for monitoring system performance, availability, success, error and dependence error rate, request failure rate, latency, freshness, and throughput.</p>
<p>Service availability and reliability metrics will be used by organizations to determine the service levels required to keep business activities running smoothly. Your SRE strategy’s key decision factors are reliability and availability, which have different meanings and are measured differently:</p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<img alt="Figure 2.1 – Reliability and availability  " height="540" src="image/B18655_02_01.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1 – Reliability and availability </p>
<p>As evident from the<a id="_idIndexMarker106"/> preceding figure, reliability can be considered as a subset of availability. Organizations have realized that maintaining system reliability is challenging while also maintaining development velocity, desired scalability, and operational stability. </p>
<p>The conventional team model includes a Dev, QA, and Ops team, with development, QA, and operations tasks separated. This type of separation has resulted in organizational silos or a <em class="italic">throw-it-over-the-wall</em> mentality, which influences the organizational team’s ability to achieve long-term goals and foster a learning and blameless culture:</p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<img alt="Figure 2.2 – Reliability challenges  " height="428" src="image/B18655_02_02.jpg" width="1044"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2 – Reliability challenges </p>
<p>The Dev team <em class="italic">throws</em> their <a id="_idIndexMarker107"/>code over the wall and expects the Ops team to run and manage it in production. The Dev team wants to release features at a fast pace to production and not be responsible for the stability of the applications. The Ops team, on the other hand, wants to minimize changes to the production service to avoid any disruptions to business to maintain the stability of services. </p>
<p>SRE helps the team in striking a balance between delivering new features and ensuring that the system operates appropriately and effectively. This collaborative method bridges the gap between development responsibilities and day-to-day system operation and customer service and support tasks. This daily customer support and operational activity create a feedback loop, which is essential for increasing system quality. </p>
<p>Although customers are increasingly anticipating shorter delivery times, just focusing on delivery speed or greater product velocity is insufficient. One of the most critical attributes for competing effectively in today’s modern development is dependability. As a result, increasing product velocity while being dependable is a fundamental premise for any IT organization. The SRE team is responsible for the availability, latency, performance optimization, change management, monitoring, alerting, emergency response, and capacity planning of their service(s).</p>
<p>The fundamental goal of SRE is to improve system reliability and stability. The team understands that reliability metrics are driven by business needs, and not every business function might<a id="_idIndexMarker108"/> require the highest level of reliability, as there are cost tradeoffs associated with it. </p>
<h3>Appropriate reliability</h3>
<p>The level of <a id="_idIndexMarker109"/>reliability for a service must be appropriate to match its business needs. Online e-commerce businesses will have different requirements compared to traditional retail shops. For example, they will require a greater level of availability than traditional retail shops, which operate only throughout the day for a set number of hours.</p>
<p>Reliability is defined and measured<a id="_idIndexMarker110"/> using <strong class="bold">service-level objectives</strong> (<strong class="bold">SLOs</strong>). SRE practices can be tailored to achieve the appropriate level of reliability, and SLOs are usually defined as a percentage achievement over a period. SLOs are driven by key business objectives, whereas <strong class="bold">service-level indicators</strong> (<strong class="bold">SLIs</strong>) are<a id="_idIndexMarker111"/> driven by what’s possible to measure while implementing the service.</p>
<h3>Consistent reliability </h3>
<p>Products<a id="_idIndexMarker112"/> are built on the foundation of reliable systems, services, and people. SRE considers it essential to build a culture and practices that will lead to consistent and predictable reliability. The connections and trust we build with our colleagues, sustainable operating procedures, and the learning culture that we nurture to provide a psychologically safe workplace for our team to<a id="_idIndexMarker113"/> achieve environmental sustainability are all part of reliability.</p>
<p>In the next section, the SRE team’s key principles and practices are covered.</p>
<h1 id="_idParaDest-42"><a id="_idTextAnchor041"/>Key principles and practices</h1>
<p>The SRE team’s day-to-day <a id="_idIndexMarker114"/>activities include developing and maintaining large, distributed services. Operating a service successfully in good health requires a wide range of activities, such as building monitoring systems, planning capacity, responding to incidents, resolving the root causes of outages, and so on.</p>
<p>This section covers the key principles and practices that influence the SRE team’s day-to-day activities. The following diagram depicts the elements necessary to make a service reliable, from the most basic to the most advanced:</p>
<div>
<div class="IMG---Figure" id="_idContainer013">
<img alt="Figure 2.3 – Service reliability hierarchy according to Google’s SRE book " height="837" src="image/B18655_02_03.jpg" width="1077"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3 – Service reliability hierarchy according to Google’s SRE book</p>
<p>From the most basic requirement to the capstone step of launching a product or service, Google has described the reliability hierarchy as necessary to boost the reliability of the system and maintain service health. Each level of this pyramid will be discussed briefly:</p>
<ul>
<li><strong class="bold">Monitoring</strong>: Monitoring is<a id="_idIndexMarker115"/> the most essential strategy to maintain track of a<a id="_idIndexMarker116"/> system’s availability, and is positioned at the bottom foundation layer of the service reliability hierarchy. Effective monitoring is simple and resilient, and it should provide alerts for critical failures in your service. Such alerts should be simple and clear to understand.</li>
</ul>
<p>There is no way to tell whether a service is operational, offline, or experiencing sporadic outages without monitoring. To establish a reliable system, you must be aware of problems and errors in your service before users notice them. After such problems are noticed, the SRE team should prioritize and manage incident response. To mitigate the impact or restore service to its previous state, the team should coordinate efforts in the most efficient way possible and maintain active communication.</p>
<p>Microsoft <a id="_idIndexMarker117"/>Azure is a very robust cloud platform with a plethora of capabilities for dealing with every aspect of a solution. The services include tools for managing and deploying applications. When developing your solution on the Azure cloud, you must select the appropriate services to meet your SRE needs.</p>
<p>To monitor your application, you can use the following services:</p>
<ul>
<li><strong class="bold">Azure Monitor</strong> provides a<a id="_idIndexMarker118"/> comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments, and supports operations at scale with <em class="italic">smart alerts</em> and <em class="italic">automated actions</em>.</li>
<li><strong class="bold">Azure Application Insights</strong> is a feature of <a id="_idIndexMarker119"/>Azure Monitor that provides a powerful <strong class="bold">application performance management</strong> (<strong class="bold">APM</strong>) tool <a id="_idIndexMarker120"/>that easily integrates with your applications to send telemetry and analyze application-specific metrics. It also provides ready-to-use dashboards and a metrics explorer that you can use to analyze the data to explore business needs.</li>
</ul>
<ul>
<li><strong class="bold">Incident response</strong>: Once you have built effective monitoring around your service, you will<a id="_idIndexMarker121"/> need to configure notifications, such as SMS and <a id="_idIndexMarker122"/><strong class="bold">event management systems (EMS)</strong> for unplanned, critical, and urgent incidents. Incidents and outages are unavoidable in a complex distributed system. Appropriate human intervention is required to identify the root cause and fix these outages.</li>
</ul>
<p>To minimize the business impact and run services smoothly, you would need to build up a process to mitigate and respond to these incidents in a structured way. Once the incident has been mitigated, the SRE team should follow the incident management response process to restore services as quickly as possible.</p>
<p>Incident response frameworks have three common objectives, widely known as the <strong class="bold">three Cs</strong> (<strong class="bold">3Cs</strong>) of <a id="_idIndexMarker123"/>incident management:</p>
<ul>
<li><strong class="bold">C</strong>oordinate response effort.</li>
<li><strong class="bold">C</strong>ommunicate between incident responders, within the organization, and to the outside world.</li>
<li>Maintain <strong class="bold">c</strong>ontrol over the incident response.</li>
</ul>
<p>Although <a id="_idIndexMarker124"/>each organization’s incident response process may change depending on organizational structure, skills, and previous experience, consider the following set of recommendations and best practices for responding to incidents:</p>
<ul>
<li><strong class="bold">Prioritize</strong>: Fix frequently<a id="_idIndexMarker125"/> occurring problems, get the service back up and running, and keep the evidence for root-cause analysis.</li>
<li><strong class="bold">Prepare</strong>: In advance, develop <a id="_idIndexMarker126"/>and document your incident management procedures in consultation with incident participants.</li>
<li><strong class="bold">Trust</strong>: Provide all incident participants complete autonomy within their allocated roles <a id="_idIndexMarker127"/>and responsibilities.</li>
</ul>
<p>During an incident, you must strike these critical balances:</p>
<ul>
<li><strong class="bold">Speed</strong>:<ul><li>Balance the need to move swiftly to satisfy stakeholders with the risk of making hasty decisions.</li></ul></li>
<li><strong class="bold">Sharing information</strong>:<ul><li>Inform investigators, stakeholders, and customers so that liability is minimized, and unrealistic expectations are avoided.</li></ul></li>
</ul>
<ul>
<li><strong class="bold">Post-mortem and root-cause analysis/blameless post-mortem</strong>: Once an incident<a id="_idIndexMarker128"/> has been mitigated and <a id="_idIndexMarker129"/>handled, the SRE team implements post-mortem procedures. This post-mortem procedure offers an opportunity to cultivate a blameless post-mortem culture. A blameless post-mortem (or retrospective) is a post-incident document that helps teams figure out why an incident <a id="_idIndexMarker130"/>happened, what went well, what went wrong, and brainstorm how to prevent such issues from recurring.</li>
</ul>
<p>Blameless post-mortems are a tenet of SRE culture. To build a sustainable culture, we would need to assume that everyone involved in an incident had good intentions and did the right thing with the information they had to minimize the business impact. Pointing the blame at people or at a team will discourage the team and will engender a fear of punishment, which will make it more difficult to bring concerns to light.</p>
<p>A blameless post-mortem is an opportunity for the team to learn from their failures or mistakes.</p>
<ul>
<li><strong class="bold">Testing and release procedures/testing for reliability</strong>: The SRE team is responsible for building confidence in the reliability of the production systems they build<a id="_idIndexMarker131"/> and maintain. The SRE team will adopt a fully automated testing strategy along with classical software testing techniques to deploy in production and release it to users without any issues or downtime. The automated test suite(s) designed to support software reliability instills confidence that software will be deployed to production without major issues. As part of their QA activities, the SRE team must prioritize and make continuous investments in automated testing practices. Customers will be happier and platform adoption will increase, leading to a <a id="_idIndexMarker132"/>higher <strong class="bold">return on investment</strong> (<strong class="bold">ROI</strong>).</li>
<li><strong class="bold">Capacity planning</strong>: As a member of the SRE team, you’re in charge of determining <a id="_idIndexMarker133"/>the resource needs for your service, including the necessary hardware, software, and network resources, as well as ensuring that your service performs relatively well, even in the face of unanticipated <a id="_idIndexMarker134"/>demand. Capacity management is the process of ensuring that your service has enough resources to be scalable, fault-tolerant, efficient, and reliable. For example, SRE would estimate how much storage, service instances, or memory you will need over a specific interval of time. This data will help you create a scalable architecture for your service. You may be more flexible on required capacity in cloud-based <a id="_idIndexMarker135"/>models because you can dynamically increase or decrease required resources.</li>
</ul>
<p>Azure App Service, Azure SQL Database, Azure Kubernetes, and Azure Cache for Redis are examples of Azure cloud services that have built-in auto-scale features. </p>
<p>For<a id="_idIndexMarker136"/> example, in <strong class="bold">Azure App Service</strong>, scale settings are applied in seconds and affect all apps in your App Service plan. You do not need to modify or redeploy your application. You can <strong class="bold">scale up</strong> and get more CPU, memory, disk space, and extra features, such as dedicated <strong class="bold">virtual machines</strong> (<strong class="bold">VMs</strong>), custom<a id="_idIndexMarker137"/> domains and certificates, staging slots, autoscaling, and more. You can also leverage autoscaling, which automatically scales the number of instances depending on established criteria and schedules. Scaling rules are a more controlled approach to scale in or scale out.</p>
<p>For example, every day at 21:00, you can scale down to two instances of Azure App Service, with a rule to scale up by one instance when CPU demand averages higher than 50%. A<a id="_idIndexMarker138"/> scale-out or scale-in action normally takes a few minutes to complete. Consider this when designing your scaling plan to match performance requirements and satisfy SLAs.</p>
<ul>
<li><strong class="bold">Development</strong>: Although <a id="_idIndexMarker139"/>everyone expects services to run smoothly, there may be disruptions caused by events beyond anyone’s control, such as natural disasters or hard drive failure, or even system process crashes that will impact your services adversely. Natural catastrophes can seriously damage many data centers in a region. To keep systems <em class="italic">functional</em>, the SRE team must design strategies <a id="_idIndexMarker140"/>to <a id="_idIndexMarker141"/>mitigate <a id="_idIndexMarker142"/>these<a id="_idIndexMarker143"/> failures. Such solutions would make use of deployment <a id="_idIndexMarker144"/>patterns/strategies such as <strong class="bold">geo-replication and failover</strong>, <strong class="bold">geo-redundancy</strong>, and <strong class="bold">Active-Active</strong>, <strong class="bold">Active-Passive</strong> <strong class="bold">High Availability</strong>:</li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer014">
<img alt="Figure 2.4 – Multi-region architecture  " height="576" src="image/B18655_02_04.jpg" width="1204"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4 – Multi-region architecture </p>
<p>For example, as depicted in the preceding diagram, a multi-region architecture provides higher availability of service than when deploying to a single region. The architecture<a id="_idIndexMarker145"/> under consideration here includes the following components, to mention just a few:</p>
<ul>
<li><strong class="bold">Active and standby region</strong>: Two <a id="_idIndexMarker146"/>regions to achieve higher availability. One is the primary region. The other region is for failover.</li>
<li><strong class="bold">Azure Front Door</strong>: A<a id="_idIndexMarker147"/> modern<a id="_idIndexMarker148"/> cloud <strong class="bold">content delivery network</strong> (<strong class="bold">CDN</strong>) service that delivers high performance, scalability, and secure user experiences for your content and applications. This service offers various layer 7 load-balancing capabilities and near-real-time failover for your applications.</li>
<li><strong class="bold">Azure DNS</strong>: A hosting<a id="_idIndexMarker149"/> service for DNS domains. It provides name resolution.</li>
<li><strong class="bold">Azure App Service</strong>: Azure’s<a id="_idIndexMarker150"/> premier service for web applications <a id="_idIndexMarker151"/>and web-based APIs, which provides integrated security with <strong class="bold">Azure AD</strong> and <strong class="bold">Azure Key Vault</strong>. Supports<a id="_idIndexMarker152"/> auto-scaling. </li>
<li><strong class="bold">Azure Functions</strong>: A serverless <a id="_idIndexMarker153"/>compute option, it uses an event-driven model. In this architecture, the functions are invoked when a new message is pushed into the queue.</li>
<li><strong class="bold">Azure Cache for Redis</strong>: Applies <a id="_idIndexMarker154"/>a caching layer as a service to the solution, providing <a id="_idIndexMarker155"/>an in-memory managed cache to reduce latency and increase performance for the clients.</li>
<li><strong class="bold">Azure Storage, Azure Cosmos DB, and Azure SQL</strong>: Can<a id="_idIndexMarker156"/> store <a id="_idIndexMarker157"/>both <a id="_idIndexMarker158"/>structured and non-structured content.</li>
<li>In the unlikely event of a disaster, a regional outage affects the active region, and Azure Front Door will fail over to the standby region. This architecture uses two regions, active and standby, to achieve higher availability. During normal operations, network traffic is routed to the primary region. If the active region becomes unavailable, traffic is routed to the standby region. </li>
<li>Active/passive with hot standby means resources in the secondary/standby region will be always running. These secondary region resources can be used for <strong class="bold">A/B testing</strong> for <a id="_idIndexMarker159"/>better value for money.</li>
</ul>
<ul>
<li><strong class="bold">Product</strong>: Companies <a id="_idIndexMarker160"/>launch new products at a slow pace. In the cloud and distributed modern world, the launch and release cycles need to be at a faster pace. </li>
</ul>
<p>Teams can create a checklist to document action items and roll back plans. A checklist plays an instrumental role in launching new services with reproducible reliability. A checklist needs to be tailored to the company’s internal services, processes, and infrastructure. </p>
<p>The checklist needs to be created carefully or it will grow to an unmanageable size. This checklist can and should be documented and automated to minimize efforts. The checklist can <a id="_idIndexMarker161"/>cover the following themes:</p>
<ul>
<li>Architecture and dependencies</li>
<li>Integration</li>
<li>Capacity planning</li>
<li>Failure modes</li>
<li>Processes and automation</li>
<li>Development process</li>
<li>Rollout planning</li>
<li>Gradual and staged rollouts</li>
</ul>
<p>In the next section, we will cover patterns and principles that influence SRE operations.</p>
<h2 id="_idParaDest-43"><a id="_idTextAnchor042"/>Implementing SLOs and SLIs</h2>
<p>SLOs define a goal level <a id="_idIndexMarker162"/>for your <a id="_idIndexMarker163"/>service’s reliability. SLOs are at the heart of SRE practices because they are critical to making data-driven decisions regarding reliability. SLOs are a tool to help determine what engineering work to prioritize.</p>
<p>SLIs are a quantitative indicator of the level of service that you are providing. SLOs and SLIs always go hand in hand and are usually defined iteratively. SLOs are driven by key business objectives, whereas SLIs are driven by what is possible to be measured while implementing the service.</p>
<p>Your first attempt at an SLI and SLO doesn’t have to be correct. The most important goal is to get something in place and measured, and to set up a feedback loop so you can improve. You can identify which metrics best match what your users care about in your service.</p>
<p>The SRE team recommends using a limited number of metrics based on critical services for greater user experience rather than developing an endless number of monitoring metrics. You could start with a broad target and then tweak it over time. This allows you to concentrate alerts on instances where you can reliably state that the services will be nonfunctional and will start to impact user experience.</p>
<p>Let’s say that you are building a food delivery app from which users can do the following:</p>
<ul>
<li>Browse restaurants and menus.</li>
<li>Select menu items and place an order. </li>
<li>Pay for the order.</li>
</ul>
<p>For this app, it is extremely important for a better user experience and overall business success that users can place an order for delivery and successfully make payments. Here, in the first attempt, the <em class="italic">Place order and pay</em> scenario will be the basis for defining SLOs, as this service would take precedence for business success over any other services.</p>
<p>The next step is to figure out which metrics to use as SLIs that will most accurately track the user experience. You can choose from a wide range of indicators, such as availability latency, throughput, correctness, and data freshness, as detailed next.</p>
<p>Most services focus on the following four key SLI metrics to monitor. These are the four golden signals of monitoring:</p>
<ul>
<li><strong class="bold">Request latency</strong>: The time <a id="_idIndexMarker164"/>taken for your service to return a response to the request</li>
<li><strong class="bold">Availability of service</strong>: The fraction of time during which service is available to use</li>
<li><strong class="bold">Success rate</strong>: The number of requests successfully completed</li>
<li><strong class="bold">Throughput</strong>: The number of requests processed per second</li>
</ul>
<p>The <em class="italic">measurement period</em> for defining an SLO is very important and can be defined over various time intervals. The SLO and SLIs need to be something that can be accurately measured and represented in your monitoring <a id="_idIndexMarker165"/>system. Over time, you will compare the<a id="_idIndexMarker166"/> SLO targets and SLIs with measured metrics. Now, for the <em class="italic">Place order and pay </em>service, which is a basis for the SLO, you will want to have an order confirmation received within an acceptable window. </p>
<p>In our example of the food delivery app, you can set a value of 700 ms for a response to be returned for a successful request for the <em class="italic">Place order and pay</em> service for a given specified time window of 1 month. These SLI goals and timeframes should be acceptable to businesses. So, if there are 10,000 HTTP requests in a calendar month and only 9,990 of them are successful, it corresponds to 9,990/10,000 or 99.9% availability for that month. </p>
<p>If your service is not meeting SLOs, then the SRE team will try to strike a balance between new feature development/deployment and increasing reliability of service to avoid SLO violations for a given measurement period.</p>
<p>An SLA is a legal agreement between the business and the customer that includes a reliability target and repercussions of not meeting it, whereas an SLO is an internal target that measures how customers use the service. SLOs are not shared with external stakeholders and have no legal bindings or consequences. If a service availability breaches the SLO, the SRE team must respond immediately to avoid the organization being penalized for failing to meet SLAs. SLOs should always be more stringent than corresponding SLAs. The SRE team does not typically get involved in constructing SLAs, because SLAs are closely tied to business and product decisions. However, the SRE team can help to define SLIs.</p>
<p>To find the right balance between reliability and innovation, it is better to create a rate against which SLO violations can be measured, and <a id="_idIndexMarker167"/>an <em class="italic">error budget</em> at which<a id="_idIndexMarker168"/> SLOs can be missed. In the next section, we will learn more about error budgets.</p>
<h2 id="_idParaDest-44"><a id="_idTextAnchor043"/>Establishing an error budget policy</h2>
<p>An <strong class="bold">error budget</strong> is the maximum <a id="_idIndexMarker169"/>number of errors or the maximum amount <a id="_idIndexMarker170"/>of time your service is nonfunctional over a given period before it has a negative impact on the business and users become dissatisfied. The error budget is applied to several aspects of your service, such as availability, latency, and so on. The SRE team utilizes error budgets to strike a balance between service reliability and innovation speed.</p>
<p>An error budget will help you to know whether you are meeting expectations or not, and will help you to take appropriate actions to reduce the reliability failure of your service. If the service receives 1,000,000 requests in 4 weeks, a 99.9% SLO for successful requests allows us to budget for 1,000 errors throughout that period.</p>
<p>A service with 99.95% SLO has an error budget of 0.5% that translates to a overall downtime of 4 hours, 22 minutes, and 48 seconds within a year. The SRE team should take an appropriate course of action to restore stability to your service that is not meeting SLOs or has exhausted the error budget or comes close to exhausting it.</p>
<p>When your service is within budget, SRE practice encourages you to burn the error budget strategically, whether for a new feature or architectural modifications. Even though any new release inadvertently makes the service less reliable, for example, if the service goes down due to something such as a deployment configuration issue, the service is still within budget. Error budgets are often created for certain time periods, such as a month, quarter, or year.</p>
<p>Error budgets are frequently used strategically to apply automation for <strong class="bold">toil</strong> tasks such as manual deployment <a id="_idIndexMarker171"/>or environment setup, configuration changes, incident <a id="_idIndexMarker172"/>response, and many more. In the next section, we will learn more about reducing toil.</p>
<h2 id="_idParaDest-45"><a id="_idTextAnchor044"/>Reducing toil</h2>
<p>Toil in an SRE context refers to operations <a id="_idIndexMarker173"/>that lack long-term monetary value and do not significantly advance the service. They are frequently repetitive and mostly manual (even though they could be automated). As the service or system grows, the number of manual requests for that system will likely grow proportionally, requiring even more human labor.</p>
<p>SRE engineers can only spend up to 50% of their time on <em class="italic">Ops</em> work such as tickets, on-call, and manual tasks, among other things. </p>
<p>SRE engineers <a id="_idIndexMarker174"/>should spend the other half of their time on activities such as the following (this is not a comprehensive list):</p>
<ul>
<li>Using automation to enable scalability </li>
<li>Release deployment </li>
<li>Test suite automation </li>
<li>Applying database changes </li>
<li>Automating response to incidents such as password reset and user creation </li>
<li>Reviewing noncritical monitoring alerts </li>
<li>Engineering work to develop new features to reduce toil and increase system reliability</li>
</ul>
<p>To efficiently reduce the toil workload, the SRE team can start small and work their way up. Toil elimination requires automation, and the SRE team must work tirelessly to reduce or minimize toil. Automation engineering efforts, whether partial or complete, is necessary, but it should not endanger<a id="_idIndexMarker175"/> system reliability. <strong class="bold">Azure Automation</strong> can be used to automate human responses, as well as diagnosing and resolving issues. Team motivation will rise because of automation, and the team will be<a id="_idIndexMarker176"/> able to focus on engineering work.</p>
<h1 id="_idParaDest-46"><a id="_idTextAnchor045"/>Summary</h1>
<p>In this chapter, we have learned about SRE principles and practices. We are now aware of how to calculate time-based availability and how to define availability based on business expectations and needs.</p>
<p>We also explored the typical reliability challenges associated with the traditional team model and how constituting an SRE team will help you find the right balance between system reliability and development. We underlined the role of proper and consistent reliability.</p>
<p>Then, we learned about all the necessary aspects, from conception to successfully launching the service on production. We also highlighted key techniques such as applying SLOs and SLIs, reducing toil, the post-mortem culture, and efficiently utilizing an error budget to improve system and cloud service dependability.</p>
<p>In the upcoming chapter, we’ll look at DevOps tools and capabilities to see how they can help you manage your software development life cycle.</p>
<h1 id="_idParaDest-47"><a id="_idTextAnchor046"/>Self-practice exercises</h1>
<ol>
<li>Identify SLOs jointly with business stakeholders and development teams.</li>
<li>Perform blameless post-mortems for recent or hypothetical production incidents for your services in the production environment:<ul><li>Refer to <a href="https://sre.google/sre-book/example-postmortem/">https://sre.google/sre-book/example-postmortem/</a> for more guidance and an example post-mortem.</li><li><a href="https://docs.microsoft.com/en-us/azure/architecture/resiliency/failure-mode-analysis">https://docs.microsoft.com/en-us/azure/architecture/resiliency/failure-mode-analysis</a>.</li><li><a href="https://docs.microsoft.com/en-us/azure/architecture/framework/resiliency/overview">https://docs.microsoft.com/en-us/azure/architecture/framework/resiliency/overview</a>.</li></ul></li>
<li>Identify tedious, repetitive tasks/toil associated with running your services in the production environment.</li>
<li>In the Azure portal, first, configure App Service logging with Application Insights to monitor your application, then configure email alerts.</li>
</ol>
<h1 id="_idParaDest-48"><a id="_idTextAnchor047"/>Questions</h1>
<p>As we conclude the SRE strategy, here is a list of questions for you to test your knowledge regarding this chapter’s material. You will find answers in the <em class="italic">Assessments</em> section at the end of the book:</p>
<ol>
<li value="1">True or false? SRE is primarily focused on the reliability of service.</li>
<li>True or false? Availability is expressed in fives.</li>
<li>True or false? SRE adopts automation to enable application management.</li>
<li>What is the weekly, monthly, and yearly downtime allowance for a service with 95% availability?</li>
<li>What are the top three reliability challenges? <ol><li>Development velocity </li><li>Quality</li><li>Stability</li><li>DevOps management</li><li>Bug tracking</li></ol></li>
<li>True or false? The appropriate level of reliability for services is identified by the key stakeholders.</li>
<li>What is toil in the SRE context? </li>
</ol>
<h1 id="_idParaDest-49"><a id="_idTextAnchor048"/>Further reading</h1>
<ul>
<li>Google’s SRE book: <a href="https://sre.google/sre-book/part-I-introduction/%20">https://sre.google/sre-book/part-I-introduction/</a></li>
<li>Microsoft’s SRE documentation: https://docs.microsoft.com/en-us/learn/modules/intro-to-site-reliability-engineering/</li>
<li><em class="italic">Azure Monitor</em>: <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/overview%20">https://docs.microsoft.com/en-us/azure/azure-monitor/overview</a></li>
<li><em class="italic">Azure Application Insights</em>: <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview%20">https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview</a></li>
<li><em class="italic">Azure Automation</em>: <a href="https://docs.microsoft.com/en-us/azure/automation/overview">https://docs.microsoft.com/en-us/azure/automation/overview</a></li>
</ul>
</div>
</div></body></html>