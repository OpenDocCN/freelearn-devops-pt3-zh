<html><head></head><body>
		<div id="_idContainer251">
			<h1 class="chapter-number" id="_idParaDest-86"><a id="_idTextAnchor087"/>5</h1>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor088"/>Understanding Bitbucket and Bitbucket Pipelines</h1>
			<p>Bitbucket is Atlassian’s <strong class="bold">Source Code Management</strong> (<strong class="bold">SCM</strong>) solution that enables developers to version control their source code. Bitbucket is tightly integrated with Jira and allows developers to collaboratively work on code while also sharing their status with stakeholders. Bitbucket doesn’t just store and track changes, it offers a robust deployment system known as <strong class="bold">Bitbucket Pipelines</strong>. Using Pipelines, developers can build and deploy their code to various environments with ease. Moreover, <strong class="bold">runners</strong> are machines that carry out pipeline executions for build and deployment. Bitbucket Pipelines can use its runners to run a pipeline execution, at a cost of the number of minutes needed for the execution against a monthly budget, or developers can define self-hosted runners that use their <span class="No-Break">own infrastructure.</span></p>
			<p>This chapter has the following recipes – the first recipe will walk you through the basics and subsequent recipes will expand on <span class="No-Break">this foundation:</span></p>
			<ul>
				<li>Creating a workspace, project, and repository <span class="No-Break">in Bitbucket</span></li>
				<li>Creating branches <span class="No-Break">in Bitbucket</span></li>
				<li>Understanding pull requests and merging <span class="No-Break">best practices</span></li>
				<li>Enabling <span class="No-Break">Bitbucket Pipelines</span></li>
				<li>Configuring runners <span class="No-Break">in Bitbucket</span></li>
			</ul>
			<h1 id="_idParaDest-88"><a id="_idTextAnchor089"/>Technical requirements</h1>
			<p>You will need the <span class="No-Break">following software:</span></p>
			<ul>
				<li>Bitbucket Cloud with <span class="No-Break">a repository</span></li>
				<li><span class="No-Break">Bitbucket runners</span></li>
			</ul>
			<h1 id="_idParaDest-89"><a id="_idTextAnchor090"/>Creating a workspace, project, and repository in Bitbucket</h1>
			<p>Bitbucket is a very <a id="_idIndexMarker309"/>different tool when you compare it against Jira or Confluence. Unlike Jira and Confluence, which require very little configuration to get started, Bitbucket requires some upfront technical configuration before it can be used by a team. This recipe focuses on building your understanding of how Bitbucket is structured and explains the various initial configuration steps required to enable Bitbucket for <span class="No-Break">your team.</span></p>
			<h2 id="_idParaDest-90"><a id="_idTextAnchor091"/>How to do it…</h2>
			<p>When <a id="_idIndexMarker310"/>Bitbucket is configured for the first time, you want to first<a id="_idIndexMarker311"/> create a <strong class="bold">workspace</strong>. Workspaces contain repositories, which will be discussed later in this recipe. When you log in to Bitbucket, you’ll see your available workspaces, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer183">
					<img alt="Figure 5.1 – Overview of available workspaces within Bitbucket" src="image/B21937_5_01.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.1 – Overview of available workspaces within Bitbucket</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">An initial workspace may have already been created when you first signed up for Bitbucket. In that case, you can skip to the next section or, if you want to create a brand-new workspace, follow along. Additionally, make sure you are logged into Bitbucket and that you are an administrator <span class="No-Break">of Bitbucket.</span></p>
			<p>To create a workspace, take the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Click on your profile icon in the top-right corner <span class="No-Break">of Bitbucket.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer184">
					<img alt="Figure 5.2 – Select profile icon" src="image/B21937_5_02.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.2 – Select profile icon</p>
			<ol>
				<li value="2">Click <a id="_idIndexMarker312"/>on <strong class="bold">All workspaces</strong> under <span class="No-Break"><strong class="bold">RECENT WORKSPACES</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer185">
					<img alt="Figure 5.3 – Select All workspaces" src="image/B21937_5_03.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.3 – Select All workspaces</p>
			<ol>
				<li value="3">Click<a id="_idIndexMarker313"/> on <strong class="bold">Create workspace</strong>, which is located toward the top-right corner of Bitbucket’s <span class="No-Break">user interface.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer186">
					<img alt="Figure 5.4 – Create workspace button" src="image/B21937_5_04.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.4 – Create workspace button</p>
			<ol>
				<li value="4">Enter a <span class="No-Break">workspace name.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer187">
					<img alt="Figure 5.5 – Provide a name for the new workspace" src="image/B21937_5_05.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.5 – Provide a name for the new workspace</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">This will auto-populate <strong class="bold">Workspace ID</strong>. You can optionally change it or leave the default that Atlassian provides. The workspace ID will serve as the URL for the new workspace you <span class="No-Break">are creating.</span></p>
			<ol>
				<li value="5">Update <span class="No-Break"><strong class="bold">Workspace ID</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer188">
					<img alt="Figure 5.6 – Workspace ID" src="image/B21937_5_06.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.6 – Workspace ID</p>
			<ol>
				<li value="6">Determine <a id="_idIndexMarker314"/>whether you want the workspace<a id="_idIndexMarker315"/> to remain private or whether you want it to be public by checking <span class="No-Break">the checkbox.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer189">
					<img alt="Figure 5.7 – Determine whether the workspace should be private or public" src="image/B21937_5_07.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.7 – Determine whether the workspace should be private or public</p>
			<ol>
				<li value="7">After you validate the reCAPTCHA, click on the <span class="No-Break"><strong class="bold">Create</strong></span><span class="No-Break"> button:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer190">
					<img alt="Figure 5.8 – Create your first workspace" src="image/B21937_5_08.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.8 – Create your first workspace</p>
			<p>Your workspace is <a id="_idIndexMarker316"/>now created, and you will now be able to <a id="_idIndexMarker317"/>create your <span class="No-Break">first repository.</span></p>
			<h2 id="_idParaDest-91"><a id="_idTextAnchor092"/>There’s more…</h2>
			<p>Once <a id="_idIndexMarker318"/>you are in your new workspace, it is time to create your <a id="_idIndexMarker319"/>first repository. The repository is where the source code will be stored. You can have many repositories within a single workspace. Let's use the following steps to create <span class="No-Break">a repository:</span></p>
			<ol>
				<li>Click on <strong class="bold">Create repository</strong>, located in either the welcome message or under <span class="No-Break"><strong class="bold">Recent repositories</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer191">
					<img alt="Figure 5.9 – Create your first repository" src="image/B21937_5_09.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.9 – Create your first repository</p>
			<ol>
				<li value="2">Bitbucket will redirect you to a new screen where you will first provide a project name. Repositories are grouped into projects, so it is important to provide a project <span class="No-Break">name first:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer192">
					<img alt="Figure 5.10 – Create your first repository and provide a project name" src="image/B21937_5_10.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.10 – Create your first repository and provide a project name</p>
			<ol>
				<li value="3">Next, provide<a id="_idIndexMarker320"/> the name of your repository. This should <a id="_idIndexMarker321"/>be a name that is significant to the team that will be using <span class="No-Break">the repository:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer193">
					<img alt="Figure 5.11 – Provide a repository name" src="image/B21937_5_11.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.11 – Provide a repository name</p>
			<ol>
				<li value="4">Determine whether the repository should be private <span class="No-Break">or public.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer194">
					<img alt="Figure 5.12 – Determine the access level of the repository" src="image/B21937_5_12.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.12 – Determine the access level of the repository</p>
			<ol>
				<li value="5">Determine whether a <strong class="source-inline">README</strong> file should be included in the repository, to include it with a template, or to include it with a tutorial, which is recommended <span class="No-Break">for beginners.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer195">
					<img alt="Figure 5.13 – Determine whether a README file is included in the repository" src="image/B21937_5_13.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.13 – Determine whether a README file is included in the repository</p>
			<ol>
				<li value="6">Provide the name of your default branch. This is typically <strong class="source-inline">main</strong> <span class="No-Break">or </span><span class="No-Break"><strong class="source-inline">master</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer196">
					<img alt="Figure 5.14 – Name of the default branch" src="image/B21937_5_14.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.14 – Name of the default branch</p>
			<ol>
				<li value="7">Finally, determine whether a <strong class="source-inline">.gitignore</strong> file should be included or not. It is recommended that a <strong class="source-inline">.gitignore</strong> file is included if you have files or directories that need to not be tracked by Git. These files or directories will be ignored<a id="_idIndexMarker322"/> and will not be committed to <span class="No-Break">the repository.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer197">
					<img alt="Figure 5.15 – Determine whether a .gitignore file is included or not" src="image/B21937_5_15.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.15 – Determine whether a .gitignore file is included or not</p>
			<ol>
				<li value="8">Click on <strong class="bold">Create repository</strong>, located in the bottom-right corner of the screen. Don’t <a id="_idIndexMarker323"/>worry about configuring any of the <span class="No-Break">advanced settings.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer198">
					<img alt="Figure 5.16 – Create repository button" src="image/B21937_5_16.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.16 – Create repository button</p>
			<p>Your first workspace, project, and repository have now been created. In the following recipe, you will learn how to start creating branches <span class="No-Break">in Bitbucket.</span></p>
			<h1 id="_idParaDest-92"><a id="_idTextAnchor093"/>Creating branches in Bitbucket</h1>
			<p>Working <a id="_idIndexMarker324"/>off the default branch in Bitbucket is not the best practice<a id="_idIndexMarker325"/> as it impacts the main code base, which should be as stable as possible. Instead, you should consider utilizing branches in Bitbucket, and this recipe will cover the basics of branching. There are different techniques when it comes to branching strategies. This recipe will simply cover the mechanics of <span class="No-Break">creating branches.</span></p>
			<h2 id="_idParaDest-93"><a id="_idTextAnchor094"/>Getting ready</h2>
			<p>Before jumping into<a id="_idIndexMarker326"/> the mechanics of how to create branches in Bitbucket, let’s discuss the different types of branches available. There are different branching strategies in the world of Git. For this example, <strong class="bold">Gitflow</strong> will be used to illustrate how branching typically works. Gitflow is well documented by Atlassian, so Gitflow<a id="_idIndexMarker327"/> will be used<a id="_idIndexMarker328"/> to explain branching strategies in <span class="No-Break">this recipe:</span></p>
			<ul>
				<li><strong class="bold">Main</strong>: The main branch should be the most stable branch in your repository. This means that the code in the main branch should be the most complete and the best working version of your code. Typically, your main branch is used to create releases and deploy to a production system, so this branch is the <span class="No-Break">most stable.</span></li>
				<li><strong class="bold">Develop</strong>: This is a very common branch to have when following the Gitflow methodology. The develop branch is the branch your team will integrate their changes into or where they will create feature branches from. The develop branch is initially branched from the <span class="No-Break">main branch.</span></li>
				<li><strong class="bold">Feature</strong>: Whenever a story is assigned to a developer in Jira, that developer should create a feature branch, which should be based on the develop branch. Feature branches are short-lived and as soon as a developer finishes their code, a pull request should be initiated to merge changes back into the <span class="No-Break">develop branch.</span></li>
				<li><strong class="bold">Release</strong>: Whenever the Develop branch is ready to be shipped to production, a release branch is created from the latest develop branch. This release branch should be tested and vetted before it is merged into the main and <span class="No-Break">develop branch.</span></li>
				<li><strong class="bold">Hotfix</strong>: Whenever there are problems with a production system, hotfix branches should be created to address problems with code found in the <span class="No-Break">main branch.</span></li>
			</ul>
			<p>Now that you know what all the different branches are in the Gitflow model, we are going to look at how to create branches <span class="No-Break">within Bitbucket.</span></p>
			<h2 id="_idParaDest-94"><a id="_idTextAnchor095"/>How to do it…</h2>
			<p>Branching in Bitbucket<a id="_idIndexMarker329"/> is straightforward but is often not the<a id="_idIndexMarker330"/> most popular option. If you are new to using a source control management system, then using a user interface such as that of Bitbucket might be a good option <span class="No-Break">for you:</span></p>
			<ol>
				<li>In Bitbucket, enter the repository in which you want to create a branch in. Click on <strong class="bold">Repositories</strong> in the <span class="No-Break">navigation bar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer199">
					<img alt="Figure 5.17 – Select Repositories from the menu bar" src="image/B21937_5_17.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.17 – Select Repositories from the menu bar</p>
			<ol>
				<li value="2">Select the repository you will want to create your <span class="No-Break">branch in.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer200">
					<img alt="Figure 5.18 – Select the repository of your choice from the available repositories" src="image/B21937_5_18.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.18 – Select the repository of your choice from the available repositories</p>
			<p class="list-inset">This will take you to the main <span class="No-Break">repository window.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer201">
					<img alt="Figure 5.19 – Selected repository" src="image/B21937_5_19.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.19 – Selected repository</p>
			<ol>
				<li value="3">Click on <strong class="bold">Branches</strong> on the <span class="No-Break">left-side menu.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer202">
					<img alt="Figure 5.20 – Select Branches from within the selected repository" src="image/B21937_5_20.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.20 – Select Branches from within the selected repository</p>
			<ol>
				<li value="4">On the<a id="_idIndexMarker331"/> far-right side, toward the top of the screen, click on <span class="No-Break"><strong class="bold">Create branch</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer203">
					<img alt="Figure 5.21 – Select Create branch" src="image/B21937_5_21.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.21 – Select Create branch</p>
			<ol>
				<li value="5">Select<a id="_idIndexMarker332"/> the branch type and determine which branch this new branch will be forked from. Give the new branch a name. Click <strong class="bold">Create</strong> <span class="No-Break">when finished.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer204">
					<img alt="Figure 5.22 – Creating a new branch example" src="image/B21937_5_22.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.22 – Creating a new branch example</p>
			<p>You have <a id="_idIndexMarker333"/>successfully created your first branch. The next recipe is <a id="_idIndexMarker334"/>going to cover what happens when you finish your code changes and how those changes are shared with the rest of <span class="No-Break">your team.</span></p>
			<h1 id="_idParaDest-95"><a id="_idTextAnchor096"/>Understanding pull requests and merging best practices</h1>
			<p>Tracking <a id="_idIndexMarker335"/>branches and changes to your code is only one of the features built into Bitbucket. When you are finished with your code changes, those changes need to be merged back to the branch that is upstream from your current branch. If you are following<a id="_idIndexMarker336"/> the Gitflow model, then that means that all of your code changes were done in a dedicated feature branch and now it is time to <a id="_idIndexMarker337"/>merge those changes back into the develop branch. The process of doing this merge is called a pull request. A pull request is more than just merging your code changes. The rest of this recipe will explain and walk you through how to use pull requests to maintain high-quality code and minimize the chances that your new code changes will <span class="No-Break">break something.</span></p>
			<h2 id="_idParaDest-96"><a id="_idTextAnchor097"/>How to do it…</h2>
			<p>Once you are done with<a id="_idIndexMarker338"/> your changes, it is time to initiate a pull request. This pull request will trigger a chain reaction of events that is covered in the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>In Bitbucket, enter the repository in which you want to create a branch. Click on <strong class="bold">Repositories</strong> in the <span class="No-Break">navigation bar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer205">
					<img alt="Figure 5.23 – Select Repositories from the menu bar" src="image/B21937_5_23.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.23 – Select Repositories from the menu bar</p>
			<ol>
				<li value="2">Select the repository you want to create your <span class="No-Break">branch in.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer206">
					<img alt="Figure 5.24 – Select the repository of your choice from the available repositories" src="image/B21937_5_24.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.24 – Select the repository of your choice from the available repositories</p>
			<p class="list-inset">This will take you to the main <span class="No-Break">repository window.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer207">
					<img alt="Figure 5.25 – Selected repository" src="image/B21937_5_25.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.25 – Selected repository</p>
			<ol>
				<li value="3">Click on <strong class="bold">Pull requests</strong> on the <span class="No-Break">left-side menu.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer208">
					<img alt="Figure 5.26 – Select Pull requests from within the selected repository" src="image/B21937_5_26.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.26 – Select Pull requests from within the selected repository</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">There are many ways to start a pull request. You can initiate it when you are committing your changes. You can initiate it by clicking on the <strong class="bold">Create</strong> button in Bitbucket’s navigation bar. You can also initiate a pull request from the <strong class="bold">Branches</strong> menu. Not to mention that you can initiate a pull request from the command line and from Jira as well. The method described in this recipe is the most comprehensive method for creating a pull request from <span class="No-Break">within Bitbucket.</span></p>
			<ol>
				<li value="4">On the <a id="_idIndexMarker339"/> far-right side, click on <strong class="bold">Create </strong><span class="No-Break"><strong class="bold">pull request</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer209">
					<img alt="Figure 5.27 – Click on Create pull request" src="image/B21937_5_27.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.27 – Click on Create pull request</p>
			<p class="list-inset">You will be redirected to a screen where you will populate all the details needed to create the <span class="No-Break">pull request.</span></p>
			<ol>
				<li value="5">Start by selecting <strong class="bold">Source Branch</strong>. This should be the feature branch you were <span class="No-Break">working on.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer210">
					<img alt="Figure 5.28 – Select Source Branch" src="image/B21937_5_28.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.28 – Select Source Branch</p>
			<ol>
				<li value="6">Select the<a id="_idIndexMarker340"/> destination branch that the code changes should be merged into. This should be the <span class="No-Break"><strong class="bold">Develop</strong></span><span class="No-Break"> branch:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer211">
					<img alt="Figure 5.29 – Select the destination branch" src="image/B21937_5_29.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.29 – Select the destination branch</p>
			<ol>
				<li value="7">Give the pull request a title. This should be anything you want, but as a best practice, this should include the Jira key for the user story/bug that you were <span class="No-Break">working on.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer212">
					<img alt="Figure 5.30 – Pull request name" src="image/B21937_5_30.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.30 – Pull request name</p>
			<ol>
				<li value="8">Add a description that best describes your changes and anything else that may be helpful to <span class="No-Break">the reviewers.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer213">
					<img alt="Figure 5.31 – Provide a description for the pull request" src="image/B21937_5_31.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.31 – Provide a description for the pull request</p>
			<ol>
				<li value="9">The next <a id="_idIndexMarker341"/> step is the most critical. Every pull request should be reviewed by someone else on your team. This can be other peers, but preferably, at least one senior-level developer should review the <span class="No-Break">pull request.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer214">
					<img alt="Figure 5.32 – Select team members that should review the pull request" src="image/B21937_5_32.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.32 – Select team members that should review the pull request</p>
			<ol>
				<li value="10">Optionally, determine whether Bitbucket should delete the branch after it has been merged. This is generally a good idea as Bitbucket will help keep your branches neat by removing unnecessary ones such as those that have been <span class="No-Break">merged already.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer215">
					<img alt="Figure 5.33 – Determine whether the source branch should be deleted after the merge" src="image/B21937_5_33.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.33 – Determine whether the source branch should be deleted after the merge</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Before you create the pull request, review the commits and the files that were impacted as a result of the changes you made. This should serve as a personal review for yourself to ensure that commits or files/changes are not missing from the <span class="No-Break">pull request.</span></p>
			<ol>
				<li value="11">Finally, click on <strong class="bold">Create pull request</strong> to initiate the <span class="No-Break">pull request.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer216">
					<img alt="Figure 5.34 – Provide a description for the pull request" src="image/B21937_5_34.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.34 – Provide a description for the pull request</p>
			<p>Now that the pull request has officially been made, it is time for someone to review it. Once it has been reviewed, the code can be approved to be merged into the destination branch. In the next recipe, we’ll cover how to configure your first pipeline <span class="No-Break">in Bitbucket.</span></p>
			<h1 id="_idParaDest-97"><a id="_idTextAnchor098"/>Enabling Bitbucket Pipelines</h1>
			<p>After all<a id="_idIndexMarker342"/> your changes have been approved and merged into a develop branch, they need to be built and deployed. Deploying your changes is important because your source code needs to eventually live in an environment where end users will be able to use the functionalities that you have built. You could manually copy files from your computer to another, but this is not scalable and will most likely not be possible given the distributed world we live in. Instead, you can leverage the power of Bitbucket Pipelines to deploy your <span class="No-Break">code automatically.</span></p>
			<h2 id="_idParaDest-98"><a id="_idTextAnchor099"/>How to do it…</h2>
			<p>Before you can use Bitbucket Pipelines, you will need to tweak a <span class="No-Break">few things:</span></p>
			<ol>
				<li>In Bitbucket, enter the repository in which you want to create a branch. Click on <strong class="bold">Repositories</strong> in the <span class="No-Break">navigation bar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer217">
					<img alt="Figure 5.35 – Select Repositories from the menu bar" src="image/B21937_5_35.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.35 – Select Repositories from the menu bar</p>
			<ol>
				<li value="2">Select the repository you want to create your <span class="No-Break">branch in.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer218">
					<img alt="Figure 5.36 – Select a repository of your choice from the available repositories" src="image/B21937_5_36.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.36 – Select a repository of your choice from the available repositories</p>
			<p class="list-inset">This will take you to the main <span class="No-Break">repository window.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer219">
					<img alt="Figure 5.37 – Selected repository" src="image/B21937_5_37.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.37 – Selected repository</p>
			<ol>
				<li value="3">Click <a id="_idIndexMarker343"/>on <strong class="bold">Pipelines</strong> on the <span class="No-Break">left-side menu.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer220">
					<img alt="Figure 5.38 – Select Pipelines from within the selected repository" src="image/B21937_5_38.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.38 – Select Pipelines from within the selected repository</p>
			<ol>
				<li value="4">Click on <strong class="bold">Create your first pipeline</strong>, which will take you down to the available templates that you can <span class="No-Break">select from.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer221">
					<img alt="Figure 5.39 – Create your first pipeline" src="image/B21937_5_39.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.39 – Create your first pipeline</p>
			<ol>
				<li value="5">Select <span class="No-Break"><strong class="bold">Starter pipeline</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer222">
					<img alt="Figure 5.40 – Starter pipeline is recommended" src="image/B21937_5_40.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.40 – Starter pipeline is recommended</p>
			<p>Configuring <a id="_idIndexMarker344"/>your first pipeline is an involved process. In the next section, we are going to break down the starter template and explain the different tweaks you can make to the template using Bitbucket’s <span class="No-Break">pipeline editor.</span></p>
			<h2 id="_idParaDest-99"><a id="_idTextAnchor100"/>There’s more…</h2>
			<p>There are many configurations to configure. This section is going to give you an overview of those changes. In the next chapter, you will <a id="_idIndexMarker345"/>learn how to expand on this quite simple pipeline <span class="No-Break">configuration file:</span></p>
			<ol>
				<li>The first configuration you can change is the template for your <strong class="source-inline">bitbucket-pipelines.yml </strong>file. In <em class="italic">Step 5</em> of the previous section, we selected the <strong class="bold">Starter</strong> pipeline, but you can select from any of the following templates that Bitbucket provides based on your specific needs. Within your <strong class="source-inline">bitbucket-pipelines.yml</strong> file, make sure you are in edit mode and you will see where you can change <span class="No-Break">the template.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer223">
					<img alt="Figure 5.41 – Available pipeline templates" src="image/B21937_5_41.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.41 – Available pipeline templates</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Depending on the template that you pick, the information in the template <span class="No-Break">will change.</span></p>
			<ol>
				<li value="2">By default, the <a id="_idIndexMarker346"/>template you select is going to have recommended steps based on the type of template you selected. If you need to add new steps, you can do so by selecting from the available <span class="No-Break">step types.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer224">
					<img alt="Figure 5.42 – Available step types" src="image/B21937_5_42.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.42 – Available step types</p>
			<ol>
				<li value="3">Select a step that you would like to add and a popup will display, allowing you to copy the information so that you can add it to <span class="No-Break">your template.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer225">
					<img alt="Figure 5.43 – Additional step information to copy" src="image/B21937_5_43.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.43 – Additional step information to copy</p>
			<p class="callout-heading">Important note</p>
			<p class="callout"><em class="italic">Step 3</em> simply shows how to add a step to your pipeline. Ideally, you want to build steps for building and packaging as well. You may also want to include steps for testing, scanning, delivery, and <span class="No-Break">so on.</span></p>
			<ol>
				<li value="4">Once copied <a id="_idIndexMarker347"/>to your clipboard, you can add the additional step back in <span class="No-Break">your template:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer226">
					<img alt="Figure 5.44 – Added deployment step" src="image/B21937_5_44.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.44 – Added deployment step</p>
			<ol>
				<li value="5">You can also add integrations to your <span class="No-Break">pipeline configuration.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer227">
					<img alt="Figure 5.45 – Available pipe integrations" src="image/B21937_5_45.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.45 – Available pipe integrations</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You can click on <strong class="bold">Explore more pipes</strong> to view all the available integrations. There are dozens to choose from based on your <span class="No-Break">specific needs.</span></p>
			<ol>
				<li value="6">Finally, you <a id="_idIndexMarker348"/>can add variables to <strong class="source-inline">bitbucket-pipelines.yml</strong> to make your pipelines generic, configurable, <span class="No-Break">and reusable.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer228">
					<img alt="Figure 5.46 – Add variables to the pipeline template" src="image/B21937_5_46.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.46 – Add variables to the pipeline template</p>
			<ol>
				<li value="7">Once you have<a id="_idIndexMarker349"/> finished modifying your pipeline template, you commit the file back to your repository by clicking on the <strong class="bold">Commit</strong> button at the bottom of <span class="No-Break">the screen.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer229">
					<img alt="Figure 5.47 – Commit the bitbucket-pipelines.yml file" src="image/B21937_5_47.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.47 – Commit the bitbucket-pipelines.yml file</p>
			<ol>
				<li value="8">Your pipeline will then execute. After you commit, you will be redirected back to the <strong class="bold">Pipelines</strong> menu where you will be able to see the status of your pipeline. I recommend merging the pipeline back to your main or develop branch <span class="No-Break">if needed.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer230">
					<img alt="Figure 5.48 – Pipeline status" src="image/B21937_5_48.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.48 – Pipeline status</p>
			<ol>
				<li value="9">Click on your pipeline execution to obtain details about the latest <span class="No-Break">build run:</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer231">
					<img alt="Figure 5.49 – Pipeline run execution details" src="image/B21937_5_49.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.49 – Pipeline run execution details</p>
			<ol>
				<li value="10">Back in the <strong class="bold">Pipelines</strong> menu, you can trigger a pipeline to run by clicking on the <strong class="bold">Run </strong><span class="No-Break"><strong class="bold">pipeline</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer232">
					<img alt="Figure 5.50 – Force run a pipeline" src="image/B21937_5_50.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.50 – Force run a pipeline</p>
			<ol>
				<li value="11">Select <a id="_idIndexMarker350"/>your branch and the pipeline you want <span class="No-Break">to run.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer233">
					<img alt="Figure 5.51 – Run Pipeline details" src="image/B21937_5_51.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.51 – Run Pipeline details</p>
			<ol>
				<li value="12">You can also schedule pipelines to run at a <span class="No-Break">specific time.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer234">
					<img alt="Figure 5.52 – Schedule a pipeline" src="image/B21937_5_52.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.52 – Schedule a pipeline</p>
			<ol>
				<li value="13">Finally, you <a id="_idIndexMarker351"/>can check your usage as Bitbucket pipelines are tracked by the number of minutes it takes to run the pipeline. The amount of time you have each month is determined by your Bitbucket <span class="No-Break">subscription plan.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer235">
					<img alt="Figure 5.53 – View pipeline usage" src="image/B21937_5_53.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.53 – View pipeline usage</p>
			<p>This was just an introduction to pipelines in Bitbucket. In the next chapter, you will learn how to create more advanced <span class="No-Break">Bitbucket pipelines.</span></p>
			<h1 id="_idParaDest-100"><a id="_idTextAnchor101"/>Configuring runners in Bitbucket</h1>
			<p>With <a id="_idIndexMarker352"/>Bitbucket Cloud, you must pay for every build minute. This <a id="_idIndexMarker353"/>can quickly add up so, as an alternative, you can utilize self-hosted runners. Runners allow you to save on build minutes, but you need to maintain them in <span class="No-Break">your infrastructure.</span></p>
			<h2 id="_idParaDest-101"><a id="_idTextAnchor102"/>How to do it…</h2>
			<p>Runners will <a id="_idIndexMarker354"/>help you keep your Bitbucket costs down, but they <a id="_idIndexMarker355"/>do require some initial configurations, which are covered in the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>In Bitbucket, enter the repository in which you want to create a branch. Click on <strong class="bold">Repositories</strong> in the <span class="No-Break">navigation bar.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer236">
					<img alt="Figure 5.54 – Select Repositories from the menu bar" src="image/B21937_5_54.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.54 – Select Repositories from the menu bar</p>
			<ol>
				<li value="2">Select the repository you want to create your <span class="No-Break">branch in.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer237">
					<img alt="Figure 5.55 – Select the repository of your choice from the available repositories" src="image/B21937_5_55.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.55 – Select the repository of your choice from the available repositories</p>
			<p class="list-inset">This will take you to the main <span class="No-Break">repository window.</span></p>
			<div>
				<div class="IMG---Figure" id="_idContainer238">
					<img alt="Figure 5.56 – Selected repository" src="image/B21937_5_56.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.56 – Selected repository</p>
			<ol>
				<li value="3">Once you are in the repository where you want to add your runner, click on <strong class="bold">Repository settings</strong> on<a id="_idIndexMarker356"/> the <span class="No-Break">left-hand menu.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer239">
					<img alt="Figure 5.57 – Select Repository settings" src="image/B21937_5_57.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.57 – Select Repository settings</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You can only have up to 100 runners <span class="No-Break">per repository.</span></p>
			<ol>
				<li value="4">Once<a id="_idIndexMarker357"/> in <strong class="bold">Repository settings</strong>, scroll all the way down until you get to the <strong class="bold">PIPELINES</strong> section. From there, click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Runners</strong></span><span class="No-Break">.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer240">
					<img alt="Figure 5.58 – Select Runners under PIPELINES" src="image/B21937_5_58.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.58 – Select Runners under PIPELINES</p>
			<ol>
				<li value="5">Click<a id="_idIndexMarker358"/> on <strong class="bold">Add runner</strong> to add a <span class="No-Break">self-hosted runner.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer241">
					<img alt="Figure 5.59 – Add runner" src="image/B21937_5_59.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.59 – Add runner</p>
			<ol>
				<li value="6">Select<a id="_idIndexMarker359"/> the <strong class="bold">System and architecture</strong> type for your new runner. There are a few different options, and you should select the one appropriate for the type of runner you are planning <span class="No-Break">on utilizing.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer242">
					<img alt="Figure 5.60 – Select the System and architecture type" src="image/B21937_5_60.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.60 – Select the System and architecture type</p>
			<ol>
				<li value="7">Give<a id="_idIndexMarker360"/> your runner <span class="No-Break">a name.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer243">
					<img alt="Figure 5.61 – Provide a name for the runner" src="image/B21937_5_61.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.61 – Provide a name for the runner</p>
			<ol>
				<li value="8">Provide <a id="_idIndexMarker361"/><span class="No-Break">runner labels.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer244">
					<img alt="Figure 5.62 – Provide runner labels" src="image/B21937_5_62.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.62 – Provide runner labels</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You can provide up to 10 runner labels. Use these labels to help schedule when your runners execute. Labels can only contain lowercase and alphanumerical characters <span class="No-Break">and dots.</span></p>
			<ol>
				<li value="9">Click the <span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer245">
					<img alt="Figure 5.63 – Click the Next button to proceed" src="image/B21937_5_63.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.63 – Click the Next button to proceed</p>
			<ol>
				<li value="10">On the <a id="_idIndexMarker362"/>next screen, copy the command that <span class="No-Break">is</span><span class="No-Break"><a id="_idIndexMarker363"/></span><span class="No-Break"> displayed.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer246">
					<img alt="Figure 5.64 – The runner command that is needed to start and configure the runner" src="image/B21937_5_64.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.64 – The runner command that is needed to start and configure the runner</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">You will not be able to retrieve the command information later, so make sure you save it in a safe location. You will need this command to install and configure your <span class="No-Break">runner later.</span></p>
			<ol>
				<li value="11">Click on the <span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break"> button.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer247">
					<img alt="Figure 5.65 – Click Next to proceed to the next step" src="image/B21937_5_65.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.65 – Click Next to proceed to the next step</p>
			<ol>
				<li value="12">Copy the labels and add them to your <span class="No-Break"><strong class="source-inline">bitbucket-</strong></span><span class="No-Break"><strong class="source-inline">pipelines</strong></span><span class="No-Break"><strong class="source-inline">.yml</strong></span><span class="No-Break"> file.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer248">
					<img alt="Figure 5.66 – Copy labels to include in the YAML file" src="image/B21937_5_66.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.66 – Copy labels to include in the YAML file</p>
			<ol>
				<li value="13">Click <a id="_idIndexMarker364"/>on the <strong class="bold">Finish</strong> button to finish creating <a id="_idIndexMarker365"/><span class="No-Break">your runner.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer249">
					<img alt="Figure 5.67 – Click Finish to create the runner" src="image/B21937_5_67.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.67 – Click Finish to create the runner</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Your runner will now be available for your repository but will not be registered until you run the command from <em class="italic">Step 9</em> of this recipe to start the runner. In the next recipe, you will walk through an example of creating a valid and <span class="No-Break">usable runner.</span></p>
			<ol>
				<li value="14">Your newly created runner, with a state of <strong class="bold">UNREGISTERED</strong> will be visible in the <strong class="bold">Runners</strong> menu <span class="No-Break">within Bitbucket.</span></li>
			</ol>
			<div>
				<div class="IMG---Figure" id="_idContainer250">
					<img alt="Figure 5.68 – List of available runners in the repository" src="image/B21937_5_68.jpg"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 5.68 – List of available runners in the repository</p>
			<p>Now that you <a id="_idIndexMarker366"/>have a runner, you can save on build-minute <a id="_idIndexMarker367"/>costs. While you need to host your own runners, it might be an effective way to save a little money if you are consuming a lot of <span class="No-Break">build minutes.</span></p>
		</div>
	</body></html>