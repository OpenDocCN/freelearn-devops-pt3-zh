<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer216">
<h1 class="chapter-number" id="_idParaDest-398"><a id="_idTextAnchor1277"/>17</h1>
<h1 id="_idParaDest-399"><a id="_idTextAnchor1278"/>Planning Your Azure DevOps Organization</h1>
<p>In previous chapters, you learned about many techniques and practices concerning DevOps. In this chapter, we will take a step back and look at how you can build a strong DevOps organization and what you need to think about when doing so. After that, you will learn what this can bring to you with regard to security and traceability. From there on, you will learn how you can consolidate your toolchain portfolio, thereby standardizing your development life cycle mostly on using Azure DevOps.</p>
<p>We will begin by creating an Azure DevOps organization where you will learn which constructs are available to lay out your products and teams in the tool. You will also learn about licensing and the security implications of the different approaches. After that, you will learn about traceability and how that can be used to create a verifiable software development process. Next up is the consolidation of the tools used. As you progress on your DevOps journey, you may find that each team uses different tools that it is familiar with and enjoys working with. While DevOps is all about empowering people, some level of standardization might be desirable, and you will learn how to go about this. Finally, you will learn that you might have to accept that you will never be completely done adopting DevOps.</p>
<p>The following topics will be covered in this chapter:</p>
<ul>
<li>Setting up an Azure DevOps organization </li>
<li>Ensuring traceability</li>
<li>Consolidating tools</li>
<li>Accepting there is no end state</li>
</ul>
<h1 id="_idParaDest-400"><a id="_idTextAnchor1279"/><a id="_idTextAnchor1280"/><a id="_idTextAnchor1281"/>Technical requirements</h1>
<p>To follow along with the practical parts of this chapter, one of the following is needed:</p>
<ul>
<li>A Microsoft Live account, also called a personal account</li>
<li> <a id="_idTextAnchor1282"/>A work or school account</li>
</ul>
<h1 id="_idParaDest-401"><a id="_idTextAnchor1283"/>Setting up an Azure DevOps organization</h1>
<p>To practice with one or more of the technologies<a id="_idIndexMarker1340"/> and techniques described in the previous chapters, an Azure DevOps organization might have been created specifically for this use, or maybe one was available already that could be used for this purpose. However, creating an organization for a company from scratch takes a little more consideration. Taking the time to properly plan the layout of the organization can save a lot of time later on.</p>
<p>This section describes the components out of which Azure DevOps is built, how you can<a id="_idTextAnchor1284"/> use this to organize a fitting security model, and licensing options and costs.<a id="_idTextAnchor1285"/></p>
<h2 id="_idParaDest-402"><a id="_idTextAnchor1286"/>How Azure DevOps is organized</h2>
<p>The top-level construct<a id="_idIndexMarker1341"/> in Azure DevOps is called an organization. For most companies, a total of one organization will suffice, but it is possible to create more than one.</p>
<p>Each Azure DevOps organization is hosted in a specific region. Most of the data (source code and work items) for the organization is guaranteed to be located in the region for the organization, but some information is always stored in other data centers due to the global reach of the service. Having a distributed organization with teams and products in different geographies can be one reason for using more than one organization. For example, if some teams are located in Australia and some in West Europe, it makes sense to create two separate organizations and host all teams in the geography closest to them. This will ensure that the bulk of the Azure DevOps services are hosted within a data center in a region that is physically closer to the teams, greatly reducing latencies when working with Azure DevOps.</p>
<p>An organization can be linked to <strong class="bold">Azure Active Directory</strong> (<strong class="bold">AAD</strong>). If this link is enabled, only<a id="_idIndexMarker1342"/> users (both members and guest accounts) that are inside that particular AAD are allowed access to the organization. Using a company AAD is not mandatory; an organization can also be created using a Microsoft account. Administrators can also allow users with a GitHub account access to the organization. However, it must be noted that when creating an organization with a work account, it will automatically<a id="_idIndexMarker1343"/> be linked to the home (default) tenant linked to the AAD account. Tenant administrators can prevent their work accounts from being linked to new organizatio<a id="_idTextAnchor1287"/>ns.</p>
<p>In each organization, one or more projects can be created. A project<a id="_idIndexMarker1344"/> is an isolated container of work items, source<a id="_idIndexMarker1345"/> control repositories, pipeline definitions, and all other Azure DevOps artifacts. There are only limited sharing and linking possibilities between projects. At the time of writing, only work items, pipelines, and agent pools can be related across projects. This way, projects can serve as a strong isolation boundary for enforcing rigid security between products or teams if needed. In general, it is recommended to have as few projects as possible, with the goal of having only one if possible when the count of teams is very few (&lt;10).</p>
<p>The following diagram shows a possible organization of Azure DevOps organizations and projects. It shows that there are two organizations connected to AAD. One is located in West Europe and the other one in Australia. In West Europe, there are two projects in the organization, while in Australia there is just one:</p>
<div>
<div class="IMG---Figure" id="_idContainer209">
<img alt="Figure 17.1 – Azure DevOps organization and projects " height="780" src="image/B18655_17_01.jpg" width="1342"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.1 – Azure DevOps organization and projects</p>
<p>As stated before, the recommendation is to go with as few organizations and projects as possible. But in this example, the latency from Australia to West Europe is a good argument to split into two organizations to have Azure DevOps hosted close to the teams. The split into two projects in West Europe might be due to the need for a high level of isolation for team 4, which is working on product 3.</p>
<p>Combining teams 1 to 3 and products 1 and 2 into one project has been done on purpose. The reason for this is that within a single project, multiple product areas and multiple teams can be defined. Having all of these in a single project enables the easy linking of work items for portfolio management. This way, working items from one team can also be related to the commits or pull requests of another team on another product. This is helpful if features are spread over multiple products or applications (components).</p>
<p>Azure DevOps<a id="_idIndexMarker1346"/> provides area paths, teams, and iterations that help you organize and execute the life cycle processes on your product backlog. Hence, you must choose the level of granularity carefully to achieve a greater degree of parallelism in your development life cycle. A few simple rules<a id="_idIndexMarker1347"/> to follow would be the following:</p>
<ul>
<li>Avoid linking users to multiple teams. Rather, create teams as a logical, self-contained unit.</li>
<li>Create an area path for each major product (or team) in the organization. Create subarea paths as applicable. </li>
<li>Create separate team projects only if you want fine-grained control over all aspects of the DevOps life cycle. </li>
</ul>
<p>To make defining all products and all teams in a single project possible, it is important to know about the Azure DevOps security model and how to use this for implementing access co<a id="_idTextAnchor1288"/><a id="_idTextAnchor1289"/><a id="_idTextAnchor1290"/>ntrol.</p>
<h2 id="_idParaDest-403"><a id="_idTextAnchor1291"/>Creating an Azure DevOps organization and project</h2>
<p>Creating a new<a id="_idIndexMarker1348"/> Azure DevOps organization and one or more projects is a task often completed by administrators who will also be responsible for managing these environments later. These organizations<a id="_idIndexMarker1349"/> are most likely connected to an <strong class="bold">Azure Active Directory (AAD)</strong>. To create an organization for private use or training and learning practices, it might be better to use a personal account.</p>
<p>To create a new<a id="_idIndexMarker1350"/> organization using a personal account, do the following:</p>
<ol>
<li>Navigate to <a href="https://dev.azure.com">https://dev.azure.com</a>.</li>
<li>Choose <strong class="bold">Start free</strong> to start the creation of a new Azure DevOps organization.</li>
<li>When prompted with a login dialog, log in using a personal account.</li>
<li>After logging in, select the correct country of residence and opt in/out of tips and other service updates using the following dialog:</li>
</ol>
<div>
<div class="IMG---Figure" id="_idContainer210">
<img alt="Figure 17.2 – Selecting the country/region for your DevOps organization  " height="469" src="image/B18655_17_02.jpg" width="440"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.2 – Selecting the country/region for your DevOps organization </p>
<ol>
<li value="5">Press <strong class="bold">Continue</strong> to create<a id="_idIndexMarker1351"/> a new orga<a id="_idTextAnchor1292"/>nization.</li>
</ol>
<p>Once the organization<a id="_idIndexMarker1352"/> is created, a new wizard will automatically start to create the first project. To create a project, do the following:</p>
<ol>
<li value="1">Provide a project name.</li>
<li>Choose between making the project public or private. Private projects are the default setting and are intended to create software within an organization and not allow anonymous access. Public projects are intended for open source development.</li>
</ol>
<p>Once a new organization and a new project are created, it is possible to make changes to these choices using the management interface.</p>
<p class="callout-heading">Important Note</p>
<p class="callout">Please keep in mind that<a id="_idIndexMarker1353"/> renaming the organization or a project will change<a id="_idIndexMarker1354"/> the URL, so all existing integrations and links may break.</p>
<p>It is even possible to change the location of an organization later. This must be requested and is not as easy as changing othe<a id="_idTextAnchor1293"/>r settings. </p>
<p>Once an organization and project are available, it is time to set <a id="_idTextAnchor1294"/>up security.</p>
<h2 id="_idParaDest-404"><a id="_idTextAnchor1295"/>Azure DevOps security model</h2>
<p>Within Azure DevOps, authorization<a id="_idIndexMarker1355"/> can be assigned to individual users or security groups. A security group<a id="_idIndexMarker1356"/> is either a logical wrapper around an existing AAD group or can be defined within Azure DevOps itself. In general, it is recommended to assign authorization as much as possible to groups, and limit individual user assignments.</p>
<p>To configure authorization for a user or security group, two complementary approaches are available:</p>
<ul>
<li>Organization- and project-level authorizations </li>
<li>Object-level authorizations</li>
</ul>
<p>When working with the on-premises product, Azure DevOps Server, there are also server-level security groups and settings available:</p>
<p class="callout-heading">Important Note</p>
<p class="callout">In Azure DevOps Services, an<a id="_idIndexMarker1357"/> organization is called a project collection and<a id="_idIndexMarker1358"/> a project is called a team project. Sometimes, these names are also used in Azure DevOps.</p>
<ul>
<li><strong class="bold">Organization- and project-level authorizations</strong>: To allow a user to perform a specific action<a id="_idIndexMarker1359"/> on every object of a certain type, an organization- or project-level authorization can be set. As an example, look at the built-in groups, <strong class="source-inline">Project Collection Build Administrators</strong>, or <strong class="source-inline">[ProjectName]\Build Administrators</strong>, which, by default, have<a id="_idIndexMarker1360"/> permission to view, manage, and edit build definitions and build resources.</li>
</ul>
<p>The permissions that can be set at the organization and project level are automatically applied to all individual resources in the organization or the project.</p>
<ul>
<li><strong class="bold">Object-level authorizations</strong>: On most of the objects in Azure DevOps, individual permissions<a id="_idIndexMarker1361"/> can be assigned to users<a id="_idIndexMarker1362"/> or groups. These permissions are set using an <strong class="bold">access control list</strong> (<strong class="bold">ACL</strong>) on the object itself. The following example shows a classic build definition:</li>
</ul>
<div>
<div class="IMG---Figure" id="_idContainer211">
<img alt="Figure 17.3 – Setting up permissions for your project " height="735" src="image/B18655_17_03.jpg" width="1499"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.3 – Setting up permissio<a id="_idTextAnchor1296"/>ns for your project</p>
<p>For each group, for each action, it is possible<a id="_idIndexMarker1363"/> to configure the <strong class="bold">Allow</strong>, <strong class="bold">Deny</strong>, <strong class="bold">Not set</strong>, or <strong class="bold">Allow</strong>(<strong class="bold">inherited)</strong> permission. When an action is configured with <strong class="bold">Deny</strong>, access is never allowed, not even if a user is part of a group that has the authorization specified as <strong class="bold">Allow</strong>. In other words, when there are two conflicting assignments (<strong class="bold">Allow</strong> and <strong class="bold">Deny</strong>), <strong class="bold">Deny</strong> will take precedence over <strong class="bold">Allow</strong>. <strong class="bold">Not set</strong> is to be interpreted as an implicit deny that does not take precedence. In other words, when there are two conflicting assignments (<strong class="bold">Not set</strong> and <strong class="bold">Allow</strong>), the user will be allowed access.</p>
<p>Some artifacts in Azure DevOps<a id="_idIndexMarker1364"/> are part of a hierarchy. For example, pipelines can be in a folder. Whenever inheritance is enabled, permissions from a higher (parent) level in the hierarchy will propagate to the artifact. This means that when a user has access to a pipeline folder, all of their rights will propagate to all underlying folders and pipelines if, and only if, there are no more specific authorizations set.</p>
<p>While the security model determines which authorization a user has, <a id="_idTextAnchor1297"/>user actions are also limited by their assigned access level, which follow<a id="_idTextAnchor1298"/>s from their license.</p>
<h2 id="_idParaDest-405"><a id="_idTextAnchor1299"/>Azure DevOps licensing</h2>
<p>Another aspect of creating an Azure DevOps organization is managing licenses. Within Azure DevOps, every<a id="_idIndexMarker1365"/> user needs to have an access level assigned before they can log in to the product. There are three access levels defined:</p>
<ul>
<li><strong class="bold">Stakeholder</strong>: Stakeholders are free users<a id="_idIndexMarker1366"/> who can log in to the product but have limited access to its features. Stakeholders can manage work items, manage pipelines, and view dashboards. They do not have access to any of the other product areas, making this license level usable for non-development roles only.</li>
<li><strong class="bold">Basic</strong>: Basic users have a paid license<a id="_idIndexMarker1367"/> that gives them access to all parts of the product, except for test management and advanced test execution functionality. </li>
<li><strong class="bold">Basic and Test Plans</strong>: Users of the Basic and Test Plans license option<a id="_idIndexMarker1368"/> have access to all parts of Azure DevOps. They have the same access as basic users but are also provided with access to test management and tools for user acceptance testing, test execution, and test result reporting. </li>
</ul>
<p>The first five basic licenses for every organization are free. This means that experimenting with the product and learning how to use it can be done without incurring any costs. Additionally, Visual Studio subscribers can also get free licenses. Professional subscribers get a free Basic license and Enterprise subscribers get a free Basi<a id="_idTextAnchor1300"/>c and Test Plans license.</p>
<p>Licenses can be assigned and re-assigned at any point, so for a company or team<a id="_idIndexMarker1369"/> with many joiners and leavers, it is not necessary to buy more licenses than they have people active at any given point.</p>
<p>Licensing costs are not the only costs that come from using Azu<a id="_idTextAnchor1301"/>re DevOps; it is important to also know about the pay-per-use costs.</p>
<p>You can refer<a id="_idIndexMarker1370"/> to this link for more information: <a href="https://docs.microsoft.com/en-us/azure/devops/organizations/security/access-levels">https://docs.microsoft.com/en-us/azure/devops/organizati<span id="_idTextAnchor1302"/>ons/security/access-levels</a>.</p>
<h3>Consumption-based costs</h3>
<p>Licenses give users access<a id="_idIndexMarker1371"/> to the product and, from there on, they can use all of the services in the product at a fixed cost, except for the following two:</p>
<ul>
<li>Azure Pipelines parallel executions </li>
</ul>
<p>By default, every Azure DevOps organization is provided with one Microsoft-hosted parallel execution job with limited monthly execution time. This means that while there can be as many pipelines defined as needed, there can be only one pipeline executing at a time. Of course, this number can be increased, but this comes at the cost of buying more Microsoft-hosted parallel execution jobs. </p>
<p>As an alternative, it is also possible to buy self-hosted jobs. For these jobs, the execution agents are not provided by Microsoft but have to be provided by the organization itself at an additional cost. This provides the opportunity (and responsibility) to fully control the hardware. </p>
<ul>
<li>Azure Artifacts storage</li>
</ul>
<p>When working with Azure Artifacts feeds, the first 2 GB of storage used is free. Any extra storage used will be charged extra as per the rate card.</p>
<p>Once more and more<a id="_idIndexMarker1372"/> of the users of a team have a license<a id="_idTextAnchor1303"/> for Azure DevOps and perform their work there, this can be used to increase traceability for software development.</p>
<p>Refer to this link to understand<a id="_idIndexMarker1373"/> more about Azure DevOps billing: <a href="https://docs.microsoft.com/en-us/azure/devops/organizations/billing/overview">https://docs.microsoft.com/en-us/azure/devops/o<span id="_idTextAnchor1304"/>rganizations/billing/overview</a>.</p>
<h1 id="_idParaDest-406"><a id="_idTextAnchor1305"/>Ensuring traceability</h1>
<p>One of the advantages of Azure DevOps<a id="_idIndexMarker1374"/> over some of the other tools covered in this book is that it is a fully integrated suite of tools, each supporting specific DevOps processes. This end-to-end integration allows for detailed and lengthy traceability, from work described on the board to the related binaries be<a id="_idTextAnchor1306"/>ing deployed to an environment.</p>
<p>When working with a set of other tools that support only a part of the DevOps process, integrating them is often possible and, of course, this will result in some traceability. For example, when working with Jira and GitHub, it is possible to relate commits, pull requests, and other changes in GitHub back to work described in Jira. When picking merged changes up in Jenkins to build and deploy the product, there will also be traceability from Jenkins back to GitHub. However, there will be no direct visibility on which work item was completed with which Jenkins deployment.</p>
<p>The disadvantage of this is that a product owner who works in the Jira tool cannot see whether a completed user story is associated with a release already. They would have to visit multiple tools to find the answer to that question; in GitHub, they would have to find all commits relating to the story and then see whether those commits have been released already using Jenkins.</p>
<div>
<div class="IMG---Figure" id="_idContainer212">
<img alt="Figure 17.4 – Traceability options between tools  " height="312" src="image/B18655_17_04.jpg" width="1302"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.4 – Traceability options between tools </p>
<p>When working with Azure Boards, Repos, and Pipelines, this is different. When using all of the Azure DevOps<a id="_idIndexMarker1375"/> services, traceability is possible from story to deployment and the other way around. The following is an example that highlights how to see which commits were deployed for the first time to an environ<a id="_idTextAnchor1307"/>ment with a specific deploy:</p>
<div>
<div class="IMG---Figure" id="_idContainer213">
<img alt="Figure 17.5 – Viewing commits that are part of the pipeline run " height="640" src="image/B18655_17_05.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.5 – Viewing commits that are part of the pipeline run</p>
<p>Having this type of end-to-end traceability enables a number of questions to be answered quickly, including the following:</p>
<ul>
<li>Has work on this work item already started? (Branches and pull requests can be related to work items.)</li>
<li>Is this work already part of our nightly build? (Commits and build pipelines can be related to work items.)</li>
<li>Is this bug already fixed and is the solution available to our customers on ring two already? (Releases and environments show which new commits and work items were part of the latest deployment.)</li>
</ul>
<p class="callout-heading">Important Note</p>
<p class="callout">One thought that is particularly important to reinforce when talking about traceability is that it is not about blame. Traceability is not about finding out who made which mistake, but about finding out what the state of things is and how objects relate. As soon as traceability becomes the basis for blame, engineers will soon find ways to hide their work. This will result in more errors and less visibility, only making problems worse.</p>
<p>With the benefits<a id="_idIndexMarker1376"/> of traceability clear, let’s explore how consolid<a id="_idTextAnchor1308"/>ating tools can <a id="_idTextAnchor1309"/>help us to reap these benefits.</p>
<h2 id="_idParaDest-407"><a id="_idTextAnchor1310"/>Consolidating tools</h2>
<p>One trend that can be observed<a id="_idIndexMarker1377"/> in the market is that of traceability and DevOps products that extend their offerings to include more than just source control, pipelines, or deployments. Examples are GitHub and GitLab, which are adding new services. More integrated <strong class="bold">Application Lifecycle Management</strong> (<strong class="bold">ALM</strong>) or DevOps suites are emerging, but <a id="_idIndexMarker1378"/>Azure DevOps has been offering this for years now.</p>
<p>However, there are many companies where these integrated suites are not in place. Teams operate in different ecosystems, leading to different tool choices. Or maybe teams just have different preferences or started adopting DevOps practices at different points in time, with other tools to choose from. No matter the reason, there are many companies that have severa<a id="_idTextAnchor1311"/>l tools running for the same job.</p>
<p>Unfortunately, several drawbacks are associated with having disconnected tools or multiple tools for the same thing:</p>
<ul>
<li>Collaboration between teams is hindered if they are using different tools. No matter the personal preference of developers, it can prove to be a hindrance to productivity when one half of the organization is using Jenkins and the other half is using Azure Pipelines. By extension, switching teams or helping others out is severely impeded when they are using another tool.</li>
<li>When there are more tools, there are also more costs. Even when all of the tools are open source and free, there are still costs involved. These costs can consist of, for instance, support contracts or requests, training, or the time needed to investigate and overcome specific issues. The same holds for upgrades and maintenance. When there are more tools, the total costs increase.</li>
<li>Multiple distributed tools suggest multiple efforts for security and monitoring, which can lead to many issues and breaches.</li>
</ul>
<p>To overcome these<a id="_idIndexMarker1379"/> challenges, many large companies decide to standardize which tools are used, either completely or at least to some extent. As an alternative or intermediate solution, it is also possible to use integration be<a id="_idTextAnchor1312"/>tween tools as <a id="_idTextAnchor1313"/>a way of starting a consolidation.</p>
<h2 id="_idParaDest-408"><a id="_idTextAnchor1314"/>Standardizing tools</h2>
<p>To combat these drawbacks, most companies<a id="_idIndexMarker1380"/> accept one of two strategies:</p>
<ul>
<li>Centralized decision making to select one tool (for each DevOps area) for the whole company</li>
<li>Centralized adoption of a limited set of tools, out of which teams can choose which to adopt</li>
</ul>
<p>In <strong class="bold">complete centralization</strong>, one central team or department decides, on behalf of everyone, which<a id="_idIndexMarker1381"/> DevOps tools will be used within the organization. Once such a decision has been made and implemented, this reduces costs and makes it easier for engineers to assist other teams.</p>
<p>The downside is, of course, that one single tool is not necessarily the best choice for everyone, while for the organization as a whole, the selected tool might be the best—such standardization can <a id="_idTextAnchor1315"/>do damage in a number of edge cases.</p>
<p><strong class="bold">Limited centralization</strong> is used by some companies to prevent<a id="_idIndexMarker1382"/> this. Instead of just one tool, a group of tools is chosen as the company’s standard. Teams are now able to make their own choice out of two or three tools, depending on their specific needs. This limits many of the drawbacks of full decentralization, while not sacrificing the productivity of teams with very specific needs.</p>
<p>Adopting one of these two strategies<a id="_idIndexMarker1383"/> might mean that some existing tools will be deprecated or decommissioned altogether. This can be a slow and painful process, especially in large organizations where there are often<a id="_idTextAnchor1316"/> conflicting interests. There are many ways to go about this, but there are strategies <a id="_idTextAnchor1317"/>to make such a migration less painful.</p>
<h2 id="_idParaDest-409"><a id="_idTextAnchor1318"/>Migration strategies</h2>
<p>Reducing the number of DevOps tools in use often means one or more tools<a id="_idIndexMarker1384"/> must be decommissioned. This can be difficult since, often, these tools are used to implement governance and compliance, as required by laws and regulations. In practice, this means that one of two things can be done:</p>
<ul>
<li>Old tools are not completely decommissioned but just no longer used, to maintain the change history.</li>
<li>History must be migrated to the new tools as well before the old tools can be decommissioned.</li>
</ul>
<p>When choosing to do a migration, there are four ways to go about this:</p>
<ul>
<li>Azure DevOps Server to Azure DevOps Services migration</li>
<li>Big-bang migration</li>
<li>Synchronization</li>
<li>Rebuilding</li>
</ul>
<p class="callout-heading">Tip</p>
<p class="callout">Azure DevOps Server used to be called <strong class="bold">Team Foundation Server</strong> (<strong class="bold">TFS</strong>). Older versions of TFS<a id="_idIndexMarker1385"/> need to be upgraded to one of the latest versions of Azure DevOps Server before they can be imported into Azure DevOps Services. The import service always supports the latest two versions of Azure DevOps Server.</p>
<p>All four of these<a id="_idTextAnchor1319"/><a id="_idTextAnchor1320"/><a id="_idTextAnchor1321"/> are detailed in the following sections.</p>
<h3>Azure DevOps Server to Azure DevOps Services migration</h3>
<p>For organizations wanting <a id="_idIndexMarker1386"/>to move from working<a id="_idIndexMarker1387"/> with Azure DevOps Server to Azure DevOps Services, there is a high-fidelity migration service available. Every project collection that currently exists in the on-premises Azure DevOps Server environment can be migrated to an Azure DevOps organization using the Azure DevOps Server import service. All of the assets currently existing in the on-premises project collection will be migrated to Azure DevOps: work items, source control repositories, and build and release definitions.</p>
<p>The migration of a project collection consists of the following high-level steps:</p>
<ol>
<li value="1">Validating whether a project collection is ready for migration: This step does not make any changes but only checks whether all preconditions for a migration have been met.</li>
<li>Preparing the migration: In this step, a JSON file is generated that describes how the migration should be performed. A second file can also be supplied for linking on-premises identities to AAD identities to ensure that all of the history is still correctly linked to who made the change after the migration.</li>
<li>A dry run of the migration is done to verify that the import process will result in the expected outcomes.</li>
<li>The actual migration: In this step, the collection is taken offline, a <strong class="bold">Data-Tier Application Package</strong> (<strong class="bold">DACPAC</strong>) is generated from the project collection<a id="_idIndexMarker1388"/> database, the DACPAC and files from step 2 are uploaded, and the migration is initiated.</li>
<li>After the import, all assets need to be verified and, in specific scenarios, some post-import actions have to be taken.</li>
</ol>
<p>For using the migration<a id="_idIndexMarker1389"/> service, a comprehe<a id="_idTextAnchor1322"/>nsive guide<a id="_idIndexMarker1390"/> with checklists and step-by-step instructions is availa<a id="_idTextAnchor1323"/>ble and linked to at the end of this chapter.</p>
<h3>Big-bang migration</h3>
<p>The second possible strategy<a id="_idIndexMarker1391"/> is a big-bang migration. At some point, the old tool<a id="_idIndexMarker1392"/> is switched off, all data is migrated to the new tool, and the new tool is made available. It has a high potential for issues, and often, there is no turning back.<a id="_idTextAnchor1324"/> This is usually not a good migration strategy.</p>
<p>However, one situation where such an approach might make sense is the migration of source control. There are tools available for migrating from different sources to any type of hosted Git solution, including Azure DevOps. Source control also has the benefit that change history is built so deep into the sys<a id="_idTextAnchor1325"/>tem that migrating with histor<a id="_idTextAnchor1326"/>y is often easier than for other types of data.</p>
<h3>Synchronization</h3>
<p>Another strategy for migration is allowing<a id="_idIndexMarker1393"/> for a period of time where both tools<a id="_idIndexMarker1394"/> can be used at the same time.</p>
<p>One way to do this is by using a tool that can be used to sync between the old and the new tool. This can be either in one direction, from old to new, or in both directions. This way, an in-between situation is created where both tools can be in use at the same time. Every team can choose its own time for migration within a certain window. This avoids a forced migration window. Teams can also opt to use both tools next to each other for a while. This allows them to learn the new tool, while still being able to switch to the tool that they know if they are under pressure. After a period of transition, the old tool can be made read-only or decommissioned completely. This approach often works well for work-tracking systems. Between these systems, the concepts are <a id="_idTextAnchor1327"/>often very similar (epics, features, stories, and sprints),<a id="_idTextAnchor1328"/> which makes synchronization a feasible approach.</p>
<h3>Rebuilding</h3>
<p>A slightly different approach<a id="_idIndexMarker1395"/> is that of asking teams to rebuild in the new<a id="_idIndexMarker1396"/> tool. This approach also creates an in-parallel situation, but there is no automated migration or synchronization. Teams will have to redo their process or way of working in the new tool. Since this can take a while, the old tool will remain while teams are working on this. One situation where this is often a good approach is that of build and/or release pipelines.</p>
<p>No matter the strategy that has been chosen, in all cases, it helps to make sure that the new tool or tools are an improvement for the teams over the existing tools. This should improve performance, traceability, ease of use, or integration with other company tools. A positive vibe around any migration can improve the outcomes dramatically.</p>
<p>As an alternative to migrating<a id="_idIndexMarker1397"/> to a single tool, integrations between<a id="_idTextAnchor1329"/><a id="_idTextAnchor1330"/><a id="_idTextAnchor1331"/><a id="_idIndexMarker1398"/> tools can be used to bring existing tools together.</p>
<h3>Integrating tools</h3>
<p>As an alternative to replacing<a id="_idIndexMarker1399"/> no-longer-preferred tools, it is also possible to integrate them with the preferred tool. Especially when it has been decided to move to Azure DevOps, this can be a powerful strategy. In many of the previous chapters, for each topic, different tools were listed that integrate with Azure DevOps.</p>
<p>When pursuing end-to-end traceability, these integrations can be used as a means to bring tools closer together. Consider the following example.</p>
<p>An organization is using Azure DevOps for managing work items, hosting Git repositories, and executing build pipelines. Deployments are done using Octopus Deploy for historic reasons. Since a full migration is too costly, as an alternative, an integration strategy is chosen. Triggering Octopus Deploy not manually but automatically from Azure DevOps meets several goals:</p>
<ul>
<li>End-to-end automation is achieved.</li>
<li>Release management can now also be done in Azure DevOps, even though each deployment in Azure DevOps does nothing more than trigger Octopus Deploy.</li>
<li>Having release management in Azure DevOps now allows for end-to-end traceability.</li>
</ul>
<p>When consolidating tools, and reall<a id="_idTextAnchor1332"/>y all things regarding DevOps, one thing that y<a id="_idTextAnchor1333"/>ou must be ready to accept is that you are never done.</p>
<h1 id="_idParaDest-410"><a id="_idTextAnchor1334"/>Accepting there is no end state</h1>
<p>It is fair to expect that, at any point<a id="_idIndexMarker1400"/> in time, there will be one or more improvements that teams want to make to their applications, toolchains, or way of working. To cope with this, it is recommended to not keep changing everything all of the time.</p>
<p>Instead, try to implement<a id="_idIndexMarker1401"/> changes in batches or a series of well-defined steps. Also, note there is a natural order<a id="_idIndexMarker1402"/> to things. It is impossible to practice <strong class="bold">continuous deployment</strong> (<strong class="bold">CD</strong>) without having a proper <strong class="bold">continuous integration</strong> (<strong class="bold">CI</strong>) process first. Also, adopting <strong class="bold">infrastructure as code</strong> (<strong class="bold">IaC</strong>) will deliver the most value when a CD<a id="_idIndexMarker1403"/> process for application code is already in place. Next, automating governance and security measures works best when having infrastructure and configuration code is common practice. Once all of these practices have been implemented, new things will come <a id="_idTextAnchor1335"/>up on the radar—future improvements that may be necessary.</p>
<p>Besides this series of improvements, it is also important to realize that not every team is at the same place in this journey, not every team can move at the same pace, and that development is not always this linear.</p>
<p>But this does not mean that it is impossible to track and plan future changes and have learnings from one team applied to other teams as well. One oversimplified approach to tracking this can be a table, as shown here.</p>
<p>Here, we see the adoption of different DevOps practices or ideas among five teams. All teams are practicing CI. Some of them are practicing CD, while team 3 is still working on that <strong class="bold">work in progress </strong>(<strong class="bold">WIP</strong>) and the fifth team has not started yet. Finally, team 2 is already experimenting with IaC. Finally, as there is no end state, it is only a matter of time before the next practice or idea will pop up and a team will start experimenting:</p>
<div>
<div class="IMG---Figure" id="_idContainer214">
<img alt="" height="411" src="image/B18655_17_06.jpg" width="1650"/>
</div>
</div>
<p>If a table similar to the preceding <a id="_idIndexMarker1404"/>one is updated, evaluated, and expanded upon frequently, it helps to foster continuous learning and improve the way software is created and delivered. Learning and improving will become the standard and this will help to improve the delivery of value to end users. It also shows that adopting DevOps is never done.</p>
<p>It also provides the means to see which teams are at the forefront and which teams are following along. By giving teams who are in the lead more room for experimentation and knowledge sharing with other teams, organizations can encourage their leading teams to improve even more, while at the same time accelerating other teams as well.</p>
<p>And with this remark about the need to keep learning, experimenting, and pushing yourself, it is a great time to wrap t<a id="_idTextAnchor1336"/><a id="_idTextAnchor1337"/>his book up. Let’s recap this chapter in the next section.</p>
<h1 id="_idParaDest-411"><a id="_idTextAnchor1338"/>Summary</h1>
<p>In this chapter, you learned how to configure your Azure DevOps organization and how to create a layout for your products and teams. You learned what the implications are regarding the different configuration options and how to apply those. After that, you learned how you can use Azure DevOps to add traceability to your development process. You learned how to capture ideas and tasks in stories and tasks and how these can be traced all the way to deployment, and the other way around. The next thing you learned about is how to approach the consolidation of tools used within your organization and when to stop trying to consolidate tools. Finally, you learned that it is important to continuously keep improving.</p>
<p>With the things you learned in this chapter, you are now capable of setting up and configuring Azure DevOps for your team, teams, or organization. You can create a structure that fits your organization and start using it with just one or multiple teams. You are also able to slowly standardize your way of working and consolidate the teams on the same set of tools.</p>
<p>This completes the final chapter of this book. You can refer back to this book to help you prepare to take the AZ-400 exam, as most of the topics are along similar lines. However, in order to be well prepared for the exam, I recommend reading more about it from other sources as well and trying to get as much hands-on experience as you can. As a practice tool, the concluding chapter contains a mo<a id="_idTextAnchor1339"/><a id="_idTextAnchor1340"/>ck exam to help you prepare for the final exam.</p>
<p>Good luck!</p>
<h1 id="_idParaDest-412"><a id="_idTextAnchor1341"/>Questions</h1>
<p>As we conclude, here is a list of questions for you to test your knowledge regarding this chapter’s material. You will find the answers in the <em class="italic">Assessments</em> section of the <em class="italic">Appendix</em>:</p>
<ol>
<li value="1">True or false: All data stored in Azure DevOps by users is guaranteed to be contained within one region.</li>
<li>Reorder the following Azure DevOps concepts in such a way that each element acts as a container for the next concept in the list:<ul><li>Work item</li><li>Organization </li><li>Region</li><li>Project</li></ul></li>
<li>True or false: The general recommendation is to create a new project for every application that is developed by your organization.</li>
<li>Which two elements limit the actions any user can perform within Azure D<a id="_idTextAnchor1342"/>evOps?</li>
<li>What is the main benefit of using a single tool for ALM/DevOps as opposed to a suite of tools?</li>
</ol>
<h1 id="_idParaDest-413"><a id="_idTextAnchor1343"/>Activity</h1>
<p>Consider a scenario where your organization is planning to develop the next-generation customer relationship management online service. The engineering team is organized using departments, wherein each department is entrusted with the ownership of building products or services for an identified focus area. The following diagram depicts a summary of this:</p>
<div>
<div class="IMG---Figure" id="_idContainer215">
<img alt="Figure 17.6 – Organization structure " height="750" src="image/B18655_17_07.jpg" width="1650"/>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 17.6 – Organization structure</p>
<p>Within each department, there would be multiple feature teams (for example, infra, web, mobile, core API, and so on) working on these products or services. </p>
<p>For the scenario under evaluation, identify an approach for setting up your DevOps organization using projects, area paths, and teams. One of the considerations is that each department would prefer to have complete ownersh<a id="_idTextAnchor1344"/>ip of their DevOps components and the project life cycle.</p>
<h1 id="_idParaDest-414"><a id="_idTextAnchor1345"/>Further reading</h1>
<ul>
<li>More information on Azure DevOps projects and when to create more than one project can be found at <a href="https://docs.microsoft.com/en-us/azure/devops/organizations/projects/about-projects?view=azure-devops#when-to-add-another-project">https://docs.microsoft.com/en-us/azure/devops/organizations/projects/about-projects?view=azure-devops#when-to-add-another-project</a>.</li>
<li>More information about the Azure DevOps security model can be found at <a href="https://docs.microsoft.com/en-us/azure/devops/organizations/security">https://docs.microsoft.com/en-us/azure/devops/organizations/security</a>.</li>
<li>Up-to-date information on Azure DevOps pricing can be found at <a href="https://azure.microsoft.com/en-us/pricing/details/devops/azure-devops-services/">https://azure.microsoft.com/en-us/pricing/details/devops/azure-devops-services/</a>.</li>
<li>More information about the Azure DevOps Server import service can be found at <a href="https://docs.microsoft.com/en-us/azure/devops/migrate/migration-overview?view=azure-devopsviewFallbackFrom=vsts">https://docs.microsoft.com/en-us/azure/devops/migrate/migration-overview?view=azure-devopsviewFallbackFrom=vsts</a>.</li>
</ul>
</div>
</div></body></html>