<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer287">
			<h1 id="_idParaDest-341"><em class="italic"><a id="_idTextAnchor346"/></em><a href="B17124_14_Final_SK_ePub.xhtml#_idTextAnchor346"><em class="italic">Chapter 14</em></a>: Implementing Security in AWS</h1>
			<p>Architecting and implementing security solutions in your cloud journey is going to be of paramount importance if you are to convince businesses to migrate their on-premises workloads to the cloud. There are always going to be some businesses who just feel that managing all things IT within the confines of their data center is most secure. However, this is far from the truth, given that companies couldn't possibly afford to spend the kind of money that cloud providers such as AWS do to offer highly secure environments for their clients to work in. </p>
			<p>AWS enables businesses to design and run their applications in the cloud, with stringent security services and controls on offer. Businesses are encouraged to use the vast array of security tools from AWS and follow security guidelines and principles when architecting their applications for the cloud. The onus on designing and implementing security measures falls on both the customer and AWS in what we call the <strong class="bold">Shared Responsibility Model</strong>, which we will discuss in this chapter.</p>
			<p>AWS offers several security tools and services that can help clients protect data, enforce authentication and authorization protocols, secure network and application access, monitor and detect threats, and enforce compliance and privacy measures. </p>
			<p>In this chapter, we will cover the following topics:</p>
			<ul>
				<li>Understanding the Shared Responsibility Model</li>
				<li>Introduction to the AWS compliance programs and AWS Artifact</li>
				<li>AWS vulnerability scanning</li>
				<li>Overview of data encryption services on AWS</li>
				<li>Protecting cloud resources and applications with AWS WAF and AWS Shield</li>
				<li>Assessing and securing your EC2 instances with AWS Inspector</li>
				<li>Other AWS security services </li>
			</ul>
			<p>Let's start by understanding the principles behind the Shared Responsibility Model.</p>
			<h1 id="_idParaDest-342"><a id="_idTextAnchor347"/>Understanding the Shared Responsibility Model</h1>
			<p>AWS offers public cloud services that allow customers to build isolated environments within the cloud <a id="_idIndexMarker1445"/>platform. AWS manages and secures all the underlying infrastructure such as network, storage, and compute services, as well as host hypervisor software, among others. AWS also takes care of physical security, which includes access to its data centers, where your workloads are hosted. AWS gives the customer access to those infrastructure components to build their cloud applications and solutions. One customer's approach to designing an application architecture will be different from another and to facilitate different requirements, AWS shares security and compliance responsibilities with the customer. </p>
			<p>While the customer can rest assured that all the underlying physical infrastructure, access to data center buildings, and host hypervisor systems are secured and stringently managed by AWS, how their applications are designed, built, and deployed on AWS is the customer's responsibility. </p>
			<p>This is known as the <strong class="bold">AWS Shared Responsibility Model</strong>. You must understand your responsibilities as a customer to ensure that your applications are highly secure and meet any compliance or regulatory requirements. The Shared Responsibility Model is based on the concept of <em class="italic">security of the cloud</em>, which is AWS's responsibility, and <em class="italic">security in the cloud</em>, which is the customer's responsibility. The following diagram illustrates a basic understanding of the demarcation of responsibility between AWS and the customer: </p>
			<div>
				<div id="_idContainer272" class="IMG---Figure">
					<img src="Images/B17124_14_01.jpg" alt="Figure 14.1 – AWS Shared Responsibility Model&#13;&#10;" width="1085" height="570"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.1 – AWS Shared Responsibility Model</p>
			<p>Next, let's understand <a id="_idIndexMarker1446"/>the responsibilities of AWS and the customer in more detail.</p>
			<h2 id="_idParaDest-343"><a id="_idTextAnchor348"/>Security of the cloud </h2>
			<p>AWS is responsible for the <em class="italic">cloud</em> itself. It will enforce strict security protocols and measures for the <a id="_idIndexMarker1447"/>underlying global infrastructure – its data centers, which are located in Availability Zones within Regions, and its points of presence infrastructure, which are its <strong class="bold">edge</strong> locations. AWS is also responsible <a id="_idIndexMarker1448"/>for the underlying compute, storage, network, and database services, among others. This includes the <strong class="bold">hypervisor</strong> software that's used to enable customers to launch their EC2 instances.</p>
			<h2 id="_idParaDest-344"><a id="_idTextAnchor349"/>Security in the cloud</h2>
			<p>The customer is <a id="_idIndexMarker1449"/>responsible for security <em class="italic">in</em> the cloud. At a simple level, this refers to the fact that the customer is responsible for how their applications are configured, as well as how their data is managed and accessed. The customer's responsibility varies based on the type of service that the customer chooses. Because different services fall within different cloud computing models (IaaS, PaaS, and SaaS), the level of responsibility on the customer will differ. For example, Amazon EC2 falls within the IaaS computing model. Here, the customer is responsible for every aspect of security from the EC2 instance's guest operating <a id="_idIndexMarker1450"/>system and above. The customer will need to ensure that the EC2 instance is patched, has antivirus software installed, and has properly configured security groups to ensure only the required network traffic is allowed into the instance. Any applications that are installed on the EC2 instance also need to be maintained and secured, which is the customer's responsibility. </p>
			<p>This is in contrast to a managed service such as Amazon RDS, where the underlying database instance and attached storage are abstracted from the customer. The maintenance and how the database software is patched is also AWS's responsibility. The customer can only configure specific service-level components, including creating security groups to enable connections to the database on specific ports and from specific sources, enabling multi-AZ, and defining backup retention periods. However, the customer does not need to patch or install antivirus software on the database instance itself or determine where to store the backups. </p>
			<p>The following diagram illustrates the level of responsibility that a customer might have in enforcing security measures, depending on the cloud computing model used:</p>
			<div>
				<div id="_idContainer273" class="IMG---Figure">
					<img src="Images/B17124_14_02.jpg" alt="Figure 14.2 – The customer's responsibility varies, depending on the type of cloud computing model&#13;&#10;" width="927" height="488"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.2 – The customer's responsibility varies, depending on the type of cloud computing model</p>
			<p>Where possible, AWS always recommends considering opting for managed versions of their products and <a id="_idIndexMarker1451"/>services rather than adopting a data center mindset management approach. For example, if you require a MySQL database solution, it makes sense to opt for Amazon RDS rather than to provision EC2 instances and deploy the MySQL database software on those instances. By hosting your databases on EC2 instances, you become solely responsible for all the management and maintenance tasks associated with the upkeep of the database solution. </p>
			<p>Ultimately, you need to take full responsibility for the applications and data you put in the cloud to ensure that your solutions are secure and reliable. </p>
			<p>In this section, we discussed the importance of the AWS Shared Responsibility Model and how you can share security responsibility with AWS for the applications and workloads that you deploy in the cloud. In the next section, we will quickly review some key compliance programs that AWS adheres to, which can help you fulfill your regulatory requirements. </p>
			<h1 id="_idParaDest-345"><a id="_idTextAnchor350"/>Introduction to the AWS compliance programs and AWS Artifact</h1>
			<p>Depending on the nature of your business and the applications you plan to host on AWS, you need to <a id="_idIndexMarker1452"/>ensure that you meet any compliance or <a id="_idIndexMarker1453"/>regulatory requirements. For example, if you plan to process <a id="_idIndexMarker1454"/>and store credit card information, you must <a id="_idIndexMarker1455"/>ensure that your application meets the <strong class="bold">Payment Card Industry Data Security Standard</strong> (<strong class="bold">PCI DSS</strong>). This allows <a id="_idIndexMarker1456"/>you to store, process, or transmit <strong class="bold">cardholder data</strong> (<strong class="bold">CHD</strong>) or <strong class="bold">sensitive authentication data</strong> (<strong class="bold">SAD</strong>).</p>
			<p>Similarly, if you are in the health care industry and based in the US, you are subject to the US<strong class="bold"> Health Insurance Portability and Accountability Act </strong>(<strong class="bold">HIPAA</strong>) of 1996. This means that in addition to various business processes, any applications that are hosted on AWS must <a id="_idIndexMarker1457"/>also be aligned with HIPAA compliance with regards to how <strong class="bold">personal health information</strong> (<strong class="bold">PHI</strong>) is processed and maintained.</p>
			<p>In this example, AWS needs to ensure that its services are aligned with HIPAA compliance if its healthcare customers are to consume those services for their applications. Let's take the example of Amazon Athena, which, as discussed in <a href="B17124_11_Final_SK_ePub.xhtml#_idTextAnchor276"><em class="italic">Chapter 11</em></a>, <em class="italic">Analytics on AWS</em>, is an interactive query service that enables you to analyze data held directly in Amazon S3 using standard SQL. AWS confirms that Amazon Athena can be used to process data containing PHI. Features such as encrypting data in transit between Amazon Athena and Amazon S3 are provided by default. Furthermore, Amazon Athena uses AWS CloudTrail to log all API calls so that an audit trail is maintained. The customer is required to ensure that they meet HIPAA compliance by enabling encryption at rest while the data resides in Amazon S3. The customer can also use server-side encryption to encrypt query results from and within Amazon Athena. Again, this feature is offered by AWS for the customer to configure. </p>
			<p>Ultimately, compliance is a shared responsibility between AWS and the customer. As another example, AWS manages and controls the components of the host operating system and virtualization layer down to the physical infrastructure for Amazon EC2. The customer is responsible for the guest operating system (which will include patching, performing security updates, and more), as well as any applications that have been installed and their security group configurations.</p>
			<p>Next, let's learn where customers can obtain information that confirms that AWS meets various compliance requirements. </p>
			<h2 id="_idParaDest-346"><a id="_idTextAnchor351"/>About AWS Artifact </h2>
			<p>Customers have access to various compliance reports to confirm whether the services offered by AWS meet their <a id="_idIndexMarker1458"/>specific and regulatory requirements. These reports are <a id="_idIndexMarker1459"/>available via a portal on AWS known as <strong class="bold">AWS Artifact</strong>. These reports include AWS <strong class="bold">System and Organization Controls</strong> (<strong class="bold">SOC</strong>) reports, <strong class="bold">Payment Card Industry</strong> (<strong class="bold">PCI</strong>) reports, and certifications from accreditation <a id="_idIndexMarker1460"/>bodies across different Regions.</p>
			<p>Customers can download these reports and submit security and compliance documents to their auditors. These can be used to demonstrate how various AWS services and their underlying infrastructure fulfill the security and compliance requirements that the customer is consuming.</p>
			<p>These <strong class="bold">artifacts</strong> can also be used by the customers to evaluate their application architecture and cloud configurations and assess the effectiveness of their business's internal controls. </p>
			<p>Finally, customers can review, accept, and track the status of various AWS agreements such as the Business Associate Addendum, where the customer is subject to HIPAA guidelines to ensure that PHI information is properly safeguarded. If you have multiple AWS accounts, you can accept agreements on behalf of those accounts and manage them with your AWS organizations. </p>
			<p>In this section, we discussed AWS compliant and the Artifact service, which allows you to gain confirmation from AWS on how they meet compliance requirements. AWS Artifact is your single source of truth and gives you access to various compliance documents such as AWS ISO certifications, PCI and SOC reports, and more.</p>
			<p>In the next section, we will discuss how AWS allows you to proactively test your cloud deployments for vulnerabilities and protects your applications in the cloud.</p>
			<h1 id="_idParaDest-347"><a id="_idTextAnchor352"/>AWS vulnerability scanning</h1>
			<p>As an AWS customer, you are <a id="_idIndexMarker1461"/>going to be consuming various services to build and deploy your cloud applications. You want to make sure that your cloud solutions are highly secure and protected. To that end, you will follow key guidelines and industry best practices while implementing security controls and procedures at the different levels of your cloud ecosystem.</p>
			<p>But how you can confirm that the level of protection you have implemented is sufficient and whether the controls you have put in place work?</p>
			<p>AWS allows its customers to conduct <strong class="bold">penetration testing</strong> on their workloads in the AWS cloud. Also known as <em class="italic">pen testing</em>, this is a simulated cyber-attack against your computer systems <a id="_idIndexMarker1462"/>to check for vulnerabilities. This is usually conducted by your internal or appointed security team. </p>
			<p>As a customer, you need to<a id="_idIndexMarker1463"/> follow the service policy for penetration testing, which includes permitted <a id="_idIndexMarker1464"/>services and prohibited activities. For example, you are <a id="_idIndexMarker1465"/>prohibited from using any tools to perform <strong class="bold">denial of service</strong> (<strong class="bold">DoS</strong>) attacks or simulations, even if it is against your AWS assets. <strong class="bold">Distributed denial of service</strong> (<strong class="bold">DDoS</strong>) simulation testing can only be carried out by an <strong class="bold">AWS Partner Network</strong> (<strong class="bold">APN</strong>) partner that <a id="_idIndexMarker1466"/>has been pre-approved by AWS to conduct DDoS simulation tests.</p>
			<p>The following table gives you a quick view of some of the permitted services you can run tests against, as well as their prohibited activities:</p>
			<div>
				<div id="_idContainer274" class="IMG---Figure">
					<img src="Images/Table_14.1.jpg" alt="Table 14.1 – AWS permitted services and prohibitive activities for penetration testing&#13;&#10;" width="1623" height="606"/>
				</div>
			</div>
			<p class="figure-caption">Table 14.1 – AWS permitted services and prohibitive activities for penetration testing</p>
			<p>You can also perform <strong class="bold">network stress testing</strong> and <a id="_idIndexMarker1467"/>other simulated events where you will need to request authorization from <a id="_idIndexMarker1468"/>AWS by filling in a simulated events form. </p>
			<p>In this section, we provided a quick overview of how customers can perform penetration testing against their workloads on AWS. In the next section, we will provide a quick overview of encryption services on AWS.</p>
			<h1 id="_idParaDest-348"><a id="_idTextAnchor353"/>Overview of data encryption services on AWS</h1>
			<p>Encrypting your data is a critical step in ensuring that you protect its integrity and avoid data being <a id="_idIndexMarker1469"/>readable by unauthorized parties. AWS enables you to encrypt your data both in transit (while it is being transmitted from a source to a destination) and at rest (while it resides on a disk).</p>
			<p>To protect data in transit, you must transmit the data using <strong class="bold">Secure Socket Layer/Transport Layer Security</strong> (<strong class="bold">SSL/TLS</strong>) or some form of client-side encryption. SSL/TLS requires <a id="_idIndexMarker1470"/>you to make use of certificates, which are used to encrypt and decrypt the data. </p>
			<p>To protect data at rest, you must create and use encryption keys to encrypt and decrypt your data. Encryption keys are data files containing a long series of numbers or letters that is used by <a id="_idIndexMarker1471"/>a cryptographic algorithm to encode <a id="_idIndexMarker1472"/>and decode data. Examples of algorithms you may have heard of include <strong class="bold">Triple DES</strong> or <strong class="bold">Advanced Encryption Standard</strong> (<strong class="bold">AES-256</strong>) bit encryption.</p>
			<p>An encryption key can either be <strong class="bold">symmetric</strong> (where you use the same key to encrypt and decrypt the data) or <strong class="bold">asymmetric</strong>, which is a public/private key combination. Here, you use the <a id="_idIndexMarker1473"/>public key to encrypt the data, and only users or applications that have access to the private key can decrypt the data.</p>
			<p>AWS takes away a lot of the overhead of creating and managing encryption keys with its <strong class="bold">Key Management Service</strong> (<strong class="bold">KMS</strong>). You can use KMS to add encryption services for your <a id="_idIndexMarker1474"/>data that's held in various AWS services, including Amazon EBS volumes, Amazon RDS, Amazon S3, and others. </p>
			<p>With AWS KMS, you create and manage <strong class="bold">customer master keys</strong> (<strong class="bold">CMKs</strong>), which are stored within the KMS service and <a id="_idIndexMarker1475"/>used to encrypt and decrypt your data. AWS KMS will create the <em class="italic">material</em> that's used to generate these CMKs. A key material is a secret string of bits that's used in a cryptographic algorithm. With KMS, this material cannot be extracted, exported, or viewed in any way. You can also configure multi-Region CMKs, which let you encrypt data in one AWS Region and decrypt it in a different AWS Region. </p>
			<p>There are two types of CMKs, as follows:</p>
			<ul>
				<li><strong class="bold">Customer-managed CMKs</strong>: These are CMKs that you create, own, and manage. You can <a id="_idIndexMarker1476"/>rotate their cryptographic material, add tags, specify key policies and create aliases.</li>
				<li><strong class="bold">AWS-managed CMKs</strong>: These are CMKs that are created, managed, and used on your behalf by an AWS service <a id="_idIndexMarker1477"/>that is integrated with AWS KMS. You cannot manage these CMKs, rotate them, or change their key policies.</li>
			</ul>
			<p>AWS KMS also comes with additional features, including a built-in auditing feature since it integrates with Amazon CloudTrail. Using AWS KMS, you can record and track all API requests, including key management actions and the usage of your keys.</p>
			<p>With Amazon S3, additional encryption options are offered. We will look at this next. </p>
			<h2 id="_idParaDest-349"><a id="_idTextAnchor354"/>Amazon S3 encryption</h2>
			<p>To protect data at <a id="_idIndexMarker1478"/>rest in Amazon S3, you have the following types of encryptions:</p>
			<ul>
				<li><strong class="bold">Server-side encryption</strong>: Amazon S3 will encrypt your data before saving it to disk and decrypt <a id="_idIndexMarker1479"/>it when you attempt to access your data. </li>
				<li><strong class="bold">Client-side encryption</strong>: You encrypt the data on the client side before uploading <a id="_idIndexMarker1480"/>it to Amazon S3. With client-side encryption, you manage the encryption process, keys, and tools.</li>
			</ul>
			<p>Concerning server-side encryption, Amazon S3 will encrypt your data at the object level as it writes it to disks, and then decrypt it when you access those objects. This process is transparent to the user as AWS does all the heavy lifting for you. There are three options available with server-side encryption:</p>
			<ul>
				<li><strong class="bold">Server-Side Encryption with Amazon S3-Managed Keys</strong> (<strong class="bold">SSE-S3</strong>): Amazon S3 <a id="_idIndexMarker1481"/>encrypts each object with a unique key and then encrypts the key with a <em class="italic">master key</em>. It uses AES-256 to encrypt your data. Key rotation is managed by AWS as a backend process.</li>
				<li><strong class="bold">Server-Side Encryption with CMKs Stored in AWS KMS</strong> (<strong class="bold">SSE-KMS</strong>): This is similar to SSE-S3 but with additional features such as separate permission requirements for using the CMK and the ability to provision an <a id="_idIndexMarker1482"/>audit trail that shows when your CMK was used and by whom. As a customer, you can create and manage these CMKs or use AWS-managed CMKs that are unique to your account, service, and Region.</li>
				<li><strong class="bold">Server-Side Encryption with Customer-Provided Keys</strong> (<strong class="bold">SSE-C</strong>): You manage <a id="_idIndexMarker1483"/>the encryption keys and AWS will manage the process of encrypting and decrypting objects using your keys. </li>
			</ul>
			<p>As well as protecting data at rest, you can protect your data in transit using SSL/TLS, as we discussed previously.</p>
			<p>AWS KMS is backed by the <strong class="bold">Federation Information Processing Standard</strong> (<strong class="bold">FIPS</strong>) 140-2 <strong class="bold">hardware security modules</strong> (<strong class="bold">HSMs</strong>), which KMS manages. FIPS 140-2 is a security accreditation program for validating cryptographic modules. AWS KMS <a id="_idIndexMarker1484"/>uses HSMs, which are multi-tenanted. If you must host your own isolated HSMs for additional regulatory requirements, then you should consider using <strong class="bold">AWS CloudHSM</strong>, which we will discuss briefly next.</p>
			<h2 id="_idParaDest-350"><a id="_idTextAnchor355"/>AWS CloudHSM</h2>
			<p>AWS CloudHSM is a dedicated <strong class="bold">hardware security module</strong> (<strong class="bold">HSM</strong>) that allows you to generate and manage <a id="_idIndexMarker1485"/>encryption keys in the cloud. You are provided with <a id="_idIndexMarker1486"/>dedicated FIPS 140-2 Level 3-validated HSM devices. These are placed in your VPC and are fully managed for you by AWS. This is particularly useful if you must manage your own cryptographic keys. You are responsible for generating, storing, importing, exporting, and managing your cryptographic keys as AWS does not have access to your keys. You can use CloudHSM for both symmetric and asymmetric key pairs. </p>
			<p>AWS CloudHSM <a id="_idIndexMarker1487"/>also lets you integrate with your applications <a id="_idIndexMarker1488"/>using industry-standard APIs such as the PKCS#11, <strong class="bold">Java Cryptography Extension</strong> (<strong class="bold">JCE</strong>), and <strong class="bold">Microsoft CryptoNG</strong> (<strong class="bold">CNG</strong>) libraries.</p>
			<p>In this section, you were provided with an overview of the encryption services in AWS. We discussed AWS KMS, which allows you to also create and <a id="_idIndexMarker1489"/>manage your CMKs to encrypt and decrypt data. AWS KMS also offers auditing capabilities, which allow you to enforce compliance requirements. </p>
			<p>We also looked at the <a id="_idIndexMarker1490"/>different encryption options available for Amazon S3. To implement <a id="_idIndexMarker1491"/>data at rest with Amazon S3, you need to decide on either <strong class="bold">server-side encryption</strong> or <strong class="bold">client-side encryption</strong>. With <strong class="bold">server-side encryption</strong>, you can either implement <strong class="bold">SS3-S3</strong>, which uses Amazon S3-managed keys, SS3-KMS, which enables you to create CMKs and offers an audit trail of when the keys are used and by whom, or SS3-C, which is where you manage the encryption keys as a customer.</p>
			<p>Finally, you learned about the AWS CloudHSM service, which offers dedicated HSMs to enable you to <a id="_idIndexMarker1492"/>generate and manage keys that are isolated from other AWS customers. CloudHSM devices are FIPS 140-2 Level 3 compliant and useful if you need to fulfill extra regulatory requirements.</p>
			<p>In the next section, we will look at a couple of AWS security firewall solutions, namely <strong class="bold">AWS Web Application Firewall</strong> (<strong class="bold">AWS WAF</strong>) and AWS Shield.</p>
			<h1 id="_idParaDest-351"><a id="_idTextAnchor356"/>Protecting cloud resources and applications with AWS WAF and AWS Shield </h1>
			<p>AWS offers various security tools and services to help protect your cloud workloads from attacks. We will look at two of these services in this section – AWS WAF and AWS Shield.</p>
			<h2 id="_idParaDest-352"><a id="_idTextAnchor357"/>Protecting applications with AWS WAF</h2>
			<p>AWS WAF is a web application firewall designed to protect any applications that are made available via Amazon CloudFront, the Amazon API <a id="_idIndexMarker1493"/>Gateway REST API, application load balancers, or the AWS AppSync GraphQL API. </p>
			<p>AWS WAF can help protect applications at layer 7 of the <strong class="bold">Open Systems Interconnection</strong> (<strong class="bold">OSI</strong>) model, which helps you monitor and protect traffic over HTTP and HTTPS. This allows <a id="_idIndexMarker1494"/>you to protect your content from <a id="_idIndexMarker1495"/>common <a id="_idIndexMarker1496"/>web exploits, such as <strong class="bold">SQL injection</strong> and <strong class="bold">cross-site scripting</strong>.</p>
			<p>You use AWS WAF to control access to your content by specifying <strong class="bold">web access control lists</strong> (<strong class="bold">web ACLs</strong>). You define rules that specify an inspection criterion with an action <a id="_idIndexMarker1497"/>to take if a web request meets the criteria.</p>
			<p>When using AWS WAF, you are charged based on the web ACLs and rule groups you create and for the number of HTTP(S) requests that AWS WAF inspects.</p>
			<p>Next, we will look at the AWS Shield service.</p>
			<h2 id="_idParaDest-353"><a id="_idTextAnchor358"/>Protecting network attacks with AWS Shield </h2>
			<p><strong class="bold">AWS Shield</strong> is a fully managed <a id="_idIndexMarker1498"/>service that offers protection against <strong class="bold">DDoS</strong> attacks. This is a type of attack where the perpetrator <a id="_idIndexMarker1499"/>attempts to overwhelm your network <a id="_idIndexMarker1500"/>and servers using a flood of internet <a id="_idIndexMarker1501"/>traffic, preventing authorized users from accessing your service.</p>
			<p>AWS offers two tiers of the Shield service, as follows:</p>
			<ul>
				<li><strong class="bold">AWS Shield Standard</strong>: This is available at no additional cost for AWS customers and protects against common network and transport layer DDoS attacks on your <a id="_idIndexMarker1502"/>websites and applications. AWS Shield Standard can be used with Amazon CloudFront and Route 53 to provide layered protection against all known infrastructure attacks.</li>
				<li><strong class="bold">AWS Shield Advanced</strong>: This provides additional protection against attacks on your EC2 instances, elastic load balancers, CloudFront, Global Accelerator, and Route 53 resources. The service <a id="_idIndexMarker1503"/>also offers detection and real-time visibility into attacks, allowing you to protect against large and sophisticated DDoS attacks. In addition, AWS Shield Advanced gives you access to the AWS <strong class="bold">Shield Response Team</strong> (<strong class="bold">SRT</strong>) 24/7 to assist you in handling such attacks. AWS Shield is <a id="_idIndexMarker1504"/>a chargeable service at the rate of $3,000 per <strong class="bold">AWS organization</strong> and on a per-GB fee on data transfer out, depending <a id="_idIndexMarker1505"/>on the service being used, such as elastic load balancers or CloudFront, Route 53, Global Accelerator, and elastic IPs.<p class="callout-heading">Important Note </p><p class="callout">The cost of AWS Shield Advanced includes the charges of AWS WAF and some other services.</p></li>
			</ul>
			<p>In this section, we discussed two key firewall tools offered by AWS. AWS WAF protects your applications from common web exploits at layer 7 of the OSI model, whereas AWS Shield offers protection against DDoS attacks.</p>
			<p>In the next section, we will look at the AWS Inspector service, which can be used to protect your EC2 instances.</p>
			<h2 id="_idParaDest-354"><a id="_idTextAnchor359"/>Assessing and securing your EC2 instances with AWS Inspector</h2>
			<p><strong class="bold">AWS Inspector</strong> is a security tool that's used to assess the network accessibility and application <a id="_idIndexMarker1506"/>security state of your EC2 instances. You can use AWS Inspector to detect open network ports, any root logins being enabled, and <a id="_idIndexMarker1507"/>vulnerable software versions on your EC2 instances. You can then take appropriate action, as per the best practices. </p>
			<p>The AWS Inspector service uses <em class="italic">rules packages</em>, which are a collection of security checks that are used in your <em class="italic">assessment runs</em>. There are two types of rules packages, as follows:</p>
			<ul>
				<li><strong class="bold">Network reachability rules package</strong>: Designed to check for access to your EC2 instances from the internet and identify open ports.</li>
				<li><strong class="bold">Host assessment rules packages</strong>: Designed to check for software vulnerabilities <a id="_idIndexMarker1508"/>and insecure configurations, including <strong class="bold">Common Vulnerabilities and Exposures</strong> (<strong class="bold">CVE</strong>), <strong class="bold">Center for Internet Security</strong> (<strong class="bold">CIS</strong>), as well as <a id="_idIndexMarker1509"/>other security best practices. </li>
			</ul>
			<p>If you need to perform a host assessment to get a detailed analysis of your host, application configurations, and filesystem access, you will need to install the <strong class="bold">AWS Inspector agent</strong>. The AWS Inspector agent will collect telemetry data formatted as JSON documents <a id="_idIndexMarker1510"/>from its assessment of your EC2 instances and store it in a managed S3 bucket for up to 30 days. </p>
			<p>These findings can then be viewed in the AWS Inspector dashboard, as per the following screenshot:</p>
			<div>
				<div id="_idContainer275" class="IMG---Figure">
					<img src="Images/B17124_14_03.jpg" alt="Figure 14.3 – AWS Inspector dashboard&#13;&#10;" width="1423" height="465"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.3 – AWS Inspector dashboard</p>
			<p>You can then <a id="_idIndexMarker1511"/>drill down into these findings <a id="_idIndexMarker1512"/>and see specific recommendations for your EC2 instances. The following screenshot shows findings stating that automatic Windows updates should be enabled: </p>
			<div>
				<div id="_idContainer276" class="IMG---Figure">
					<img src="Images/B17124_14_04.jpg" alt="Figure 14.4 – AWS Inspector – Findings&#13;&#10;" width="1257" height="359"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.4 – AWS Inspector – Findings</p>
			<p>You can install the Amazon Inspector agent using the <strong class="bold">Systems Manager Run Command</strong> on multiple instances, manually <a id="_idIndexMarker1513"/>install it on each EC2 instance, or configure an AMI that's prebaked with the agent installed. </p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">If you are just using AWS Inspector to check for network ports that can be reached from outside the VPC, you do not need to install the AWS Inspector agent.</p>
			<p>In this section, you learned about the AWS Inspector service, which allows you to perform an automatic security assessment of your EC2 instances to identify exposure, vulnerabilities, and deviations from best practices.</p>
			<p>In the next section, we will discuss additional security services offered by AWS.</p>
			<h1 id="_idParaDest-355"><a id="_idTextAnchor360"/>Other AWS security services</h1>
			<p>In this section, we will examine a few additional security tools and services on AWS. We will start <a id="_idIndexMarker1514"/>by looking at Amazon Macie, which recognizes sensitive data such as <strong class="bold">personally identifiable information</strong> (<strong class="bold">PII</strong>).</p>
			<h2 id="_idParaDest-356"><a id="_idTextAnchor361"/>Amazon Macie</h2>
			<p>Amazon Macie uses machine learning and pattern matching techniques to detect and alert you to <a id="_idIndexMarker1515"/>any sensitive data, such as PII, stored in Amazon S3. You can also use Macie to send alerts on S3 buckets that are unencrypted, publicly accessible, and shared with other AWS accounts outside of your AWS organizations.</p>
			<p>AWS Macie will monitor how your data is accessed in Amazon S3, identify any anomalies, and generate alerts if it detects unauthorized access. AWS Macie also provides you with a dashboard that provides a summary of all its findings, as per the following screenshot:</p>
			<div>
				<div id="_idContainer277" class="IMG---Figure">
					<img src="Images/B17124_14_05.jpg" alt="Figure 14.5 – Amazon Macie – Summary &#13;&#10;" width="1570" height="577"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.5 – Amazon Macie – Summary </p>
			<p>Next, we will look at AWS GuardDuty, which is designed to detect malicious activity and unauthorized behavior against your AWS accounts.</p>
			<h2 id="_idParaDest-357"><a id="_idTextAnchor362"/>AWS GuardDuty</h2>
			<p><strong class="bold">AWS GuardDuty</strong> is a threat detection service that can analyze and detect malicious activity against your AWS accounts <a id="_idIndexMarker1516"/>and application workloads. The service uses various intelligence feeds to be aware of malicious IP addresses and domains. It also uses machine learning to help detect anomalies by analyzing data from your CloudTrail event logs, Amazon VPC Flow Logs, and DNS logs. </p>
			<p>AWS GuardDuty can detect the use of exposed credentials, any communication with malicious IP addresses and domains, as well as irregular activities carried out in your AWS account. This includes EC2 instances being launched in Regions you do not normally work in. </p>
			<p>Some of the threats that AWS GuardDuty can detect include EC2 instance compromises, such as those associated with cryptocurrency mining, or S3 bucket compromises, such as unusual S3 API activity from a remote host or unauthorized access from known malicious IP addresses.</p>
			<p>Pricing for Amazon GuardDuty is based on the number of CloudTrail events and the volume of VPC Flow Logs and DNS log data to be analyzed. There is a free 30-day trial available for the service.</p>
			<p>Next, we will look at another service, Amazon Detective, that can help identify the root cause of potential security issues or suspicious activities.</p>
			<h2 id="_idParaDest-358"><a id="_idTextAnchor363"/>Amazon Detective</h2>
			<p>Several different AWS services can be used to identify potential security issues, such as the previously <a id="_idIndexMarker1517"/>discussed Amazon Macie and Amazon GuardDuty. However, if you are trying to determine the root cause of those security findings, you would generally need to process vast amounts of logs and use an <strong class="bold">Extract, Transform, and Load</strong> (<strong class="bold">ETL</strong>) solution to perform <a id="_idIndexMarker1518"/>the necessary deep-dive analysis required.</p>
			<p><strong class="bold">Amazon Detective</strong> can extract time-based events such as logins, network traffic from AWS CloudTrail and Amazon VPC Flow Logs, as well as ingesting your GuardDuty findings. Amazon Detective then helps by producing visualizations using the information that's been ingested, which can help you identify resource behaviors over time and interactions <a id="_idIndexMarker1519"/>between those resources, ultimately assisting in identifying the root cause of your security issues.</p>
			<p>This pricing is based on the volume of data that's ingested from AWS CloudTrail logs, Amazon VPC Flow Logs, and Amazon GuardDuty findings. Amazon Detective is available as a 30-day free trial.</p>
			<p>Next, we will look at the <strong class="bold">AWS Certificate Manager</strong> (<strong class="bold">ACM</strong>) service, which enables you to create, store, and renew SSL/TLS certificates.</p>
			<h2 id="_idParaDest-359"><a id="_idTextAnchor364"/>AWS Certificate Manager</h2>
			<p>To protect your AWS resources with secure encryption and verify the identity of websites over <a id="_idIndexMarker1520"/>the internet, you need to provision and manage <strong class="bold">SSL/TSL</strong> certificates. Certificates are issued <a id="_idIndexMarker1521"/>by a <strong class="bold">certificate authority</strong> (<strong class="bold">CA</strong>), which is a <a id="_idIndexMarker1522"/>trustworthy third party that will authenticate both ends of the transaction.</p>
			<p><strong class="bold">ACM</strong> enables you to create, manage, and deploy your SSL/TLS certificates for use with AWS resources and is integrated with several AWS services that need to use SSL/TLS connectivity for secure communications. You can use ACM to issue and manage certificates for your elastic load balancers, Amazon CloudFront distributions,and APIs on an API gateway. AWS ACM can also manage all your certificate renewals. </p>
			<p>For ACM-integrated services, there is no charge for provisioning certificates for your elastic load balancers and API gateways. If you need private certificates, <strong class="bold">ACM Private CA</strong> lets you pay monthly for <a id="_idIndexMarker1523"/>the services and certificates you create.</p>
			<p>Next, we will look at the AWS Secrets Manager service, which protects the secrets you need to access applications, databases, and other AWS services.</p>
			<h2 id="_idParaDest-360"><a id="_idTextAnchor365"/>AWS Secrets Manager</h2>
			<p>In <a href="B17124_13_Final_SK_ePub.xhtml#_idTextAnchor317"><em class="italic">Chapter 13</em></a>, <em class="italic">Management and Governance on AWS</em>, we looked at the <strong class="bold">AWS Systems Manager</strong> (<strong class="bold">ASM</strong>) Parameter Store service. This service can be used to securely store parameter values <a id="_idIndexMarker1524"/>such as your database username and passwords, rather than you having to hardcode this information in your application. Storing such sensitive information in your application code is not a best practice and carries an administrative overhead. With the SSM Parameter Store, your applications can retrieve the necessary parameters to make calls to the database. </p>
			<p>However, the service does have some limitations, and this is where AWS Secrets Manager comes to the rescue. In addition to allowing you to store <em class="italic">secrets information</em>, the service also makes <a id="_idIndexMarker1525"/>it easy to manage and rotate those database credentials. AWS Secrets Manager offers native support for rotating credentials for databases hosted on Amazon RDS, Amazon DocumentDB, and clusters hosted on Amazon Redshift. This rotation can be automated via a schedule, which adds another layer of security. Furthermore, you can use AWS Secrets Manager to rotate other secrets by modifying sample Lambda functions. This can be used, for example, to rotate OAuth refresh tokens, which are used to authorize applications or passwords used for MySQL databases that are hosted on-premises. Your applications then retrieve secrets by replacing hardcoded secrets with a call to Secrets Manager APIs.</p>
			<p>AWS Secrets Manager also encrypts your <em class="italic">secrets</em> using encryption keys, which you create and manage with Amazon KMS. The service also enables you to replicate your secrets across AWS Regions for multi-Region application support and disaster recovery purposes. </p>
			<p>In terms of costs, you are charged based on the number of secrets that are managed in Secrets Manager and the number of Secrets Manager API calls that are made.</p>
			<p>Next, we will look at another identity service that enables you to use external public identity providers to grant access to your AWS resources, namely Amazon Cognito.</p>
			<h2 id="_idParaDest-361"><a id="_idTextAnchor366"/>Amazon Cognito</h2>
			<p>To authenticate users and <a id="_idIndexMarker1526"/>grant them access to your AWS resources, you need to create and manage their identities and offer a mechanism for authentication and authorization. AWS IAM is an identity and access management solution you are already familiar with but is designed for users who typically work with your AWS services to build solutions, such as internal staff members. If you are building applications that need to authenticate against backend resources, you could use IAM user accounts, but there are several limitations, including the maximum 5,000 IAM user accounts that you can create per AWS account.</p>
			<p><strong class="bold">Amazon Cognito</strong> lets you set up identity and access control solutions for your web and mobile applications using standards such as OAuth 2.0, SAML 2.0, and OpenID Connect. With Amazon Cognito, you <a id="_idIndexMarker1527"/>can create <strong class="bold">user pools</strong> and <strong class="bold">identity pools</strong>: </p>
			<ul>
				<li><strong class="bold">Amazon Cognito user pools</strong>: Used for verifying your users' identities, you can create user pools to <a id="_idIndexMarker1528"/>host millions of users or federate their access via a third-party <strong class="bold">identity provider</strong> (<strong class="bold">IdP</strong>), such as Apple, Facebook, Google, or Amazon, and Microsoft Active Directory. In the case of the latter, the user <a id="_idIndexMarker1529"/>pool will manage tokens issued by your third-party IdP. You use user pools to set up the <em class="italic">sign-up</em> and <em class="italic">sign-in</em> features for your web pages or app. You can also use user pools to track the user devices, locations, and IP addresses of your users.</li>
				<li><strong class="bold">Amazon Cognito identity pools</strong>: These allow you to define authorization by creating <a id="_idIndexMarker1530"/>identities for users who need access to specific AWS services, such as an Amazon S3 bucket or a DynamoDB table. You can also use identity pools to generate temporary AWS credentials for unauthenticated users.</li>
			</ul>
			<p>Next, we will look at AWS Directory Service, which is particularly useful if you wish to use the Microsoft Active Directory IAM service. </p>
			<h2 id="_idParaDest-362"><a id="_idTextAnchor367"/>AWS Directory Service</h2>
			<p><strong class="bold">AWS Directory Service for Microsoft Active Directory</strong> (also known as <strong class="bold">AWS Managed Microsoft AD</strong>) is a fully managed Active Directory service on the AWS platform. The service <a id="_idIndexMarker1531"/>enables <a id="_idIndexMarker1532"/>you to use standard tools such as Active Directory Users and <a id="_idIndexMarker1533"/>Computers and take advantage of features such as trusts, <strong class="bold">Distributed File System</strong> (<strong class="bold">DFS</strong>), Group Policy, and <strong class="bold">single sign-on</strong> (<strong class="bold">SSO</strong>).</p>
			<p>You can deploy Microsoft Active Directory-aware applications on your EC2 instance, as well as joining your Windows EC2 instances <a id="_idIndexMarker1534"/>to the Active Directory domain. You can also join and manage <strong class="bold">Amazon RDS for SQL Server</strong> instances to a domain that provides seamless authentication services to your SQL databases running on Amazon RDS. </p>
			<p>In addition, you can join <strong class="bold">Amazon WorkSpaces</strong> to the domain. Amazon WorkSpaces is an end user <a id="_idIndexMarker1535"/>computing service that enables you to deploy virtual Linux and Windows desktops in the cloud. AWS manages the virtual desktops, including security <a id="_idIndexMarker1536"/>patching and managing the operating system. With Amazon WorkSpaces, you can consider migrating away from your on-premises <a id="_idIndexMarker1537"/>desktop infrastructure to a <strong class="bold">virtual desktop infrastructure </strong>(<strong class="bold">VDI</strong>) solution. This enables you to manage your <strong class="bold">total cost of ownership</strong> (<strong class="bold">TCO</strong>) and opt for an OPEX mode of investment in IT.</p>
			<p>Another service that integrates with AWS Managed Microsoft AD is <strong class="bold">Amazon WorkDocs</strong>. Amazon WorkDocs is a content creation, storage, and collaboration service. Amazon WorkDocs enables <a id="_idIndexMarker1538"/>you to store Microsoft Word, PowerPoint, Excel, and various other document types. You and your colleagues can use Amazon WorkDocs for collaboration and to share work documents. Like other collaboration tools such as Microsoft SharePoint, the service also enables you to access APIs so that you can develop content-rich applications. </p>
			<p>In this section, we looked at several AWS security tools and services to help you design and architect security measures that will help protect your applications and workloads on AWS. You must examine the vast array of security services on offer and align their usage with your specific business objectives, all while considering any compliance or regulatory requirements.</p>
			<p>Next, we will conduct an exercise to demonstrate one of the security tools we covered in this section. Specifically, you will learn how to use Amazon Macie for a simple real-world example.</p>
			<h1 id="_idParaDest-363"><a id="_idTextAnchor368"/>Exercise 14.1 – preventing data leaks with Amazon Macie</h1>
			<p>In this exercise, you will use Amazon Macie to monitor a single Amazon S3 bucket and identify whether any PII was <a id="_idIndexMarker1539"/>stored in the bucket. Imagine <a id="_idIndexMarker1540"/>a scenario where a user in your organization has uploaded a sensitive file to the wrong Amazon S3 bucket. In our example, we have a <em class="italic">product details</em> bucket, which would contain product information that can be accessed by the marketing team. However, because of poorly configured access policies, a member of the HR team has uploaded sensitive employee information into this bucket.</p>
			<p>This could result in data leaks. While you want to ensure that users are restricted to which buckets they can access, sometimes, accidents do happen. Amazon Macie can detect content that's uploaded to S3 buckets and identify specific types of sensitive data. You can then take the appropriate action.</p>
			<h2 id="_idParaDest-364"><a id="_idTextAnchor369"/>Step 1 – creating a new Amazon S3 bucket</h2>
			<ol>
				<li>Navigate to <a id="_idIndexMarker1541"/>Amazon S3 and click on the <strong class="bold">Buckets</strong> link from the left-hand menu.</li>
				<li>In the right-hand pane, click the <strong class="bold">Create bucket</strong> button.</li>
				<li>Provide a bucket name and select the <strong class="bold">us-east-1</strong> Region to create your bucket in. I have named my bucket <strong class="bold">justdessertsproducts</strong>, so you will need to select a different name that is unique to your bucket. We are going to assume that someone has accidentally uploaded sensitive PII to this bucket.</li>
				<li>Click the <strong class="bold">Create bucket</strong> button at the bottom of the page.</li>
				<li>Next, create a simple CSV file using Excel or Google Sheets and upload it to the S3 bucket. Ensure that the CSV file contains some data that you can classify as PII. For example, in the following screenshot, you will note that I have added some dummy data that contains sensitive employee information. In this example, <strong class="bold">EmployeeID</strong> can be used to identify a specific employee and their salary information:</li>
			</ol>
			<div>
				<div id="_idContainer278" class="IMG---Figure">
					<img src="Images/B17124_14_06.jpg" alt="Figure 14.6 – Salary information of employees&#13;&#10;" width="332" height="144"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.6 – Salary information of employees</p>
			<p>When using Amazon Macie to identify information that may be PII-related, you would need <a id="_idIndexMarker1542"/>to be able to identify the format of the data so that Amazon Macie knows what to look for. Note that the format of the <strong class="source-inline">EmployeeID</strong> data, as per the preceding screenshot, is <em class="italic">two characters</em> (<em class="italic">capital letters</em>), followed by a <em class="italic">hyphen</em> (<em class="italic">-</em>) and then <em class="italic">four numbers</em>.</p>
			<h2 id="_idParaDest-365"><a id="_idTextAnchor370"/>Step 2 – configuring Amazon Macie to identify sensitive employee data</h2>
			<ol>
				<li value="1">From the <a id="_idIndexMarker1543"/>AWS Management Console, search for Amazon Macie in the top search bar and click on the service from the filtered search results.</li>
				<li>If this is the first time you have navigated to the Amazon Macie console, you will see a splash screen, as shown in the following screenshot: <div id="_idContainer279" class="IMG---Figure"><img src="Images/B17124_14_07.jpg" alt="Figure 14.7 – Amazon Macie&#13;&#10;" width="745" height="309"/></div><p class="figure-caption">Figure 14.7 – Amazon Macie</p></li>
				<li>Click the <strong class="bold">Get started</strong> button.</li>
				<li>Amazon Macie requires permission to access information about the data that you <a id="_idIndexMarker1544"/>store in Amazon S3. You will be provided with the option to enable Amazon Macie with the necessary access, which will create an IAM role.</li>
				<li>Go ahead and click the <strong class="bold">Enable Macie</strong> button, as per the following screenshot:<div id="_idContainer280" class="IMG---Figure"><img src="Images/B17124_14_08.jpg" alt="Figure 14.8 – Enable Macie&#13;&#10;" width="982" height="343"/></div><p class="figure-caption">Figure 14.8 – Enable Macie</p></li>
				<li>Once enabled, Amazon Macie will analyze your environment and, after a short time, provide a dashboard, as shown in the following screenshot:<div id="_idContainer281" class="IMG---Figure"><img src="Images/B17124_14_09.jpg" alt="Figure 14.9 – Amazon Macie – Summary&#13;&#10;" width="1029" height="478"/></div><p class="figure-caption">Figure 14.9 – Amazon Macie – Summary</p></li>
				<li>While <a id="_idIndexMarker1545"/>several items from the preceding summary need to be examined, for this exercise, we are primarily interested in ensuring that PII is not uploaded to the specific bucket we configured earlier. For this, we need to create an <strong class="bold">Amazon Macie job</strong>.</li>
				<li>From the left-hand menu, select the <strong class="bold">Jobs</strong> link.</li>
				<li>From the right-hand pane, click the <strong class="bold">Create job</strong> button. This will launch the job creation wizard, which you will need to complete as follows:<ul><li>For <strong class="bold">Step 1</strong>, select the bucket you created to upload the CSV file to. In my case, it is the <strong class="bold">justdessertsproducts</strong> bucket.</li><li>Click <strong class="bold">Next</strong>.</li><li>For <strong class="bold">Step 2</strong>, confirm that the correct bucket has been selected and click <strong class="bold">Next</strong>.</li><li>For <strong class="bold">Step 3, Refine Scope</strong>, select the <strong class="bold">One-time job</strong> option and then click <strong class="bold">Next</strong>. Normally, you would set a schedule to perform the discovery daily, but <a id="_idIndexMarker1546"/>for this exercise, we are only going to perform the discovery once.</li><li>Under <strong class="bold">Additional settings</strong>, select <strong class="bold">File name extensions</strong> under <strong class="bold">Object criteria</strong>.</li><li>In the text box below, type in <strong class="source-inline">csv</strong> and then click the <strong class="bold">Include</strong> button.</li><li>Click <strong class="bold">Next</strong>.</li><li>For <strong class="bold">Step 4, Select managed data identifiers</strong>, select <strong class="bold">None</strong> and then click <strong class="bold">Next</strong>.</li><li>For <strong class="bold">Step 5, Select custom data identifiers</strong>, click on the <strong class="bold">Manage custom identifiers</strong> link to open the <strong class="bold">Custom data identifiers</strong> web page in another browser tab, as per the following screenshot:</li></ul></li>
			</ol>
			<div>
				<div id="_idContainer282" class="IMG---Figure">
					<img src="Images/B17124_14_10.jpg" alt="Figure 14.10 – Creating custom data identifiers&#13;&#10;" width="1021" height="234"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.10 – Creating custom data identifiers</p>
			<ul>
				<li>Click the <strong class="bold">Create</strong> button.</li>
				<li>Give the identifier a name and an optional description.</li>
				<li>Next, you will need to provide a <strong class="bold">regex</strong> pattern that matches your <strong class="source-inline">EmployeeID</strong> format. Regex is short for <em class="italic">regular expression</em>, which is a sequence of characters that specifies a search pattern. Often, you can use regex patterns to search for specific types of data or to validate data. For this exercise, your regex pattern will be <em class="italic">[A-Z]{2}-[0-9]{4}</em>. Input this pattern into the <strong class="bold">Regular expression</strong> text box.</li>
				<li>Next, click the <strong class="bold">Submit</strong> button, which will create the custom data identifier for this exercise.</li>
				<li>Navigate back to the <strong class="bold">Job creation</strong> wizard, which should still be visible in the <a id="_idIndexMarker1547"/>previous browser tab. You should still be in <strong class="bold">Step 5</strong>. Click on the refresh icon to access the <strong class="bold">EmployeeID</strong> custom data identifier, as per the following screenshot: </li>
			</ul>
			<div>
				<div id="_idContainer283" class="IMG---Figure">
					<img src="Images/B17124_14_11.jpg" alt="Figure 14.11 – Select custom data identifiers&#13;&#10;" width="883" height="218"/>
				</div>
			</div>
			<p class="figure-caption">Figure 14.11 – Select custom data identifiers</p>
			<ul>
				<li>Select the <strong class="bold">EmployeeID</strong> custom data identifier and click the <strong class="bold">Next</strong> button.</li>
				<li>For <strong class="bold">Step 6</strong>, provide a name for the job and then click on the <strong class="bold">Next</strong> button.</li>
				<li>For <strong class="bold">Step 7</strong>, review the configuration settings and then click the <strong class="bold">Submit</strong> button at the bottom of the page.</li>
			</ul>
			<ol>
				<li value="10">Your job has now been created and will be in the <strong class="bold">Active (Running)</strong> state, as per the following screenshot: <div id="_idContainer284" class="IMG---Figure"><img src="Images/B17124_14_12.jpg" alt="Figure 14.12 – Amazon Macie S3 job created&#13;&#10;" width="678" height="274"/></div><p class="figure-caption">Figure 14.12 – Amazon Macie S3 job created</p></li>
				<li>The job <a id="_idIndexMarker1548"/>will take a few minutes to complete. Once the job completes, click on the <strong class="bold">Show results</strong> drop-down arrow and select <strong class="bold">Show findings</strong>. You will see that it has found the CSV file we uploaded earlier, as per the following screenshot: <div id="_idContainer285" class="IMG---Figure"><img src="Images/B17124_14_13.jpg" alt="Figure 14.13 – Macie findings&#13;&#10;" width="1023" height="325"/></div><p class="figure-caption">Figure 14.13 – Macie findings</p></li>
				<li>Select the findings. Then, from the <strong class="bold">Actions</strong> drop-down list, select <strong class="bold">Export (JSON)</strong>.</li>
				<li>You will be able to review the JSON file, which clearly shows that it identified four counts of PII data, as per the following screenshot: <div id="_idContainer286" class="IMG---Figure"><img src="Images/B17124_14_14.jpg" alt="Figure 14.14 – Amazon Macie job findings&#13;&#10;" width="688" height="299"/></div><p class="figure-caption">Figure 14.14 – Amazon Macie job findings</p></li>
				<li>The JSON <a id="_idIndexMarker1549"/>will also highlight the columns and rows where the PII data was identified. </li>
			</ol>
			<p>As you can see, Amazon Macie is an extremely powerful tool that can help you understand your data access patterns and alert you of potential data breaches.</p>
			<p>In the next exercise, you will clean up the resources you created.</p>
			<h1 id="_idParaDest-366"><a id="_idTextAnchor371"/>Exercise 14.2 – cleaning up</h1>
			<p>In this exercise, you will clean up <a id="_idIndexMarker1550"/>the resources you created in this chapter:</p>
			<ol>
				<li value="1">Navigate to the Amazon Macie console.</li>
				<li>From the left-hand menu, select <strong class="bold">Settings</strong>.</li>
				<li>Next, from the right-hand pane, click on the <strong class="bold">Disable Macie</strong> button. Amazon Macie will <a id="_idIndexMarker1551"/>permanently delete all your existing findings, classification jobs, and other Macie resources.</li>
				<li>In the dialog box that appears, type <strong class="bold">Disable</strong> in the text box and click the <strong class="bold">Disable</strong> button.</li>
				<li>Next, from the Amazon S3 console, you will need to empty the S3 bucket you created and then delete the bucket, as you did previously.</li>
			</ol>
			<p>Next, we will provide a summary of this chapter.</p>
			<h1 id="_idParaDest-367"><a id="_idTextAnchor372"/>Summary</h1>
			<p>Security in the cloud is a shared responsibility between the customer and AWS. AWS will take responsibility for the security <em class="italic">of</em> the cloud, while the customer is responsible for security <em class="italic">in</em> the cloud. This distinction must be understood. You have access to a vast array of security tools and services that can help you build a highly robust and secure environment, within which you can host your application workloads.</p>
			<p>This chapter also discussed concepts related to compliance and how AWS services are aligned with various regulatory bodies. As a customer, you are responsible for ensuring that your applications are built while following any necessary protocols. So, for example, if you are in the healthcare industry and based in the US, then your application processes and workflows must adhere to HIPAA compliance. </p>
			<p>We also discussed encryption and how you must implement encryption both at rest and in transit. AWS offers KMS services to help you manage your encryption needs. If you have specific requirements to create, manage, and rotate your encryption keys using dedicated FIPS 140-2 Level 3 hardware security modules, then you can also opt for the AWS CloudHSM service.</p>
			<p>AWS also offers several tools to protect your network and applications with firewall solutions such as AWS Shield and AWS WAF. AWS Shield offers protection against DDoS attacks, whereas AWS WAF is an application tier firewall design that can protect you from common web exploits such as SQL injection and cross-site scripting.</p>
			<p>Finally, we examined various specific AWS security tools and services, including AWS Inspector, Amazon Macie, and AWS Secrets Manager. These tools can help you build a complete end-to-end secure environment to protect your data, grant access to authorized users, and prevent attacks.</p>
			<p>In the next chapter, we will discuss the principles of billing and pricing on AWS. You will learn about cloud economics and how to architect solutions that are cost-effective for your business. We will discuss cost management strategies, as well as looking at various tools that can help you monitor costs and compare pricing options.</p>
			<h1 id="_idParaDest-368"><a id="_idTextAnchor373"/>Questions</h1>
			<p>Answer the following questions to test your knowledge of the topics covered in this chapter:</p>
			<ol>
				<li value="1">Which of the following is part of the customers' responsibility regarding the Shared Security Model? (Choose 2.)<ol><li>Patch Windows EC2 instances with the latest security patches.</li><li>Configure NACL to only allow inbound ports <strong class="source-inline">80</strong> and <strong class="source-inline">443</strong> to Linux web servers from the internet.</li><li>Update the network cabling in the <strong class="source-inline">us-east-1</strong> data centers.</li><li>Upgrade the underlying infrastructure support for the Lambda service.</li><li>Upgrade the biometric readers in the London Region.</li></ol></li>
				<li>Which service in AWS protects your virtual network and resources from common DDoS attacks?<ol><li>AWS WAF</li><li>AWS Shield</li><li>AWS Detective</li><li>Amazon Macie</li></ol></li>
				<li>Which of the following AWS Security tools can protect your web applications or APIs against common web exploits that may affect availability, compromise security, or consume excessive resources?<ol><li>AWS WAF</li><li>AWS GuardDuty</li><li>AWS Shield</li><li>AWS NACL</li></ol></li>
			</ol>
			<ol>
				<li value="4">Which AWS service uses machine learning to classify sensitive information stored in your Amazon S3 buckets and monitor access patterns for anomalies that indicate risks or suspicious behavior, such as large quantities of source code being downloaded?<ol><li>Amazon Macie</li><li>Amazon X-Ray</li><li>AWS Shield</li><li>AWS WAF</li></ol></li>
				<li>Which AWS service enables companies looking to migrate to the AWS cloud to obtain copies of various compliance documents such as ISO certifications, <strong class="bold">PCI, and SOC</strong> reports?<ol><li>AWS Artifact</li><li>AWS Config</li><li>AWS CloudWatch</li><li>AWS security reports</li></ol></li>
				<li>To fulfill strict compliance requirements, you need to create and manage your encryption keys using FIPS 140-2 Level 3-validated HSM devices. Which type of encryption service would you recommend?<ol><li>AWS KMS</li><li>AWS CloudHSM</li><li>Certificate Manager</li><li>BitLocker</li></ol></li>
			</ol>
		</div>
	</div></body></html>