<html><head></head><body>
  <div id="_idContainer025">
   <h1 class="chapter-number" id="_idParaDest-38">
    <a id="_idTextAnchor040">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     3
    </span>
   </h1>
   <h1 id="_idParaDest-39">
    <a id="_idTextAnchor041">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     How Not to Get Confused about Security
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     This chapter covers anti-patterns related to securing your Salesforce org.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     We’ll begin by examining a key anti-pattern around the shared security model that is integral to Salesforce.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     Then, we will look at anti-patterns that can occur when you mistake other things for security.
    </span>
    <span class="koboSpan" id="kobo.3.4">
     We will continue by looking at how not to make a mess of your sharing model and once again finish up with a review of the key takeaways.
    </span>
    <span class="koboSpan" id="kobo.3.5">
     As Salesforce continues to integrate AI technologies, new security considerations are emerging.
    </span>
    <span class="koboSpan" id="kobo.3.6">
     This chapter will also touch on how AI impacts the security landscape
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      within Salesforce.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     In this chapter, we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.7.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.8.1">
       Shared Belongs to Salesforce
      </span>
     </em>
     <span class="koboSpan" id="kobo.9.1">
      anti-pattern and how people get the shared responsibility
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.10.1">
       model wrong
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.11.1">
      How the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.12.1">
       Compliant Is Secure
      </span>
     </em>
     <span class="koboSpan" id="kobo.13.1">
      anti-pattern lulls you into a false sense of security and what you can do
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       about it
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.16.1">
       Declarative Is Always Safe
      </span>
     </em>
     <span class="koboSpan" id="kobo.17.1">
      anti-pattern and why you can’t rely on declarative features to always
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       be secure
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      The
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.20.1">
       Spaghetti Sharing Model
      </span>
     </em>
     <span class="koboSpan" id="kobo.21.1">
      anti-pattern – why it is deceptively easy to get into an overcomplicated sharing model on Salesforce and how you can prevent it from happening to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       your org
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     After completing this chapter, you will have a good idea of how to avoid common security anti-patterns on Salesforce and what steps you can take to implement better security practices on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      the platform.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-40">
    <a id="_idTextAnchor042">
    </a>
    <span class="koboSpan" id="kobo.25.1">
     Getting confused about shared responsibility
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.26.1">
     Almost all SaaS and PaaS platforms use a security model called shared responsibility.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     That is to say, the vendor takes responsibility for certain parts of the security architecture and other parts
    </span>
    <a id="_idIndexMarker128">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     remain the responsibility of the customer.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     In this section, we will see how misunderstanding this model can lead to issues
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      in Salesforce.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-41">
    <a id="_idTextAnchor043">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     Shared Belongs to Salesforce
    </span>
   </h2>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.30.1">
      The Shared Belongs to Salesforce anti-pattern
     </span>
    </em>
    <em class="italic">
     <a id="_idIndexMarker129">
     </a>
    </em>
    <em class="italic">
     <span class="koboSpan" id="kobo.31.1">
      holds that security on the Salesforce platform is always the primary responsibility
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.32.1">
       of Salesforce.
      </span>
     </em>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.33.1">
     Example
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.34.1">
     SmallCo is a provider of specialty
    </span>
    <a id="_idIndexMarker130">
    </a>
    <span class="koboSpan" id="kobo.35.1">
     lenses for optical instruments.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     They sell globally and have recently adopted Salesforce Sales Cloud, Order Management, and B2B Commerce to drive electronic commerce directly to the business instead of selling exclusively
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      via distributors.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.37.1">
     When they did their implementation, the Salesforce platform went through a security review with James, the dedicated security professional that SmallCo has on staff.
    </span>
    <span class="koboSpan" id="kobo.37.2">
     He evaluated the platform as a whole and was satisfied that the Salesforce platform, including how Salesforce secures their data centers, platform, and web application, met all the standards that SmallCo
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.38.1">
      would expect.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.39.1">
     James evaluates the shared responsibility model that Salesforce uses for security and determines that for the initial project, there shouldn’t be any need for additional security controls from SmallCo’s side.
    </span>
    <span class="koboSpan" id="kobo.39.2">
     Salesforce will ensure security adequately without additional work required
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.40.1">
      by SmallCo.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.41.1">
     After a period of successful running, SmallCo wants to extend the digital experience and online community adjacent to their web store and also bring in a much larger number of customers onto the web store itself.
    </span>
    <span class="koboSpan" id="kobo.41.2">
     Mika, a Salesforce Product Owner at SmallCo, is given the task of running this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.42.1">
      extension project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.43.1">
     Because of the limited budget, Mika agrees with the implementation partner that they will extend a lot of functionality to anonymous users so that many tasks can be performed without a login.
    </span>
    <span class="koboSpan" id="kobo.43.2">
     That way, SmallCo can opt for a relatively small login-based
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.44.1">
      license SKU.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.45.1">
     The system goes live without issue and, as hoped, user numbers go up by more than a factor of 10.
    </span>
    <span class="koboSpan" id="kobo.45.2">
     Mika and the team celebrate and, after completing the last outstanding minor improvements, start gearing up for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      next project.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.47.1">
     Just then, Mika receives a security advisory from a Salesforce consultancy that helped with SmallCo’s original Salesforce implementation.
    </span>
    <span class="koboSpan" id="kobo.47.2">
     They point out that a number of new vulnerabilities have been found in Salesforce APIs used within digital experiences.
    </span>
    <span class="koboSpan" id="kobo.47.3">
     These potentially allow serious exploits if there is a too-open model toward
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.48.1">
      external users.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.49.1">
     Mika is initially worried but
    </span>
    <a id="_idIndexMarker131">
    </a>
    <span class="koboSpan" id="kobo.50.1">
     remembers the conversation he had with James about Salesforce security prior to starting his new project.
    </span>
    <span class="koboSpan" id="kobo.50.2">
     APIs sound like a core platform feature and therefore something Salesforce will take care of.
    </span>
    <span class="koboSpan" id="kobo.50.3">
     The project is closed and doing anything new would require finding a new budget, which is difficult.
    </span>
    <span class="koboSpan" id="kobo.50.4">
     He, therefore, decides to ignore
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.51.1">
      the warning.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     Three weeks later, an email arrives in an internal SmallCo inbox.
    </span>
    <span class="koboSpan" id="kobo.52.2">
     It contains a data dump with all of SmallCo’s proprietary product information and lists of customers and orders.
    </span>
    <span class="koboSpan" id="kobo.52.3">
     The data dump comes with a ransom demand to be paid in cryptocurrency to a specified address.
    </span>
    <span class="koboSpan" id="kobo.52.4">
     Otherwise, the data will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.53.1">
      made public.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.54.1">
     The situation quickly escalates and external consultants are brought in to help manage the situation.
    </span>
    <span class="koboSpan" id="kobo.54.2">
     They quickly discover that some very permissive configurations have been made to help the process of making functionality available to external users.
    </span>
    <span class="koboSpan" id="kobo.54.3">
     These are likely the source of the breach and are also the cause of the security advisory Mika received from the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.55.1">
      other partner.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.56.1">
     SmallCo is very disappointed that Salesforce would leave such a glaring security hole open and raise it with their account manager, who instead points the finger back at the configuration SmallCo has made.
    </span>
    <span class="koboSpan" id="kobo.56.2">
     SmallCo finally decides that the only thing to do is to pay the ransom and plug
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.57.1">
      the gap.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.58.1">
     The external consultants facilitate both of these actions and the external configuration is locked down.
    </span>
    <span class="koboSpan" id="kobo.58.2">
     SmallCo has to change their license package, but at this point, it has become a small price to pay to avoid a recurrence of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.59.1">
      recent events.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.60.1">
     On the suggestion of the external consultants, SmallCo sets up a process and some software to continuously monitor the security of their Salesforce environment.
    </span>
    <span class="koboSpan" id="kobo.60.2">
     In addition, Salesforce-related personnel and James from security receive a number of education sessions on the Salesforce security model.
    </span>
    <span class="koboSpan" id="kobo.60.3">
     Mika breathes a sigh of relief and gets ready for the
    </span>
    <a id="_idIndexMarker132">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.61.1">
      next project.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.62.1">
     Problem
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.63.1">
     The Shared Belongs to Salesforce
    </span>
    <a id="_idIndexMarker133">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     anti-pattern is fundamentally about who is responsible for maintaining system and platform security.
    </span>
    <span class="koboSpan" id="kobo.64.2">
     When you’re dealing with cloud systems, there is always a level of shared responsibility in play.
    </span>
    <span class="koboSpan" id="kobo.64.3">
     That means the system or platform provider will maintain some parts of the security and you are responsible
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.65.1">
      for others.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer023">
     <span class="koboSpan" id="kobo.66.1">
      <img alt="img" role="presentation" src="image/B30991_03_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.67.1">
     Figure 3.1 – Shared responsibility model
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.68.1">
     In Salesforce terms, Salesforce maintains infrastructure and platform security and helps you a lot with application-layer security.
    </span>
    <span class="koboSpan" id="kobo.68.2">
     Salesforce Shield, including Platform Encryption, Event Monitoring, and Field Audit Trail, provides additional layers of security but requires proper configuration and management by the customer.
    </span>
    <span class="koboSpan" id="kobo.68.3">
     However, when you configure or code something yourself, the responsibility for its security is ultimately on you.
    </span>
    <span class="koboSpan" id="kobo.68.4">
     The now mandatory multi-factor authentication requirement shifts further security responsibility to customers, who must ensure proper implementation and user adoption.
    </span>
    <span class="koboSpan" id="kobo.68.5">
     Finally, Einstein’s features introduce new considerations to the shared responsibility model, particularly
    </span>
    <a id="_idIndexMarker134">
    </a>
    <span class="koboSpan" id="kobo.69.1">
     around data usage, model training, and prediction explanations.
    </span>
    <span class="koboSpan" id="kobo.69.2">
     While I’m discussing it in the context of Salesforce, it is relevant to all SaaS and PaaS providers, although the specific boundaries defining the shared responsibility
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.70.1">
      will differ.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.71.1">
     It is, however, very easy to get confused about this boundary and that leads to this anti-pattern.
    </span>
    <span class="koboSpan" id="kobo.71.2">
     The problem that the Shared Belongs to Salesforce anti-pattern seeks to solve is the general security problem.
    </span>
    <span class="koboSpan" id="kobo.71.3">
     That is to say,
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.72.1">
      “How can we keep our system secure?”
     </span>
    </em>
    <span class="koboSpan" id="kobo.73.1">
     As we will see in the next section, it proposes to solve the problem by assuming that everything, or at least as much as possible, is the software provider’s problem, even when
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.74.1">
      it isn’t.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.75.1">
     Proposed solution
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.76.1">
     Shared Belongs to Salesforce proposes to solve the problem of system security by assuming that Salesforce as a world-leading software provider has already thought of all the issues and therefore will
    </span>
    <a id="_idIndexMarker135">
    </a>
    <span class="koboSpan" id="kobo.77.1">
     keep the platform secure.
    </span>
    <span class="koboSpan" id="kobo.77.2">
     That way, you can safely ignore security as an aspect of your solution and move forward with the real work of getting
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.78.1">
      configurations done.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.79.1">
     It effectively means that you don’t seriously engage with the shared responsibility model, although there are gradations of this.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     Most organizations, for example, will accept that they have a responsibility for the user permissions that they give the users who access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.80.1">
      the system.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.81.1">
     However, this might extend to how you configure your sharing model; who you give access to APIs or custom-coded classes or who is allowed to run reports is much murkier.
    </span>
    <span class="koboSpan" id="kobo.81.2">
     When it gets murky, the adopters of this anti-pattern make the simplifying choice that they don’t have to bother with the complexities because Salesforce will already have thought about it.
    </span>
    <span class="koboSpan" id="kobo.81.3">
     That, unfortunately, is not and cannot always
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.82.1">
      be true.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.83.1">
     This anti-pattern is attractive for a number
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.84.1">
      of reasons:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.85.1">
      You don’t have to engage seriously with complex security issues, which means you don’t need to hire or develop
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.86.1">
       specialist skills
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.87.1">
      It reduces your internal effort when doing work
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.88.1">
       on Salesforce
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.89.1">
      It gives you a story to communicate to stakeholders that you are in good hands and don’t have to worry
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.90.1">
       about security
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.91.1">
      It gives you someone to blame or hold responsible should things
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.92.1">
       go wrong
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.93.1">
     While you can easily
    </span>
    <a id="_idIndexMarker136">
    </a>
    <span class="koboSpan" id="kobo.94.1">
     understand why people might be inclined to make their own lives easier by adopting this anti-pattern, the results are not
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.95.1">
      generally optimal.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.96.1">
     Results
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.97.1">
     Humans tend to seek to reduce
    </span>
    <a id="_idIndexMarker137">
    </a>
    <span class="koboSpan" id="kobo.98.1">
     cognitive load by making simplifications and taking shortcuts.
    </span>
    <span class="koboSpan" id="kobo.98.2">
     Therefore, the Shared Belongs to Salesforce anti-pattern is a naturally occurring phenomenon and it takes active security awareness to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.99.1">
      counter it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.100.1">
     It’s, therefore, not surprising that the first and most serious result of this anti-pattern is a reinforcement of low security awareness within the organization.
    </span>
    <span class="koboSpan" id="kobo.100.2">
     If you aren’t aware of security issues, it is just a matter of time before something happens.
    </span>
    <span class="koboSpan" id="kobo.100.3">
     This anti-pattern sets you up for something bad
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.101.1">
      to happen.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.102.1">
     Other typical negative results include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.103.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.104.1">
      Giving everyone from end users to senior management a false sense of security about their Salesforce system, leading to even more serious fallout when an incident occurs and a missing understanding that you actually have to do something, rather than Salesforce just fixing it
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.105.1">
       for you.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.106.1">
      Not keeping up with the evolving security landscape on the Salesforce platform.
     </span>
     <span class="koboSpan" id="kobo.106.2">
      This includes not just ignoring new security advisories, as in our example, but also not looking into new security updates or features that would improve your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.107.1">
       security stance.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.108.1">
      Ultimately, the anti-pattern leads to an increased organization risk profile that would be intolerable to most senior managers, had they fully
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.109.1">
       understood it.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.110.1">
     It’s worth noting that you can run with this anti-pattern for years and years without discovering the negative consequences.
    </span>
    <span class="koboSpan" id="kobo.110.2">
     It’s only when a security incident that has substantial enough consequences to get senior management’s attention occurs and is discovered that you really have to confront
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.111.1">
      this anti-pattern.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.112.1">
     It can, therefore, be a bit of a thankless task to point out that this anti-pattern is occurring and you may not
    </span>
    <a id="_idIndexMarker138">
    </a>
    <span class="koboSpan" id="kobo.113.1">
     get anywhere initially.
    </span>
    <span class="koboSpan" id="kobo.113.2">
     There are, nonetheless, things that should be done, as we’ll discuss in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      next section.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.115.1">
     Better solutions
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.116.1">
     The solutions to this anti-pattern are fairly obvious to anyone who has spent at least a bit of time on information security.
    </span>
    <span class="koboSpan" id="kobo.116.2">
     First and foremost, this is about raising awareness about the security issues that are in play
    </span>
    <a id="_idIndexMarker139">
    </a>
    <span class="koboSpan" id="kobo.117.1">
     and getting the internal acceptance that something needs to be done about Salesforce security in an active way rather than assuming the vendor will take care
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.118.1">
      of it.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.119.1">
     Some of the main points include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.120.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.121.1">
      Engaging actively with the shared responsibility model, getting a clear understanding of where the boundaries are, how to ensure your own parts are secure, and how to continuously remain vigilant about the parts that you aren’t directly responsible for but that still directly
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.122.1">
       affect you.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.123.1">
      Investing in the required skills to perform your parts of the security task both initially and on an ongoing basis.
     </span>
     <span class="koboSpan" id="kobo.123.2">
      You can build this internally or use consultants; however you do it, the responsibility is on you to get
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.124.1">
       it done.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.125.1">
      Leveraging modern DevOps practices with Salesforce DX or third-party tools to implement version control and CI/CD practices, enhancing security through consistent and auditable
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.126.1">
       deployment processes.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.127.1">
      Assessing new risks whenever you extend your solution in significant ways.
     </span>
     <span class="koboSpan" id="kobo.127.2">
      This does not just mean when you are adding new modules.
     </span>
     <span class="koboSpan" id="kobo.127.3">
      Major extensions to existing functionality can also lead to new security threats
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.128.1">
       being introduced.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.129.1">
      Shifting the company’s mindset.
     </span>
     <span class="koboSpan" id="kobo.129.2">
      Fundamentally, you need to shift the mindset of your organization to one where security is seen as fundamental to organizational resilience and growth.
     </span>
     <span class="koboSpan" id="kobo.129.3">
      That may be beyond what most of us as architects can accomplish.
     </span>
     <span class="koboSpan" id="kobo.129.4">
      However, pushing where we can in our sphere of influence is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.130.1">
       also helpful.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.131.1">
      Considering the principle of least privilege, which is crucial for preventing security vulnerabilities by ensuring that users and processes have only the minimum access rights necessary to perform their tasks.
     </span>
     <span class="koboSpan" id="kobo.131.2">
      This approach limits the potential damage from compromised accounts or malicious insiders, reduces the attack surface, simplifies auditing and compliance, and helps contain the spread
     </span>
     <a id="_idIndexMarker140">
     </a>
     <span class="koboSpan" id="kobo.132.1">
      of malware.
     </span>
     <span class="koboSpan" id="kobo.132.2">
      By avoiding overprivileged accounts and unnecessary permissions, organizations can significantly mitigate risks associated with data breaches, unauthorized access, and privilege escalation attacks, ultimately strengthening their overall security posture and reducing the likelihood of falling victim to common
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.133.1">
       security anti-patterns.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.134.1">
      Continuously monitoring your orgs to evaluate Salesforce security recommendations and critical updates.
     </span>
     <span class="koboSpan" id="kobo.134.2">
      Consider implementing Event Monitoring to track user activities, API usage, and other critical events.
     </span>
     <span class="koboSpan" id="kobo.134.3">
      This helps in the early detection of potential security breaches
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.135.1">
       or misuse.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.136.1">
     We have now completed the discussion of the first anti-pattern in this chapter and will move on to another take on the general security problem, Compliant
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.137.1">
      Is Secure.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-42">
    <a id="_idTextAnchor044">
    </a>
    <span class="koboSpan" id="kobo.138.1">
     Mistaking other things for security
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.139.1">
     Security is a complex and
    </span>
    <a id="_idIndexMarker141">
    </a>
    <span class="koboSpan" id="kobo.140.1">
     multi-faceted domain.
    </span>
    <span class="koboSpan" id="kobo.140.2">
     This complexity can be so profound in many cases that there arises a strong temptation to simplify it to something more manageable.
    </span>
    <span class="koboSpan" id="kobo.140.3">
     In this section, we will see two examples of how this can occur and what the negative consequences
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.141.1">
      can be.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-43">
    <a id="_idTextAnchor045">
    </a>
    <span class="koboSpan" id="kobo.142.1">
     Compliant Is Secure
    </span>
   </h2>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.143.1">
      Compliant Is Secure holds that security for an organization can be upheld by strict adherence to one or more specified
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.144.1">
       compliance regimes.
      </span>
     </em>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.145.1">
     Example
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.146.1">
     Alexandra works as an architect
    </span>
    <a id="_idIndexMarker142">
    </a>
    <span class="koboSpan" id="kobo.147.1">
     for LifeCo, a major provider of medical devices for the continuous measurement of vital statistics.
    </span>
    <span class="koboSpan" id="kobo.147.2">
     They sell devices across a number of global markets and as a consequence are subjected to a number of
    </span>
    <a id="_idIndexMarker143">
    </a>
    <span class="koboSpan" id="kobo.148.1">
     different regulatory regimes.
    </span>
    <span class="koboSpan" id="kobo.148.2">
     It is fair to say that a big part of LifeCo’s culture is focused on meeting these regulatory requirements and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.149.1">
      maintaining compliance.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.150.1">
     When it comes to IT security, LifeCo has also adopted a compliance-centric approach combining the ISO 27001, HIPAA, and GxP protocols in a comprehensive set of checks and controls that are documented thoroughly at the beginning of each project and audited subsequently on a yearly basis.
    </span>
    <span class="koboSpan" id="kobo.150.2">
     While there are processes to maintain compliance throughout the year, LifeCo focuses most of its attention on the initial documentation and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.151.1">
      audit events.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.152.1">
     LifeCo has adopted Salesforce for field sales and care programs, using the Sales, Service, and Health Cloud components.
    </span>
    <span class="koboSpan" id="kobo.152.2">
     As part of the implementation, Alexandra works closely with stakeholders across the business from IT, security, legal, and the data
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.153.1">
      protection office.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.154.1">
     They perform a thorough evaluation of all the controls Salesforce has in place at both the platform level and the level of each individual cloud.
    </span>
    <span class="koboSpan" id="kobo.154.2">
     They spend considerable time with Salesforce security representatives to understand the details of the security implementation, pushing hard to get real answers to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.155.1">
      sensitive questions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.156.1">
     Additionally, they require comprehensive checklists and documentation from the implementation partner to ensure that all configuration work meets the necessary standards.
    </span>
    <span class="koboSpan" id="kobo.156.2">
     This adds considerable overhead during both implementation and testing, but LifeCo is adamant that Salesforce meets the same standards that they apply to all
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.157.1">
      internal systems.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.158.1">
     The system documentation is finally signed off as compliant after a long period of adjustment to meet the detailed requirements.
    </span>
    <span class="koboSpan" id="kobo.158.2">
     Alexandra keeps working in the Salesforce space but mainly focuses on preparing requirements for new releases and updating technical standards unrelated
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.159.1">
      to security.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.160.1">
     Then, after nine months, the unthinkable happens.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     The CEO receives a phone call from a popular news site that asks what their response is to the fact that thousands of the company’s patients’ personal information has been dumped online on the dark web.
    </span>
    <span class="koboSpan" id="kobo.160.3">
     There is no doubt that the data comes from LifeCo as it contains the company’s proprietary information about
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.161.1">
      device usage.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.162.1">
     The CEO gives a rushed response, but the damage is done.
    </span>
    <span class="koboSpan" id="kobo.162.2">
     LifeCo suffers a major blow to its reputation and is battered in mainline news, social media, and the stock market.
    </span>
    <span class="koboSpan" id="kobo.162.3">
     Alexandra takes a
    </span>
    <a id="_idIndexMarker144">
    </a>
    <span class="koboSpan" id="kobo.163.1">
     leading role in the investigation and cleanup after
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.164.1">
      the incident.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.165.1">
     The investigation is not entirely conclusive, but there is good circumstantial evidence pointing toward a disgruntled employee exporting a report file with personal information and uploading it online.
    </span>
    <span class="koboSpan" id="kobo.165.2">
     There isn’t enough evidence to bring any formal
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.166.1">
      charges, however.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.167.1">
     The root cause analysis concludes that the incident occurred because a special procedure to give users reporting rights to patient data had been used to extend the privileges to a team of 50 people, many quite junior and relatively untrained in IT security or compliance.
    </span>
    <span class="koboSpan" id="kobo.167.2">
     This had been done with the blessing of several senior managers to work around a number of management reporting issues in the system.
    </span>
    <span class="koboSpan" id="kobo.167.3">
     By exporting and manually processing the data in Excel, the team was able to compensate for certain functional shortcomings in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.168.1">
      Salesforce implementation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.169.1">
     The problem is remediated, and an investigation is carried out to find other similar cases where a process might have been used to circumvent good practice.
    </span>
    <span class="koboSpan" id="kobo.169.2">
     At audit time, Salesforce passes the audit with no serious reservations.
    </span>
    <span class="koboSpan" id="kobo.169.3">
     However, in Alexandra’s mind there still lingers a doubt that maybe they never really got to the bottom of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.170.1">
      the issue.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.171.1">
     Problem
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.172.1">
     You might be tempted to think that the
    </span>
    <a id="_idIndexMarker145">
    </a>
    <span class="koboSpan" id="kobo.173.1">
     problem Compliant Is Secure seeks to resolve is the same as for Shared Belongs to Salesforce.
    </span>
    <span class="koboSpan" id="kobo.173.2">
     That is to say, what the anti-pattern seeks to resolve is the general security problem of how to keep data and systems secure.
    </span>
    <span class="koboSpan" id="kobo.173.3">
     That is, however,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.174.1">
      subtly wrong.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.175.1">
     While our last anti-pattern sought to solve security in general, Compliant Is Secure sidesteps the problem of actually being secure with the practices required to demonstrate to certain external parties that you are secure.
    </span>
    <span class="koboSpan" id="kobo.175.2">
     That is to say, the documentation and checklists become the point rather than the actual security practices they are meant
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.176.1">
      to encourage.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.177.1">
     This is similar to Shared Belongs to Salesforce in that we aim to reduce the complex, wicked problem of actually staying secure with the much simpler problem of ticking all the right boxes.
    </span>
    <span class="koboSpan" id="kobo.177.2">
     The strategy of reducing cognitive load by simplifying to a set of well-understood, repeatable
    </span>
    <a id="_idIndexMarker146">
    </a>
    <span class="koboSpan" id="kobo.178.1">
     processes, as we’ll see in the next section, is quite attractive to certain kinds
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.179.1">
      of organizations.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.180.1">
     Proposed solution
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.181.1">
     Compliant Is Secure proposes to substitute and thereby resolve the problem of keeping systems and data secure
    </span>
    <a id="_idIndexMarker147">
    </a>
    <span class="koboSpan" id="kobo.182.1">
     with the simpler problem of staying compliant with a set of clearly defined standards.
    </span>
    <span class="koboSpan" id="kobo.182.2">
     That way, you can move forward in confidence that you have followed good practices and, therefore, are as secure as you are likely
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.183.1">
      to get.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.184.1">
     A good image to keep in mind for this anti-pattern is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.185.1">
      a checklist.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.186.1">
     Let’s be very clear, compliance is a great thing!
    </span>
    <span class="koboSpan" id="kobo.186.2">
     Compliance with the standards that define good practice in your industry and in general is indeed crucial.
    </span>
    <span class="koboSpan" id="kobo.186.3">
     This applies to information security, and it applies
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.187.1">
      in general.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.188.1">
     Compliance with standards can be an extremely good way to encourage good practice within your organization and embed it within its culture.
    </span>
    <span class="koboSpan" id="kobo.188.2">
     What makes this scenario an anti-pattern is that compliance becomes the end goal, whereas the end goal should in fact be the awareness and improvement in practice that the compliance exercise is meant
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.189.1">
      to encourage.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.190.1">
     Put in another way, for information security, you should aim to use compliance as a tool to become more secure and more security aware, not as a way to get security out of the way because you’ve ticked all the boxes.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     It is, however, not difficult to understand why it is attractive to organizations to focus principally
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.191.1">
      on compliance:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.192.1">
      Compliance turns the fuzzy and wicked problem of information security into a manageable and governable one.
     </span>
     <span class="koboSpan" id="kobo.192.2">
      Managers tend to like problems that are easy to understand and clearly measurable.
     </span>
     <span class="koboSpan" id="kobo.192.3">
      Compliance is easy to understand; security
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.193.1">
       is not.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.194.1">
      The processes needed to establish and maintain compliance tend to fit well with existing processes and skills, especially in companies that operate in regulated industries such as life sciences or the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.195.1">
       defense sector.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.196.1">
      When things go wrong, you have clear and unambiguous documentation that you have followed the rules.
     </span>
     <span class="koboSpan" id="kobo.196.2">
      That helps both in terms of explaining incidents externally and protecting relevant
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.197.1">
       stakeholders internally.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.198.1">
      You have to stay compliant anyway.
     </span>
     <span class="koboSpan" id="kobo.198.2">
      For most large organizations, a certain level of compliance is mandatory and embedded in law or industry standards.
     </span>
     <span class="koboSpan" id="kobo.198.3">
      Given that you have to be
     </span>
     <a id="_idIndexMarker148">
     </a>
     <span class="koboSpan" id="kobo.199.1">
      compliant, there is a clear temptation to make that the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.200.1">
       end goal.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.201.1">
     The results you get from falling into this anti-pattern, however, are frequently problematic, as we’ll discuss in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.202.1">
      next section.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.203.1">
     Results
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.204.1">
     What you achieve with the Compliant Is Secure anti-pattern is, generally speaking, point-in-time compliance with a
    </span>
    <a id="_idIndexMarker149">
    </a>
    <span class="koboSpan" id="kobo.205.1">
     standard.
    </span>
    <span class="koboSpan" id="kobo.205.2">
     You will be compliant at each audit point, and in between, people will follow the necessary processes that are required
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.206.1">
      of them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.207.1">
     However, you have not instituted any deeper sense of the importance of security within the organization or given people the training and tools to engage meaningfully with it.
    </span>
    <span class="koboSpan" id="kobo.207.2">
     That means that you will often find many workarounds like the one described in our example, where people do something that is technically compliant but completely circumvents the spirit of security that inspired the rules of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.208.1">
      compliance standard.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.209.1">
     You often see two patterns emerge in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.210.1">
      compliance-centric organizations:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.211.1">
       Drift and remediation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.212.1">
      : In this pattern, you have ongoing drift away from the standards that have been implemented, because people see compliance as a point-in-time exercise.
     </span>
     <span class="koboSpan" id="kobo.212.2">
      This is corrected periodically to bring the organization back into compliance for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.213.1">
       an audit.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.214.1">
       Structured circumvention
      </span>
     </strong>
     <span class="koboSpan" id="kobo.215.1">
      : In this pattern, you continuously follow the rules, but you have included within your compliance system certain ways of granting exceptions, which get exploited systematically to make the lives of workers within the organization easier in one way or another.
     </span>
     <span class="koboSpan" id="kobo.215.2">
      This is the pattern we saw in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.216.1">
       preceding example.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.217.1">
     Fundamentally, with the Compliant Is Secure anti-pattern, your organization is missing the “why” of security.
    </span>
    <span class="koboSpan" id="kobo.217.2">
     They are doing certain things to check the boxes, but do not engage with them beyond
    </span>
    <a id="_idIndexMarker150">
    </a>
    <span class="koboSpan" id="kobo.218.1">
     that exercise.
    </span>
    <span class="koboSpan" id="kobo.218.2">
     That points toward the key interventions that will help with this pattern, which we’ll
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.219.1">
      discuss next.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.220.1">
     Better solutions
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.221.1">
     There is a famous book by business author Simon Sinek called
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.222.1">
      Start with Why
     </span>
    </em>
    <span class="koboSpan" id="kobo.223.1">
     .
    </span>
    <span class="koboSpan" id="kobo.223.2">
     In it, Sinek posits that the most successful organizations, Apple being the canonical example, do not start with what products they are selling, or how they make them, but with a fundamental purpose expressed in an answer to why the company exists in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.224.1">
      first place.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.225.1">
     While I won’t make any
    </span>
    <a id="_idIndexMarker151">
    </a>
    <span class="koboSpan" id="kobo.226.1">
     comments on the merits of this position relative to business in general, when it comes to information security, it is entirely correct.
    </span>
    <span class="koboSpan" id="kobo.226.2">
     The reason why Compliant Is Secure is an anti-pattern is that it neglects the underlying “why” of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.227.1">
      information security.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.228.1">
     The cure to this problem is, of course, to start from the answer to why keeping information secure not only is essential to avoid threats but actually enables the organization to remain resilient and grow in a safe manner.
    </span>
    <span class="koboSpan" id="kobo.228.2">
     Then, you can move on to the how and what of compliance regimes and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.229.1">
      specific controls.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.230.1">
     That is a big task for most Salesforce professionals to take on.
    </span>
    <span class="koboSpan" id="kobo.230.2">
     Helpfully, there are smaller, more practical things we can also do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      to help:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.232.1">
      Continuously make other stakeholders aware that ticking the boxes does not mean the organization will
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.233.1">
       remain secure.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.234.1">
      Train people in Salesforce security and the threats that can occur
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.235.1">
       despite compliance.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.236.1">
      Find champions to take on security awareness on an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.237.1">
       ongoing basis.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.238.1">
      Advocate for ongoing monitoring of the Salesforce org on the security level by these trained and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.239.1">
       motivated people.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.240.1">
      On the technical level, regularly use Salesforce’s Security Health Check or third-party tools to identify and address potential vulnerabilities in your org’s security settings.
     </span>
     <span class="koboSpan" id="kobo.240.2">
      Consider using Salesforce’s Privacy Center to manage consent, track data subject requests, and maintain compliance with privacy regulations such as GDPR and CCPA.
     </span>
     <span class="koboSpan" id="kobo.240.3">
      Tool support can sometimes help keep people engaged in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.241.1">
       ongoing activities.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.242.1">
      Spread knowledge and awareness throughout the organization by regularly bringing up the topic at meetings and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.243.1">
       dedicated sessions.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.244.1">
     Of course, also remember that compliance is important, and you should do your part to stay compliant.
    </span>
    <span class="koboSpan" id="kobo.244.2">
     For instance, Salesforce’s compliance with ISO 27001 for information security and 27701 for privacy management demonstrates their commitment to data protection, but organizations must still ensure their own processes align with these standards.
    </span>
    <span class="koboSpan" id="kobo.244.3">
     Having now considered a very general security anti-pattern, we will once again zoom in on a specific Salesforce security anti-pattern, Declarative Is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.245.1">
      Always Safe.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-44">
    <a id="_idTextAnchor046">
    </a>
    <span class="koboSpan" id="kobo.246.1">
     Declarative Is Always Safe
    </span>
   </h2>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.247.1">
      Falling into the Declarative Is
     </span>
    </em>
    <em class="italic">
     <a id="_idIndexMarker152">
     </a>
    </em>
    <em class="italic">
     <span class="koboSpan" id="kobo.248.1">
      Always Safe anti-pattern implies having an over-optimistic attitude toward the security of declarative
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.249.1">
       customization features.
      </span>
     </em>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.250.1">
     Example
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.251.1">
     Rakesh is the technical lead for
    </span>
    <a id="_idIndexMarker153">
    </a>
    <span class="koboSpan" id="kobo.252.1">
     Salesforce at BigCo.
    </span>
    <span class="koboSpan" id="kobo.252.2">
     BigCo is a long-term user of Salesforce with a big footprint across half a dozen different clouds.
    </span>
    <span class="koboSpan" id="kobo.252.3">
     They expanded usage massively during the COVID pandemic to facilitate a number of processes being carried
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.253.1">
      out remotely.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.254.1">
     Rakesh and his team worked with several smaller partners on the creation of these processes.
    </span>
    <span class="koboSpan" id="kobo.254.2">
     Because of the time pressure involved, they built the processes using a combination of out-of-the-box features and flows, leaving out any complex requirements for a later time.
    </span>
    <span class="koboSpan" id="kobo.254.3">
     The flow-based approach was recommended by the architects from both a speed of development and a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.255.1">
      security perspective.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.256.1">
     With the cooperation of the business, this approach proved adequate as a stopgap measure and BigCo managed the transition to remote work relatively seamlessly, partly due to this work.
    </span>
    <span class="koboSpan" id="kobo.256.2">
     After the initial release, Rakesh and the team kept working on improving and elaborating the new flows, and some have evolved into complex, multi-faceted business applications with powerful features to support
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.257.1">
      the business.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.258.1">
     This includes the ability to carry out mass updates, creations, and deletions; to call other systems via APIs; and even to grant new security features to employees when they take on new roles or responsibilities in the business.
    </span>
    <span class="koboSpan" id="kobo.258.2">
     There are also administrative flows that superusers can use to manage the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.259.1">
      backend functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.260.1">
     Functionally, this works well for the business, but on several occasions, mistakes by users lead to accidental record deletion.
    </span>
    <span class="koboSpan" id="kobo.260.2">
     When a particularly unlucky superuser accidentally deletes a large number of opportunities using an administrative flow, the CTO decides to have a partner review the flows as they’re worried about any potential
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.261.1">
      wider issues.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.262.1">
     The partner does a review of the flows and comes back with a long list of unsafe practices used in the flows.
    </span>
    <span class="koboSpan" id="kobo.262.2">
     In particular, the flows give system administrator-level access to a very large number of users who do not have the requisite training to use them.
    </span>
    <span class="koboSpan" id="kobo.262.3">
     That presents not only an issue of accidental deletion, as has already happened, but also a real security issue.
    </span>
    <span class="koboSpan" id="kobo.262.4">
     That includes threats from both malicious employees and external threat agents as some of the flows are theoretically triggerable via
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.263.1">
      API updates.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.264.1">
     The harm from the incident is easily remedied as BigCo has an advanced backup solution in place, but the remediation of the flows takes much longer.
    </span>
    <span class="koboSpan" id="kobo.264.2">
     For all future development, Rakesh works with the external partner to create a clear set of security guidelines to be followed
    </span>
    <a id="_idIndexMarker154">
    </a>
    <span class="koboSpan" id="kobo.265.1">
     when
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.266.1">
      creating flows.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.267.1">
     Problem
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.268.1">
     The problem that Declarative Is Always Safe seeks to solve is that of secure development or customization.
    </span>
    <span class="koboSpan" id="kobo.268.2">
     That is to say, how do we keep our code and customizations from
    </span>
    <a id="_idIndexMarker155">
    </a>
    <span class="koboSpan" id="kobo.269.1">
     creating vulnerabilities that can be exploited to get at our data
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.270.1">
      and systems?
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.271.1">
     It isn’t surprising that there is a tendency to consider low-code or no-code approaches as a cure for security headaches.
    </span>
    <span class="koboSpan" id="kobo.271.2">
     Many classic and well-advertised vulnerabilities have been down to obscure coding errors, so avoiding code seems like a good idea if you want to be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.272.1">
      more secure.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.273.1">
     Of course, low-code/no-code approaches are a relatively recent phenomenon, so whether this will hold good in practice is still up in the air to some extent.
    </span>
    <span class="koboSpan" id="kobo.273.2">
     The reasoning is generally sound, however, as vendors such as Salesforce will spend much more time securing the low-code components they make available than you can spend on your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.274.1">
      own code.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.275.1">
     However, as we will see when we cover the details of the proposed solution next, this reasoning is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.276.1">
      not airtight.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.277.1">
     Proposed solution
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.278.1">
     The proposed solution to the problem of secure development and configuration that Declarative Is Always Safe
    </span>
    <a id="_idIndexMarker156">
    </a>
    <span class="koboSpan" id="kobo.279.1">
     proposes is to circumvent the problem by only using declarative features, for example, custom objects, page layouts, flows, and even Omnistudio, which are assumed to be secure by default.
    </span>
    <span class="koboSpan" id="kobo.279.2">
     That way, we do not have to spend much time thinking about security and we can get our features
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.280.1">
      created quicker.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.281.1">
     This is clearly an attractive proposition to many different stakeholders, for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.282.1">
      following reasons:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.283.1">
      It is partially true.
     </span>
     <span class="koboSpan" id="kobo.283.2">
      Low-code approaches are less likely than code-based ones to contain
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.284.1">
       security gaps
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.285.1">
      It simplifies development and configuration by putting clear bounds around the art of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.286.1">
       the possible
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.287.1">
      It provides the technical team with a good way to push back on business requirements that are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.288.1">
       too complex
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.289.1">
      It speeds up the delivery of features by leveraging pre-built functionality that can be
     </span>
     <a id="_idIndexMarker157">
     </a>
     <span class="koboSpan" id="kobo.290.1">
      adapted to your particular
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.291.1">
       business needs
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.292.1">
     A focus on declarative features, then, brings many benefits with it and is usually considered a good practice within the Salesforce community.
    </span>
    <span class="koboSpan" id="kobo.292.2">
     However, what can make this focus – if taken too far – a security anti-pattern is the blindness to the very real threats that can be present, even in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.293.1">
      declarative solutions.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.294.1">
     Results
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.295.1">
     The key negative result of the Declarative Is Always Safe anti-pattern, then, is blindness to security threats that may be present in your solution and a lack of awareness that such threats might even
    </span>
    <a id="_idIndexMarker158">
    </a>
    <span class="koboSpan" id="kobo.296.1">
     be there.
    </span>
    <span class="koboSpan" id="kobo.296.2">
     This can lead to serious negative consequences, as in our example.
    </span>
    <span class="koboSpan" id="kobo.296.3">
     The problem, however, is only getting worse day by day as Salesforce brings out new
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.297.1">
      declarative features.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.298.1">
     It is clear from the way features are being released on the Salesforce platform, that Salesforce wants low-code tools such as flows and Omnistudio to be the go-to solutioning toolkits for customization on the platform.
    </span>
    <span class="koboSpan" id="kobo.298.2">
     However, the more powerful these tools become, the more likely you are to be able to do something that will result in a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.299.1">
      security issue.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.300.1">
     Equally, External Services, while declarative, can introduce security risks if not properly configured, especially when dealing with external endpoints and data.
    </span>
    <span class="koboSpan" id="kobo.300.2">
     This also applies to the increasingly prominent AI solutions.
    </span>
    <span class="koboSpan" id="kobo.300.3">
     For instance, when using Einstein Prediction Builder, you need to ensure that sensitive fields are not inadvertently included in prediction models and that model access is appropriately restricted.
    </span>
    <span class="koboSpan" id="kobo.300.4">
     Custom metadata types, while declarative, can store sensitive configuration data and should be secured with appropriate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.301.1">
      access controls.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.302.1">
     Flows are, however, the biggest potential risk area.
    </span>
    <span class="koboSpan" id="kobo.302.2">
     Let us, therefore, consider some security problems that can happen
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.303.1">
      with flows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.304.1">
      General permissions such as Run Flows or the Flow User license can give a very large number of users permissions to run all flows in the org, leading to issues such as those
     </span>
     <a id="_idIndexMarker159">
     </a>
     <span class="koboSpan" id="kobo.305.1">
      in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.306.1">
       our example.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.307.1">
      If users have access to the All_Flows list view, they can then run any flow in the org from the UI.
     </span>
     <span class="koboSpan" id="kobo.307.2">
      This includes
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.308.1">
       external users.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.309.1">
      Flow execution contexts are complex to understand, and it is easy to end up running a flow in system mode by mistake, leading to a potential escalation of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.310.1">
       user rights.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.311.1">
      Client-side validation in flows can accidentally leak information in some cases by including data in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.312.1">
       the response.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.313.1">
      Component visibility can leak information as the component is still included in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.314.1">
       HTTP response.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.315.1">
      Apex actions with wide-ranging effects may be called from flows without a clear understanding of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.316.1">
       security implications.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.317.1">
      When using screen flows in Experience Cloud sites, ensure proper access controls are in place to prevent unauthorized access to sensitive data
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.318.1">
       or operations.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.319.1">
     I recommend the article
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.320.1">
      Understanding Salesforce Flows and Common Security Risks
     </span>
    </em>
    <span class="koboSpan" id="kobo.321.1">
     , available at
    </span>
    <a href="https://appomni.com/resources/aolabs/understanding-salesforce-flows-and-common-security-risks/">
     <span class="koboSpan" id="kobo.322.1">
      https://appomni.com/resources/aolabs/understanding-salesforce-flows-and-common-security-risks/
     </span>
    </a>
    <span class="koboSpan" id="kobo.323.1">
     , as a good introduction to some common
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.324.1">
      flow issues.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.325.1">
     However, the wider point is that there are real security issues that happen with flows, Omnistudio, and even with simpler declarative features.
    </span>
    <span class="koboSpan" id="kobo.325.2">
     New flow features, such as Flow Orchestration, introduce additional complexity and potential security risks if not properly configured.
    </span>
    <span class="koboSpan" id="kobo.325.3">
     Therefore, we cannot rely on them to be safe by default but have to take due precautions, which
    </span>
    <a id="_idIndexMarker160">
    </a>
    <span class="koboSpan" id="kobo.326.1">
     we’ll discuss in our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.327.1">
      next section.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.328.1">
     Better solutions
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.329.1">
     The first and most important piece of advice for avoiding this anti-pattern is to treat your declarative solutions
    </span>
    <a id="_idIndexMarker161">
    </a>
    <span class="koboSpan" id="kobo.330.1">
     every bit as seriously as you would your code-based ones.
    </span>
    <span class="koboSpan" id="kobo.330.2">
     Tools such as flows and Omnistudio are increasingly as powerful as Apex and solve complex
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.331.1">
      business requirements.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.332.1">
     That means that for solutions based on these tools, you should follow a software development process that is fit for purpose in relation to the complexity and importance of the solution in question.
    </span>
    <span class="koboSpan" id="kobo.332.2">
     Specifically, when it comes to security, you should keep the following things
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.333.1">
      in mind:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.334.1">
      Standards and guidelines for declarative solutions should be in place as they would be if you were
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.335.1">
       writing code
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.336.1">
      Make risk and threat assessments upfront for declarative solutions that deal with sensitive data or deploy a lot
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.337.1">
       of power
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.338.1">
      Train developers and configurators to understand the issues and create general awareness about what relying on declarative tools does and does
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.339.1">
       not accomplish
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.340.1">
      Keep an eye on the long-term trend toward declarative tools and update your guidelines
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.341.1">
       as needed
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.342.1">
      Monitor the external environment for issues or exploits related to declarative functionality
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.343.1">
       on Salesforce
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.344.1">
     With that said, we will finish our discussion of security-related anti-patterns by taking a look at how you can really muck up your sharing model
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.345.1">
      in Salesforce.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-45">
    <a id="_idTextAnchor047">
    </a>
    <span class="koboSpan" id="kobo.346.1">
     Sharing isn’t always caring
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.347.1">
     Salesforce has one of the most powerful and complicated sharing architectures known to man.
    </span>
    <span class="koboSpan" id="kobo.347.2">
     This is both a blessing and a curse.
    </span>
    <span class="koboSpan" id="kobo.347.3">
     In this section, however, we will focus on showing how it can go wrong and what to do to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.348.1">
      prevent it.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-46">
    <a id="_idTextAnchor048">
    </a>
    <span class="koboSpan" id="kobo.349.1">
     Spaghetti Sharing Model
    </span>
   </h2>
   <p>
    <em class="italic">
     <span class="koboSpan" id="kobo.350.1">
      Spaghetti Sharing Model does to the security of a Salesforce org what spaghetti code does to the maintainability of
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.351.1">
       an application.
      </span>
     </em>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.352.1">
     Example
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.353.1">
     GlobalCo is a conglomerate
    </span>
    <a id="_idIndexMarker162">
    </a>
    <span class="koboSpan" id="kobo.354.1">
     with numerous different business lines selling products across a number of B2B verticals.
    </span>
    <span class="koboSpan" id="kobo.354.2">
     Most of GlobalCo’s organization is run within the business units, but IT has become a strong global function, as it has made it possible to collaborate effectively across business units using simple tools such as Slack
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.355.1">
      for collaboration.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.356.1">
     A few years back, GlobalCo adopted Salesforce Sales Cloud and Service Cloud as their corporate CRM.
    </span>
    <span class="koboSpan" id="kobo.356.2">
     Huan was the lead architect on that project and now sits in the global Salesforce Center of Excellence.
    </span>
    <span class="koboSpan" id="kobo.356.3">
     While some subsidiaries still use other CRMs operationally, all basic data about customer transactions must make its way to Salesforce.
    </span>
    <span class="koboSpan" id="kobo.356.4">
     To encourage the standardization of processes and data, GlobalCo adopted a strong single-org strategy for its
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.357.1">
      Salesforce environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.358.1">
     Unfortunately, while GlobalCo would like to be able to share as much data as possible globally, a number of regulations prevent them from going as far as they would like.
    </span>
    <span class="koboSpan" id="kobo.358.2">
     There are a number
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.359.1">
      of problems:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.360.1">
      Some countries require their data to be isolated from others, creating country
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.361.1">
       data silos
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.362.1">
      Competition law in a variety of jurisdictions also prevents some subsidiaries from sharing data with specific other subsidiaries to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.363.1">
       prevent collusion
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.364.1">
      Salespeople in some jurisdictions are somewhat paranoid about who can see their opportunities for fear of someone else stealing them, leading to a number of extra protections being put
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.365.1">
       in place
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.366.1">
      Finally, executives in certain business units are used to keeping sensitive opportunities and customer support cases secret and only sharing among a select few, which has also been at least
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.367.1">
       partially accommodated
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.368.1">
     After go-live, there have been a lot of complaints that the structure GlobalCo put in place to meet these
    </span>
    <a id="_idIndexMarker163">
    </a>
    <span class="koboSpan" id="kobo.369.1">
     requirements was excessively rigid.
    </span>
    <span class="koboSpan" id="kobo.369.2">
     There is a call for a number of exceptions from at least half a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.370.1">
      dozen countries.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer024">
     <span class="koboSpan" id="kobo.371.1">
      <img alt="img" role="presentation" src="image/B30991_03_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.372.1">
     Figure 3.2 – Sharing mechanisms
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.373.1">
     Huan leads the team to investigate the requirements.
    </span>
    <span class="koboSpan" id="kobo.373.2">
     Initially, he thinks the problem is solvable by making minor adjustments to the organizational hierarchy and enterprise territory management.
    </span>
    <span class="koboSpan" id="kobo.373.3">
     This, however, proves too simplistic and so he devises a number of additional public groups to capture more refinements to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.374.1">
      the model.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.375.1">
     Users, however, are still complaining, so Huan gets creative with the use of Account and Opportunity teams.
    </span>
    <span class="koboSpan" id="kobo.375.2">
     However, because the process needed would be too onerous to manage manually, the team ends up implementing a number of automations to automatically add team members to Account and Opportunity teams based on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.376.1">
      certain criteria.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.377.1">
     Even that, however, turns out to not be able to capture the full extent of the business requirements for when certain records should and shouldn’t be shared between specified business units and
    </span>
    <a id="_idIndexMarker164">
    </a>
    <span class="koboSpan" id="kobo.378.1">
     countries.
    </span>
    <span class="koboSpan" id="kobo.378.2">
     Huan specifies an Apex-based sharing mechanism and gives it to the development team
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.379.1">
      to implement.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.380.1">
     The complete adjustment to the sharing model goes live, globally, over a weekend.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     Smoke testing is fine, but everyone is holding their breath as the testing of the model is difficult and no one has been able to definitively say that all the important scenarios have
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.381.1">
      been tested.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.382.1">
     While there is no disaster, a steady trickle of access issues makes its way to the team over the week following go-live.
    </span>
    <span class="koboSpan" id="kobo.382.2">
     There are a lot of cases, where either someone has access who shouldn’t have or someone lacks access they
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.383.1">
      should have.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.384.1">
     What’s much worse, however, is that the team is finding it nearly impossible to pinpoint the errors.
    </span>
    <span class="koboSpan" id="kobo.384.2">
     There are just so many moving parts that figuring out what goes wrong in specific cases becomes too complex.
    </span>
    <span class="koboSpan" id="kobo.384.3">
     Every time the team thinks they’ve fixes one issue, it seems another two appear as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.385.1">
      a consequence.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.386.1">
     After several frustrating weeks of trying to resolve the problem, the change management board makes a decision to roll back the changes to the sharing model and find a set of manual workarounds until a more stable technical solution can
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.387.1">
      be found.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.388.1">
     Problem
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.389.1">
     In classical software applications, there is
    </span>
    <a id="_idIndexMarker165">
    </a>
    <span class="koboSpan" id="kobo.390.1">
     a well-known concept called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.391.1">
      spaghetti code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.392.1">
     .
    </span>
    <span class="koboSpan" id="kobo.392.2">
     It happens when
    </span>
    <a id="_idIndexMarker166">
    </a>
    <span class="koboSpan" id="kobo.393.1">
     programmers work without design practices or the necessary experience to implement a system.
    </span>
    <span class="koboSpan" id="kobo.393.2">
     Instead, they just do one thing at a time in a way that works for now with no thought for the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.394.1">
      larger picture.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.395.1">
     Over time, this leads to code that resembles a portion of spaghetti on a plate.
    </span>
    <span class="koboSpan" id="kobo.395.2">
     Everything is tangled up with everything else, changes to one part of the system impact other parts in seemingly random ways, and even the original writers of the code don’t really understand what is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      going on.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.397.1">
     Luckily, on Salesforce, we rarely see spaghetti code to this extent.
    </span>
    <span class="koboSpan" id="kobo.397.2">
     It can occur, but in my experience, it is quite rare.
    </span>
    <span class="koboSpan" id="kobo.397.3">
     What does occur frequently is the Spaghetti Sharing Model anti-pattern.
    </span>
    <span class="koboSpan" id="kobo.397.4">
     That is, sharing models are so complicated that even their designers can’t reliably tell in a specific case why someone has or hasn’t got access to a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.398.1">
      given record.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.399.1">
     The Spaghetti Sharing Model
    </span>
    <a id="_idIndexMarker167">
    </a>
    <span class="koboSpan" id="kobo.400.1">
     anti-pattern arises from an honest attempt to give the business what it wants in terms of record sharing.
    </span>
    <span class="koboSpan" id="kobo.400.2">
     The problem is that for large, global organizations, the level of complexity experienced in this area is so large that it is nearly impossible to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.401.1">
      get right.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.402.1">
     In our example, we saw some of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.403.1">
      reasons why:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.404.1">
      Privacy laws differ between countries and determine what can and cannot
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.405.1">
       be shared
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.406.1">
      Competition law can restrict visibility
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.407.1">
       between subsidiaries
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.408.1">
      Concerns about bonuses and commissions are extremely important to sales teams and can lead to serious concerns about
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.409.1">
       data sharing
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.410.1">
      Executives often want to keep certain data a secret for a variety of business reasons, while sharing other data that is less sensitive of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.411.1">
       same type
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.412.1">
     There are more scenarios than this concerning, for instance, the protection of sensitive health or financial data according to certain laws and standards or internal political factors within the organization that may impact
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.413.1">
      sharing requirements.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.414.1">
     Overall, if you find yourself in an organization with this kind of requirements setup for data sharing, you are in danger of ending up in the Spaghetti Sharing Model anti-pattern, simply by trying to accommodate the requirements you
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.415.1">
      are given.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.416.1">
     Proposed solution
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.417.1">
     The Spaghetti Sharing
    </span>
    <a id="_idIndexMarker168">
    </a>
    <span class="koboSpan" id="kobo.418.1">
     Model anti-pattern suggests that you address sharing requirements in an incremental, iterative way, seeking as closely as possible to meet the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.419.1">
      business needs.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.420.1">
     This seems eminently sensible because of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.421.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.422.1">
      It is exactly what we would do for most other types
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.423.1">
       of requirements
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.424.1">
      It fits with the dominant agile approaches to software development that are used by most Salesforce
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.425.1">
       implementation teams
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.426.1">
      You can nearly always achieve your goal in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.427.1">
       short term
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.428.1">
      It takes a long time before the complexity reaches a level to make the process go off
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.429.1">
       the rails
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.430.1">
     Unfortunately, this process can
    </span>
    <a id="_idIndexMarker169">
    </a>
    <span class="koboSpan" id="kobo.431.1">
     break down in organizations of a certain size and complexity and results in the anti-pattern we are discussing, as we’ll see in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.432.1">
      next section.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.433.1">
     Results
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.434.1">
     The results of the Spaghetti Sharing Model anti-pattern are a situation where some or more of the following
    </span>
    <a id="_idIndexMarker170">
    </a>
    <span class="koboSpan" id="kobo.435.1">
     characteristics
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.436.1">
      are present:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.437.1">
      Records are shared with some users without anyone fully
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.438.1">
       understanding why
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.439.1">
      Record access is missing from some users without anyone fully
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.440.1">
       understanding why
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.441.1">
      Pinpointing access issues is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.442.1">
       extremely difficult
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.443.1">
      Making changes to the sharing model is considered entirely off-limits due
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.444.1">
       to complexity
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.445.1">
      Changes to sharing often lead to new issues that are difficult to understand
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.446.1">
       and fix
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.447.1">
     It is worth reflecting on why sharing is more prone to the Spaghetti Sharing Model anti-pattern than other configuration areas.
    </span>
    <span class="koboSpan" id="kobo.447.2">
     The answer lies mostly in the vast number of mechanisms that are available to control sharing on Salesforce and their interactions.
    </span>
    <span class="koboSpan" id="kobo.447.3">
     Depending on how you count, there are more than 20 different ways of extending the sharing of objects and records
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.448.1">
      in Salesforce.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.449.1">
     The following table shows a sampling of mechanisms that can be used to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.450.1">
      control sharing:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table001">
    <colgroup>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.451.1">
           Mechanism
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <strong class="bold">
         <span class="koboSpan" id="kobo.452.1">
          What it’s
         </span>
        </strong>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.453.1">
           used for
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.454.1">
          Ownership
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.455.1">
         Access to the record owner, user,
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.456.1">
          or queue
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.457.1">
          Profile
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.458.1">
         Access (or not) to an object at the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.459.1">
          basic level
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.460.1">
          Permission Set
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.461.1">
         Access (or not) to an object at the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.462.1">
          basic level
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.463.1">
         Org-Wide
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.464.1">
          Default (Internal)
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.465.1">
         Default internal
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.466.1">
          sharing level
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.467.1">
         Org-Wide
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.468.1">
          Default (External)
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.469.1">
         Default external
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.470.1">
          sharing level
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.471.1">
          Role Hierarchy
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.472.1">
         Access to
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.473.1">
          subordinates’ records
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <a id="_idTextAnchor049">
        </a>
        <span class="koboSpan" id="kobo.474.1">
         Grant Access
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.475.1">
          Using Hierarchies
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.476.1">
         Share (or not) with
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.477.1">
          role hierarchy
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.478.1">
          Public Groups
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.479.1">
         Share with a defined group
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.480.1">
          of users
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.481.1">
         Ownership-Based
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.482.1">
          Sharing Rule
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a id="_idTextAnchor050">
        </a>
        <span class="koboSpan" id="kobo.483.1">
         Share based on a configured rule based on
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.484.1">
          record ownership
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.485.1">
         Criteria-Based
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.486.1">
          Sharing Rule
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.487.1">
         Share based on a configured rule based on record
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.488.1">
          field values
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.489.1">
         Guest User
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.490.1">
          Sharing Rule
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.491.1">
         Special sharing with the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.492.1">
          guest user
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.493.1">
          Account Teams
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <a id="_idTextAnchor051">
        </a>
        <span class="koboSpan" id="kobo.494.1">
         Share based on membership in an
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.495.1">
          account team
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.496.1">
          Opportunity Teams
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.497.1">
         Share
        </span>
        <a id="_idIndexMarker171">
        </a>
        <span class="koboSpan" id="kobo.498.1">
         based on membership in an
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.499.1">
          opportunity team
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.500.1">
          Case Teams
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.501.1">
         Share based on membership in a
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.502.1">
          case team
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.503.1">
          Manual Sharing
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.504.1">
         Share
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.505.1">
          records manually
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.506.1">
          Implicit Sharing
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.507.1">
         Automated sharing between parents and children for certain
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.508.1">
          standard objects
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.509.1">
          Territory Hierarchy
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.510.1">
         Share based on configured territories and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.511.1">
          territory membership
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.512.1">
         External
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.513.1">
          Account Hierarchy
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.514.1">
         Grant access based on
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.515.1">
          account hierarchy
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.516.1">
          Sharing Group
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.517.1">
         Share records owned by
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.518.1">
          portal users
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.519.1">
          Sharing Set
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.520.1">
         Share records with portal users based on matches between the Account or
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.521.1">
          Contact field
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.522.1">
          Manager Groups
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.523.1">
         Share records with the
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.524.1">
          management chain
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.525.1">
          Apex Sharing
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.526.1">
          Share programmatically
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.527.1">
          Restriction Rule
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.528.1">
         Restrict
        </span>
        <a id="_idIndexMarker172">
        </a>
        <span class="koboSpan" id="kobo.529.1">
         access to specific types
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.530.1">
          of records
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.531.1">
     Table 3.1 – Salesforce sharing mechanisms
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.532.1">
     Ultimately, this vast number of mechanisms, if used injudiciously, can lead to the Spaghetti Sharing Model anti-pattern, simply because their interaction becomes opaque to a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.533.1">
      human-level intelligence.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.534.1">
     Better solutions
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.535.1">
     As we have seen, the Spaghetti Sharing Model anti-pattern can occur just from people doing their jobs and incrementally
    </span>
    <a id="_idIndexMarker173">
    </a>
    <span class="koboSpan" id="kobo.536.1">
     seeking to create value for the business by meeting their requirements.
    </span>
    <span class="koboSpan" id="kobo.536.2">
     That means this anti-pattern can occur without anyone doing anything wrong or making a specifically wrong decision.
    </span>
    <span class="koboSpan" id="kobo.536.3">
     Someone needs to step outside the day-to-day work in order to spot this issue prior to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.537.1">
      it occurring.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.538.1">
     At the risk of provoking severe retaliation from agile fundamentalists, I will suggest that if you find yourself in an organization where there are highly complex sharing requirements, you need to stop, take a step back, and put in place an upfront design for the sharing architecture along with governance mechanisms to enforce it over time.
    </span>
    <span class="koboSpan" id="kobo.538.2">
     For instance, you might introduce a principle that it is best to be parsimonious in using sharing mechanisms and make
    </span>
    <a id="_idIndexMarker174">
    </a>
    <span class="koboSpan" id="kobo.539.1">
     the adoption of new types of sharing subject to approval by an architecture review board or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.540.1">
      design authority.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.541.1">
     This concludes our presentation of security anti-patterns.
    </span>
    <span class="koboSpan" id="kobo.541.2">
     We will now look at the key things to take away from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.542.1">
      the discussion.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-47">
    <a id="_idTextAnchor052">
    </a>
    <span class="koboSpan" id="kobo.543.1">
     Knowing the takeaways
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.544.1">
     In this section, we will abstract a bit from the specific patterns and instead try to pull out the wider learning points you can use in your day-to-day work as a Salesforce architect or in preparing for the CTA Review
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.545.1">
      Board exam.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.546.1">
     When architecting
    </span>
    <a id="_idIndexMarker175">
    </a>
    <span class="koboSpan" id="kobo.547.1">
     Salesforce solutions, you should be mindful of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.548.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.549.1">
      Security is not just a technical issue; the way you frame the problems and create awareness is even
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.550.1">
       more important.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.551.1">
      It is easy to assume away complex security issues in various ways.
     </span>
     <span class="koboSpan" id="kobo.551.2">
      While you may not be able to singlehandedly change this as an architect, you can be a part of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.552.1">
       raising awareness.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.553.1">
      Instituting sharing sessions and sending out relevant material is one good way that you can help make
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.554.1">
       things better.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.555.1">
      You can also ensure that security guidelines and practices on the technical level reflect the full
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.556.1">
       threat picture.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.557.1">
      Do not assume that something is Salesforce’s responsibility without
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.558.1">
       good evidence.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.559.1">
      Do not assume that because you are using a declarative feature, you cannot have a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.560.1">
       security gap.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.561.1">
      Find ways of monitoring the security stance of your Salesforce orgs on a frequent basis and act on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.562.1">
       the intelligence.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.563.1">
      Make security matters a recurring discussion in governance forums where you can influence
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.564.1">
       the agenda.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.565.1">
      Don’t build sharing
     </span>
     <a id="_idIndexMarker176">
     </a>
     <span class="koboSpan" id="kobo.566.1">
      models incrementally unless your requirements are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.567.1">
       very simple.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.568.1">
      Instead, take the pain upfront and come up with a set of mechanisms that can work in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.569.1">
       your scenario.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.570.1">
      Regularly assess and update your understanding of the shared responsibility model as Salesforce introduces new features and services, especially
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.571.1">
       AI-driven capabilities.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.572.1">
      Implement a continuous security monitoring strategy that includes automated tools and periodic manual reviews to stay ahead of evolving threats in your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.573.1">
       Salesforce environment.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.574.1">
      Develop a comprehensive security training program for your Salesforce team that covers both declarative and programmatic development, emphasizing the potential risks in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.575.1">
       both areas.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.576.1">
      Establish a security-first culture within your Salesforce team by incorporating security considerations into your development life cycle, from requirements gathering
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.577.1">
       to deployment.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.578.1">
      Regularly audit and optimize your sharing model, using tools such as Salesforce Health Check and Optimizer, to prevent the gradual accumulation of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.579.1">
       unnecessary complexity.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.580.1">
     In preparing for the CTA Review Board
    </span>
    <a id="_idIndexMarker177">
    </a>
    <span class="koboSpan" id="kobo.581.1">
     exam, you should be mindful of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.582.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.583.1">
      Security is embedded in a lot of areas, so even though it is a distinct domain, you should still cover security matters concisely where relevant in your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.584.1">
       solution run-through.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.585.1">
      Security is a complex area, so be as clear and concise as possible.
     </span>
     <span class="koboSpan" id="kobo.585.2">
      It is very easy to get drawn into long discussions on security matters and you don’t have the time for that at a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.586.1">
       review
      </span>
     </span>
     <span class="No-Break">
      <a id="_idIndexMarker178">
      </a>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.587.1">
       board.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.588.1">
      Consider including some comments on security when reviewing your governance model and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.589.1">
       potential risks.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.590.1">
      Be parsimonious when picking security mechanisms.
     </span>
     <span class="koboSpan" id="kobo.590.2">
      Having fewer mechanisms will make them easier to explain and make it less likely that you will have interactions that lead to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.591.1">
       unforeseen consequences.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.592.1">
      Utilize permission set groups to organize and manage complex permission structures more efficiently, reducing the risk of overly complicated
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.593.1">
       security models.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.594.1">
      Of course, don’t oversimplify or make assumptions that would point in the direction of not appreciating how things can go wrong in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.595.1">
       security domain.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.596.1">
      Sharing is particularly easy to get wrong, so be quite careful about designing exotic
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.597.1">
       sharing solutions.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.598.1">
      Don’t invent additional security requirements where it isn’t stated in the scenario.
     </span>
     <span class="koboSpan" id="kobo.598.2">
      You can easily think yourself into additional implied requirements when reading
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.599.1">
       many scenarios.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.600.1">
      The one exception to this rule
     </span>
     <a id="_idIndexMarker179">
     </a>
     <span class="koboSpan" id="kobo.601.1">
      is dealing with privacy law, such as GDPR, if you have an org in a jurisdiction where
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.602.1">
       it applies.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.603.1">
      When integrating with external systems, ensure proper API security measures, such as OAuth 2.0, IP restrictions, and regular token rotation,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.604.1">
       are followed.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.605.1">
      Be prepared to discuss how you would approach security in a multi-cloud Salesforce implementation, considering the unique security challenges of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.606.1">
       each cloud.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.607.1">
      Practice explaining complex security concepts, such as the implications of AI on data security, in a clear and concise manner suitable for the time constraints of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.608.1">
       review board.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.609.1">
      Be ready to explain
     </span>
     <a id="_idIndexMarker180">
     </a>
     <span class="koboSpan" id="kobo.610.1">
      how you would balance security requirements with other architectural concerns, such as performance and user experience, in a large-scale
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.611.1">
       Salesforce implementation.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.612.1">
     We have now covered the material for this chapter and are ready to proceed to the next one.
    </span>
    <span class="koboSpan" id="kobo.612.2">
     First, however, we will summarize
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.613.1">
      our learning.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-48">
    <a id="_idTextAnchor053">
    </a>
    <span class="koboSpan" id="kobo.614.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.615.1">
     In this chapter, we have seen how there are many ways to compromise your security by following seemingly innocuous courses of action or failing to realize subtle distinctions in responsibilities
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.616.1">
      and approaches.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.617.1">
     These include both general security anti-patterns that affect many different platforms, such as Shared Belongs to Salesforce and Compliant Is Secure, and unique-to-Salesforce anti-patterns such as Declarative Is Always Safe and Spaghetti Sharing Model.
    </span>
    <span class="koboSpan" id="kobo.617.2">
     These underscore the particular complexity of the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.618.1">
      security domain.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.619.1">
     When it comes to security, you have to attend both to high-level issues of organizational culture and to the minutiae of how mechanisms are designed specifically for the technology you are using.
    </span>
    <span class="koboSpan" id="kobo.619.2">
     That is what makes it both frustrating and highly interesting at the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.620.1">
      same time.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.621.1">
     Having covered the security domain, we will move on to have a look at
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.622.1">
      data next.
     </span>
    </span>
   </p>
  </div>
 </body></html>