<html><head></head><body>
<div id="_idContainer155">
<h1 class="chapter-number" id="_idParaDest-108"><a id="_idTextAnchor109"/><span class="koboSpan" id="kobo.1.1">5</span></h1>
<h1 id="_idParaDest-109"><a id="_idTextAnchor110"/><span class="koboSpan" id="kobo.2.1">Driving CI/CD with GitHub</span></h1>
<p><span class="koboSpan" id="kobo.3.1">This chapter is designed to unravel the layers of GitHub Actions, from its core concepts to advanced deployment strategies. </span><span class="koboSpan" id="kobo.3.2">You will encounter a detailed exploration of GitHub Actions’ capabilities, structure, and best practices. </span><span class="koboSpan" id="kobo.3.3">We delve into the essence of workflows, jobs, steps, and actions, each dissected to reveal their importance in automation. </span><span class="koboSpan" id="kobo.3.4">Practical insights on reducing redundancy, managing secrets and variables, and the art of debugging will enhance your workflows’ efficiency and security. </span><span class="koboSpan" id="kobo.3.5">Permissions and approval processes are also covered, ensuring that you wield control over your </span><strong class="bold"><span class="koboSpan" id="kobo.4.1">Continuous Integration/Continuous Delivery</span></strong><span class="koboSpan" id="kobo.5.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.6.1">CI/CD</span></strong><span class="koboSpan" id="kobo.7.1">) pipeline </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">with precision.</span></span></p>
<p><span class="koboSpan" id="kobo.9.1">Deployment strategies unfold with clarity, presenting blue-green, rolling, and canary deployments, each with their steps, real-world applications, and switchover methods. </span><span class="koboSpan" id="kobo.9.2">The world of feature release strategies is also demystified, providing you with a detailed explanation of feature flags and </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">release trains.</span></span></p>
<p><span class="koboSpan" id="kobo.11.1">We will cover the following main topics in </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">this chapter:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.13.1">GitHub Actions – Mastering </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">workflow automation</span></span></li>
<li><span class="No-Break"><span class="koboSpan" id="kobo.15.1">Deployment strategies</span></span></li>
<li><span class="koboSpan" id="kobo.16.1">Feature </span><span class="No-Break"><span class="koboSpan" id="kobo.17.1">release strategies</span></span></li>
</ul>
<h1 id="_idParaDest-110"><a id="_idTextAnchor111"/><span class="koboSpan" id="kobo.18.1">GitHub Actions – Mastering workflow automation</span></h1>
<p><span class="koboSpan" id="kobo.19.1">GitHub Actions</span><a id="_idIndexMarker460"/><span class="koboSpan" id="kobo.20.1"> represents a transformative shift in how software development and deployment processes are automated. </span><span class="koboSpan" id="kobo.20.2">As a native feature of GitHub, this world-class CI/CD platform facilitates the creation, management, and execution of workflows directly within your GitHub repository. </span><span class="koboSpan" id="kobo.20.3">GitHub Actions provides a simple and clear workflow, as the following </span><span class="No-Break"><span class="koboSpan" id="kobo.21.1">screenshot shows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer142">
<span class="koboSpan" id="kobo.22.1"><img alt="Figure 5.1 – GitHub Actions built-in visualization" src="image/B21203_05_01.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.23.1">Figure 5.1 – GitHub Actions built-in visualization</span></p>
<p><span class="koboSpan" id="kobo.24.1">This chapter delves into the intricacies of </span><a id="_idIndexMarker461"/><span class="koboSpan" id="kobo.25.1">GitHub Actions, providing a detailed understanding of its capabilities, implementation, and </span><span class="No-Break"><span class="koboSpan" id="kobo.26.1">best practices.</span></span></p>
<h2 id="_idParaDest-111"><a id="_idTextAnchor112"/><span class="koboSpan" id="kobo.27.1">Comprehensive overview of GitHub Actions</span></h2>
<p><span class="koboSpan" id="kobo.28.1">GitHub Actions offers a wide range of benefits to enhance your software development workflow. </span><span class="koboSpan" id="kobo.28.2">Here is a closer look at what it brings to </span><span class="No-Break"><span class="koboSpan" id="kobo.29.1">the table:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.30.1">Automation</span></strong><span class="koboSpan" id="kobo.31.1">: GitHub Actions</span><a id="_idIndexMarker462"/><span class="koboSpan" id="kobo.32.1"> automates repetitive tasks such as code building, testing, and deployment. </span><span class="koboSpan" id="kobo.32.2">It responds to events such as code pushes and issue creation, reducing the need for </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">manual intervention.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.34.1">Versatility</span></strong><span class="koboSpan" id="kobo.35.1">: It can be used for various purposes, including building containerized applications, deploying web services, managing dependencies, and more. </span><span class="koboSpan" id="kobo.35.2">This flexibility makes it adaptable to different </span><span class="No-Break"><span class="koboSpan" id="kobo.36.1">development needs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.37.1">CI/CD automation</span></strong><span class="koboSpan" id="kobo.38.1">: GitHub </span><a id="_idIndexMarker463"/><span class="koboSpan" id="kobo.39.1">Actions streamlines the CI and CD processes. </span><span class="koboSpan" id="kobo.39.2">It automatically builds and tests code changes, ensuring code quality, and simplifies the deployment pipeline, leading to faster and more </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">reliable releases.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.41.1">Improved collaboration</span></strong><span class="koboSpan" id="kobo.42.1">: It automates code review processes, performs automated testing, and sends notifications based on workflow results. </span><span class="koboSpan" id="kobo.42.2">This fosters better collaboration among team members, as they can focus on addressing critical issues </span><span class="No-Break"><span class="koboSpan" id="kobo.43.1">and improvements.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.44.1">Customization</span></strong><span class="koboSpan" id="kobo.45.1">: GitHub Actions allows for </span><a id="_idIndexMarker464"/><span class="koboSpan" id="kobo.46.1">workflow customization through YAML configuration. </span><span class="koboSpan" id="kobo.46.2">Developers can tailor workflows to suit their specific requirements and seamlessly integrate with third-party tools and services for </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">extended functionality.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.48.1">Creating workflows is as simple as placing a YAML file in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.49.1">.github/workflows</span></strong><span class="koboSpan" id="kobo.50.1"> directory of your repository, as shown in the following screenshot. </span><span class="koboSpan" id="kobo.50.2">This setup enables CI tasks, feedback integration into pull requests, and defining conditions for pull </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">request merging:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer143">
<span class="koboSpan" id="kobo.52.1"><img alt="Figure 5.2 – Easy development experience with YAML" src="image/B21203_05_02.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.53.1">Figure 5.2 – Easy development experience with YAML</span></p>
<p><span class="koboSpan" id="kobo.54.1">To illustrate the power and versatility of</span><a id="_idIndexMarker465"/><span class="koboSpan" id="kobo.55.1"> GitHub workflows, let’s consider a typical CI workflow for a Node.js application. </span><span class="koboSpan" id="kobo.55.2">Triggered by every push to the </span><strong class="source-inline"><span class="koboSpan" id="kobo.56.1">main</span></strong><span class="koboSpan" id="kobo.57.1"> branch and pull requests, this workflow may include jobs such as </span><strong class="bold"><span class="koboSpan" id="kobo.58.1">build</span></strong><span class="koboSpan" id="kobo.59.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.60.1">test</span></strong><span class="koboSpan" id="kobo.61.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.62.1">deploy</span></strong><span class="koboSpan" id="kobo.63.1">. </span><span class="koboSpan" id="kobo.63.2">Each job serves a specific purpose – building the project, running tests, and deploying the application, respectively. </span><span class="koboSpan" id="kobo.63.3">Within these jobs, steps, and actions are carefully orchestrated to ensure that each phase of the CI process is executed flawlessly. </span><span class="koboSpan" id="kobo.63.4">From checking out the code and setting up the Node.js environment to running tests and deploying the application, each step and action plays a critical role. </span><span class="koboSpan" id="kobo.63.5">We will now delve into the </span><span class="No-Break"><span class="koboSpan" id="kobo.64.1">detailed structure.</span></span></p>
<p><span class="koboSpan" id="kobo.65.1">The following is a typical example of a</span><a id="_idIndexMarker466"/><span class="koboSpan" id="kobo.66.1"> GitHub Actions workflow. </span><span class="koboSpan" id="kobo.66.2">The workflow is written in YAML, which may seem difficult. </span><span class="koboSpan" id="kobo.66.3">But if you look at each line one by one, it is simple and very easy. </span><span class="koboSpan" id="kobo.66.4">Note that this example is for building a Node.js application and will not work if you just paste this file. </span><span class="koboSpan" id="kobo.66.5">If you want to try it, try copying the entire project from the Packt </span><span class="No-Break"><span class="koboSpan" id="kobo.67.1">repository (</span></span><a href="https://github.com/PacktPublishing/DevOps-Unleashed-with-Git-and-GitHub/tree/main/chapter5"><span class="No-Break"><span class="koboSpan" id="kobo.68.1">https://github.com/PacktPublishing/DevOps-Unleashed-with-Git-and-GitHub/tree/main/chapter5</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.69.1">):</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.70.1">
name: Node.js CI
on:
  push:
    branches: [ "main" ]
jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16.x, 18.x]
    steps:
    - uses: actions/checkout@v3
    - name: Use Node.js ${{ matrix.node-version }}
      uses: actions/setup-node@v3
      with:
        node-version: ${{ matrix.node-version }}
        cache: 'npm'
    - run: npm ci
    - run: tsc
    - run: node dist/test</span></pre> <h2 id="_idParaDest-112"><a id="_idTextAnchor113"/><span class="koboSpan" id="kobo.71.1">Deep diving into GitHub workflow structure</span></h2>
<p><span class="koboSpan" id="kobo.72.1">The </span><a id="_idIndexMarker467"/><span class="koboSpan" id="kobo.73.1">GitHub workflow stands as the epitome of modern automation in software development, a feature that fundamentally transforms the landscape of how developers approach CI/CD processes. </span><span class="koboSpan" id="kobo.73.2">This exploration delves into the intricacies of GitHub workflows, breaking down their structure and functionality to understand how they revolutionize software </span><span class="No-Break"><span class="koboSpan" id="kobo.74.1">development practices.</span></span></p>
<p><span class="koboSpan" id="kobo.75.1">When you see a YAML file, you may think that it is difficult to understand. </span><span class="koboSpan" id="kobo.75.2">Yes, it might be more intuitive if you could tweak it in the GUI. </span><span class="koboSpan" id="kobo.75.3">But the GitHub Actions workflow is </span><span class="No-Break"><span class="koboSpan" id="kobo.76.1">really simple.</span></span></p>
<p><span class="koboSpan" id="kobo.77.1">The workflow can be broken down into the </span><span class="No-Break"><span class="koboSpan" id="kobo.78.1">following elements:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.79.1">Workflow</span></strong><span class="koboSpan" id="kobo.80.1">: The </span><a id="_idIndexMarker468"/><span class="koboSpan" id="kobo.81.1">backbone of automation, defining the </span><span class="No-Break"><span class="koboSpan" id="kobo.82.1">entire process</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.83.1">Job</span></strong><span class="koboSpan" id="kobo.84.1">: A </span><a id="_idIndexMarker469"/><span class="koboSpan" id="kobo.85.1">group of steps executed in the </span><span class="No-Break"><span class="koboSpan" id="kobo.86.1">same environment</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.87.1">Steps</span></strong><span class="koboSpan" id="kobo.88.1">: The</span><a id="_idIndexMarker470"/><span class="koboSpan" id="kobo.89.1"> smallest unit of a workflow, each representing an </span><span class="No-Break"><span class="koboSpan" id="kobo.90.1">individual task</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.91.1">Actions</span></strong><span class="koboSpan" id="kobo.92.1">: Reusable unit, combined</span><a id="_idIndexMarker471"/><span class="koboSpan" id="kobo.93.1"> into steps, to perform </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">specific tasks</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.95.1">It would be easier to understand if we think of each of these as the </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">following blocks:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer144">
<span class="koboSpan" id="kobo.97.1"><img alt="Figure 5.3 – GitHub Actions workflow structure" src="image/B21203_05_03.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.98.1">Figure 5.3 – GitHub Actions workflow structure</span></p>
<p><span class="koboSpan" id="kobo.99.1">We will cover these elements in detail in the </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">following subsections.</span></span></p>
<h3><span class="koboSpan" id="kobo.101.1">Workflow – The automation framework</span></h3>
<p><span class="koboSpan" id="kobo.102.1">At the heart of </span><a id="_idIndexMarker472"/><span class="koboSpan" id="kobo.103.1">GitHub Actions lies the concept of the </span><strong class="bold"><span class="koboSpan" id="kobo.104.1">workflow</span></strong><span class="koboSpan" id="kobo.105.1">. </span><span class="koboSpan" id="kobo.105.2">It is more than just a sequence of tasks; it is an automated, structured, and highly customizable set of procedures, all defined within a YAML file. </span><span class="koboSpan" id="kobo.105.3">This file, living in the </span><strong class="source-inline"><span class="koboSpan" id="kobo.106.1">.github/workflows</span></strong><span class="koboSpan" id="kobo.107.1"> directory of a GitHub repository, is the blueprint of your automation strategy. </span><span class="koboSpan" id="kobo.107.2">It is here where the magic begins—with each GitHub event, such as a push or a pull request, these workflows spring into action, setting the cogs of automation </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">in motion.</span></span></p>
<p><span class="koboSpan" id="kobo.109.1">A GitHub Actions workflow</span><a id="_idIndexMarker473"/><span class="koboSpan" id="kobo.110.1"> can engage with a variety of event types, each triggering different automated sequences that are defined in the YAML file. </span><span class="koboSpan" id="kobo.110.2">The following subsections cover detailed explanations of the event types that can be used to </span><span class="No-Break"><span class="koboSpan" id="kobo.111.1">trigger workflows.</span></span></p>
<h4><span class="koboSpan" id="kobo.112.1">Webhook events trigger</span></h4>
<p><span class="koboSpan" id="kobo.113.1">A </span><a id="_idIndexMarker474"/><span class="koboSpan" id="kobo.114.1">variety of</span><a id="_idIndexMarker475"/><span class="koboSpan" id="kobo.115.1"> triggers are possible, but we will mention a few typical </span><span class="No-Break"><span class="koboSpan" id="kobo.116.1">ones here:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.117.1">Pull request operations</span></strong><span class="koboSpan" id="kobo.118.1">: Workflows </span><a id="_idIndexMarker476"/><span class="koboSpan" id="kobo.119.1">can be configured to trigger on pull request events, such as when pull requests are opened, updated, merged, or closed. </span><span class="koboSpan" id="kobo.119.2">This enables automated testing, code reviews, and merge conflict checks, ensuring that changes are validated before integration into the </span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.120.1">main </span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">branch.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.122.1">Issue operations</span></strong><span class="koboSpan" id="kobo.123.1">: Similar</span><a id="_idIndexMarker477"/><span class="koboSpan" id="kobo.124.1"> to pull requests, workflows can react to issue activities such as creation, assignment, labeling, and closing. </span><span class="koboSpan" id="kobo.124.2">This is ideal for automatic issue response templates, prioritization, </span><span class="No-Break"><span class="koboSpan" id="kobo.125.1">and triaging.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.126.1">Push events and others</span></strong><span class="koboSpan" id="kobo.127.1">: Perhaps</span><a id="_idIndexMarker478"/><span class="koboSpan" id="kobo.128.1"> the most common trigger, a push event, occurs when commits are pushed to the repository. </span><span class="koboSpan" id="kobo.128.2">Workflows initiated by push events can handle a multitude of tasks, including code scans, building, testing, and </span><span class="No-Break"><span class="koboSpan" id="kobo.129.1">deploying applications.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.130.1">The following example triggers an event when pushed </span><span class="No-Break"><span class="koboSpan" id="kobo.131.1">to </span></span><span class="No-Break"><strong class="source-inline"><span class="koboSpan" id="kobo.132.1">main</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.133.1">:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.134.1">
on:
  push:
    branches: [ "main" ]</span></pre> <h4><span class="koboSpan" id="kobo.135.1">Scheduled events trigger</span></h4>
<p><span class="koboSpan" id="kobo.136.1">Workflows can be </span><a id="_idIndexMarker479"/><span class="koboSpan" id="kobo.137.1">scheduled to run at specific times using the Cron syntax. </span><span class="koboSpan" id="kobo.137.2">This </span><a id="_idIndexMarker480"/><span class="koboSpan" id="kobo.138.1">feature is akin to an alarm clock that activates your workflows at predetermined intervals, useful for nightly builds, regular cleanups, or periodic syncing tasks. </span><span class="koboSpan" id="kobo.138.2">In this example, the</span><a id="_idIndexMarker481"/><span class="koboSpan" id="kobo.139.1"> workflow is </span><a id="_idIndexMarker482"/><span class="koboSpan" id="kobo.140.1">triggered daily at 5:30 and </span><span class="No-Break"><span class="koboSpan" id="kobo.141.1">17:30 UTC:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.142.1">
on:
  schedule:
    - cron:  '30 5,17 * * *'</span></pre> <h4><span class="koboSpan" id="kobo.143.1">Manual events trigger</span></h4>
<p><strong class="source-inline"><span class="koboSpan" id="kobo.144.1">workflow_dispatch</span></strong><span class="koboSpan" id="kobo.145.1"> allows </span><a id="_idIndexMarker483"/><span class="koboSpan" id="kobo.146.1">workflows to be manually triggered from the GitHub </span><a id="_idIndexMarker484"/><span class="koboSpan" id="kobo.147.1">UI or API. </span><span class="koboSpan" id="kobo.147.2">This offers the flexibility to run workflows on demand, which is particularly useful for ad hoc tasks such as manual deployments, data imports, or any operation where manual oversight is necessary </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">before execution.</span></span></p>
<p><span class="koboSpan" id="kobo.149.1">The following is an example of a setup for </span><span class="No-Break"><span class="koboSpan" id="kobo.150.1">manual operation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.151.1">
on: workflow_dispatch</span></pre> <h3><span class="koboSpan" id="kobo.152.1">Job – The execution unit</span></h3>
<p><span class="koboSpan" id="kobo.153.1">Within each </span><a id="_idIndexMarker485"/><span class="koboSpan" id="kobo.154.1">workflow, we encounter </span><strong class="bold"><span class="koboSpan" id="kobo.155.1">jobs</span></strong><span class="koboSpan" id="kobo.156.1">. </span><span class="koboSpan" id="kobo.156.2">Think of a job as a coherent group of steps that execute collectively on the same runner. </span><span class="koboSpan" id="kobo.156.3">A runner in GitHub Actions is a server that has the GitHub Actions runner application installed. </span><span class="koboSpan" id="kobo.156.4">It is essentially where your jobs are executed. </span><span class="koboSpan" id="kobo.156.5">Each runner can be thought of as a clean, isolated </span><strong class="bold"><span class="koboSpan" id="kobo.157.1">Virtual Machine</span></strong><span class="koboSpan" id="kobo.158.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.159.1">VM</span></strong><span class="koboSpan" id="kobo.160.1">) that is </span><a id="_idIndexMarker486"/><span class="koboSpan" id="kobo.161.1">provisioned for each job or workflow run. </span><span class="koboSpan" id="kobo.161.2">The beauty of jobs in a GitHub workflow is their ability to run concurrently across different runners unless they are explicitly defined to be dependent on one another. </span><span class="koboSpan" id="kobo.161.3">Each job can operate on a variety of GitHub-hosted VMs, each catering to different operating systems, or even on self-hosted machines, offering an unprecedented level </span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">of flexibility.</span></span></p>
<p><span class="koboSpan" id="kobo.163.1">In the following</span><a id="_idIndexMarker487"/><span class="koboSpan" id="kobo.164.1"> example, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.165.1">build</span></strong><span class="koboSpan" id="kobo.166.1"> job is a fundamental component of the workflow process, generally responsible for compiling code or generating build artifacts. </span><span class="koboSpan" id="kobo.166.2">The name </span><strong class="source-inline"><span class="koboSpan" id="kobo.167.1">build</span></strong><span class="koboSpan" id="kobo.168.1"> can be replaced with any job name you like. </span><span class="koboSpan" id="kobo.168.2">In your setup, the </span><strong class="source-inline"><span class="koboSpan" id="kobo.169.1">runs-on</span></strong><span class="koboSpan" id="kobo.170.1"> key specifies the execution environment for the following example job, which is the </span><strong class="source-inline"><span class="koboSpan" id="kobo.171.1">ubuntu-latest</span></strong><span class="koboSpan" id="kobo.172.1"> runner. </span><span class="koboSpan" id="kobo.172.2">This choice instructs GitHub Actions to execute the </span><strong class="source-inline"><span class="koboSpan" id="kobo.173.1">build</span></strong><span class="koboSpan" id="kobo.174.1"> job on the most recent version of Ubuntu Linux available on the platform. </span><span class="koboSpan" id="kobo.174.2">Apart from this, you can choose macOS and Windows. </span><span class="koboSpan" id="kobo.174.3">Also, your local machines or on-premises machines can be registered as self-hosted runners, giving you the flexibility to use them in a variety of environments, including those with strict network requirements or </span><span class="No-Break"><span class="koboSpan" id="kobo.175.1">larger workloads:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.176.1">
jobs:
  build:
    runs-on: ubuntu-latest</span></pre> <p><span class="koboSpan" id="kobo.177.1">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.178.1">strategy</span></strong><span class="koboSpan" id="kobo.179.1"> feature in GitHub Actions simplifies testing across multiple environments using the </span><strong class="source-inline"><span class="koboSpan" id="kobo.180.1">matrix</span></strong><span class="koboSpan" id="kobo.181.1"> option. </span><span class="koboSpan" id="kobo.181.2">This option allows you to define a combination of different configurations (such as operating systems, programming language versions, or dependencies) that you want your workflow to run on. </span><span class="koboSpan" id="kobo.181.3">Instead of setting up multiple jobs manually for each configuration, the matrix option dynamically generates a job for each combination you specify. </span><span class="koboSpan" id="kobo.181.4">This approach avoids the redundancy of manual setup and ensures your code works on various versions of dependencies, such as Node.js. </span><span class="koboSpan" id="kobo.181.5">It is a proactive way to catch compatibility issues early, affirming your application’s stability across different environments. </span><span class="koboSpan" id="kobo.181.6">This is optional, but good to keep </span><span class="No-Break"><span class="koboSpan" id="kobo.182.1">in mind:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.183.1">
jobs:
  build:
    strategy:
      matrix:
        node-version: [16.x, 18.x]</span></pre> <p><span class="koboSpan" id="kobo.184.1">In addition, container settings</span><a id="_idIndexMarker488"/><span class="koboSpan" id="kobo.185.1"> can be made as follows. </span><span class="koboSpan" id="kobo.185.2">If you want a specific container environment, you can use this to implement CI/CD in a </span><span class="No-Break"><span class="koboSpan" id="kobo.186.1">flexible environment:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.187.1">
jobs:
  your-container-job:
    container:
      image: node:18</span></pre> <p><span class="koboSpan" id="kobo.188.1">You can also specify the conditions under which jobs will run </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">as follows:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.190.1">
jobs:
  production-deploy:
    if: github.repository == 'georgehattori/hello-world'</span></pre> <h3><span class="koboSpan" id="kobo.191.1">Steps – The building blocks</span></h3>
<p><span class="koboSpan" id="kobo.192.1">Diving deeper, each job</span><a id="_idIndexMarker489"/><span class="koboSpan" id="kobo.193.1"> comprises </span><strong class="bold"><span class="koboSpan" id="kobo.194.1">steps</span></strong><span class="koboSpan" id="kobo.195.1">, fundamental tasks, or operations. </span><span class="koboSpan" id="kobo.195.2">Each step in a job is executed sequentially, ensuring a controlled progression of tasks. </span><span class="koboSpan" id="kobo.195.3">These steps can be as simple as a script or command execution or as complex as running a series of actions. </span><span class="koboSpan" id="kobo.195.4">Steps are the building blocks of a workflow, piecing together the larger picture </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">of automation:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.197.1">
steps:
- uses: actions/checkout@v3
- uses: actions/setup-node@v3</span></pre> <h3><span class="koboSpan" id="kobo.198.1">Actions – Customized task executors</span></h3>
<p><span class="koboSpan" id="kobo.199.1">The most granular elements within these </span><a id="_idIndexMarker490"/><span class="koboSpan" id="kobo.200.1">steps are </span><strong class="bold"><span class="koboSpan" id="kobo.201.1">actions</span></strong><span class="koboSpan" id="kobo.202.1">. </span><span class="koboSpan" id="kobo.202.2">Actions are the workhorses of GitHub workflows, encapsulating specific functionalities in reusable units. </span><span class="koboSpan" id="kobo.202.3">From custom actions tailor-made for specific tasks to a plethora of ready-to-use actions available in GitHub Marketplace, the possibilities are endless. </span><span class="koboSpan" id="kobo.202.4">Actions come in various forms, including JavaScript actions for direct execution on the runner, Docker container actions for containerized operations, and composite run steps actions, which combine multiple run commands. </span><span class="koboSpan" id="kobo.202.5">This versatility allows for a high degree of customization, enabling developers to craft workflows that align perfectly with their </span><span class="No-Break"><span class="koboSpan" id="kobo.203.1">development needs.</span></span></p>
<p><span class="koboSpan" id="kobo.204.1">The following </span><a id="_idIndexMarker491"/><span class="koboSpan" id="kobo.205.1">snippet from a GitHub Actions workflow is tailored for Node.js projects, utilizing a series of commands and actions to prepare the runtime environment and build </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">the application:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.207.1">
- </span><strong class="bold"><span class="koboSpan" id="kobo.208.1">uses</span></strong><span class="koboSpan" id="kobo.209.1">: actions/checkout@v3
- </span><strong class="bold"><span class="koboSpan" id="kobo.210.1">name</span></strong><span class="koboSpan" id="kobo.211.1">: Use Node.js 14
  </span><strong class="bold"><span class="koboSpan" id="kobo.212.1">uses</span></strong><span class="koboSpan" id="kobo.213.1">: actions/setup-node@v3
  </span><strong class="bold"><span class="koboSpan" id="kobo.214.1">with</span></strong><span class="koboSpan" id="kobo.215.1">:
    node-version: '14'
    cache: 'npm'
- </span><strong class="bold"><span class="koboSpan" id="kobo.216.1">run</span></strong><span class="koboSpan" id="kobo.217.1">: npm ci
- </span><strong class="bold"><span class="koboSpan" id="kobo.218.1">run</span></strong><span class="koboSpan" id="kobo.219.1">: npm run build --if-present
- </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">run</span></strong><span class="koboSpan" id="kobo.221.1">: npm test</span></pre> <p><span class="koboSpan" id="kobo.222.1">Let’s take a closer look at the GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.223.1">Actions</span></span><span class="No-Break"><a id="_idIndexMarker492"/></span><span class="No-Break"><span class="koboSpan" id="kobo.224.1"> specifics:</span></span></p>
<ul>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.225.1">name</span></strong><span class="koboSpan" id="kobo.226.1">: This is essentially a label for readability within the workflow file. </span><span class="koboSpan" id="kobo.226.2">It helps you and anyone else reading the workflow understand what the step is intended to do. </span><span class="koboSpan" id="kobo.226.3">Here, it specifies that the step will set up Node.js </span><span class="No-Break"><span class="koboSpan" id="kobo.227.1">version 14.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.228.1">uses</span></strong><span class="koboSpan" id="kobo.229.1">: This key specifies an action to be used. </span><span class="koboSpan" id="kobo.229.2">Actions are reusable pieces of code that can perform complex tasks. </span><strong class="source-inline"><span class="koboSpan" id="kobo.230.1">actions/setup-node@v3</span></strong><span class="koboSpan" id="kobo.231.1"> refers to the third major version of the </span><strong class="source-inline"><span class="koboSpan" id="kobo.232.1">setup-node</span></strong><span class="koboSpan" id="kobo.233.1"> action, which is designed to configure a Node.js environment. </span><span class="koboSpan" id="kobo.233.2">When you specify an action with </span><strong class="source-inline"><span class="koboSpan" id="kobo.234.1">uses</span></strong><span class="koboSpan" id="kobo.235.1">, GitHub Actions will fetch that piece of code and execute it as part of </span><span class="No-Break"><span class="koboSpan" id="kobo.236.1">the step.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.237.1">with</span></strong><span class="koboSpan" id="kobo.238.1">: This part of the step feeds input parameters to the action specified in </span><strong class="source-inline"><span class="koboSpan" id="kobo.239.1">uses</span></strong><span class="koboSpan" id="kobo.240.1">. </span><span class="koboSpan" id="kobo.240.2">It customizes the behavior of the action. </span><span class="koboSpan" id="kobo.240.3">For </span><strong class="source-inline"><span class="koboSpan" id="kobo.241.1">setup-node</span></strong><span class="koboSpan" id="kobo.242.1">, you are providing two pieces of information: the Node.js version (</span><strong class="source-inline"><span class="koboSpan" id="kobo.243.1">node-version: '14'</span></strong><span class="koboSpan" id="kobo.244.1">) and the package manager cache settings (</span><strong class="source-inline"><span class="koboSpan" id="kobo.245.1">cache: 'npm'</span></strong><span class="koboSpan" id="kobo.246.1">). </span><span class="koboSpan" id="kobo.246.2">The </span><strong class="source-inline"><span class="koboSpan" id="kobo.247.1">cache</span></strong><span class="koboSpan" id="kobo.248.1"> option tells the action to cache the dependencies, which can speed up future job runs. </span><span class="koboSpan" id="kobo.248.2">This is a predefined parameter in the action that is available in the marketplace or is open source. </span><span class="koboSpan" id="kobo.248.3">You can create your own and distribute it to the world, or create it for internal use and have your internal users </span><span class="No-Break"><span class="koboSpan" id="kobo.249.1">use it.</span></span></li>
<li><strong class="source-inline"><span class="koboSpan" id="kobo.250.1">run</span></strong><span class="koboSpan" id="kobo.251.1">: This is a directive for running command-line scripts, and it is where you can execute shell commands. </span><span class="koboSpan" id="kobo.251.2">In this case, </span><strong class="source-inline"><span class="koboSpan" id="kobo.252.1">npm ci</span></strong><span class="koboSpan" id="kobo.253.1"> is a command that installs all dependencies for your project as specified in your </span><strong class="source-inline"><span class="koboSpan" id="kobo.254.1">package-lock.json</span></strong><span class="koboSpan" id="kobo.255.1"> file. </span><span class="koboSpan" id="kobo.255.2">And after that, it builds and tests </span><span class="No-Break"><span class="koboSpan" id="kobo.256.1">the project.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.257.1">GitHub Actions </span><a id="_idIndexMarker493"/><span class="koboSpan" id="kobo.258.1">may seem complicated at first, but once you get the hang of it, it is easy. </span><span class="koboSpan" id="kobo.258.2">It is essentially a </span><a id="_idIndexMarker494"/><span class="koboSpan" id="kobo.259.1">mechanism to control the flow </span><span class="No-Break"><span class="koboSpan" id="kobo.260.1">of scripts.</span></span></p>
<p><span class="koboSpan" id="kobo.261.1">Furthermore, GitHub workflows are not just about the tasks they perform; they are about streamlining and simplifying the development process. </span><span class="koboSpan" id="kobo.261.2">The ability to reuse parts of workflows, such as setup and test steps, in different contexts, such as pull request validation, exemplifies the platform’s emphasis on efficiency and reusability. </span><span class="koboSpan" id="kobo.261.3">This aspect is crucial in an era where Agile development and rapid iteration are </span><span class="No-Break"><span class="koboSpan" id="kobo.262.1">the norms.</span></span></p>
<p><span class="koboSpan" id="kobo.263.1">Now, let’s embark on the journey of utilizing GitHub Actions. </span><span class="koboSpan" id="kobo.263.2">With a vast array of templates readily available, the best way to start is by diving right in and trying them out. </span><span class="koboSpan" id="kobo.263.3">These templates cater to a wide range of automation needs, from streamlining repetitive tasks and automating code testing and building in CI to facilitating code deployment across various environments and implementing crucial security checks and measures. </span><span class="koboSpan" id="kobo.263.4">The large selection of GitHub Actions templates</span><a id="_idIndexMarker495"/><span class="koboSpan" id="kobo.264.1"> is easily accessible at GitHub, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.265.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer145">
<span class="koboSpan" id="kobo.266.1"><img alt="Figure 5.4 – Extensive templates for GitHub Actions" src="image/B21203_05_04.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.267.1">Figure 5.4 – Extensive templates for GitHub Actions</span></p>
<p><span class="koboSpan" id="kobo.268.1">By leveraging these</span><a id="_idIndexMarker496"/><span class="koboSpan" id="kobo.269.1"> templates, you will be able to harness the full potential of GitHub Actions efficiently and effectively. </span><span class="koboSpan" id="kobo.269.2">Embrace this powerful tool and watch as it transforms your development workflow, making it more streamlined, secure, </span><span class="No-Break"><span class="koboSpan" id="kobo.270.1">and robust.</span></span></p>
<h2 id="_idParaDest-113"><a id="_idTextAnchor114"/><span class="koboSpan" id="kobo.271.1">GitHub Actions best practices</span></h2>
<p><span class="koboSpan" id="kobo.272.1">There are several best</span><a id="_idIndexMarker497"/><span class="koboSpan" id="kobo.273.1"> practices for GitHub Actions that are worth discussing. </span><span class="koboSpan" id="kobo.273.2">These </span><a id="_idIndexMarker498"/><span class="koboSpan" id="kobo.274.1">include reducing redundancy, which helps streamline your workflows by eliminating unnecessary repetition. </span><span class="koboSpan" id="kobo.274.2">Secrets and variable management are crucial for maintaining security and efficiency in your actions. </span><span class="koboSpan" id="kobo.274.3">Debugging GitHub Actions workflows is an essential skill, allowing you to identify and fix issues quickly. </span><span class="koboSpan" id="kobo.274.4">Managing permissions effectively ensures that the right levels of access are maintained, while the implementation of approval processes with environments helps in controlling the deployment flow and maintaining the integrity of different deployment stages. </span><span class="koboSpan" id="kobo.274.5">Learning and applying these best practices can significantly enhance your proficiency with </span><span class="No-Break"><span class="koboSpan" id="kobo.275.1">GitHub Actions.</span></span></p>
<p><span class="koboSpan" id="kobo.276.1">Now, let’s look at them one </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">by one.</span></span></p>
<h3><span class="koboSpan" id="kobo.278.1">Reducing redundancy</span></h3>
<p><span class="koboSpan" id="kobo.279.1">Harnessing the</span><a id="_idIndexMarker499"/><span class="koboSpan" id="kobo.280.1"> power of GitHub Actions efficiently demands a focus on reducing </span><a id="_idIndexMarker500"/><span class="koboSpan" id="kobo.281.1">redundancy, a crucial best practice in workflow automation. </span><span class="koboSpan" id="kobo.281.2">This involves three </span><span class="No-Break"><span class="koboSpan" id="kobo.282.1">key options:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.283.1">Utilizing GitHub Marketplace</span></strong><span class="koboSpan" id="kobo.284.1">: Here, you can tap into a vast array of existing actions created by the community, suitable for a wide range of common automation tasks. </span><span class="koboSpan" id="kobo.284.2">This approach saves time and leverages the collective expertise of </span><span class="No-Break"><span class="koboSpan" id="kobo.285.1">other developers.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.286.1">Creating custom actions</span></strong><span class="koboSpan" id="kobo.287.1">: For unique requirements not covered by Marketplace actions, custom actions offer a tailored solution. </span><span class="koboSpan" id="kobo.287.2">They allow you to address the specific needs of your project </span><span class="No-Break"><span class="koboSpan" id="kobo.288.1">with precision.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.289.1">Implementing reusable workflows</span></strong><span class="koboSpan" id="kobo.290.1">: Develop workflows that can be applied across multiple projects. </span><span class="koboSpan" id="kobo.290.2">This not only streamlines the workflow setup process but also ensures consistency and </span><span class="No-Break"><span class="koboSpan" id="kobo.291.1">easier maintenance.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.292.1">By integrating these, you can optimize your use of GitHub Actions, leading to more efficient, consistent, and </span><a id="_idIndexMarker501"/><span class="koboSpan" id="kobo.293.1">maintainable automation processes in your </span><strong class="bold"><span class="koboSpan" id="kobo.294.1">Software Development Life Cycle</span></strong><span class="koboSpan" id="kobo.295.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.296.1">SDLC</span></strong><span class="koboSpan" id="kobo.297.1">). </span><span class="koboSpan" id="kobo.297.2">Various actions are available as open source projects, </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer146">
<span class="koboSpan" id="kobo.299.1"><img alt="Figure 5.5 – Actions in GitHub Marketplace" src="image/B21203_05_05.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.300.1">Figure 5.5 – Actions in GitHub Marketplace</span></p>
<p><span class="koboSpan" id="kobo.301.1">Custom</span><a id="_idIndexMarker502"/><span class="koboSpan" id="kobo.302.1"> actions and reusable workflows are the next areas of learning for the reader. </span><span class="koboSpan" id="kobo.302.2">We will not go into depth here, but for extended use of GitHub Actions, there are links to detailed resources in the </span><em class="italic"><span class="koboSpan" id="kobo.303.1">Further reading</span></em><span class="koboSpan" id="kobo.304.1"> section at the end of </span><span class="No-Break"><span class="koboSpan" id="kobo.305.1">the chapter.</span></span></p>
<h3><span class="koboSpan" id="kobo.306.1">Secrets and variable management</span></h3>
<p><span class="koboSpan" id="kobo.307.1">In GitHub Actions, managing </span><a id="_idIndexMarker503"/><span class="koboSpan" id="kobo.308.1">secrets and variables is essential for both security and </span><span class="No-Break"><span class="koboSpan" id="kobo.309.1">workflow customization:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.310.1">Secrets</span></strong><span class="koboSpan" id="kobo.311.1">: Secrets </span><a id="_idIndexMarker504"/><span class="koboSpan" id="kobo.312.1">are used to store sensitive</span><a id="_idIndexMarker505"/><span class="koboSpan" id="kobo.313.1"> information such as API keys, passwords, and tokens. </span><span class="koboSpan" id="kobo.313.2">They are encrypted and secure. </span><span class="koboSpan" id="kobo.313.3">In your workflow files, you reference secrets using </span><strong class="source-inline"><span class="koboSpan" id="kobo.314.1">${{ secrets.NAME }}</span></strong><span class="koboSpan" id="kobo.315.1">, ensuring they are not exposed in logs or to unauthorized users. </span><span class="koboSpan" id="kobo.315.2">Once a secret is registered, it cannot be retrieved, and the registered value will not appear in the console output of </span><span class="No-Break"><span class="koboSpan" id="kobo.316.1">GitHub Actions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.317.1">Environment variables</span></strong><span class="koboSpan" id="kobo.318.1">: Environment variables</span><a id="_idIndexMarker506"/><span class="koboSpan" id="kobo.319.1"> hold</span><a id="_idIndexMarker507"/><span class="koboSpan" id="kobo.320.1"> non-sensitive configuration data, such as file paths or configuration settings. </span><span class="koboSpan" id="kobo.320.2">Environment variables can also be retrieved as </span><strong class="source-inline"><span class="koboSpan" id="kobo.321.1">${{ env.My_Variable }}</span></strong><span class="koboSpan" id="kobo.322.1">. </span><span class="koboSpan" id="kobo.322.2">You set environment variables directly in your workflow files, and they can be different for each job </span><span class="No-Break"><span class="koboSpan" id="kobo.323.1">or step.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.324.1">The following is an example of using a registered secret in GitHub Actions, allowing you to inject values from outside the workflow in a </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">flexible manner:</span></span></p>
<pre class="source-code"><span class="koboSpan" id="kobo.326.1">
steps:
  - shell: bash
    env:
      MY_SECRET: ${{ secrets.MySecret }}
    run: |
      sample-command "$MY_SECRET"</span></pre> <p><span class="koboSpan" id="kobo.327.1">Proper </span><a id="_idIndexMarker508"/><span class="koboSpan" id="kobo.328.1">management of</span><a id="_idIndexMarker509"/><span class="koboSpan" id="kobo.329.1"> secrets and </span><a id="_idIndexMarker510"/><span class="koboSpan" id="kobo.330.1">variables is key to maintaining the security and efficiency of your GitHub Actions workflows. </span><span class="koboSpan" id="kobo.330.2">Secrets and variables can be set from the GitHub configuration page </span><span class="No-Break"><span class="koboSpan" id="kobo.331.1">as follows:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer147">
<span class="koboSpan" id="kobo.332.1"><img alt="Figure 5.6 – Secrets and variables configuration for GitHub Actions" src="image/B21203_05_06.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.333.1">Figure 5.6 – Secrets and variables configuration for GitHub Actions</span></p>
<h3><span class="koboSpan" id="kobo.334.1">Debugging GitHub Actions workflows</span></h3>
<p><span class="koboSpan" id="kobo.335.1">Debugging in</span><a id="_idIndexMarker511"/><span class="koboSpan" id="kobo.336.1"> GitHub Actions is an essential practice to ensure your workflows</span><a id="_idIndexMarker512"/><span class="koboSpan" id="kobo.337.1"> run as expected and to identify and resolve any issues that arise. </span><span class="koboSpan" id="kobo.337.2">Here are some key points to help you effectively debug your GitHub </span><span class="No-Break"><span class="koboSpan" id="kobo.338.1">Actions workflows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.339.1">Step debug logging</span></strong><span class="koboSpan" id="kobo.340.1">: For more detailed logs, you can enable step debug logging in your GitHub Actions workflows. </span><span class="koboSpan" id="kobo.340.2">To do this, create a repository secret named </span><strong class="source-inline"><span class="koboSpan" id="kobo.341.1">ACTIONS_STEP_DEBUG</span></strong><span class="koboSpan" id="kobo.342.1"> with the value </span><strong class="source-inline"><span class="koboSpan" id="kobo.343.1">true</span></strong><span class="koboSpan" id="kobo.344.1">. </span><span class="koboSpan" id="kobo.344.2">This will provide you with more detailed information during the execution of your actions, making it easier to pinpoint where and why a problem </span><span class="No-Break"><span class="koboSpan" id="kobo.345.1">is occurring.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.346.1">Run logs access</span></strong><span class="koboSpan" id="kobo.347.1">: GitHub Actions automatically generates logs for each run. </span><span class="koboSpan" id="kobo.347.2">These logs can be accessed in the </span><strong class="bold"><span class="koboSpan" id="kobo.348.1">Actions</span></strong><span class="koboSpan" id="kobo.349.1"> tab of your GitHub repository. </span><span class="koboSpan" id="kobo.349.2">They provide a detailed record of what happened during each step of </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">your workflow.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.351.1">Local testing with act</span></strong><span class="koboSpan" id="kobo.352.1">: Tools such as </span><strong class="source-inline"><span class="koboSpan" id="kobo.353.1">act</span></strong><span class="koboSpan" id="kobo.354.1"> (</span><a href="https://github.com/nektos/act"><span class="koboSpan" id="kobo.355.1">https://github.com/nektos/act</span></a><span class="koboSpan" id="kobo.356.1">) allow you to run your workflows locally on your machine. </span><span class="koboSpan" id="kobo.356.2">This can be particularly helpful for testing complex workflows without having to push changes to your repository. </span><span class="koboSpan" id="kobo.356.3">It enables a faster iteration cycle in fixing and optimizing </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">your actions.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.358.1">Manual workflows</span></strong><span class="koboSpan" id="kobo.359.1">: Utilizing the </span><strong class="source-inline"><span class="koboSpan" id="kobo.360.1">workflow_dispatch</span></strong><span class="koboSpan" id="kobo.361.1"> event trigger in your workflow file allows you to manually trigger workflows. </span><span class="koboSpan" id="kobo.361.2">This can be useful for testing changes without the need to trigger workflows on push or pull </span><span class="No-Break"><span class="koboSpan" id="kobo.362.1">request </span></span><span class="No-Break"><a id="_idIndexMarker513"/></span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">events.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.364.1">Other things to keep in mind</span><a id="_idIndexMarker514"/><span class="koboSpan" id="kobo.365.1"> when creating GitHub Actions workflows include </span><span class="No-Break"><span class="koboSpan" id="kobo.366.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.367.1">Simplifying workflows</span></strong><span class="koboSpan" id="kobo.368.1">: Break down complex workflows into smaller, more manageable parts to isolate and </span><span class="No-Break"><span class="koboSpan" id="kobo.369.1">identify issues.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.370.1">Utilizing action outputs</span></strong><span class="koboSpan" id="kobo.371.1">: Use outputs from actions for diagnostic purposes. </span><span class="koboSpan" id="kobo.371.2">These can give insights into the behavior of </span><span class="No-Break"><span class="koboSpan" id="kobo.372.1">different steps.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.373.1">Iterative approach</span></strong><span class="koboSpan" id="kobo.374.1">: When making changes to a workflow, do it incrementally. </span><span class="koboSpan" id="kobo.374.2">Test each change thoroughly before implementing the next. </span><span class="koboSpan" id="kobo.374.3">This approach helps isolate the impact of each change, making </span><span class="No-Break"><span class="koboSpan" id="kobo.375.1">debugging easier.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.376.1">Debugging GitHub </span><a id="_idIndexMarker515"/><span class="koboSpan" id="kobo.377.1">Actions workflows effectively requires a combination of utilizing detailed logs, testing workflows locally, simplifying complex setups, and manually triggering workflows. </span><span class="koboSpan" id="kobo.377.2">These practices help to quickly identify and resolve issues, ensuring your CI/CD processes are robust </span><span class="No-Break"><span class="koboSpan" id="kobo.378.1">and reliable.</span></span></p>
<h3><span class="koboSpan" id="kobo.379.1">Permissions</span></h3>
<p><span class="koboSpan" id="kobo.380.1">Managing </span><a id="_idIndexMarker516"/><span class="koboSpan" id="kobo.381.1">permissions in GitHub Actions is critical for maintaining the security and integrity of your workflow processes. </span><span class="koboSpan" id="kobo.381.2">This section focuses on setting and managing the appropriate permissions for actions within your </span><span class="No-Break"><span class="koboSpan" id="kobo.382.1">GitHub workflows:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.383.1">Automatic token scoping</span></strong><span class="koboSpan" id="kobo.384.1">: GitHub Actions automatically restricts permissions</span><a id="_idIndexMarker517"/><span class="koboSpan" id="kobo.385.1"> granted to </span><strong class="source-inline"><span class="koboSpan" id="kobo.386.1">GITHUB_TOKEN</span></strong><span class="koboSpan" id="kobo.387.1">, a special GitHub-generated token used by workflows. </span><span class="koboSpan" id="kobo.387.2">By default, this token is scoped to the repository containing your workflow, ensuring actions cannot inadvertently affect other repositories or </span><span class="No-Break"><span class="koboSpan" id="kobo.388.1">sensitive data.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.389.1">Granular control</span></strong><span class="koboSpan" id="kobo.390.1">: You can</span><a id="_idIndexMarker518"/><span class="koboSpan" id="kobo.391.1"> customize the permissions of </span><strong class="source-inline"><span class="koboSpan" id="kobo.392.1">GITHUB_TOKEN</span></strong><span class="koboSpan" id="kobo.393.1"> within your workflow file for specific jobs or the entire workflow. </span><span class="koboSpan" id="kobo.393.2">This allows you to restrict or extend the token’s capabilities based on the needs of individual jobs, enhancing security and minimizing risk. </span><span class="koboSpan" id="kobo.393.3">Permissions are set in the workflow file using the permissions key. </span><span class="koboSpan" id="kobo.393.4">You can specify permissions for various GitHub API</span><a id="_idIndexMarker519"/><span class="koboSpan" id="kobo.394.1"> scopes, such as contents, issues, deployments, and more. </span><span class="koboSpan" id="kobo.394.2">The following is an </span><a id="_idIndexMarker520"/><span class="koboSpan" id="kobo.395.1">example of such </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">a setup:</span></span><pre class="source-code"><span class="koboSpan" id="kobo.397.1">
# Sets permissions of the GITHUB_TOKEN
permissions:
  contents: read
  pages: write
  id-token: write</span></pre></li> <li><strong class="bold"><span class="koboSpan" id="kobo.398.1">Minimal access</span></strong><span class="koboSpan" id="kobo.399.1">: Apply </span><a id="_idIndexMarker521"/><span class="koboSpan" id="kobo.400.1">the </span><strong class="bold"><span class="koboSpan" id="kobo.401.1">Principle of Least Privilege</span></strong><span class="koboSpan" id="kobo.402.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.403.1">PoLP</span></strong><span class="koboSpan" id="kobo.404.1">) by granting permissions that are only just </span><a id="_idIndexMarker522"/><span class="koboSpan" id="kobo.405.1">sufficient for a particular action or job to function. </span><span class="koboSpan" id="kobo.405.2">Avoid giving broad or admin-level permissions unless </span><span class="No-Break"><span class="koboSpan" id="kobo.406.1">absolutely necessary.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.407.1">By meticulously</span><a id="_idIndexMarker523"/><span class="koboSpan" id="kobo.408.1"> managing permissions in GitHub Actions, you can safeguard your workflows against unauthorized access, mistakes, and potential security vulnerabilities. </span><span class="koboSpan" id="kobo.408.2">This involves setting precise token permissions, securely managing secrets, and regularly auditing access levels to align with PoLP. </span><span class="koboSpan" id="kobo.408.3">Implementing these practices will significantly strengthen the security posture of your </span><span class="No-Break"><span class="koboSpan" id="kobo.409.1">CI/CD pipeline.</span></span></p>
<h3><span class="koboSpan" id="kobo.410.1">Approval processes with environments</span></h3>
<p><span class="koboSpan" id="kobo.411.1">In the dynamic world</span><a id="_idIndexMarker524"/><span class="koboSpan" id="kobo.412.1"> of software deployment and CI, GitHub Actions brings a </span><a id="_idIndexMarker525"/><span class="koboSpan" id="kobo.413.1">crucial element of control and oversight through its </span><strong class="bold"><span class="koboSpan" id="kobo.414.1">Environments</span></strong><span class="koboSpan" id="kobo.415.1"> feature. </span><span class="koboSpan" id="kobo.415.2">This innovative functionality significantly elevates the way teams handle their deployment workflows, particularly in terms of approval processes and adherence to specific </span><span class="No-Break"><span class="koboSpan" id="kobo.416.1">operational conditions.</span></span></p>
<p><span class="koboSpan" id="kobo.417.1">Environments in </span><a id="_idIndexMarker526"/><span class="koboSpan" id="kobo.418.1">GitHub Actions serve as dedicated spaces within the workflow, each tailored to specific stages such as testing, staging, or production. </span><span class="koboSpan" id="kobo.418.2">What sets these environments apart is their capacity to be customized with unique rules and access controls. </span><span class="koboSpan" id="kobo.418.3">They become not just segments of the workflow but controlled realms, each with its distinct set of permissions and secrets. </span><span class="koboSpan" id="kobo.418.4">This ensures that sensitive information and actions are confined to where they are most relevant, bolstering the security of the </span><span class="No-Break"><span class="koboSpan" id="kobo.419.1">entire process.</span></span></p>
<p><span class="koboSpan" id="kobo.420.1">Central to the value of environments is their role in facilitating approval workflows. </span><span class="koboSpan" id="kobo.420.2">Imagine a scenario where any deployment to production requires a careful review. </span><span class="koboSpan" id="kobo.420.3">Environments make this possible by integrating a manual approval process. </span><span class="koboSpan" id="kobo.420.4">When a deployment reaches the production stage, it triggers a pause in the workflow, awaiting the green light from authorized personnel. </span><span class="koboSpan" id="kobo.420.5">This pause is not just a halt in operations; it is a gatekeeper ensuring that every change undergoes scrutiny before it affects the live environment. </span><span class="koboSpan" id="kobo.420.6">The approval flow with </span><strong class="bold"><span class="koboSpan" id="kobo.421.1">Environments</span></strong><span class="koboSpan" id="kobo.422.1"> is seamlessly integrated into the GitHub Actions experience, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.423.1">following screenshot:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer148">
<span class="koboSpan" id="kobo.424.1"><img alt="Figure 5.7 – Approval on Environments" src="image/B21203_05_07.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.425.1">Figure 5.7 – Approval on Environments</span></p>
<p><span class="koboSpan" id="kobo.426.1">Beyond mere approval, environments</span><a id="_idIndexMarker527"/><span class="koboSpan" id="kobo.427.1"> in </span><a id="_idIndexMarker528"/><span class="koboSpan" id="kobo.428.1">GitHub Actions allow for sophisticated condition settings. </span><span class="koboSpan" id="kobo.428.2">Jobs within an environment can be configured to run only in specific circumstances, such as on certain branches or in response to </span><a id="_idIndexMarker529"/><span class="koboSpan" id="kobo.429.1">particular events. </span><span class="koboSpan" id="kobo.429.2">This level of detail in control ensures that the workflow adheres to the precise operational standards of a project, avoiding any unintended deployments </span><span class="No-Break"><span class="koboSpan" id="kobo.430.1">or actions.</span></span></p>
<p><span class="koboSpan" id="kobo.431.1">The introduction of protection rules within these environments further fortifies the workflow. </span><span class="koboSpan" id="kobo.431.2">By setting requirements such as mandatory reviewers for changes, organizations can enforce compliance and maintain high-security standards. </span><span class="koboSpan" id="kobo.431.3">This is not just about keeping the workflow secure; it is about aligning it with organizational protocols and </span><span class="No-Break"><span class="koboSpan" id="kobo.432.1">best practices.</span></span></p>
<p><span class="koboSpan" id="kobo.433.1">An </span><a id="_idIndexMarker530"/><span class="koboSpan" id="kobo.434.1">environment, therefore, is not just an addition to GitHub Actions; it is a paradigm shift in how deployment workflows are managed. </span><span class="koboSpan" id="kobo.434.2">It introduces a layer of security, control, and compliance that is indispensable in modern software development. </span><span class="koboSpan" id="kobo.434.3">Environments </span><a id="_idIndexMarker531"/><span class="koboSpan" id="kobo.435.1">ensure that every step in the CI/CD pipeline, especially those involving </span><a id="_idIndexMarker532"/><span class="koboSpan" id="kobo.436.1">sensitive stages such as production, is executed under stringent scrutiny and within the bounds of defined operational guidelines. </span><span class="koboSpan" id="kobo.436.2">This is GitHub Actions not just facilitating automation, but doing so with a keen eye on safety, reliability, and organizational integrity. </span><span class="koboSpan" id="kobo.436.3">From the </span><strong class="bold"><span class="koboSpan" id="kobo.437.1">Environments</span></strong><span class="koboSpan" id="kobo.438.1"> configuration, you can add protection rule settings such as adding </span><span class="No-Break"><span class="koboSpan" id="kobo.439.1">an approver:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer149">
<span class="koboSpan" id="kobo.440.1"><img alt="Figure 5.8 – Environments configuration" src="image/B21203_05_08.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.441.1">Figure 5.8 – Environments configuration</span></p>
<p><span class="koboSpan" id="kobo.442.1">GitHub Actions stands</span><a id="_idIndexMarker533"/><span class="koboSpan" id="kobo.443.1"> out as a versatile tool, adaptable to a wide range of development scenarios, making it an indispensable asset for modern software development teams. </span><span class="koboSpan" id="kobo.443.2">Whether it is automating routine tasks, ensuring code quality, or deploying applications, GitHub Actions provides the tools and flexibility required for high-quality </span><span class="No-Break"><span class="koboSpan" id="kobo.444.1">software delivery.</span></span></p>
<p><span class="koboSpan" id="kobo.445.1">Now, let’s look at some applied practices for deploying with </span><span class="No-Break"><span class="koboSpan" id="kobo.446.1">GitHub Actions.</span></span></p>
<h1 id="_idParaDest-114"><a id="_idTextAnchor115"/><span class="koboSpan" id="kobo.447.1">Deployment strategies</span></h1>
<p><span class="koboSpan" id="kobo.448.1">It is important to</span><a id="_idIndexMarker534"/><span class="koboSpan" id="kobo.449.1"> embrace </span><em class="italic"><span class="koboSpan" id="kobo.450.1">failure</span></em><span class="koboSpan" id="kobo.451.1"> as a system in DevOps. </span><span class="koboSpan" id="kobo.451.2">In the dynamic world of DevOps, embracing failure is not just recommended; it is essential. </span><span class="koboSpan" id="kobo.451.3">Contrary to traditional perspectives where failure is often seen as a setback, in DevOps, failure assumes a transformative role. </span><span class="koboSpan" id="kobo.451.4">It is not merely an incident or an unexpected result; it is an integral part </span><span class="No-Break"><span class="koboSpan" id="kobo.452.1">of DevOps.</span></span></p>
<p><span class="koboSpan" id="kobo.453.1">In conventional deployment methodologies, extensive checks and balances are the norm, aimed at minimizing the occurrence of failure. </span><span class="koboSpan" id="kobo.453.2">However, the fast-paced nature of modern development such as Agile alters this approach significantly. </span><span class="koboSpan" id="kobo.453.3">In modern development, the landscape is ever-evolving, and services undergo constant changes. </span><span class="koboSpan" id="kobo.453.4">If these changes are not made swiftly and effectively, it could lead to service degradation or failure. </span><span class="koboSpan" id="kobo.453.5">Therefore, it becomes crucial to build a system that is resilient and can adapt to these </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">rapid changes.</span></span></p>
<p><span class="koboSpan" id="kobo.455.1">In this context, the goal is not to prevent failure outright, but to create an environment where failures are manageable and their impacts are minimized. </span><span class="koboSpan" id="kobo.455.2">This involves adopting strategies that anticipate failures and implement mechanisms to quickly recover or roll back changes when necessary. </span><span class="koboSpan" id="kobo.455.3">It is about building robustness and resilience into the system, ensuring that it can withstand and recover from failures, rather than simply aiming for a failure-free operation. </span><span class="koboSpan" id="kobo.455.4">This section delves into how to accept failure as a systemic necessity </span><span class="No-Break"><span class="koboSpan" id="kobo.456.1">in DevOps.</span></span></p>
<p><span class="koboSpan" id="kobo.457.1">Traditionally, the realms of infrastructure and application deployment have existed as separate domains. </span><span class="koboSpan" id="kobo.457.2">However, the advent of DevOps has ushered in an era where these boundaries blur into a unified landscape. </span><span class="koboSpan" id="kobo.457.3">Nowadays, infrastructure configuration is also defined</span><a id="_idIndexMarker535"/><span class="koboSpan" id="kobo.458.1"> by </span><strong class="bold"><span class="koboSpan" id="kobo.459.1">Infrastructure as Code</span></strong><span class="koboSpan" id="kobo.460.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.461.1">IaC</span></strong><span class="koboSpan" id="kobo.462.1">). </span><span class="koboSpan" id="kobo.462.2">This means that infrastructure and apps can be released at the same time. </span><span class="koboSpan" id="kobo.462.3">You need to deploy both infrastructure and apps stably in both aspects in the context </span><span class="No-Break"><span class="koboSpan" id="kobo.463.1">of DevOps.</span></span></p>
<p><span class="koboSpan" id="kobo.464.1">Let’s look at some practices that are particularly common when </span><span class="No-Break"><span class="koboSpan" id="kobo.465.1">deploying services.</span></span></p>
<h2 id="_idParaDest-115"><a id="_idTextAnchor116"/><span class="koboSpan" id="kobo.466.1">Blue-green deployment</span></h2>
<p><span class="koboSpan" id="kobo.467.1">Blue-green </span><a id="_idIndexMarker536"/><span class="koboSpan" id="kobo.468.1">deployment</span><a id="_idIndexMarker537"/><span class="koboSpan" id="kobo.469.1"> is a strategy in software deployment that minimizes downtime and risk by maintaining two identical production environments. </span><span class="koboSpan" id="kobo.469.2">This method allows for safe and seamless transitions between software versions. </span><span class="koboSpan" id="kobo.469.3">As shown in the following diagram, the load balancer</span><a id="_idIndexMarker538"/><span class="koboSpan" id="kobo.470.1"> or </span><strong class="bold"><span class="koboSpan" id="kobo.471.1">Platform as a Service</span></strong><span class="koboSpan" id="kobo.472.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.473.1">PaaS</span></strong><span class="koboSpan" id="kobo.474.1">) services’ capabilities </span><span class="No-Break"><span class="koboSpan" id="kobo.475.1">switch traffic:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer150">
<span class="koboSpan" id="kobo.476.1"><img alt="Figure 5.9 – Blue-green deployment" src="image/B21203_05_09.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.477.1">Figure 5.9 – Blue-green deployment</span></p>
<p><span class="koboSpan" id="kobo.478.1">In this strategy, the blue environment hosts the current live version, while the green environment is used for the new version. </span><span class="koboSpan" id="kobo.478.2">Once the new version in the green environment is fully tested and ready, traffic is switched over from blue </span><span class="No-Break"><span class="koboSpan" id="kobo.479.1">to green.</span></span></p>
<p><span class="koboSpan" id="kobo.480.1">Key benefits of this approach include </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.482.1">Easy rollback</span></strong><span class="koboSpan" id="kobo.483.1">: If issues </span><a id="_idIndexMarker539"/><span class="koboSpan" id="kobo.484.1">are discovered in the green environment after going live, traffic can be quickly redirected back to the stable </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">blue environment.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.486.1">Minimal downtime</span></strong><span class="koboSpan" id="kobo.487.1">: Blue-green deployment allows you to release new versions of your software without any downtime for end users. </span><span class="koboSpan" id="kobo.487.2">The new version is deployed alongside the old one, and the switch is </span><span class="No-Break"><span class="koboSpan" id="kobo.488.1">made instantly.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.489.1">Easy testing</span></strong><span class="koboSpan" id="kobo.490.1">: Developers and </span><strong class="bold"><span class="koboSpan" id="kobo.491.1">Quality Assurance</span></strong><span class="koboSpan" id="kobo.492.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.493.1">QA</span></strong><span class="koboSpan" id="kobo.494.1">) teams</span><a id="_idIndexMarker540"/><span class="koboSpan" id="kobo.495.1"> can thoroughly test the new version in a production-like environment without affecting </span><span class="No-Break"><span class="koboSpan" id="kobo.496.1">end </span></span><span class="No-Break"><a id="_idIndexMarker541"/></span><span class="No-Break"><span class="koboSpan" id="kobo.497.1">users.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.498.1">The </span><a id="_idIndexMarker542"/><span class="koboSpan" id="kobo.499.1">terminology of blue-green is often perceived as a synonym for environments such as staging, QA, and production, but it is not exact. </span><span class="koboSpan" id="kobo.499.2">Unlike a traditional staging-to-production promotion, both the blue and green environments in this method </span><span class="No-Break"><span class="koboSpan" id="kobo.500.1">are production-grade.</span></span></p>
<p><span class="koboSpan" id="kobo.501.1">Despite its advantages, there are </span><span class="No-Break"><span class="koboSpan" id="kobo.502.1">notable challenges:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.503.1">Requirement of two production environments</span></strong><span class="koboSpan" id="kobo.504.1">: This </span><a id="_idIndexMarker543"/><span class="koboSpan" id="kobo.505.1">can be resource-intensive and costly. </span><span class="koboSpan" id="kobo.505.2">Maintaining two full-scale production environments can be expensive, even in a cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.506.1">computing context.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.507.1">Challenges with irreversible changes</span></strong><span class="koboSpan" id="kobo.508.1">: If changes such as database schema updates are not backward compatible, rollback can </span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">be complicated.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.510.1">Stateful application considerations</span></strong><span class="koboSpan" id="kobo.511.1">: Synchronizing</span><a id="_idIndexMarker544"/><span class="koboSpan" id="kobo.512.1"> stateful data between environments can </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">be complex.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.514.1">Typical steps</span></h3>
<p><span class="koboSpan" id="kobo.515.1">A practical example of blue-green </span><a id="_idIndexMarker545"/><span class="koboSpan" id="kobo.516.1">deployment for a web application, where the current live version is 1.3 in the blue environment and the goal is to deploy version 1.4, can be outlined </span><span class="No-Break"><span class="koboSpan" id="kobo.517.1">as follows:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.518.1">Deployment</span></strong><span class="koboSpan" id="kobo.519.1">: Initiate</span><a id="_idIndexMarker546"/><span class="koboSpan" id="kobo.520.1"> by deploying the new version, 1.4, to the green environment. </span><span class="koboSpan" id="kobo.520.2">This environment is a replica of the existing blue environment but hosts the </span><span class="No-Break"><span class="koboSpan" id="kobo.521.1">new version.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.522.1">Validation</span></strong><span class="koboSpan" id="kobo.523.1">: Conduct comprehensive testing in the green environment. </span><span class="koboSpan" id="kobo.523.2">This step is critical to ensure that the new version operates correctly and meets all </span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">necessary requirements.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.525.1">Traffic switch</span></strong><span class="koboSpan" id="kobo.526.1">: Once validation is successful, the next step is to switch user traffic. </span><span class="koboSpan" id="kobo.526.2">This is done by updating the load balancer settings to redirect traffic from the blue environment (version 1.3) to the green environment (</span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">version 1.4).</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.528.1">Monitoring</span></strong><span class="koboSpan" id="kobo.529.1">: After the traffic switch, closely monitor the green environment for any operational issues or unexpected behavior. </span><span class="koboSpan" id="kobo.529.2">This monitoring phase is crucial to quickly identify and address any problems that may </span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">arise post-deployment.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.531.1">Finalization</span></strong><span class="koboSpan" id="kobo.532.1">: If the green environment with version 1.4 runs smoothly and no significant issues are detected, the deployment is deemed successful, and the green environment becomes the new production environment. </span><span class="koboSpan" id="kobo.532.2">However, if there are critical problems, you have the option to promptly revert traffic to the stable blue environment (version 1.3), minimizing disruption </span><span class="No-Break"><span class="koboSpan" id="kobo.533.1">and risk.</span></span></li>
</ol>
<p><span class="koboSpan" id="kobo.534.1">This methodical </span><a id="_idIndexMarker547"/><span class="koboSpan" id="kobo.535.1">approach ensures a smooth transition between application versions, maintaining system stability and availability throughout the </span><span class="No-Break"><span class="koboSpan" id="kobo.536.1">deployment process.</span></span></p>
<h3><span class="koboSpan" id="kobo.537.1">Real-world scenario</span></h3>
<p><span class="koboSpan" id="kobo.538.1">Achieving a successful</span><a id="_idIndexMarker548"/><span class="koboSpan" id="kobo.539.1"> blue-green deployment strategy requires a comprehensive understanding of your infrastructure and the tools available within your platform. </span><span class="koboSpan" id="kobo.539.2">The implementation approach can differ significantly based on whether you are </span><a id="_idIndexMarker549"/><span class="koboSpan" id="kobo.540.1">using </span><strong class="bold"><span class="koboSpan" id="kobo.541.1">Infrastructure as a Service</span></strong><span class="koboSpan" id="kobo.542.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.543.1">IaaS</span></strong><span class="koboSpan" id="kobo.544.1">) with VMs or PaaS with </span><span class="No-Break"><span class="koboSpan" id="kobo.545.1">load balancers.</span></span></p>
<p><span class="koboSpan" id="kobo.546.1">Here is a closer look at the </span><span class="No-Break"><span class="koboSpan" id="kobo.547.1">different methods:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.548.1">DNS load balancers</span></strong><span class="koboSpan" id="kobo.549.1">: In this</span><a id="_idIndexMarker550"/><span class="koboSpan" id="kobo.550.1"> approach, the changeover between blue and green environments is managed through DNS rewriting. </span><span class="koboSpan" id="kobo.550.2">This method is often used when the environments are hosted on different servers </span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">or clusters.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.552.1">Layer 4 network load balancers</span></strong><span class="koboSpan" id="kobo.553.1">: These perform</span><a id="_idIndexMarker551"/><span class="koboSpan" id="kobo.554.1"> the switchover by </span><strong class="bold"><span class="koboSpan" id="kobo.555.1">Network Address Translation</span></strong><span class="koboSpan" id="kobo.556.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.557.1">NAT</span></strong><span class="koboSpan" id="kobo.558.1">) translation. </span><span class="koboSpan" id="kobo.558.2">It is a suitable option for switching between environments hosted within the same </span><span class="No-Break"><span class="koboSpan" id="kobo.559.1">network infrastructure.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.560.1">Layer 7 application load balancers</span></strong><span class="koboSpan" id="kobo.561.1">: Here, the routing to different application versions is managed at the application layer. </span><span class="koboSpan" id="kobo.561.2">This method provides more granular control over traffic distribution and is often used in </span><span class="No-Break"><span class="koboSpan" id="kobo.562.1">complex deployments.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.563.1">Many </span><a id="_idIndexMarker552"/><span class="koboSpan" id="kobo.564.1">PaaS solutions come with built-in load-balancing capabilities, simplifying the blue-green deployment process. </span><span class="koboSpan" id="kobo.564.2">In these setups, the load balancer can be easily configured to switch traffic between the blue and green environments. </span><span class="koboSpan" id="kobo.564.3">In such cases, users can set up switching simply by configuration without being aware of the presence of a </span><span class="No-Break"><span class="koboSpan" id="kobo.565.1">load balancer.</span></span></p>
<p><span class="koboSpan" id="kobo.566.1">In more advanced environments, such</span><a id="_idIndexMarker553"/><span class="koboSpan" id="kobo.567.1"> as </span><strong class="bold"><span class="koboSpan" id="kobo.568.1">Kubernetes</span></strong><span class="koboSpan" id="kobo.569.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.570.1">k8s</span></strong><span class="koboSpan" id="kobo.571.1">), network resources are managed as IaC, providing the capability for dynamic allocation. </span><span class="koboSpan" id="kobo.571.2">This enables the implementation of blue-green deployments through modifications to IaC configuration, typically achieved by editing YAML files. </span><span class="koboSpan" id="kobo.571.3">While numerous PaaS offerings abstract away network configuration complexities from users, certain platforms, such as Kubernetes, maintain network </span><a id="_idIndexMarker554"/><span class="koboSpan" id="kobo.572.1">configurations internally within a single cluster, thereby enabling the same blue-green deployment approach to be applied seamlessly within </span><span class="No-Break"><span class="koboSpan" id="kobo.573.1">the cluster.</span></span></p>
<h3><span class="koboSpan" id="kobo.574.1">Switching methods</span></h3>
<p><span class="koboSpan" id="kobo.575.1">Now, how do we switch </span><a id="_idIndexMarker555"/><span class="koboSpan" id="kobo.576.1">environments? </span><span class="koboSpan" id="kobo.576.2">There are several possible ways, so let’s take </span><span class="No-Break"><span class="koboSpan" id="kobo.577.1">a look:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.578.1">Separate script or graphical UI (GUI) for load balancer configuration</span></strong><span class="koboSpan" id="kobo.579.1">: Some teams prefer to handle the switchover separately from the main deployment script. </span><span class="koboSpan" id="kobo.579.2">This can be done using a dedicated script or through a GUI, providing more control and oversight during </span><span class="No-Break"><span class="koboSpan" id="kobo.580.1">the switch.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.581.1">Load balancing configuration in deployment script</span></strong><span class="koboSpan" id="kobo.582.1">: This method involves scripting the load balancer setting changes directly in the deployment script. </span><span class="koboSpan" id="kobo.582.2">It is a streamlined approach that can automate the switchover process as part of the </span><span class="No-Break"><span class="koboSpan" id="kobo.583.1">deployment pipeline.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.584.1">Automation</span></strong><span class="koboSpan" id="kobo.585.1">: Automation encompasses the automated testing of the new version, ensuring that the switch only occurs when the new version performs successfully. </span><span class="koboSpan" id="kobo.585.2">This involves setting specific conditions for the release to proceed, often relying on components such as </span><strong class="bold"><span class="koboSpan" id="kobo.586.1">End-To-End</span></strong><span class="koboSpan" id="kobo.587.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.588.1">E2E</span></strong><span class="koboSpan" id="kobo.589.1">) tests</span><a id="_idIndexMarker556"/><span class="koboSpan" id="kobo.590.1"> and monitoring for errors in the</span><a id="_idIndexMarker557"/> <span class="No-Break"><span class="koboSpan" id="kobo.591.1">new environment.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.592.1">It is important to</span><a id="_idIndexMarker558"/><span class="koboSpan" id="kobo.593.1"> note that the timing of the switchover and the handling of existing connections can vary based on the system and service used. </span><span class="koboSpan" id="kobo.593.2">Each method has its nuances and requires careful planning to ensure a smooth transition with minimal disruption to </span><span class="No-Break"><span class="koboSpan" id="kobo.594.1">the users.</span></span></p>
<h2 id="_idParaDest-116"><a id="_idTextAnchor117"/><span class="koboSpan" id="kobo.595.1">Rolling deployment</span></h2>
<p><span class="koboSpan" id="kobo.596.1">A rolling deployment</span><a id="_idIndexMarker559"/><span class="koboSpan" id="kobo.597.1"> is a deployment strategy used in distributed systems whereby</span><a id="_idIndexMarker560"/><span class="koboSpan" id="kobo.598.1"> updates are applied incrementally across the nodes of a cluster. </span><span class="koboSpan" id="kobo.598.2">This method reduces downtime and </span><a id="_idIndexMarker561"/><span class="koboSpan" id="kobo.599.1">ensures </span><strong class="bold"><span class="koboSpan" id="kobo.600.1">High Availability</span></strong><span class="koboSpan" id="kobo.601.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.602.1">HA</span></strong><span class="koboSpan" id="kobo.603.1">) while updating applications </span><span class="No-Break"><span class="koboSpan" id="kobo.604.1">or systems.</span></span></p>
<p><span class="koboSpan" id="kobo.605.1">It is used in clusters such as Kubernetes for stable releases with no downtime. </span><span class="koboSpan" id="kobo.605.2">A rolling deployment involves gradual releases, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.606.1">following diagram:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer151">
<span class="koboSpan" id="kobo.607.1"><img alt="Figure 5.10 – Rolling deployment" src="image/B21203_05_10.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.608.1">Figure 5.10 – Rolling deployment</span></p>
<p><span class="koboSpan" id="kobo.609.1"> This way, we can safely update each release one </span><span class="No-Break"><span class="koboSpan" id="kobo.610.1">by one.</span></span></p>
<h3><span class="koboSpan" id="kobo.611.1">Typical steps</span></h3>
<p><span class="koboSpan" id="kobo.612.1">The </span><a id="_idIndexMarker562"/><span class="koboSpan" id="kobo.613.1">process of a cluster rolling deployment </span><a id="_idIndexMarker563"/><span class="koboSpan" id="kobo.614.1">generally involves the </span><span class="No-Break"><span class="koboSpan" id="kobo.615.1">following steps:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.616.1">Preparation</span></strong><span class="koboSpan" id="kobo.617.1">: Before starting the update, ensure the system is ready for the upgrade. </span><span class="koboSpan" id="kobo.617.2">This includes taking backups of critical data and preparing the new version of the software or configuration to </span><span class="No-Break"><span class="koboSpan" id="kobo.618.1">be deployed.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.619.1">Update the first node</span></strong><span class="koboSpan" id="kobo.620.1">: Begin the rolling update by selecting a single node. </span><span class="koboSpan" id="kobo.620.2">Instead of taking this node out of service before applying the update, the update is applied while the node is still in service. </span><span class="koboSpan" id="kobo.620.3">A new instance with the updated configuration or software is started alongside the </span><span class="No-Break"><span class="koboSpan" id="kobo.621.1">existing ones.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.622.1">Health check</span></strong><span class="koboSpan" id="kobo.623.1">: Once the new instance is up and running, perform a thorough health check. </span><span class="koboSpan" id="kobo.623.2">This step is crucial to ensure that the new instance is correctly configured and capable of handling the intended workload </span><span class="No-Break"><span class="koboSpan" id="kobo.624.1">without issues.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.625.1">Traffic shift</span></strong><span class="koboSpan" id="kobo.626.1">: After confirming that the new instance is healthy, gradually redirect traffic from the old instance to the new instance. </span><span class="koboSpan" id="kobo.626.2">This may involve adjusting load balancer settings or service discovery configurations to point to the </span><span class="No-Break"><span class="koboSpan" id="kobo.627.1">new instance.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.628.1">Remove old instance</span></strong><span class="koboSpan" id="kobo.629.1">: Once the new instance is successfully handling traffic, the old instance can be safely removed from service. </span><span class="koboSpan" id="kobo.629.2">This ensures there is no downtime, as the service continues uninterrupted during </span><span class="No-Break"><span class="koboSpan" id="kobo.630.1">the update.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.631.1">Gradual rollout</span></strong><span class="koboSpan" id="kobo.632.1">: Continue with the rolling update by repeating the process for each node in the cluster. </span><span class="koboSpan" id="kobo.632.2">Update nodes one by one, ensuring each new instance is healthy and capable of handling traffic before decommissioning the </span><span class="No-Break"><span class="koboSpan" id="kobo.633.1">old ones.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.634.1">Monitoring</span></strong><span class="koboSpan" id="kobo.635.1">: Throughout the update process, continuously monitor the system for any issues. </span><span class="koboSpan" id="kobo.635.2">Pay close attention to performance metrics and error logs to quickly identify and address </span><span class="No-Break"><span class="koboSpan" id="kobo.636.1">any problems.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.637.1">Finalization</span></strong><span class="koboSpan" id="kobo.638.1">: After all nodes have been updated and old instances removed, the rolling update is complete. </span><span class="koboSpan" id="kobo.638.2">Conduct a final review to ensure the entire system is stable, performing</span><a id="_idIndexMarker564"/><span class="koboSpan" id="kobo.639.1"> as expected, and that </span><a id="_idIndexMarker565"/><span class="koboSpan" id="kobo.640.1">all instances are running the </span><span class="No-Break"><span class="koboSpan" id="kobo.641.1">new version.</span></span></li>
</ol>
<h3><span class="koboSpan" id="kobo.642.1">Real-world scenario</span></h3>
<p><span class="koboSpan" id="kobo.643.1">In real-world scenarios, a cluster</span><a id="_idIndexMarker566"/><span class="koboSpan" id="kobo.644.1"> rolling deployment is particularly vital in environments where continuous availability is crucial. </span><span class="koboSpan" id="kobo.644.2">This approach is commonly used in cloud computing services, data centers, and large-scale web applications. </span><span class="koboSpan" id="kobo.644.3">For example, updating a Kubernetes cluster or a database cluster often employs this strategy to avoid downtime and service disruptions. </span><span class="koboSpan" id="kobo.644.4">Also, be aware that rolling upgrades include both the application context and the infrastructure context. </span><span class="koboSpan" id="kobo.644.5">In the case of Kubernetes, in addition to cluster-side upgrades, there is also such a procedure for </span><span class="No-Break"><span class="koboSpan" id="kobo.645.1">application upgrades.</span></span></p>
<p><span class="koboSpan" id="kobo.646.1">This may be done through in-place upgrades while the service is running, but in mission-critical services, such as financial services, it may be applied in conjunction with other release strategies. </span><span class="koboSpan" id="kobo.646.2">This is like a blue-green deployment with a cloud load balancer in front of the cluster itself </span><span class="No-Break"><span class="koboSpan" id="kobo.647.1">and distributed.</span></span></p>
<p><span class="koboSpan" id="kobo.648.1">While it is true that some of these </span><a id="_idIndexMarker567"/><span class="koboSpan" id="kobo.649.1">have a discourse of losing the benefits of rolling upgrades in some cases, it means that the configurations that open source projects and service vendors </span><a id="_idIndexMarker568"/><span class="koboSpan" id="kobo.650.1">generally consider best practices do not necessarily match configurations that can realistically </span><span class="No-Break"><span class="koboSpan" id="kobo.651.1">be taken.</span></span></p>
<h3><span class="koboSpan" id="kobo.652.1">Switchover methods</span></h3>
<p><span class="koboSpan" id="kobo.653.1">The method of a rolling </span><a id="_idIndexMarker569"/><span class="koboSpan" id="kobo.654.1">deployment varies in difficulty depending on whether the system supports it as a feature. </span><span class="koboSpan" id="kobo.654.2">In a cluster orchestrator such as Kubernetes, updates can be rolled out using automated orchestrators, which manage the process of updating nodes and conducting health checks, while there are cases where a rolling deployment is still a reality, traditionally done </span><span class="No-Break"><span class="koboSpan" id="kobo.655.1">by hand.</span></span></p>
<p><span class="koboSpan" id="kobo.656.1">For example, if a single-tenant service is hosted in an isolated environment for an individual company and each environment requires updates, then deploying customers in several tiers is categorized and updates are done gradually. </span><span class="koboSpan" id="kobo.656.2">While this is also a type of rolling deployment, explicitly referring to DevOps practices will often refer to </span><span class="No-Break"><span class="koboSpan" id="kobo.657.1">automated practices.</span></span></p>
<p><span class="koboSpan" id="kobo.658.1">A cluster rolling deployment is essential for maintaining the reliability and stability of distributed systems during upgrades or maintenance. </span><span class="koboSpan" id="kobo.658.2">By updating nodes sequentially, this strategy minimizes the risk of system-wide failures and ensures that services remain available to users </span><a id="_idIndexMarker570"/><span class="koboSpan" id="kobo.659.1">throughout </span><span class="No-Break"><span class="koboSpan" id="kobo.660.1">the process.</span></span></p>
<h2 id="_idParaDest-117"><a id="_idTextAnchor118"/><span class="koboSpan" id="kobo.661.1">Canary deployment</span></h2>
<p><span class="koboSpan" id="kobo.662.1">A canary deployment</span><a id="_idIndexMarker571"/><span class="koboSpan" id="kobo.663.1"> is a technique whereby new versions of the software are rolled out </span><a id="_idIndexMarker572"/><span class="koboSpan" id="kobo.664.1">gradually to a small subset of users before being deployed to the entire user base. </span><span class="koboSpan" id="kobo.664.2">This approach allows developers to test the new version in a real-world environment with </span><span class="No-Break"><span class="koboSpan" id="kobo.665.1">minimal risk.</span></span></p>
<p><span class="koboSpan" id="kobo.666.1">In a canary deployment, instead of releasing a new version to all users at once, the update is first introduced to a small group of </span><a id="_idIndexMarker573"/><span class="koboSpan" id="kobo.667.1">users – the </span><strong class="bold"><span class="koboSpan" id="kobo.668.1">canaries</span></strong><span class="koboSpan" id="kobo.669.1">. </span><span class="koboSpan" id="kobo.669.2">This group acts as an early indicator for any potential issues, hence the name </span><em class="italic"><span class="koboSpan" id="kobo.670.1">canary</span></em><span class="koboSpan" id="kobo.671.1">, akin to the canaries used in coal mines to detect harmful gases. </span><span class="koboSpan" id="kobo.671.2">By monitoring the behavior and performance of the software with these initial users, developers can identify and address any issues before a full rollout. </span><span class="koboSpan" id="kobo.671.3">As shown in the following diagram, the switching is implemented gradually, and once stability is confirmed, the range </span><span class="No-Break"><span class="koboSpan" id="kobo.672.1">is expanded:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer152">
<span class="koboSpan" id="kobo.673.1"><img alt="Figure 5.11 – Canary deployment" src="image/B21203_05_11.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.674.1">Figure 5.11 – Canary deployment</span></p>
<p><span class="koboSpan" id="kobo.675.1">This is essentially the same as a rolling deployment but differs in duration and the activities and objectives associated with it. </span><span class="koboSpan" id="kobo.675.2">Rolling deployments are intended to replace older versions of applications sequentially with newer versions by completely replacing the infrastructure on which the application is running, and health checks are performed and completely replaced within a short period of time. </span><span class="koboSpan" id="kobo.675.3">In most cases, this is done in a few minutes to a few hours. </span><span class="koboSpan" id="kobo.675.4">For large systems, it might take </span><span class="No-Break"><span class="koboSpan" id="kobo.676.1">several days.</span></span></p>
<p><span class="koboSpan" id="kobo.677.1">Canary releases, on the other hand, take a</span><a id="_idIndexMarker574"/><span class="koboSpan" id="kobo.678.1"> relatively long period of time to observe how the system behaves in response to user behavior and to use that feedback for a </span><span class="No-Break"><span class="koboSpan" id="kobo.679.1">stable release.</span></span></p>
<p><span class="koboSpan" id="kobo.680.1">Although canary releases are sometimes confused with beta releases targeted at a subset of users, it should be noted that canary releases are clearly a practice with release stability as a major objective. </span><span class="koboSpan" id="kobo.680.2">The methodology for targeted beta releases is covered in the </span><em class="italic"><span class="koboSpan" id="kobo.681.1">Feature </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.682.1">flag</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.683.1"> section.</span></span></p>
<p><span class="koboSpan" id="kobo.684.1">Key benefits of a </span><a id="_idIndexMarker575"/><span class="koboSpan" id="kobo.685.1">canary</span><a id="_idIndexMarker576"/><span class="koboSpan" id="kobo.686.1"> deployment include </span><span class="No-Break"><span class="koboSpan" id="kobo.687.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.688.1">Risk mitigation</span></strong><span class="koboSpan" id="kobo.689.1">: By limiting the exposure of the new version, any negative impact is contained and affects only a small portion of the </span><span class="No-Break"><span class="koboSpan" id="kobo.690.1">user base</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.691.1">Real-world testing</span></strong><span class="koboSpan" id="kobo.692.1">: Provides an opportunity to observe how the new version performs under </span><span class="No-Break"><span class="koboSpan" id="kobo.693.1">real-world conditions</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.694.1">User observation</span></strong><span class="koboSpan" id="kobo.695.1">: Early observation from a subset of users can be invaluable for making adjustments before the </span><span class="No-Break"><span class="koboSpan" id="kobo.696.1">wider release</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.697.1">Gradual rollout</span></strong><span class="koboSpan" id="kobo.698.1">: Offers a controlled way to manage the release process, reducing the likelihood </span><a id="_idIndexMarker577"/><span class="koboSpan" id="kobo.699.1">of </span><span class="No-Break"><span class="koboSpan" id="kobo.700.1">widespread issues</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.701.1">However, it also has </span><span class="No-Break"><span class="koboSpan" id="kobo.702.1">its challenges:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.703.1">Segmentation</span></strong><span class="koboSpan" id="kobo.704.1">: Deciding</span><a id="_idIndexMarker578"/><span class="koboSpan" id="kobo.705.1"> which users should be part of the canary group can </span><span class="No-Break"><span class="koboSpan" id="kobo.706.1">be challenging.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.707.1">Monitoring complexity</span></strong><span class="koboSpan" id="kobo.708.1">: Requires robust monitoring tools to effectively track the performance of the </span><span class="No-Break"><span class="koboSpan" id="kobo.709.1">new version.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.710.1">Consistent user experience</span></strong><span class="koboSpan" id="kobo.711.1">: Ensuring a consistent experience for all users, regardless of the version they are using, can be difficult. </span><span class="koboSpan" id="kobo.711.2">For example, when a new backend service is developed, it must be released with the assurance that the current service </span><a id="_idIndexMarker579"/><span class="koboSpan" id="kobo.712.1">will continue to </span><span class="No-Break"><span class="koboSpan" id="kobo.713.1">work properly.</span></span></li>
</ul>
<h3><span class="koboSpan" id="kobo.714.1">Typical steps</span></h3>
<p><span class="koboSpan" id="kobo.715.1">Let’s take a look at each of </span><a id="_idIndexMarker580"/><span class="No-Break"><span class="koboSpan" id="kobo.716.1">these steps:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.717.1">Deployment</span></strong><span class="koboSpan" id="kobo.718.1">: Initially, deploy</span><a id="_idIndexMarker581"/><span class="koboSpan" id="kobo.719.1"> the new version to a small </span><a id="_idIndexMarker582"/><span class="koboSpan" id="kobo.720.1">percentage of your infrastructure, which will serve a fraction of your </span><span class="No-Break"><span class="koboSpan" id="kobo.721.1">user base.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.722.1">Monitoring and analysis</span></strong><span class="koboSpan" id="kobo.723.1">: Observe the behavior of the application closely. </span><span class="koboSpan" id="kobo.723.2">Use metrics, logs, and user feedback to evaluate performance and identify </span><span class="No-Break"><span class="koboSpan" id="kobo.724.1">any issues.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.725.1">Expansion</span></strong><span class="koboSpan" id="kobo.726.1">: If the initial deployment is successful, gradually increase the percentage of users accessing the new version. </span><span class="koboSpan" id="kobo.726.2">Continue monitoring and analyzing user feedback and </span><span class="No-Break"><span class="koboSpan" id="kobo.727.1">system performance.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.728.1">Full rollout</span></strong><span class="koboSpan" id="kobo.729.1">: Once confident that the new version is stable and well received, proceed with the full rollout to </span><span class="No-Break"><span class="koboSpan" id="kobo.730.1">all users.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.731.1">Roll back if necessary</span></strong><span class="koboSpan" id="kobo.732.1">: If significant issues are identified during the canary phase, roll back the changes </span><a id="_idIndexMarker583"/><span class="koboSpan" id="kobo.733.1">quickly to </span><span class="No-Break"><span class="koboSpan" id="kobo.734.1">minimize impact.</span></span></li>
</ol>
<h3><span class="koboSpan" id="kobo.735.1">Real-world scenario</span></h3>
<p><span class="koboSpan" id="kobo.736.1">Canary releases</span><a id="_idIndexMarker584"/><span class="koboSpan" id="kobo.737.1"> will</span><a id="_idIndexMarker585"/><span class="koboSpan" id="kobo.738.1"> be applied differently depending on the number of users and services to </span><span class="No-Break"><span class="koboSpan" id="kobo.739.1">be deployed.</span></span></p>
<p><span class="koboSpan" id="kobo.740.1">For example, when Microsoft applies canary releases to deploy Azure features, the canaries can be selected from a particular data center or a particular cluster of data centers. </span><span class="koboSpan" id="kobo.740.2">This is because it clearly narrows down the affected users and minimizes the impact. </span><span class="koboSpan" id="kobo.740.3">Another advantage of this clear user focus is that the situation can be observed on an ongoing basis. </span><span class="koboSpan" id="kobo.740.4">When stability is confirmed by deploying to a particular cluster or data center, the next step is to expand the deployment to a </span><span class="No-Break"><span class="koboSpan" id="kobo.741.1">wider target.</span></span></p>
<p><span class="koboSpan" id="kobo.742.1">In the absence of the ability to target specific data centers or clusters, canary releases are frequently executed in a more randomized manner, leveraging the capabilities of cloud platforms. </span><span class="koboSpan" id="kobo.742.2">For instance, consider the approach of directing a random subset of users, say 5%, to a newly configured environment. </span><span class="koboSpan" id="kobo.742.3">This method employs a weight-based distribution strategy, where initially a small percentage such as 5% is chosen, subsequently increasing to 10%, 25%, and eventually 100% as confidence in the new environment grows. </span><span class="koboSpan" id="kobo.742.4">During this process, the load balancer is configured to allocate the defined percentage of user requests to the staging or new environment. </span><span class="koboSpan" id="kobo.742.5">Many cloud load balancers use this </span><span class="No-Break"><span class="koboSpan" id="kobo.743.1">weight-based method.</span></span></p>
<p><span class="koboSpan" id="kobo.744.1">To enhance user experience consistency, some services use cookies to ensure subsequent requests from the same client are directed to the same instance. </span><span class="koboSpan" id="kobo.744.2">However, the primary method of traffic allocation under this model is largely random. </span><span class="koboSpan" id="kobo.744.3">For instance, in the scenario where 5% of users are routed to a new environment and an error exists in the new version, there is a proportional 5% likelihood of users encountering the error, but all the users have </span><span class="No-Break"><span class="koboSpan" id="kobo.745.1">that possibility.</span></span></p>
<p><span class="koboSpan" id="kobo.746.1">Alternatively, a more deterministic method involves the use of header-based routing. </span><span class="koboSpan" id="kobo.746.2">This technique involves inserting specific information into the request header, which is then utilized to direct traffic. </span><span class="koboSpan" id="kobo.746.3">This approach reduces randomness by enabling targeted trials for specific users or user groups. </span><span class="koboSpan" id="kobo.746.4">The feasibility of implementing this method depends on the capabilities of the cloud service </span><span class="No-Break"><span class="koboSpan" id="kobo.747.1">being used.</span></span></p>
<p><span class="koboSpan" id="kobo.748.1">Both methods provide mechanisms for the gradual exposure of new updates or features, but each with its own level of control. </span><span class="koboSpan" id="kobo.748.2">For example, DNS load balancers do not read header information, so they basically only distribute weights, but they may be able to distribute by country. </span><span class="koboSpan" id="kobo.748.3">Layer 7 application load balancers, on the other hand, can read header information and </span><a id="_idIndexMarker586"/><span class="No-Break"><span class="koboSpan" id="kobo.749.1">other information.</span></span></p>
<h3><span class="koboSpan" id="kobo.750.1">Canary selection methods</span></h3>
<p><span class="koboSpan" id="kobo.751.1">In canary deployments, managing </span><a id="_idIndexMarker587"/><span class="koboSpan" id="kobo.752.1">how users are exposed to the new version is crucial. </span><span class="koboSpan" id="kobo.752.2">Various methods can be employed to control </span><span class="No-Break"><span class="koboSpan" id="kobo.753.1">this exposure:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.754.1">Weight-based approach</span></strong><span class="koboSpan" id="kobo.755.1">: This method involves allocating a certain percentage of traffic to the </span><a id="_idIndexMarker588"/><span class="koboSpan" id="kobo.756.1">new version. </span><span class="koboSpan" id="kobo.756.2">For example, initially, 5% of users may be directed to the new environment, gradually increasing to 25%, 50%, and ultimately 100% as confidence in the new version grows. </span><span class="koboSpan" id="kobo.756.3">Load balancers are often configured to handle this distribution of traffic based on </span><span class="No-Break"><span class="koboSpan" id="kobo.757.1">predefined weights.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.758.1">Header-based routing</span></strong><span class="koboSpan" id="kobo.759.1">: This </span><a id="_idIndexMarker589"/><span class="koboSpan" id="kobo.760.1">technique utilizes specific information added to the request headers to direct traffic to the appropriate version. </span><span class="koboSpan" id="kobo.760.2">This method is less random than weight-based routing and allows for more targeted testing, such as exposing the new version to certain user groups or individuals based on </span><span class="No-Break"><span class="koboSpan" id="kobo.761.1">header criteria.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.762.1">Cookie-based routing</span></strong><span class="koboSpan" id="kobo.763.1">: Some </span><a id="_idIndexMarker590"/><span class="koboSpan" id="kobo.764.1">services use cookies to ensure that subsequent requests from the same client are consistently directed to the same version (either new or old). </span><span class="koboSpan" id="kobo.764.2">This approach helps maintain a consistent user experience and is particularly useful for </span><span class="No-Break"><span class="koboSpan" id="kobo.765.1">session persistence.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.766.1">Geography-based distribution</span></strong><span class="koboSpan" id="kobo.767.1">: In some </span><a id="_idIndexMarker591"/><span class="koboSpan" id="kobo.768.1">cases, traffic can be distributed based on the geographical location of the users. </span><span class="koboSpan" id="kobo.768.2">Some DNS load balancers, for example, can route traffic differently based on the country or region, which can be useful for global services looking to roll out updates in specific </span><span class="No-Break"><span class="koboSpan" id="kobo.769.1">areas first.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.770.1">Choosing the right switchover method is a critical decision in canary deployments, as it directly impacts the ability to effectively test the new version and respond to any issues that may arise during the initial </span><span class="No-Break"><span class="koboSpan" id="kobo.771.1">rollout phase.</span></span></p>
<p><span class="koboSpan" id="kobo.772.1">A canary deployment</span><a id="_idIndexMarker592"/><span class="koboSpan" id="kobo.773.1"> is a strategic approach</span><a id="_idIndexMarker593"/><span class="koboSpan" id="kobo.774.1"> to software releases, offering a balanced mix of risk mitigation and real-world testing. </span><span class="koboSpan" id="kobo.774.2">By gradually introducing changes, it allows for a more measured and informed approach to </span><span class="No-Break"><span class="koboSpan" id="kobo.775.1">software deployment.</span></span></p>
<p><span class="koboSpan" id="kobo.776.1">We have seen how to deploy applications and how to release them seamlessly and securely. </span><span class="koboSpan" id="kobo.776.2">Now that we have looked at strategies for how to deploy, we will next look at how to release at a more </span><span class="No-Break"><span class="koboSpan" id="kobo.777.1">functional level.</span></span></p>
<h1 id="_idParaDest-118"><a id="_idTextAnchor119"/><span class="koboSpan" id="kobo.778.1">Feature release strategies</span></h1>
<p><span class="koboSpan" id="kobo.779.1">So far, we have focused</span><a id="_idIndexMarker594"/><span class="koboSpan" id="kobo.780.1"> on releasing the infrastructure and the service as a whole, but now, we will focus on releasing the features within the service. </span><span class="koboSpan" id="kobo.780.2">For feature releases, we introduce a release style called the feature flag and </span><span class="No-Break"><span class="koboSpan" id="kobo.781.1">release train.</span></span></p>
<h2 id="_idParaDest-119"><a id="_idTextAnchor120"/><span class="koboSpan" id="kobo.782.1">Feature flag</span></h2>
<p><span class="koboSpan" id="kobo.783.1">Feature flag </span><a id="_idIndexMarker595"/><span class="koboSpan" id="kobo.784.1">deployment is a </span><a id="_idIndexMarker596"/><span class="koboSpan" id="kobo.785.1">technique used in software development and delivery that involves toggling on or off certain features of an application without deploying new code. </span><span class="koboSpan" id="kobo.785.2">This method allows for more granular control over feature release, testing, and rollback, enabling a more dynamic and flexible approach to </span><span class="No-Break"><span class="koboSpan" id="kobo.786.1">software management.</span></span></p>
<p><span class="koboSpan" id="kobo.787.1">The main drawback of using </span><a id="_idIndexMarker597"/><span class="koboSpan" id="kobo.788.1">feature flags for anything is that feature flags can easily become a technical liability. </span><span class="koboSpan" id="kobo.788.2">Unused feature flags can clutter up the code base. </span><span class="koboSpan" id="kobo.788.3">Feature flags enable features for specific users or groups, as shown in the </span><span class="No-Break"><span class="koboSpan" id="kobo.789.1">following diagram:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer153">
<span class="koboSpan" id="kobo.790.1"><img alt="Figure 5.12 – Feature flag" src="image/B21203_05_12.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.791.1">Figure 5.12 – Feature flag</span></p>
<p><span class="koboSpan" id="kobo.792.1">Dark launches</span><a id="_idIndexMarker598"/><span class="koboSpan" id="kobo.793.1"> are</span><a id="_idIndexMarker599"/><span class="koboSpan" id="kobo.794.1"> typically released to user groups that do not know they are being tested and have not been told about the new feature at all. </span><span class="koboSpan" id="kobo.794.2">The advantage of this, on the other hand, is that it can be applied to any user group that wishes to do so, and not just to certain categories </span><span class="No-Break"><span class="koboSpan" id="kobo.795.1">of users.</span></span></p>
<h3><span class="koboSpan" id="kobo.796.1">Typical steps</span></h3>
<p><span class="koboSpan" id="kobo.797.1">The implementation of</span><a id="_idIndexMarker600"/><span class="koboSpan" id="kobo.798.1"> feature flags typically involves the </span><span class="No-Break"><span class="koboSpan" id="kobo.799.1">following steps:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.800.1">Implementation of feature flags in code</span></strong><span class="koboSpan" id="kobo.801.1">: Developers write conditional code for new features, controlled by feature flags. </span><span class="koboSpan" id="kobo.801.2">These flags can be toggled on or off, determining whether the feature </span><span class="No-Break"><span class="koboSpan" id="kobo.802.1">is active.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.803.1">Integration with feature management system</span></strong><span class="koboSpan" id="kobo.804.1">: The feature flags are then integrated with a feature management system, which allows for controlling and changing the flags without needing to modify the </span><span class="No-Break"><span class="koboSpan" id="kobo.805.1">code base.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.806.1">Testing</span></strong><span class="koboSpan" id="kobo.807.1">: Before enabling the feature for all users, it is often tested with a limited audience, similar to a canary release. </span><span class="koboSpan" id="kobo.807.2">This testing can be targeted based on user segments, geography, or </span><span class="No-Break"><span class="koboSpan" id="kobo.808.1">other criteria.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.809.1">Gradual rollout</span></strong><span class="koboSpan" id="kobo.810.1">: After initial testing, the feature can be gradually rolled out to more users, allowing for careful monitoring of its impact </span><span class="No-Break"><span class="koboSpan" id="kobo.811.1">and performance.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.812.1">Monitoring and feedback</span></strong><span class="koboSpan" id="kobo.813.1">: Continuous monitoring is essential to quickly identify any issues. </span><span class="koboSpan" id="kobo.813.2">Feedback from users during the rollout phase is also valuable for </span><span class="No-Break"><span class="koboSpan" id="kobo.814.1">further refinement.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.815.1">Full rollout or rollback</span></strong><span class="koboSpan" id="kobo.816.1">: Depending on the feedback and performance, the feature can be fully rolled out to all users or rolled back by simply toggling the feature</span><a id="_idIndexMarker601"/> <span class="No-Break"><span class="koboSpan" id="kobo.817.1">flag off.</span></span></li>
</ol>
<h3><span class="koboSpan" id="kobo.818.1">Real-world scenario</span></h3>
<p><span class="koboSpan" id="kobo.819.1">Feature flags are an</span><a id="_idIndexMarker602"/><span class="koboSpan" id="kobo.820.1"> integral </span><a id="_idIndexMarker603"/><span class="koboSpan" id="kobo.821.1">tool for modern software teams, enabling them to deliver features more efficiently and with greater control. </span><span class="koboSpan" id="kobo.821.2">This approach reduces risks associated with deploying new features and allows for more Agile product development and iteration. </span><span class="koboSpan" id="kobo.821.3">Their application extends across various aspects of software development, including A/B testing and </span><span class="No-Break"><span class="koboSpan" id="kobo.822.1">dark launches.</span></span></p>
<p><span class="koboSpan" id="kobo.823.1">The following subsections are real-world examples illustrating </span><span class="No-Break"><span class="koboSpan" id="kobo.824.1">these applications.</span></span></p>
<h4><span class="koboSpan" id="kobo.825.1">A/B testing</span></h4>
<p><span class="koboSpan" id="kobo.826.1">Let’s say a software</span><a id="_idIndexMarker604"/><span class="koboSpan" id="kobo.827.1"> team at an</span><a id="_idIndexMarker605"/><span class="koboSpan" id="kobo.828.1"> e-commerce company might use feature flags to test two different checkout page designs. </span><span class="koboSpan" id="kobo.828.2">They would create two variants: Design A (the current design) and Design B (the new design). </span><span class="koboSpan" id="kobo.828.3">By employing feature flags, they can expose Design B to a small, randomized group of users while the rest continue to see Design A. </span><span class="koboSpan" id="kobo.828.4">The team then </span><a id="_idIndexMarker606"/><span class="koboSpan" id="kobo.829.1">monitors </span><strong class="bold"><span class="koboSpan" id="kobo.830.1">Key Performance Indicators</span></strong><span class="koboSpan" id="kobo.831.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.832.1">KPIs</span></strong><span class="koboSpan" id="kobo.833.1">) such as conversion rates, </span><strong class="bold"><span class="koboSpan" id="kobo.834.1">Average Order Value</span></strong><span class="koboSpan" id="kobo.835.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.836.1">AOV</span></strong><span class="koboSpan" id="kobo.837.1">), and user</span><a id="_idIndexMarker607"/><span class="koboSpan" id="kobo.838.1"> feedback. </span><span class="koboSpan" id="kobo.838.2">This data helps them understand which design performs better in terms of user engagement and sales conversion. </span><span class="koboSpan" id="kobo.838.3">Based on the results, they can decide to either roll out Design B to all users, iterate on it, or revert to Design A, all with minimal disruption to the</span><a id="_idIndexMarker608"/><span class="koboSpan" id="kobo.839.1"> overall </span><span class="No-Break"><span class="koboSpan" id="kobo.840.1">user experience.</span></span></p>
<h4><span class="koboSpan" id="kobo.841.1">Dark launch</span></h4>
<p><span class="koboSpan" id="kobo.842.1">A social media platform might use </span><a id="_idIndexMarker609"/><span class="koboSpan" id="kobo.843.1">dark launches</span><a id="_idIndexMarker610"/><span class="koboSpan" id="kobo.844.1"> to test a new feature, such as an enhanced image recognition algorithm. </span><span class="koboSpan" id="kobo.844.2">They release the feature </span><em class="italic"><span class="koboSpan" id="kobo.845.1">in the dark</span></em><span class="koboSpan" id="kobo.846.1">, meaning it is live but not visible to users. </span><span class="koboSpan" id="kobo.846.2">The platform then collects data on how the new algorithm performs in terms of accuracy and speed compared to the old one, without users being aware of </span><span class="No-Break"><span class="koboSpan" id="kobo.847.1">the change.</span></span></p>
<p><span class="koboSpan" id="kobo.848.1">This approach allows the platform to gather real-world data on the feature’s performance and iron out any issues before making it visible to users. </span><span class="koboSpan" id="kobo.848.2">If the new algorithm does not perform as expected, they can refine or roll it back without impacting the </span><span class="No-Break"><span class="koboSpan" id="kobo.849.1">user experience.</span></span></p>
<p><span class="koboSpan" id="kobo.850.1">Feature</span><a id="_idIndexMarker611"/><span class="koboSpan" id="kobo.851.1"> flag deployment empowers teams to test and release features with higher confidence and control. </span><span class="koboSpan" id="kobo.851.2">By decoupling deployment from release, it allows for more flexibility, quicker iteration, and reduced risk in software </span><span class="No-Break"><span class="koboSpan" id="kobo.852.1">development processes.</span></span></p>
<h2 id="_idParaDest-120"><a id="_idTextAnchor121"/><span class="koboSpan" id="kobo.853.1">Release train</span></h2>
<p><span class="koboSpan" id="kobo.854.1">A release train</span><a id="_idIndexMarker612"/><span class="koboSpan" id="kobo.855.1"> is a concept in software development that emphasizes regular, scheduled </span><a id="_idIndexMarker613"/><span class="koboSpan" id="kobo.856.1">deliveries of new features, enhancements, and fixes. </span><span class="koboSpan" id="kobo.856.2">It aligns multiple teams and processes to ensure a coordinated and predictable release cycle, significantly improving the efficiency and reliability of software deployments. </span><span class="koboSpan" id="kobo.856.3">As shown in the following diagram, the release train only releases those that meet </span><span class="No-Break"><span class="koboSpan" id="kobo.857.1">the deadline:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer154">
<span class="koboSpan" id="kobo.858.1"><img alt="Figure 5.13 – Release train" src="image/B21203_05_13.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.859.1">Figure 5.13 – Release train</span></p>
<h3><span class="koboSpan" id="kobo.860.1">Typical steps</span></h3>
<p><span class="koboSpan" id="kobo.861.1">The release train</span><a id="_idIndexMarker614"/><span class="koboSpan" id="kobo.862.1"> approach typically involves </span><a id="_idIndexMarker615"/><span class="koboSpan" id="kobo.863.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.864.1">following steps:</span></span></p>
<ol>
<li><strong class="bold"><span class="koboSpan" id="kobo.865.1">Planning and coordination</span></strong><span class="koboSpan" id="kobo.866.1">: Establish a release schedule that all teams adhere to. </span><span class="koboSpan" id="kobo.866.2">This schedule includes fixed intervals (for example, bi-weekly, monthly) at which new features and updates </span><span class="No-Break"><span class="koboSpan" id="kobo.867.1">are released.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.868.1">Development and testing</span></strong><span class="koboSpan" id="kobo.869.1">: Teams work on their respective features and fixes within the defined timeline. </span><span class="koboSpan" id="kobo.869.2">CI and </span><strong class="bold"><span class="koboSpan" id="kobo.870.1">Continuous Testing</span></strong><span class="koboSpan" id="kobo.871.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.872.1">CT</span></strong><span class="koboSpan" id="kobo.873.1">) are </span><a id="_idIndexMarker616"/><span class="koboSpan" id="kobo.874.1">employed to ensure code quality </span><span class="No-Break"><span class="koboSpan" id="kobo.875.1">and compatibility.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.876.1">Integration and staging</span></strong><span class="koboSpan" id="kobo.877.1">: All features, enhancements, and fixes are integrated into a staging environment. </span><span class="koboSpan" id="kobo.877.2">This stage is crucial for identifying any integration issues and ensuring that all components work </span><span class="No-Break"><span class="koboSpan" id="kobo.878.1">together seamlessly.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.879.1">Release review</span></strong><span class="koboSpan" id="kobo.880.1">: Conduct a review meeting with all stakeholders to ensure that the release is ready to be deployed. </span><span class="koboSpan" id="kobo.880.2">This meeting assesses the quality, functionality, and potential impact of </span><span class="No-Break"><span class="koboSpan" id="kobo.881.1">the release.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.882.1">Deployment</span></strong><span class="koboSpan" id="kobo.883.1">: Once approved, the release is deployed to production according to the schedule. </span><span class="koboSpan" id="kobo.883.2">The deployment process is typically automated to reduce human error and </span><span class="No-Break"><span class="koboSpan" id="kobo.884.1">increase efficiency.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.885.1">Monitoring and feedback</span></strong><span class="koboSpan" id="kobo.886.1">: After the release, continuous monitoring is essential to quickly identify and address any post-deployment issues. </span><span class="koboSpan" id="kobo.886.2">Feedback from users and stakeholders is collected for </span><span class="No-Break"><span class="koboSpan" id="kobo.887.1">future improvements.</span></span></li>
</ol>
<h3><span class="koboSpan" id="kobo.888.1">Real-world scenario</span></h3>
<p><span class="koboSpan" id="kobo.889.1">In a large software </span><a id="_idIndexMarker617"/><span class="koboSpan" id="kobo.890.1">organization, the</span><a id="_idIndexMarker618"/><span class="koboSpan" id="kobo.891.1"> release train approach can significantly streamline the deployment process. </span><span class="koboSpan" id="kobo.891.2">For instance, a company developing a suite of business applications might have multiple teams working on different modules such as finance, HR, and operations. </span><span class="koboSpan" id="kobo.891.3">By adopting the release train model, the organization ensures that updates across all modules are released in a coordinated manner. </span><span class="koboSpan" id="kobo.891.4">Every month, new features and updates from each team are integrated, tested, and then deployed simultaneously. </span><span class="koboSpan" id="kobo.891.5">This synchronization avoids complexities and conflicts that can arise when different teams deploy </span><span class="No-Break"><span class="koboSpan" id="kobo.892.1">updates independently.</span></span></p>
<p><span class="koboSpan" id="kobo.893.1">Moreover, this approach provides customers with a predictable update schedule, enabling them to plan for the adoption of new features and updates. </span><span class="koboSpan" id="kobo.893.2">It also allows for more efficient allocation of resources within the organization, as teams can plan their workloads in accordance with the </span><span class="No-Break"><span class="koboSpan" id="kobo.894.1">release schedule.</span></span></p>
<p><span class="koboSpan" id="kobo.895.1">In essence, the release train model fosters a disciplined, predictable, and efficient release process, benefiting both the development teams and the </span><span class="No-Break"><span class="koboSpan" id="kobo.896.1">end users.</span></span></p>
<h1 id="_idParaDest-121"><a id="_idTextAnchor122"/><span class="koboSpan" id="kobo.897.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.898.1">This chapter has equipped you with the knowledge and skills to transform your development workflow into a model of automation excellence. </span><span class="koboSpan" id="kobo.898.2">The journey through the pages of this chapter has taken you from the foundational elements of GitHub Actions to strategic deployment and release techniques that stand at the forefront of modern software practices. </span><span class="koboSpan" id="kobo.898.3">To go further from here, you need to deepen such things as testing and concurrency. </span><span class="koboSpan" id="kobo.898.4">These things are not only connected to how the pipeline is put together but also to the philosophy of testing and integration. </span><span class="koboSpan" id="kobo.898.5">I hope you will continue to </span><span class="No-Break"><span class="koboSpan" id="kobo.899.1">learn more.</span></span></p>
<p><span class="koboSpan" id="kobo.900.1">By embracing the practices and strategies outlined herein, you are now poised to craft workflows that are not only efficient and robust but also secure and compliant with the highest standards. </span><span class="koboSpan" id="kobo.900.2">Let this chapter be a constant companion as you continue to innovate and excel in the evolving landscape of software development. </span><span class="koboSpan" id="kobo.900.3">In the upcoming chapter, we will delve into the critical areas of DevOps metrics, DevSecOps, and scaling collaboration, exploring how these concepts play a pivotal role in enhancing the efficiency and security of software development and </span><span class="No-Break"><span class="koboSpan" id="kobo.901.1">deployment processes.</span></span></p>
<h1 id="_idParaDest-122"><a id="_idTextAnchor123"/><span class="koboSpan" id="kobo.902.1">Further reading</span></h1>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.903.1">About custom </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.904.1">actions</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.905.1">: </span></span><a href="https://docs.github.com/en/actions/creating-actions/about-custom-actions"><span class="No-Break"><span class="koboSpan" id="kobo.906.1">https://docs.github.com/en/actions/creating-actions/about-custom-actions</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.907.1">Reusing </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.908.1">workflows</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.909.1">: </span></span><a href="https://docs.github.com/en/actions/using-workflows/reusing-workflows"><span class="No-Break"><span class="koboSpan" id="kobo.910.1">https://docs.github.com/en/actions/using-workflows/reusing-workflows</span></span></a></li>
</ul>
</div>


<div class="Content" id="_idContainer156">
<h1 id="_idParaDest-123" lang="en-US" xml:lang="en-US"><a id="_idTextAnchor124"/><span class="koboSpan" id="kobo.1.1">Part 3: Beyond DevOps</span></h1>
<p><span class="koboSpan" id="kobo.2.1">This part provides a detailed examination of DevOps, emphasizing the role of metrics, the incorporation of DevSecOps practices, and strategies for scaling collaboration in organizations. </span><span class="koboSpan" id="kobo.2.2">It then shifts focus to the integration of AI in software development, exploring tools such as GitHub Copilot and best practices for coding with AI assistance, including prompt crafting and AI-friendly programming principles. </span><span class="koboSpan" id="kobo.2.3">Finally, it reflects on the transformative impact of technologies such as Git, GitHub, DevOps, and AI in software development, contemplating the future influence of AI on software </span><span class="No-Break"><span class="koboSpan" id="kobo.3.1">engineering practices.</span></span></p>
<p><span class="koboSpan" id="kobo.4.1">This part has the </span><span class="No-Break"><span class="koboSpan" id="kobo.5.1">following chapters:</span></span></p>
<ul>
<li><a href="B21203_06.xhtml#_idTextAnchor125"><em class="italic"><span class="koboSpan" id="kobo.6.1">Chapter 6</span></em></a><em class="italic"><span class="koboSpan" id="kobo.7.1">, Enriching DevOps Implementation</span></em></li>
<li><a href="B21203_07.xhtml#_idTextAnchor141"><em class="italic"><span class="koboSpan" id="kobo.8.1">Chapter 7</span></em></a><em class="italic"><span class="koboSpan" id="kobo.9.1">, Accelerate Productivity with AI</span></em></li>
<li><a href="B21203_08.xhtml#_idTextAnchor157"><em class="italic"><span class="koboSpan" id="kobo.10.1">Chapter 8</span></em></a><em class="italic"><span class="koboSpan" id="kobo.11.1">, Reflection and Conclusion</span></em></li>
</ul>
</div>
<div>
<div id="_idContainer157">
</div>
</div>
<div>
<div class="Basic-Graphics-Frame" id="_idContainer158">
</div>
</div>
</body></html>