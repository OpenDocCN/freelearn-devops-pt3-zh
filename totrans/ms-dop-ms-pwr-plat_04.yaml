- en: <st c="0">4</st>
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="2">Understanding Power Platform Environments and Solutions</st>
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="57">Now that we have learned about the Power Platform products, as well
    as</st> **<st c="129">Application Life Cycle Management</st>** <st c="162">(</st>**<st
    c="164">ALM</st>**<st c="167">) and DevOps approaches, in the previous chapters,
    it is time to explore the fundamental building blocks of successful ALM by introducing
    the concepts of</st> **<st c="322">environments</st>** <st c="334">and</st> **<st
    c="339">solutions</st>**<st c="348">. We will start by explaining what constitutes
    a solution in the Power Platform and then discuss</st> **<st c="445">Dataverse</st>**
    <st c="454">and data modeling within this framework.</st> <st c="496">We will
    also cover the versioning of solutions and packages in the platform to understand
    how to manage different versions of solutions.</st> <st c="633">We will learn
    about the concepts of</st> **<st c="669">Managed Environments</st>** <st c="689">and</st>
    **<st c="694">managed pipelines</st>**<st c="711">, and we will also discover
    how we can use them to automate and streamline the software development process.</st>
    <st c="820">We will conclude this section with a step-by-step guide on our first</st>
    **<st c="889">Continuous Integration and Continuous Deployment</st>** <st c="937">(</st>**<st
    c="939">CI/CD</st>**<st c="944">) pipeline in the Power Platform, giving us a
    practical understanding of how CI/CD processes work in this</st> <st c="1051">specific
    context.</st>
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1068">By the end of this chapter, we will be able to set up a CI/CD pipeline
    using the built-in Power Platform pipelines, deploy solutions to different environments,
    and use Copilot to generate deployment notes</st> <st c="1274">in pipelines.</st>
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1287">In this chapter, we’re going to cover the following</st> <st c="1340">main
    topics:</st>
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
- en: <st c="1352">What comes to</st> <st c="1367">a solution?</st>
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1378">Versioning of solutions</st> <st c="1403">and packages</st>
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1415">What about data – Dataverse and data</st> <st c="1453">modeling
    aspects</st>
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1469">Environments – Managed Environments and</st> <st c="1510">environment
    strategy</st>
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1530">Managed pipelines – our</st> <st c="1555">first CI/CD</st>
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="1566">Technical requirements</st>
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="1589">To be able to create our first CD pipeline using Power Platform
    pipelines, we need to have a Power Platform subscription.</st> <st c="1712">We
    can sign up for a Power Apps Developer Plan (</st>[<st c="1760">https://www.microsoft.com/en-us/power-platform/products/power-apps/free</st>](https://www.microsoft.com/en-us/power-platform/products/power-apps/free)<st
    c="1832">), if we already have a Microsoft Entra ID work account, or we can join
    the Microsoft 365 developer</st> <st c="1933">program (</st>[<st c="1942">https://developer.microsoft.com/en-us/microsoft-365/dev-program</st>](https://developer.microsoft.com/en-us/microsoft-365/dev-program)<st
    c="2006">).</st>
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2009">In addition, we need to install the PAC CLI tool and PowerShell
    administrator module.</st> <st c="2096">See</st> [*<st c="2100">Chapter 2</st>*](B22208_02.xhtml#_idTextAnchor030)
    <st c="2109">for setup and</st> <st c="2124">installation information.</st>
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: <st c="2149">What comes to a solution?</st>
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="2175">As we have learned in the previous chapters, Power Platform consists
    of multiple products, including Power Apps, Power Automate, Power Pages, Microsoft
    Copilot Studio, Dataverse, AI Builder, and so on.</st> <st c="2378">We often refer
    to the building blocks that we can create in these products as assets or solution
    components.</st> <st c="2487">An asset can be a canvas app, a connection reference,
    a cloud flow, a custom copilot, or even a plugin developed for Dataverse or a
    Dataverse Table</st> <st c="2635">schema definition.</st>
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="2653">Solutions</st>** <st c="2663">are</st> <st c="2667">the containers
    of the assets that build up a Power Platform application.</st> <st c="2741">They
    can contain one or more apps as well as other components such as flows, custom
    Copilots, Power Pages websites, site maps, entities, processes, web resources,
    option sets, pro-dev components, such as plugins, PCF components, and more.</st>
    <st c="2980">Some components are nested within other components; for example,
    a Dataverse Table contains forms, views, charts, columns, table relationships,
    messages, and business rules.</st> <st c="3154">Each of these components requires
    a table to exist and they cannot exist outside of a table.</st> <st c="3247">On
    the other hand, solutions need environments with</st> <st c="3299">Dataverse installed.</st>'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: <st c="3319">We need solutions because Power Platform solutions are the way
    to transport apps and components from one environment to another or to apply a
    set of customizations to existing apps.</st> <st c="3502">This is one of the key
    fundamentals of ALM processes in Power Platform.</st> <st c="3574">To implement
    these releases and to</st> <st c="3608">get</st> **<st c="3613">Continuous Deployments</st>**
    <st c="3635">(</st>**<st c="3637">CDs</st>**<st c="3640">) to work fluently, the
    platform defines two types</st> <st c="3692">of solutions:</st>
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="3705">Managed solutions</st>** <st c="3723">are</st> <st c="3728">created
    by exporting</st> <st c="3749">an unmanaged solution as a managed solution package.</st>
    <st c="3802">Once a managed solution is imported into a target environment, the
    components within the solution are locked and can only be modified by the publisher
    of the solution.</st> <st c="3970">This allows</st> <st c="3981">the</st> <st
    c="3986">publisher to control how the solution is used and updated in the target
    environment.</st> <st c="4071">Managed solutions are like generated binaries;
    they are immutable in the</st> <st c="4144">target environments.</st>'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="4164">Unmanaged solutions</st>** <st c="4184">are typically used in
    development environments where</st> <st c="4237">changes and customizations are
    made to the application.</st> <st c="4294">Unlike managed solutions, the components
    within an unmanaged solution are not locked and can be modified by anyone with
    the appropriate permissions.</st> <st c="4443">These solutions are like the source
    code of applications</st> <st c="4499">in custom development projects.</st> <st
    c="4532">Unmanaged solutions are exported as unmanaged solution packages and can
    be imported into other environments for further development or testing.</st> <st
    c="4676">However, it is important to note that unmanaged solutions should not
    be used in production environments as they can be changed by anyone who has access
    to the components defined</st> <st c="4854">within them.</st>'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="4164">非托管解决方案</st>** <st c="4184">通常用于开发环境，其中会对应用程序进行更改和定制。</st> <st
    c="4237">与托管解决方案不同，非托管解决方案中的组件没有被锁定，任何具有适当权限的人都可以进行修改。</st> <st c="4443">这些解决方案类似于应用程序的源代码</st>
    <st c="4499">在定制开发项目中。</st> <st c="4532">非托管解决方案作为非托管解决方案包进行导出，并可以导入到其他环境中进行进一步的开发或测试。</st>
    <st c="4676">然而，值得注意的是，非托管解决方案不应在生产环境中使用，因为任何有权限访问其定义组件的人都可以对其进行更改。</st>'
- en: <st c="4866">Every development project starts with an unmanaged solution, which
    developers extend with components to realize the original customer requirements.</st>
    <st c="5015">After finalizing the development and going through the testing phase,
    the unmanaged solution is converted to a</st> <st c="5126">managed one.</st>
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="4866">每个开发项目都从非托管解决方案开始，开发人员通过添加组件来扩展，以实现原始客户需求。</st> <st c="5015">在完成开发并通过测试阶段后，非托管解决方案会转换为</st>
    <st c="5126">托管解决方案。</st>
- en: <st c="5138">We can also export solutions manually, which results in ZIP files.</st>
    <st c="5206">In the case of a managed solution, the ZIP file only contains a few
    files.</st> <st c="5281">One of them is an</st> `<st c="5299">.msapp</st>` <st
    c="5305">file.</st> <st c="5312">On the other hand, the ZIP files of unmanaged
    solutions contain a large number of JSON and XML files that describe the configuration
    of Power Platform assets included in the solution.</st> <st c="5496">We can also
    edit the latter ones</st> <st c="5529">if needed.</st>
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5138">我们还可以手动导出解决方案，这会生成 ZIP 文件。</st> <st c="5206">对于托管解决方案，ZIP 文件只包含少数几个文件。</st>
    <st c="5281">其中之一是一个</st> `<st c="5299">.msapp</st>` <st c="5305">文件。</st> <st
    c="5312">另一方面，非托管解决方案的 ZIP 文件包含大量描述 Power Platform 资产配置的 JSON 和 XML 文件，这些资产包含在解决方案中。</st>
    <st c="5496">如果需要，我们也可以编辑后者。</st> <st c="5529">如果需要的话。</st>
- en: <st c="5539">Considering the traditional development terms and methodologies,
    creating a managed solution is equal to generating binaries, so it is exactly</st>
    <st c="5683">what a</st> **<st c="5690">Continuous Integration</st>** <st c="5712">(</st>**<st
    c="5714">CI</st>**<st c="5716">) build does.</st> <st c="5731">Moving the managed
    solution through different environments corresponds to</st> <st c="5805">CD steps.</st>
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5539">考虑到传统的开发术语和方法论，创建托管解决方案等同于生成二进制文件，因此它正是</st> <st c="5683">一个</st>
    **<st c="5690">持续集成</st>** <st c="5712">(</st>**<st c="5714">CI</st>**<st c="5716">)
    构建所做的。</st> <st c="5731">将托管解决方案移至不同环境对应于</st> <st c="5805">CD 步骤。</st>
- en: <st c="5814">Solution as starting point</st>
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5814">解决方案作为起点</st>
- en: <st c="5841">It is highly recommended to start any customization on any Power
    Platform components or assets by creating a solution.</st> <st c="5961">We should
    then create any components inside the solution rather than in the corresponding
    editor.</st> <st c="6059">When we use this approach, the platform immediately
    appends every dependency to the Power</st> <st c="6149">Platform solution.</st>
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="5841">强烈建议通过创建一个解决方案来开始对任何 Power Platform 组件或资产进行定制。</st> <st c="5961">然后我们应当在解决方案内创建组件，而不是在相应的编辑器中创建。</st>
    <st c="6059">当我们使用这种方法时，平台会立即将所有依赖项添加到 Power</st> <st c="6149">Platform 解决方案中。</st>
- en: '**<st c="6167">Solution layering</st>** <st c="6185">is a</st> <st c="6190">feature
    in the Power Platform that allows us to manage the dependencies and behaviors
    of components within solutions.</st> <st c="6309">When we import a solution into
    an environment, the components within the solution are organized into layers based
    on their dependencies.</st> <st c="6446">Each layer represents a specific solution
    that has extended or changed the behavior of a component.</st> <st c="6546">Solution
    layers allow us to control how different solutions interact with each other and
    how changes to one solution can affect other solutions.</st> <st c="6691">This
    is particularly useful when we have multiple solutions that modify the same component,
    as it allows us to manage conflicts and ensure that the behavior of the component
    is consistent across all solutions.</st> <st c="6901">The following figure shows
    how solution layering works</st> <st c="6956">in practice:</st>'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '**<st c="6167">解决方案分层</st>** <st c="6185">是Power Platform中的一项功能，允许我们管理解决方案内组件的依赖关系和行为。</st>
    <st c="6309">当我们将一个解决方案导入到环境中时，解决方案内的组件会根据其依赖关系被组织成多个层。</st> <st c="6446">每一层代表一个特定的解决方案，该解决方案扩展或更改了组件的行为。</st>
    <st c="6546">解决方案层允许我们控制不同解决方案之间的交互方式，以及一个解决方案的更改如何影响其他解决方案。</st> <st c="6691">当我们有多个解决方案修改同一组件时，这尤其有用，因为它允许我们管理冲突，并确保组件的行为在所有解决方案中保持一致。</st>
    <st c="6901">下图展示了解决方案分层如何在实际中工作：</st>'
- en: '![Figure 4.1 – Solution layers](img/B22208_04_1.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.1 – 解决方案层](img/B22208_04_1.jpg)'
- en: <st c="7171">Figure 4.1 – Solution layers</st>
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7171">图 4.1 – 解决方案层</st>
- en: <st c="7199">On top of the</st> **<st c="7214">System Solution</st>** <st c="7229">and
    the</st> **<st c="7238">System Layer</st>**<st c="7250">, every</st> <st c="7258">managed
    solution creates its</st> <st c="7286">own managed solution layer.</st> <st c="7315">If
    multiple solutions change the same underlying component (asset), then the last
    customization wins (</st>*<st c="7417">last one wins</st>*<st c="7431">).</st>
    <st c="7435">To avoid merge conflicts with other solutions, the best practice
    is using unique asset names, such as unique form and view names on common Dataverse
    tables.</st> <st c="7592">Since the automated deployment pipelines run in the
    background, we need to be aware of such conflicting</st> <st c="7696">situations
    too.</st>
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7199">在</st> **<st c="7214">系统解决方案</st>** <st c="7229">和</st> **<st c="7238">系统层</st>**<st
    c="7250">的基础上，每个</st> <st c="7258">托管解决方案会创建自己的托管解决方案层。</st> <st c="7286">如果多个解决方案更改同一底层组件（资产），则最后的自定义会生效（</st>*<st
    c="7417">最后的更改有效</st>*<st c="7431">）。</st> <st c="7435">为了避免与其他解决方案的合并冲突，最佳做法是使用唯一的资产名称，例如在常见Dataverse表中使用唯一的表单和视图名称。</st>
    <st c="7592">由于自动化部署管道在后台运行，我们也需要关注此类冲突</st> <st c="7696">情况。</st>
- en: <st c="7711">In order to support modern ALM and DevOps processes, in addition
    to having immutable binaries (solutions), we also</st> <st c="7827">need version
    numbers.</st> **<st c="7849">Version numbers</st>** <st c="7864">help developers
    and ops teams identify the software running in the production environment.</st>
    <st c="7956">Power Platform solutions provide versioning features as well, which
    we will discuss in the</st> <st c="8047">next section.</st>
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="7711">为了支持现代的ALM和DevOps流程，除了拥有不可变的二进制文件（解决方案）外，我们还</st> <st c="7827">需要版本号。</st>
    **<st c="7849">版本号</st>** <st c="7864">帮助开发人员和运维团队识别生产环境中运行的软件。</st> <st c="7956">Power
    Platform解决方案也提供版本管理功能，我们将在</st> <st c="8047">下一节中讨论。</st>
- en: <st c="8060">Versioning of solutions and packages</st>
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="8060">解决方案和包的版本管理</st>
- en: <st c="8097">Every</st> <st c="8103">solution has a version number that follows
    this</st> <st c="8152">well-known</st> <st c="8163">pattern:</st>
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8097">每个</st> <st c="8103">解决方案都有一个版本号，遵循以下</st> <st c="8152">知名</st>
    <st c="8163">模式：</st>
- en: '[PRE0]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: <st c="8198">Each part of the version number has a</st> <st c="8237">specific
    meaning:</st>
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8198">版本号的每个部分都有一个</st> <st c="8237">特定的含义：</st>
- en: '`<st c="8254">Major</st>`<st c="8260">: This number is incremented when there
    are significant changes to the software, such as the addition of new features
    or changes that are not</st> <st c="8403">backward compatible</st>'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="8254">主要</st>`<st c="8260">：当软件发生重大变化时，如添加新功能或不兼容的更改时，这个数字会增加。</st>'
- en: '`<st c="8422">Minor</st>`<st c="8428">: This number is incremented when there
    are minor changes to the software, such as the addition of new functionalities
    or improvements to existing features that are</st> <st c="8594">backward compatible</st>'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="8422">小版本</st>`<st c="8428">：当软件进行小幅更改时，例如添加新功能或改进现有功能，且这些更改</st> <st
    c="8594">向后兼容时，版本号会增加。</st>'
- en: '`<st c="8613">Build</st>`<st c="8619">: This number is incremented when there
    are changes to the software that do not affect its functionality, such as bug
    fixes or</st> <st c="8747">performance improvements</st>'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="8613">构建</st>`<st c="8619">：当软件发生变化但不影响其功能时，例如修复漏洞或</st> <st c="8747">性能改进时，构建号会增加。</st>'
- en: '`<st c="8771">Revision</st>`<st c="8780">: This number is incremented when
    there are small changes to the software, such as hotfixes or</st> <st c="8876">security
    updates</st>'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="8771">修订</st>`<st c="8780">：当软件进行小幅更改时，例如修补程序或</st> <st c="8876">安全更新时，修订号会增加。</st>'
- en: <st c="8892">The life cycle of a Power Platform solution involves several stages,
    including creating, updating, upgrading, patching, and staging for upgrade.</st>
    <st c="9038">Here is an overview of when to apply each of</st> <st c="9083">these
    actions:</st>
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="8892">Power Platform 解决方案的生命周期涉及多个阶段，包括创建、更新、升级、修补和升级准备。</st> <st c="9038">以下是各个操作的适用时机概述：</st>
    <st c="9083">这些操作：</st>
- en: '**<st c="9097">Update</st>**<st c="9104">: This</st> <st c="9111">option substitutes
    our solution with th</st><st c="9151">e new version.</st> <st c="9167">The assets
    that are not part of the newer version will not be erased and will be still available
    in the environment.</st> <st c="9284">This option has the best performance by
    typically finishing in less time than the upgrade methods.</st> <st c="9383">We
    can create updates to a managed solution that are deployed to the parent-managed
    solution, that is, under that solution.</st> <st c="9507">We cannot delete components
    with</st> <st c="9540">an update.</st>'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="9097">更新</st>**<st c="9104">：此选项用新版本替换我们的解决方案。</st> <st c="9111">不属于新版本的资产不会被删除，仍然可以在环境中使用。</st>
    <st c="9167">此选项通常比升级方法完成的时间更短，性能最好。</st> <st c="9284">我们可以为托管解决方案创建更新，这些更新会部署到父托管解决方案下。</st>
    <st c="9383">我们不能通过更新删除组件。</st>'
- en: '**<st c="9550">Upgrade</st>**<st c="9558">: Upgrades</st> <st c="9570">combine
    all patches into a new version of the solution.</st> <st c="9626">During the upgrade
    process, any components that are no longer included in the new version will be
    removed.</st> <st c="9733">The upgrade can be done immediately</st> <st c="9769">or
    staged.</st>'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="9550">升级</st>**<st c="9558">：升级将所有补丁合并到解决方案的新版本中。</st> <st c="9570">在升级过程中，任何不再包含在新版本中的组件将被删除。</st>
    <st c="9626">升级可以立即进行</st> <st c="9733">或分阶段进行。</st>'
- en: '**<st c="9779">Staging for upgrades</st>**<st c="9800">: This</st> <st c="9807">is
    used to prepare the target environment before deploying the solution.</st> <st
    c="9881">Staging for an upgrade does not delete the previous version of the solution;
    the old and new versions are installed side-by-side.</st> <st c="10011">We can
    use this scenario if we need to do some data migration before we complete the</st>
    <st c="10096">solution upgrade.</st>'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="9779">升级准备</st>**<st c="9800">：此操作用于在部署解决方案之前准备目标环境。</st> <st c="9807">升级准备不会删除解决方案的先前版本；旧版本和新版本会并排安装。</st>
    <st c="9881">如果我们需要在完成解决方案升级之前进行数据迁移，可以使用此场景。</st> <st c="10011">解决方案升级。</st>'
- en: '**<st c="10113">Patch</st>**<st c="10119">: A patch</st> <st c="10129">includes
    only the modifications made to a parent-managed solution, such as adding or modifying
    components and assets.</st> <st c="10248">Patches are useful for making minor
    updates like hotfixes are.</st> <st c="10311">When a patch is imported, it is
    applied on top of the parent solution.</st> <st c="10382">It is not possible to
    delete components using</st> <st c="10428">a patch.</st>'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="10113">补丁</st>**<st c="10119">：补丁仅包括对父托管解决方案所做的修改，例如添加或修改组件和资产。</st>
    <st c="10129">补丁用于进行小的更新，如热修复。</st> <st c="10248">导入补丁后，它将应用于父解决方案之上。</st> <st
    c="10311">无法通过补丁删除组件。</st>'
- en: <st c="10436">The following figure shows the life cycle of Power Platform solutions,
    highlighting the main stages of</st> <st c="10540">an application:</st>
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10436">下图显示了 Power Platform 解决方案的生命周期，突出了应用程序的主要阶段：</st> <st c="10540">一个应用程序：</st>
- en: '![Figure 4.2 – A solution’s life cycle](img/B22208_04_2.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.2 – 解决方案生命周期](img/B22208_04_2.jpg)'
- en: <st c="10650">Figure 4.2 – A solution’s life cycle</st>
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10650">图 4.2 – 一个解决方案的生命周期</st>
- en: <st c="10686">Every solution</st> <st c="10701">starts its life cycle in the</st>
    **<st c="10731">create</st>** <st c="10737">stage.</st> <st c="10745">During the</st>
    **<st c="10756">development and releases</st>** <st c="10780">phase, multiple
    updates, upgrades, and patches are delivered in the form of managed solutions.</st>
    <st c="10876">At the end of the application’s life cycle, the managed solution
    is deleted, which removes every customized object from</st> <st c="10996">the
    Dataverse.</st>
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="10686">每个解决方案</st> <st c="10701">都从</st> **<st c="10731">创建</st>** <st
    c="10737">阶段开始其生命周期。</st> <st c="10745">在</st> **<st c="10756">开发和发布</st>** <st
    c="10780">阶段，多个更新、升级和补丁作为托管解决方案发布。</st> <st c="10876">在应用程序生命周期结束时，托管解决方案将被删除，进而从</st>
    <st c="10996">Dataverse 中移除所有自定义对象。</st>
- en: <st c="11010">In the case of managed solutions, the</st> `<st c="11049">upgrade</st>`
    <st c="11056">action is the default option among the</st> `<st c="11096">update</st>`<st
    c="11102">,</st> `<st c="11104">upgrade</st>`<st c="11111">,</st> `<st c="11113">stage
    for upgrade</st>`<st c="11130">, and</st> `<st c="11136">patch</st>` <st c="11141">actions,
    whereas unmanaged solutions can be</st> <st c="11186">only updated.</st>
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11010">在托管解决方案的情况下，</st> `<st c="11049">升级</st>` <st c="11056">操作是默认选项，介于</st>
    `<st c="11096">更新</st>`<st c="11102">、</st> `<st c="11104">升级</st>`<st c="11111">、</st>
    `<st c="11113">升级阶段</st>`<st c="11130">和</st> `<st c="11136">补丁</st>` <st c="11141">操作之间，而未托管解决方案只能进行</st>
    <st c="11186">更新。</st>
- en: <st c="11199">Power Platform solution patches are a way to update only the components
    of a solution that have changed instead of deploying the whole solution again.</st>
    <st c="11351">They are useful for reducing deployment time and avoiding conflicts
    with other solutions.</st> <st c="11441">Patches contain only the changes for
    a parent-managed solution, such as adding or editing components and assets.</st>
    <st c="11554">Typical examples of using patches include adding a new button on
    a canvas app or extending the column definition of a custom or system table.</st>
    <st c="11696">Patches get version number incremented by</st> `<st c="11738">1</st>`
    <st c="11739">in the</st> `<st c="11747">build</st>` <st c="11752">number:</st>
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11199">Power Platform 解决方案补丁是一种仅更新解决方案中已更改的组件，而不是重新部署整个解决方案的方法。</st>
    <st c="11351">它们有助于减少部署时间并避免与其他解决方案的冲突。</st> <st c="11441">补丁仅包含父级托管解决方案的更改，如添加或编辑组件和资源。</st>
    <st c="11554">使用补丁的典型例子包括在画布应用上添加新按钮或扩展自定义或系统表的列定义。</st> <st c="11696">补丁的版本号在</st>
    `<st c="11738">1</st>` <st c="11739">上递增，反映在</st> `<st c="11747">构建</st>` <st
    c="11752">号中：</st>
- en: '[PRE1]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: <st c="11796">Only unmanaged solutions can have one or more patches that we
    can export as managed patches to deploy them to other environments.</st> <st c="11927">The
    solution to which the patch has been created is locked until the patches are merged
    and a new version of the solution is cloned.</st> <st c="12060">This version will
    get the</st> `<st c="12086">{major}.{minor+1}.{build}.{version}</st>` <st c="12121">version
    number as we can see in the</st> <st c="12158">following figure:</st>
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="11796">只有未托管解决方案可以有一个或多个补丁，我们可以将它们导出为托管补丁，部署到其他环境中。</st> <st c="11927">创建补丁的解决方案被锁定，直到补丁被合并并且新版本的解决方案被克隆。</st>
    <st c="12060">这个版本将获得</st> `<st c="12086">{major}.{minor+1}.{build}.{version}</st>`
    <st c="12121">版本号，正如我们在</st> <st c="12158">下图中所见：</st>
- en: '![Figure 4.3 – Patches and versions](img/B22208_04_3.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.3 – 补丁和版本](img/B22208_04_3.jpg)'
- en: <st c="12247">Figure 4.3 – Patches and versions</st>
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12247">图 4.3 – 补丁和版本</st>
- en: <st c="12280">The parent</st> <st c="12291">solution is the unmanaged solution
    with version 1.2.0.0\.</st> <st c="12349">The patches get the incremented version
    numbers 1.2.1.0 and 1.2.2.0, respectively.</st> <st c="12432">After rolling up
    the patches, the new version of the unmanaged solution will</st> <st c="12509">be
    1.3.0.0.</st>
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12280">父级</st> <st c="12291">解决方案是版本为 1.2.0.0 的未托管解决方案。</st> <st c="12349">补丁分别获得递增的版本号
    1.2.1.0 和 1.2.2.0。</st> <st c="12432">在汇总补丁后，未托管解决方案的新版本将</st> <st c="12509">为
    1.3.0.0。</st>
- en: <st c="12520">We recommend using patches very rarely because sooner or later,
    we will need to roll up the patches together and release a</st> <st c="12644">solution
    update.</st>
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12520">我们建议尽量少使用补丁，因为迟早我们需要将补丁汇总起来，并发布一个</st> <st c="12644">解决方案更新。</st>
- en: <st c="12660">If our solution contains too many customizations, then we might
    encounter timeouts during the synchronous import.</st> **<st c="12775">Solution
    staging</st>** <st c="12791">breaks</st> <st c="12798">the import process into
    more controllable phases and executes those steps asynchronously.</st> <st c="12889">This
    option is available in the Dataverse SDK for .NET, through Web API, in the build
    tools of Azure DevOps and GitHub, and in the</st> <st c="13020">PAC CLI.</st>
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="12660">如果我们的解决方案包含太多自定义内容，那么在同步导入过程中可能会遇到超时问题。</st> **<st c="12775">解决方案分阶段</st>**
    <st c="12791">将导入过程拆分成更可控的阶段，并异步执行这些步骤。</st> <st c="12889">此选项在 Dataverse SDK
    for .NET 中、通过 Web API、在 Azure DevOps 和 GitHub 的构建工具中，以及在</st> <st c="13020">PAC
    CLI 中均可使用。</st>
- en: <st c="13028">There are two advanced pro-dev tools we can use to customize the
    solution import and export process</st> <st c="13129">in depth:</st>
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '<st c="13028">有两个高级的专业开发工具，我们可以用来深入自定义解决方案的导入和导出过程：</st> '
- en: '`<st c="13569">SolutionPackager</st>` <st c="13585">under the hood to unpack
    a solution ZIP file to a solution folder, or to pack a solution folder to a solution
    ZIP file.</st> <st c="13706">We can also configure</st> <st c="13728">whether
    the resulting ZIP file should be a managed or</st> <st c="13782">unmanaged solution.</st>'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<st c="13569">SolutionPackager</st>` <st c="13585">是用来解包解决方案 ZIP 文件到解决方案文件夹，或者将解决方案文件夹打包成解决方案
    ZIP 文件的工具。</st> <st c="13706">我们还可以配置</st> <st c="13728">是否将生成的 ZIP 文件设置为托管解决方案或</st>
    <st c="13782">非托管解决方案。</st>'
- en: '**<st c="13801">The Package Deployer tool</st>** <st c="13827">is a</st> <st
    c="13832">powerful tool in the Power Platform that allows administrators to deploy
    packages on Microsoft Dataverse instances.</st> <st c="13949">A Package Deployer
    package can contain any or all of</st> <st c="14002">the following:</st>'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="13801">Package Deployer 工具</st>** <st c="13827">是 Power Platform 中的一个强大工具，允许管理员在
    Microsoft Dataverse 实例上部署包。</st> <st c="13949">一个 Package Deployer 包可以包含以下任意内容：</st>
    <st c="14002">或全部内容：</st>'
- en: <st c="14016">One or more Dataverse</st> <st c="14039">solution files</st>
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="14016">一个或多个 Dataverse</st> <st c="14039">解决方案文件</st>
- en: <st c="14053">Plain text files or exported configuration data files from the
    Configuration</st> <st c="14131">Migration tool</st>
  id: totrans-59
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="14053">纯文本文件或从配置迁移工具导出的配置数据文件</st> <st c="14131">。
- en: <st c="14145">Package Deployer is a great tool to deploy multiple solutions
    as one monolith package to our Power Platform environments.</st> <st c="14268">All
    we need is to create an MSBuild project file in Visual Studio 2019 or later, or
    with Visual Studio Code.</st> <st c="14377">We can then add the solutions, additional
    configuration files, HTML content, and even custom code to this MSBuild project.</st>
    <st c="14500">After building the package, administrators can install it in the
    target environment.</st> <st c="14585">Our custom code is executed during the
    import process and the HTML content is displayed for admins to get to know what
    exactly our package does.</st> <st c="14730">The Enterprise templates that we
    learned about in</st> [*<st c="14780">Chapter 2</st>*](B22208_02.xhtml#_idTextAnchor030)
    <st c="14789">have been created in this</st> <st c="14816">way too.</st>
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="14145">Package Deployer 是一个出色的工具，可以将多个解决方案打包为一个整体包，部署到我们的 Power Platform
    环境中。</st> <st c="14268">我们只需要在 Visual Studio 2019 或更高版本中创建一个 MSBuild 项目文件，或者使用
    Visual Studio Code。</st> <st c="14377">然后，我们可以将解决方案、附加的配置文件、HTML 内容，甚至自定义代码添加到该
    MSBuild 项目中。</st> <st c="14500">构建完包后，管理员可以将其安装到目标环境中。</st> <st c="14585">我们的自定义代码会在导入过程中执行，而
    HTML 内容会显示给管理员，以便他们了解我们的包究竟做了什么。</st> <st c="14730">我们在</st> [*<st c="14780">第
    2 章</st>*](B22208_02.xhtml#_idTextAnchor030) <st c="14789">中学习的企业模板也是以这种方式创建的。</st>
- en: <st c="14824">Now that we have learned the solution concept of Power Platform,
    let’s move on to Dataverse, in which these solutions (among others)</st> <st c="14958">are
    stored.</st>
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="14824">现在我们已经了解了 Power Platform 的解决方案概念，接下来让我们来看看 Dataverse，这些解决方案（以及其他内容）</st>
    <st c="14958">就存储在这里。</st>
- en: <st c="14969">What about data – Dataverse and data modeling aspects</st>
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: <st c="14969">那数据呢——Dataverse 和数据建模方面</st>
- en: <st c="15023">We all know that applications don’t work without data.</st> <st
    c="15079">Either they use the data to change their</st> <st c="15119">own behavior
    (as for applications run on data), or they manipulate it with the well-known</st>
    **<st c="15210">Create-Read-Update-Delete</st>** <st c="15235">(</st>**<st c="15237">CRUD</st>**<st
    c="15241">) operations.</st>
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15023">我们都知道，没有数据，应用程序是无法正常工作的。</st> <st c="15079">它们要么使用数据来改变自身行为（比如数据驱动的应用程序），要么通过众所周知的</st>
    **<st c="15210">创建-读取-更新-删除</st>** <st c="15235">(</st>**<st c="15237">CRUD</st>**<st
    c="15241">) 操作来处理数据。</st>
- en: <st c="15255">Microsoft Dataverse is a</st> <st c="15280">cloud-based data platform,
    a powerful database layer, the first party storage service of Microsoft Power
    Platform that stores not just relational data in SQL-like tables but also files,
    logs, and NoSQL IoT data.</st> <st c="15493">Under the hood, Dataverse seamlessly
    uses many Azure services, behaving</st> <st c="15565">as a</st> **<st c="15570">polyglot
    persistence layer</st>**<st c="15596">. The following figure shows the</st> <st
    c="15628">high-level architecture of Dataverse and the Microsoft Azure</st> <st
    c="15690">services used:</st>
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15255">Microsoft Dataverse 是一个</st> <st c="15280">基于云的数据平台，是 Microsoft
    Power Platform 的一层强大的数据库服务，不仅存储关系数据（类似 SQL 表格），还存储文件、日志以及 NoSQL 物联网数据。</st> <st
    c="15493">在其背后，Dataverse 无缝地使用了许多 Azure 服务，作为</st> **<st c="15570">多语言持久层</st>**<st
    c="15596">。下图展示了 Dataverse 及其使用的 Microsoft Azure</st> <st c="15628">服务的高级架构：</st>
- en: '![Figure 4.4 – The Dataverse polyglot concept under the hood](img/B22208_04_4.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.4 – Dataverse 多语言概念内部结构](img/B22208_04_4.jpg)'
- en: <st c="15928">Figure 4.4 – The Dataverse polyglot concept under the hood</st>
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15928">图 4.4 – Dataverse 多语言概念内部结构</st>
- en: <st c="15986">As we can see in the</st> <st c="16007">figure, an Azure Load
    Balancer scales requests across several</st> <st c="16070">compute services:</st>
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="15986">正如我们在</st> <st c="16007">图中所见，Azure 负载均衡器将请求分发到多个</st> <st c="16070">计算服务：</st>
- en: <st c="16087">Web for handling</st> **<st c="16105">OData</st>** **<st c="16111">API</st>**
    <st c="16114">requests</st>
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="16087">Web 用于处理</st> **<st c="16105">OData</st>** **<st c="16111">API</st>**
    <st c="16114">请求</st>
- en: '**<st c="16123">Azure Jobs</st>** <st c="16134">for handling</st> <st c="16148">asynchronous
    processing</st>'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="16123">Azure 作业</st>** <st c="16134">用于处理</st> <st c="16148">异步处理</st>'
- en: <st c="16171">Sandbox for running customer C# code that is executed within the</st>
    <st c="16237">processing pipeline</st>
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="16171">用于运行客户 C# 代码的沙箱，代码将在</st> <st c="16237">处理流水线中执行</st>
- en: <st c="16256">Reporting servers that handle</st> <st c="16287">paginated reports</st>
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: <st c="16256">报告服务器处理</st> <st c="16287">分页报告</st>
- en: <st c="16304">A variety of storage services are used to persist our data in
    the most proficient and performant way possible.</st> <st c="16416">Relational
    data</st> <st c="16431">is stored in</st> **<st c="16445">Azure SQL Managed Instance</st>**<st
    c="16471">, files and attachments are written to</st> **<st c="16510">Azure Blob
    storage</st>**<st c="16528">, and analytical</st> <st c="16544">data produced
    by DataFlows is stored</st> <st c="16582">in</st> **<st c="16585">Azure Data Lake
    Storage</st>**<st c="16608">. We have</st> **<st c="16618">Elastic Tables</st>**
    <st c="16632">as</st> <st c="16635">well, a new concept to store</st> **<st c="16665">Internet
    of Things</st>** <st c="16683">(</st>**<st c="16685">IoT</st>**<st c="16688">)
    data</st> <st c="16696">with tens of millions of records</st> <st c="16729">powered
    by</st> **<st c="16740">Azure</st>** **<st c="16746">Cosmos DB</st>**<st c="16755">.</st>
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="16304">我们使用多种存储服务，以最有效和高性能的方式持久化我们的数据。</st> <st c="16416">关系数据</st> <st
    c="16431">存储在</st> **<st c="16445">Azure SQL 托管实例</st>**<st c="16471">，文件和附件写入</st>
    **<st c="16510">Azure Blob 存储</st>**<st c="16528">，由 DataFlows 生成的分析</st> <st
    c="16544">数据存储在</st> <st c="16582">**<st c="16585">Azure 数据湖存储</st>**<st c="16608">。我们还使用</st>
    **<st c="16618">弹性表</st>** <st c="16632">，一个用于存储</st> **<st c="16665">物联网</st>**
    <st c="16683">(</st>**<st c="16685">IoT</st>**<st c="16688">) 数据</st> <st c="16696">的全新概念，支持数千万条记录</st>
    <st c="16729">，由</st> **<st c="16740">Azure</st>** **<st c="16746">Cosmos DB</st>**<st
    c="16755">提供支持。</st>
- en: <st c="16756">Dataverse manages</st> <st c="16775">all these Azure data services,
    providing 99.9% availability, enterprise scalability, backups, audit logs, and
    disaster-recovery management out of the box.</st> <st c="16930">Dataverse is also
    the main data storage solution behind the Dynamics 365</st> <st c="17003">product
    family.</st>
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="16756">Dataverse 管理</st> <st c="16775">所有这些 Azure 数据服务，提供 99.9% 的可用性、企业级可扩展性、备份、审计日志和灾难恢复管理。</st>
    <st c="16930">Dataverse 也是 Dynamics 365</st> <st c="17003">产品系列背后的主要数据存储解决方案。</st>
- en: <st c="17018">One of the key differentiators of the database service is the
    built-in security solution with a strict role-based access model, as well as row-level
    and column-level security configurations.</st> <st c="17210">Dataverse security
    is based on a role-based security model that protects data integrity and privacy
    while supporting efficient data access and collaboration.</st> <st c="17368">Users
    who can access Dataverse are Microsoft Entra ID accounts, that is, Azure AD users.</st>
    <st c="17457">Each user can be assigned to a set of pre-defined security roles
    that determine the types of records a user can access, the scope of data that
    users can manage, and the specific tasks that they can perform.</st> <st c="17664">This
    model is called row-level security and provides users with access to only the
    appropriate level of information that is required to do their jobs.</st> <st c="17815">For
    instance, users can view and edit the records they have created.</st> <st c="17884">Their
    supervisors can view and edit every record their directs have created.</st> <st
    c="17961">Common</st> **<st c="17968">security roles</st>** <st c="17982">are</st>
    <st c="17987">as follows:</st>
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="17018">数据库服务的一个关键特点是内置的安全解决方案，采用严格的基于角色的访问模型，以及行级和列级的安全配置。</st> <st c="17210">Dataverse
    安全性基于基于角色的安全模型，保护数据的完整性和隐私，同时支持高效的数据访问和协作。</st> <st c="17368">可以访问 Dataverse 的用户是
    Microsoft Entra ID 账户，也就是 Azure AD 用户。</st> <st c="17457">每个用户可以被分配一组预定义的安全角色，这些角色决定了用户可以访问的记录类型、用户可以管理的数据范围以及他们可以执行的具体任务。</st>
    <st c="17664">该模型被称为行级安全性，它仅提供用户进行工作所需的适当级别的信息访问。</st> <st c="17815">例如，用户可以查看和编辑他们创建的记录。</st>
    <st c="17884">他们的主管可以查看和编辑他们下属创建的所有记录。</st> <st c="17961">常见的</st> **<st c="17968">安全角色</st>**
    <st c="17982">如下：</st>
- en: '**<st c="17998">System Administrator</st>**<st c="18019">: This</st> <st c="18026">role
    has access to all data and can perform all tasks, including customizing</st> <st
    c="18104">the system</st>'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="17998">系统管理员</st>**<st c="18019">：此</st> <st c="18026">角色可以访问所有数据，并执行所有任务，包括定制</st>
    <st c="18104">系统</st>'
- en: '**<st c="18114">System Customizer</st>**<st c="18132">: This</st> <st c="18140">role
    can customize the system but does not have access to</st> <st c="18198">all data</st>'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18114">系统定制员</st>**<st c="18132">：此</st> <st c="18140">角色可以定制系统，但无法访问</st>
    <st c="18198">所有数据</st>'
- en: '**<st c="18206">Environment Admin</st>**<st c="18224">: This</st> <st c="18232">role
    has access to all resources in the environment</st> <st c="18284">including Dataverse</st>'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18206">环境管理员</st>**<st c="18224">：此</st> <st c="18232">角色可以访问环境中的所有资源</st>
    <st c="18284">包括 Dataverse</st>'
- en: '**<st c="18303">Environment Maker</st>**<st c="18321">: This</st> <st c="18328">role
    can create new environment resources, such as apps, flows, and APIs, but cannot
    access data in the</st> <st c="18433">environment (Dataverse)</st>'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18303">环境创建者</st>**<st c="18321">：此</st> <st c="18328">角色可以创建新的环境资源，例如应用、流程和
    API，但不能访问</st> <st c="18433">环境中的数据（Dataverse）</st>'
- en: '**<st c="18456">Basic User</st>**<st c="18467">: This</st> <st c="18475">role
    has limited access to data and can perform</st> <st c="18523">basic tasks</st>'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**<st c="18456">基础用户</st>**<st c="18467">：此</st> <st c="18475">角色对数据的访问有限，并且只能执行</st>
    <st c="18523">基本任务</st>'
- en: <st c="18534">Dataverse also</st> <st c="18549">provides</st> `<st c="18826">salary</st>`
    <st c="18832">column within</st> <st c="18847">those records.</st>
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: <st c="18534">Dataverse 还</st> <st c="18549">提供</st> `<st c="18826">薪资</st>`
    <st c="18832">列，位于</st> <st c="18847">这些记录中。</st>
- en: <st c="18861">In addition, Dataverse</st> <st c="18884">provides</st> **<st
    c="18894">Data Loss Prevention</st>** <st c="18914">(</st>**<st c="18916">DLP</st>**<st
    c="18919">) capabilities to enforce policies across connectors.</st> <st c="18974">Policies
    can be defined at the tenant or environment level.</st> <st c="19034">We will
    see later that every environment can have one or zero Dataverse created.</st>
    <st c="19115">Environment-level policies are applied at the environment level
    and only at that level, whereas tenant-level policies are applied to the entire
    tenant and have precedence over environment-level ones.</st> <st c="19315">The
    management and governance of DLP involves incident alerts and reports that provide
    administrators with detailed information on policy matches, enabling them to monitor
    and protect sensitive data effectively.</st> <st c="19527">These reports help
    administrators understand the number of DLP policy and rule matches over time,
    filter those matches by action and location, and determine whether rule matches
    are trending up</st> <st c="19721">or down.</st>
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: <st c="19729">The</st> **<st c="19734">zero trust security principle</st>**
    <st c="19763">is</st> <st c="19767">based</st> <st c="19773">on the idea that
    trust is a vulnerability, and that security must be designed with the strategy
    of</st> *<st c="19872">never trust, always verify</st>*<st c="19898">. This means
    that instead of assuming that everything behind the corporate firewall is safe,
    the zero trust model assumes a breach and verifies each request as though it originates
    from an uncontrolled network.</st> <st c="20109">In the context of Dataverse and
    Power Platform, the zero trust security principle can be applied by using role-based
    access control, field-level security, and DLP capabilities to enforce policies
    and protect data.</st> <st c="20323">By implementing</st> <st c="20338">the</st>
    **<st c="20343">least privileged strategy</st>** <st c="20368">when designing
    security roles, we can ensure that users only have access to the resources they
    need to do their jobs.</st> <st c="20487">Additionally, we can use Microsoft Entra
    ID to manage user identities</st> <st c="20556">and access and implement</st>
    **<st c="20582">Just-in-Time</st>** <st c="20594">(</st>**<st c="20596">JIT</st>**<st
    c="20599">) and</st> **<st c="20606">Just-Enough-Access</st>** <st c="20624">(</st>**<st
    c="20626">JEA</st>**<st c="20629">) policies to ensure that users only have access</st>
    <st c="20678">to what they need when they need it.</st> <st c="20716">By following
    the zero trust security principle, we can minimize the risk of data breaches and
    protect our organization’s data while still enabling efficient data access</st>
    <st c="20885">and collaboration.</st>
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
- en: <st c="20903">In addition to these comprehensive features, Dataverse</st> <st
    c="20958">has a common database schema.</st> <st c="20989">The</st> **<st c="20993">Common
    Data Model</st>** <st c="21010">(</st>**<st c="21012">CDM</st>**<st c="21015">)
    is a</st> <st c="21022">shared, standardized collection of data schemas published
    by Microsoft and its partners to the open source community on GitHub.</st> <st
    c="21151">It unifies data into a known form and applies structural and semantic
    consistency across multiple apps and deployments, making data management and app
    development simpler.</st> <st c="21323">The CDM is influenced by data schemas
    found in Dynamics 365 and covers a wide range of business areas.</st> <st c="21426">It
    brings, among others, common data table definitions such as</st> **<st c="21489">Account</st>**<st
    c="21496">,</st> **<st c="21498">Customer</st>**<st c="21506">,</st> **<st c="21508">Product</st>**<st
    c="21515">,</st> **<st c="21517">Opportunity</st>**<st c="21528">,</st> **<st
    c="21530">Sale</st>**<st c="21534">,</st> **<st c="21536">Purchase Order</st>**<st
    c="21550">, and many more to Dataverse.</st> <st c="21580">The CDM definitions
    are open and available to any service or application that wants to use them.</st>
    <st c="21677">By using the CDM, we can easily integrate with Dataverse and other
    services, and we can build custom applications that use the entity definitions
    available to us.</st> <st c="21840">This can save us time and effort, as we don’t
    have to build a new data model</st> <st c="21917">from scratch.</st>
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: <st c="21930">Dataverse schema definitions, such as</st> **<st c="21969">Tables</st>**<st
    c="21975">,</st> **<st c="21977">Columns</st>**<st c="21984">,</st> **<st c="21986">Relationships</st>**<st
    c="21999">,</st> **<st c="22001">Business rules</st>**<st c="22015">,</st> **<st
    c="22017">Views</st>**<st c="22022">,</st> **<st c="22024">Forms</st>**<st c="22029">,</st>
    **<st c="22031">Dashboards</st>**<st c="22041">,</st> **<st c="22043">Charts</st>**<st
    c="22049">,</st> **<st c="22051">Messages</st>**<st c="22059">,</st> **<st c="22061">Keys</st>**<st
    c="22065">, and</st> **<st c="22071">Commands</st>**<st c="22079">, are part of
    the solution definition, which means that database-level changes are one of the
    assets that developers can include in their solutions.</st> <st c="22228">On the
    other hand, solutions are themselves stored in Dataverse.</st> <st c="22293">When
    we import a solution into Dataverse, its metadata and dependency configurations
    are imported into various system tables, such as</st> **<st c="22427">Solution</st>**<st
    c="22435">,</st> **<st c="22437">Solution Component Attribute Configuration</st>**<st
    c="22479">,</st> **<st c="22481">Solution History</st>**<st c="22497">,</st> **<st
    c="22499">Solution Component History</st>**<st c="22525">, and so on.</st> <st
    c="22538">After the metadata import, the underlying system flows install the solution
    and apply</st> <st c="22624">the changes.</st>
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22636">Data in Dataverse and Solution</st>
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
- en: <st c="22667">To add data to a Dataverse table in a Power Platform solution,
    we can use the</st> **<st c="22746">Import data</st>** <st c="22757">option in
    the top command bar of the</st> **<st c="22795">Tables</st>** <st c="22801">page
    in Power Apps.</st> <st c="22822">There is (intentionally) no way to include data
    in a Power Platform solution.</st> <st c="22900">However, we can export the data
    and then import it into the new environment.</st> <st c="22977">Alternatively,
    we can copy our entire development environment in the Power Platform admin center,
    if there is nothing currently in production.</st> <st c="23120">Tools, such as
    Configuration Migration tool, Package Deployer, Power Platform DataFlow or writing
    code in Dataverse SDK for .NET to create entities in the target environment are
    the recommended tools and approaches to import data</st> <st c="23350">into environments.</st>
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: <st c="23368">Dataverse</st> <st c="23379">instances live in environments, an
    additional concept to organize our applications and solutions tenant-wide.</st>
    <st c="23489">In the next section, we will learn how to consider these environments
    from</st> <st c="23564">pro-dev perspectives.</st>
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
- en: <st c="23585">Environments, managed environments, and environment strategy</st>
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="23646">Environments</st> <st c="23660">are containers of our apps, flows,
    connections, and other components along with security and data access management
    capabilities.</st> <st c="23790">To draw an analogy from the cloud world, we can
    look at environments such as Microsoft Azure subscriptions, which act as logical
    containers capable of hosting one or more applications.</st> <st c="23975">Perhaps
    the term</st> *<st c="23992">workload</st>* <st c="24000">is more appropriate
    here, as our Power Platform applications can include Power Apps, Flows, custom
    Copilots, Power Pages websites, and more.</st> <st c="24142">It is highly recommended
    to use solutions to deploy workloads</st> <st c="24204">to environments.</st>
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24220">Microsoft Power Platform tenants can have thousands of environments.</st>
    <st c="24290">Microsoft Entra ID is the glue that provides security controls,
    governance, and guardrails that surround every product in Power Platform.</st>
    <st c="24428">As mentioned earlier, Power Platform runs on top of Microsoft Azure.</st>
    <st c="24497">Environments are the key concept for isolation and to define system
    boundaries in different geolocations.</st> <st c="24603">We can create environments
    without Dataverse, but those environments provide only very</st> <st c="24690">limited
    capabilities.</st>
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24711">Environments without Dataverse</st>
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24742">Environments without Dataverse only support Power Apps canvas-apps
    and Power Automate</st> <st c="24829">Cloud Flows.</st>
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: <st c="24841">If we create environments with Dataverse, we get the whole spectrum
    of Power Platform security</st> <st c="24936">features as well.</st> <st c="24955">It
    means we can assign role-based security roles to different hierarchical levels
    inside the environment to</st> <st c="25063">segment security.</st>
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: <st c="25080">In the Power Platform, a</st> **<st c="25106">business unit</st>**
    <st c="25119">represents</st> <st c="25131">a unit of an organization that performs
    one or more business functions that can be rolled up in a management hierarchy.</st>
    <st c="25251">Business units can be used to mirror the organizational structure
    of a company and to control data access.</st> <st c="25358">Each business unit
    has its own set of security roles that define the access rights of users within
    the business unit.</st> <st c="25476">There are built-in security roles, such
    as Basic User, System Administrator, and so on, and we can also create our own
    security roles.</st> <st c="25611">For instance, if we introduce a custom table
    that stores records for reviewing, we can create a custom security role (such
    as Reviewer) that allows its members to read every record from the custom table
    whereas, others can only see their own records.</st> *<st c="25862">We can add
    these Security roles to</st>* *<st c="25897">solutions too</st>*<st c="25910">.</st>
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="25911">Teams</st>** <st c="25917">are</st> <st c="25922">groups of
    users who work together and share a common set of access rights.</st> <st c="25997">There
    are two types of teams in the Power Platform:</st> **<st c="26049">Owner Teams</st>**
    <st c="26061">and</st> **<st c="26065">Access Teams</st>**<st c="26077">. Owner
    Teams</st> <st c="26090">own records and have security roles assigned to them,
    while</st> <st c="26150">Access Teams are used to grant access to records without
    owning them.</st> <st c="26221">A team can consist of users from one or multiple
    business units within the same organization (under the environment).</st> <st
    c="26339">A user can be assigned to one or</st> <st c="26372">more teams.</st>'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: <st c="26383">The relationship between business units, teams, and users is important
    for controlling data access and ensuring that users have the appropriate level
    of access to records.</st> <st c="26556">By setting up business units and teams
    correctly, administrators can ensure that users can collaborate and share information
    effectively while maintaining</st> <st c="26711">data security.</st>
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: <st c="26725">Microsoft Entra ID and Power Platform environments</st>
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: <st c="26776">Due to the connection</st> <st c="26798">between Microsoft Entra
    ID and Power Platform, it is common practice to use Microsoft Entra ID groups
    to grant access to Power Platform environments and the business units and teams
    within</st> <st c="26988">those environments.</st>
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: <st c="27007">There are different types</st> <st c="27034">of environments:</st>
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="27050">Production</st>**<st c="27061">: This is the</st> <st c="27075">default
    environment type for creating and running apps, flows, and other resources.</st>
    <st c="27160">It has full functionality and can be connected to any data source.</st>
    <st c="27227">Only the production environments are backed by SLAs, and all production
    data is backed up to the paired or secondary Azure region (geo-replication</st>
    <st c="27374">is enabled).</st>'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="27386">Trial</st>**<st c="27392">: This is a</st> <st c="27405">temporary
    environment that can be used for testing or learning purposes.</st> <st c="27478">It
    has the same functionality as a production environment, but it expires after 30
    days and cannot be extended</st> <st c="27589">or converted.</st>'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="27602">Sandbox</st>**<st c="27610">: This is</st> <st c="27621">an
    isolated environment that can be used for development, testing, or training purposes.</st>
    <st c="27710">It has limited functionality and cannot be connected to production
    data sources.</st> <st c="27791">It can be reset, copied, or converted back to
    production</st> <st c="27848">as needed.</st>'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="27858">Developer</st>**<st c="27868">: This is a</st> <st c="27880">special
    environment type that can be used by individual developers to create and test
    apps, flows, and other resources.</st> <st c="28001">It has the same functionality
    as a sandbox environment, but it has a lower capacity and can only be used by
    one user.</st> <st c="28119">Developer environments require no licenses and a
    developer can have up to three different developer environments.</st> <st c="28233">Administrators
    can allow or deny the creation of developer environments depending on the</st>
    <st c="28322">organization’s needs.</st>'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="28343">Environments are tied</st> <st c="28366">to a</st> **<st c="28371">geographic
    location</st>** <st c="28390">that cannot be changed after environment creation.</st>
    <st c="28442">Microsoft Power Platform guarantees that the data is held in the
    selected region (data residency) and the data will never be transferred to</st>
    <st c="28582">other locations.</st>
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
- en: <st c="28598">Environments are also used to</st> <st c="28629">allocate</st>
    **<st c="28638">capacity add-ons</st>** <st c="28654">that we can purchase in
    addition to our Power Platform enrollment.</st> <st c="28722">Capacity add-ons
    are, among other things, Microsoft Copilot Studio messages, Power Pages capacity
    tiers, AI Builder credits, Power Automate hosted RPAs, Power Automate processes
    or Process Mining capacity add-ons.</st> <st c="28936">We can assign some or all
    these capacities to different environments in the Power Platform</st> <st c="29027">admin
    center.</st>
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29040">Finally, environments can be tied to Microsoft Azure subscriptions.</st>
    <st c="29109">The</st> **<st c="29113">Pay-as-You-Go</st>** <st c="29126">(</st>**<st
    c="29128">PAYGO</st>**<st c="29133">) services</st> <st c="29144">of Power Platform,
    such as Power Apps per app meter, Power Pages Authenticated users meter, Power
    Pages Anonymous users meter, Dataverse Database capacity meter, Dataverse File
    capacity meter and Dataverse Log capacity meter, are cross-charged to existing
    Microsoft</st> <st c="29411">Azure subscriptions.</st>
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29431">There is an even more controlled environment that we recommend
    using in production.</st> <st c="29516">Let’s learn about</st> **<st c="29534">Managed
    Environments</st>**<st c="29554">.</st>
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: <st c="29555">Managed Environments</st>
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="29576">Managed Environments</st> <st c="29598">is a suite of features
    that helps admins manage Power Platform at scale.</st> <st c="29671">It provides
    several benefits including risk assessment and threat alerts with Microsoft Defender,
    richer analytics with multi-year history, compliance reports, and recommendations.</st>
    <st c="29852">It also lets you audit user behavior.</st> <st c="29890">It also
    offers more control by tailoring permissions, policies, and automations to our
    organization’s needs, or simply activating the best out-of-the-box practice settings
    with a single click.</st> <st c="30083">The following list goes through</st> <st
    c="30114">these features</st> <st c="30130">in detail:</st>
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="30140">Limit sharing</st>** <st c="30154">allows admins to control
    the sharing of data and resources within their organization.</st> <st c="30241">Admins
    can block sharing with security groups and limit the number of individuals that
    can be</st> <st c="30335">shared with.</st>'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="30347">Weekly usage insights</st>** <st c="30369">provide analytics
    about our top apps, our most impactful makers, and inactive resources that we
    can safely clean up.</st> <st c="30487">These insights are delivered to our mailbox
    once</st> <st c="30536">a week.</st>'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="30543">Data policies</st>**<st c="30557">: Data policies in Power
    Platform allow us to control data flows across data connectors when used within
    Power Apps and Power Automate.</st> <st c="30694">DLP policies enable admins to
    isolate business data from personal use data within Power Platform by classifying
    Power Platform connectors across business and non-business groups.</st> <st c="30873">We
    can additionally choose to block certain connectors</st> <st c="30928">from use.</st>'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="30937">Pipelines in Power Platform</st>** <st c="30965">aim to democratize
    ALM for Power Platform customers.</st> <st c="31019">Pipelines provide an easy
    and approachable method for all makers, admins, and developers to do ALM automation,
    CI, and CD workflows.</st> <st c="31152">We will cover this topic in the</st>
    <st c="31184">next sections.</st>'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="31198">Maker welcome content</st>** <st c="31220">allows admins to
    add a welcome message for new makers in their</st> <st c="31284">organization.</st>
    <st c="31298">This message can include validated resources, company-specific resources,
    and links to upcoming internal events to help new makers get started with Power
    Platform.</st> <st c="31462">The welcome content can be added to a Managed Environment
    and can include plain text</st> <st c="31547">or markdown.</st>'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="31559">The solution checker</st>** <st c="31580">tool allows us to
    check our solutions for best practices and common issues.</st> <st c="31657">It
    analyzes our code and customizations and provides detailed reports with information
    on issues and how to fix them.</st> <st c="31775">This helps improve the performance,
    maintainability, and reliability of our solutions in Managed Environments.</st>
    <st c="31886">Admins can enforce the execution of the solution checker</st> <st
    c="31943">during deployments.</st>'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="31962">The IP firewall</st>** <st c="31978">allows us to restrict
    access to our data and resources based on the IP addresses of incoming requests.</st>
    <st c="32082">This helps to prevent unauthorized access to our data and resources
    from outside</st> <st c="32163">our organization.</st>'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="32180">IP cookie binding</st>** <st c="32198">is a security feature
    that binds a user’s session cookie to their IP address.</st> <st c="32277">This
    helps prevent session hijacking attacks, where an attacker steals a user’s session
    cookie and uses it to</st> <st c="32387">impersonate them.</st>'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="32404">A Customer Managed Key</st>** <st c="32427">(</st>**<st c="32429">CMK</st>**<st
    c="32432">) allows us to use our own encryption keys to encrypt our data at rest.</st>
    <st c="32505">This gives us more control over the security of our data and helps
    us meet</st> <st c="32580">compliance requirements.</st>'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="32604">Lockbox</st>** <st c="32612">provides an additional layer of
    security for our data.</st> <st c="32668">It allows us to control whether Microsoft
    support engineers can access our data to resolve support cases.</st> <st c="32774">We
    can approve or deny each access request and all access is logged and audited</st>
    <st c="32854">for compliance.</st>'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="32869">Extended backup</st>** <st c="32885">allows us to retain backups
    of our data for a longer period.</st> <st c="32947">This can help us recover data
    in the event of accidental deletion</st> <st c="33013">or corruption.</st>'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="33027">DLP for desktop flow</st>** <st c="33048">is a feature in Power
    Platform that allows us to apply DLP policies to desktop flows (Robotic Process
    Automation flows).</st> <st c="33170">This helps prevent the accidental or intentional
    sharing of sensitive data between different systems</st> <st c="33271">and applications.</st>'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="33288">Exporting data to Azure Application Insights</st>** <st c="33333">allows
    us to send telemetry data from our apps and flows to Azure Application Insights.</st>
    <st c="33422">This allows us to monitor the</st> <st c="33452">performance and
    usage of our apps and flows and to diagnose and</st> <st c="33516">troubleshoot
    issues.</st>'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="33536">Catalog in Power Platform</st>** <st c="33562">is a central
    repository for our assets in the organization.</st> <st c="33623">It is a private
    marketplace through which we can share custom connectors, PAC framework controls,
    Power Automate flows, canvas apps, and model-driven apps, as well as various other
    templates, with</st> <st c="33820">other developers.</st>'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="33837">Default environment routing</st>** <st c="33865">allows us
    to control which environment is used as the default for new users in our organization.</st>
    <st c="33963">This helps ensure that new users are automatically added to the
    appropriate environment for their roles</st> <st c="34067">and responsibilities.</st>'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="34088">Creating an app description with Copilot</st>** <st c="34129">is
    an AI-powered feature that helps us create app descriptions.</st> <st c="34194">It
    uses natural language processing to understand our requirements and the changes
    we have made to provide a human-like description (change log) to</st> <st c="34342">our
    application.</st>'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="34358">Managed Environments</st>
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: <st c="34379">We highly recommend using Managed Environments for production
    workloads.</st> <st c="34453">In general, every environment with environment type</st>
    `<st c="34505">Production</st>` <st c="34515">shall be a Managed Environment.</st>
    <st c="34548">Microsoft invests heavily in Managed Environments and more and more
    features are being released.</st> <st c="34645">We can follow the upcoming features
    in the Release Planner;</st> <st c="34705">see</st> [<st c="34709">https://releaseplans.microsoft.com</st>](https://releaseplans.microsoft.com)<st
    c="34743">.</st>
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: <st c="34744">After discussing environments, let’s explore why an</st> **<st
    c="34797">environment strategy</st>** <st c="34817">is essential to maintain and
    govern tens or hundreds of them at an</st> <st c="34885">enterprise level.</st>
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: <st c="34902">Environment strategies</st>
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="34925">This is one of the</st> <st c="34944">most crucial questions that
    we need to decide not just on the first enrollment of our Power Platform tenant
    but also every time we start a new project.</st> <st c="35097">The environment
    strategy defines how environments are created, how many of them we need per workload
    and project, how we apply the security posture of our organization, how we establish
    role-based access management, and how environments are related to other products,
    such as Microsoft Azure subscriptions, Azure DevOps projects or GitHub</st> <st
    c="35436">Enterprise repositories.</st>
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: <st c="35460">The following are the most</st> <st c="35488">common strategies:</st>
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="35506">Ad-hoc</st>**<st c="35513">: As the</st> <st c="35523">name
    suggests, there is no strategy at all.</st> <st c="35567">Environments are created
    randomly; even the default environment is used to host</st> <st c="35647">production
    workloads.</st>'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="35668">Departmental</st>**<st c="35681">: Every</st> <st c="35690">department
    in the organization has its own environment.</st> <st c="35746">HR, finance, sales,
    operations, and all other departments have dedicated production environments,
    hosting and executing several solutions within them.</st> <st c="35897">These
    departmental environments can have also dev and test environments that are sometimes
    shared with more</st> <st c="36005">business units.</st>'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="36020">Project-based</st>**<st c="36034">: Large</st> <st c="36043">workloads
    have dedicated developer, test, and production environments.</st> <st c="36114">Those
    projects get dev-test-prod environments, but the smaller solutions still live
    in</st> <st c="36201">departmental environments.</st>'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="36227">Multi-tenant</st>**<st c="36240">: Developers</st> <st c="36253">work
    in a different tenant to create and develop Power Platform solutions.</st> <st
    c="36329">Advanced automated pipelines and workflows deploy solutions to the test
    and production environments of the</st> <st c="36436">production tenant.</st>'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="36454">The following figure shows the typical environment strategy of
    a department that combines departmental and project-based strategies based on</st>
    <st c="36596">project needs:</st>
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.5 – The environment strategy of a business unit](img/B22208_04_5.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
- en: <st c="36656">Figure 4.5 – The environment strategy of a business unit</st>
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
- en: <st c="36712">There are</st> <st c="36723">shared dev, shared test, and shared
    prod environments for the workloads that are shared inside the business unit.</st>
    <st c="36837">Small workloads and/or the widely used applications of the department
    are hosted here.</st> <st c="36924">Complex solutions get their dedicated project-based
    environments with dev, test, and prod environment types (see</st> *<st c="37037">Proj
    (n) Dev</st>* <st c="37049">–</st> *<st c="37052">Proj (n) Test</st>* <st c="37065">and</st>
    *<st c="37070">Proj (n) Prod</st>*<st c="37083">, where</st> *<st c="37091">n</st>*
    <st c="37092">represents the number of</st> <st c="37118">unique projects).</st>
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: <st c="37135">There are also dedicated environments for training and for power
    users who experiment with new features of Power Platform.</st> <st c="37259">For
    instance, this is the only environment in which the process mining add-on is already
    enabled for testing purposes.</st> <st c="37378">Personal productivity provides
    a sandbox environment for business users for their own experimental</st> <st c="37477">use
    cases.</st>
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
- en: <st c="37487">It is very important to note that this concept provides isolated
    environments per business unit, and that it ensures governance, compliance, and
    security control of those environments within the department.</st> <st c="37695">Other
    business units have no access to these environments</st> <st c="37753">at all.</st>
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: <st c="37760">To scale out this concept in global organizations with multiple
    sites across the globe, we recommend applying the</st> <st c="37875">following
    approach:</st>
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.6 – The environment strategy of a global organization](img/B22208_04_6.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
- en: <st c="38394">Figure 4.6 – The environment strategy of a global organization</st>
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
- en: <st c="38456">Office A/Department A represents</st> <st c="38489">a business
    unit operating in Region/Country A under one common tenant.</st> <st c="38561">Every
    region and office (business unit or department) has the same structure with shared
    and dedicated environments for performance (close to the end users) and compliance
    reasons (data residency requirements).</st> <st c="38772">The development of solutions
    can happen in this tenant, but the concept allows us to use more tenants for development.</st>
    <st c="38891">Automation is unavoidable here.</st> <st c="38923">ALM and DevOps
    tools help us automatically create environments based on project needs and automatically
    deploy the solutions into different geolocations even from</st> <st c="39086">different
    tenants.</st>
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
- en: <st c="39104">Power Automate flows</st>
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
- en: <st c="39125">Power Automate flows</st> <st c="39146">with the Power Platform
    for Admins V2 connector provide ALM and DevOps-like capabilities inside the platform.</st>
    <st c="39257">There are activities that we can use to create environments, assign
    security roles, and set DLP policies.</st> <st c="39363">This connector also supports
    cross-tenant integration, a multi-tenant concept previously described as one of
    the</st> <st c="39476">environment strategies.</st>
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
- en: <st c="39499">Environment strategy does not only focus on environments in Power
    Platform, but it describes the interaction with other surrounding services.</st>
    <st c="39642">It defines whether a new Azure Subscription</st> <st c="39685">or
    only a Resource Group inside an existing Azure Subscription needs to be created
    for any new environment or for any new project.</st> <st c="39817">It also provides
    guidelines for ALM processes, such as</st> *<st c="39872">Proj (n)</st>* <st c="39880">shall
    store its artifacts (managed and unmanaged solutions) in a</st> <st c="39945">new</st>
    **<st c="39950">Azure DevOps Services</st>** <st c="39971">project or in that</st>
    **<st c="39991">GitHub Enterprise</st>** <st c="40008">repository.</st> <st c="40021">Last</st>
    <st c="40025">but not least, the strategy covers security considerations, such
    as creating Microsoft Entra ID security groups for administrators, makers, developers,
    and users during environment creation.</st> <st c="40217">When we fully</st> <st
    c="40230">define all these areas surrounding environment strategy, we partially
    address</st> **<st c="40309">DevSecOps</st>** <st c="40318">principles.</st>
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
- en: <st c="40330">After getting familiar with the concept of environment strategy,
    let’s delve into our first Power Platform pipeline that can partially manage this
    approach within</st> <st c="40494">a department.</st>
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
- en: <st c="40507">Managed pipelines – Our first CI/CD</st>
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="40543">Now we have</st> <st c="40556">everything</st> <st c="40567">in
    place to create our first Power Platform CI/CD pipeline with the help of the built-in
    capabilities of</st> <st c="40672">the platform.</st>
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
- en: <st c="40685">Power Platform pipelines</st>
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="40710">Power Platform pipelines</st> <st c="40735">are CI/CD pipelines
    managed by the platform.</st> <st c="40781">They provide ALM features to build
    and deploy our solutions in a fully automated way without having deep knowledge
    of DevOps tools, such as Azure</st> <st c="40926">DevOps Services or GitHub Enterprise.</st>
    <st c="40965">Of course, we can integrate those tools into our managed pipelines
    to store the managed and unmanaged solutions in Git repositories as well, but
    it is not mandatory.</st> <st c="41131">The idea of the Power Platform pipelines
    is to democratize the build and release processes and to provide an easy-to-configure
    and easy-to-use experience for administrators</st> <st c="41304">and developers.</st>
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
- en: <st c="41319">Platform Pipeline is a Dynamics 365 application that we need to
    install in one of our environments.</st> <st c="41420">For the built-in pipeline
    management, we only need to have Managed Environments; no Dynamics 365 licenses
    are required.</st> <st c="41540">It is highly recommended to create a dedicated
    environment for installing this application.</st> <st c="41632">This environment
    is called the</st> **<st c="41663">host environment</st>** <st c="41679">because</st>
    <st c="41688">it hosts the pipeline definitions, the pipeline runs with history,
    security settings, and deployment artifacts with history as the following</st>
    <st c="41829">figure shows:</st>
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.7 – Environments in Power Platform pipelines](img/B22208_04_7.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
- en: <st c="42083">Figure 4.7 – Environments in Power Platform pipelines</st>
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
- en: <st c="42136">Developer environments</st> <st c="42159">are the environments
    in which developers or makers create and modify solutions.</st> <st c="42240">Test
    and prod Environments represent</st> <st c="42276">the</st> **<st c="42281">target
    environments</st>** <st c="42300">that get the managed version of the solution
    deployed by our defined pipelines.</st> <st c="42381">Test and prod environments
    must be Managed Environments, whereas developer environments and the host environment
    can be normal ones.</st> <st c="42514">Every pipeline starts with a developer
    environment and continues with one or more chained</st> <st c="42604">target environments.</st>
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: <st c="42624">Azure DevOps Services pipelines</st>
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
- en: <st c="42656">Power Platform Pipeline Dynamics 365 app</st> <st c="42698">uses
    under-the-hood Azure DevOps Services Pipelines and Azure DevOps Services Deployment
    Groups in a fully managed way.</st> <st c="42818">This is completely hidden from
    our eyes, and it is offered as a SaaS feature on top of Azure</st> <st c="42911">DevOps
    Services.</st>
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
- en: <st c="42927">As one of the premium features of Managed Environments, a Dynamics
    365 app called Power Platform Pipelines brings the following Dataverse tables
    to the</st> <st c="43080">host environment:</st>
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.8 – Power Platform Pipelines’ Dataverse tables in a host environment](img/B22208_04_8.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
- en: <st c="43540">Figure 4.8 – Power Platform Pipelines’ Dataverse tables in a host
    environment</st>
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="43617">Deployment Artifact</st>**<st c="43637">,</st> **<st c="43639">Deployment
    Environment</st>**<st c="43661">,</st> **<st c="43663">Deployment Pipeline</st>**<st
    c="43682">,</st> **<st c="43684">Deployment Stage</st>**<st c="43700">,</st> **<st
    c="43702">Deployment Stage Run</st>**<st c="43722">, and</st> **<st c="43728">Deployment
    Stage Run Suboperations</st>** <st c="43762">are standard Dataverse tables that
    we can also use to create approval flows based</st> <st c="43845">on different
    trigger conditions.</st> <st c="43878">The</st> **<st c="43882">Deployment Artifact</st>**
    <st c="43901">table retrospectively stores the managed and unmanaged solutions
    that have been created by pipelines.</st> <st c="44004">The maximum size of the
    managed and unmanaged solutions is</st> <st c="44063">128 MB.</st>'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
- en: <st c="44070">Aside from the tables, the Power Platform Pipeline introduces
    two additional security roles in the</st> <st c="44170">host environment:</st>
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: '**<st c="44187">Deployment Pipeline Administrator</st>**<st c="44221">: Owners
    of this role can create deployment</st> <st c="44265">configurations in the</st>
    **<st c="44288">Deployment Pipeline</st>** <st c="44307">configuration.</st> <st
    c="44323">It is a model-driven application installed by the Power Platform Pipelines
    D365 app that helps administrators configure the environments, stages, and pipelines
    stored in the previously mentioned</st> <st c="44518">Dataverse tables.</st>'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="44535">Deployment Pipeline User</st>**<st c="44560">: Owners</st>
    <st c="44570">of this role can use the pipelines created in the Deployment Pipeline
    Configuration app in the corresponding environments.</st> <st c="44693">If this
    user has access to the environment, and the Pipeline record from the</st> **<st
    c="44770">Deployment Pipeline</st>** <st c="44789">table is shared with them,
    then they are eligible to use the pipeline in any solutions in</st> <st c="44880">that
    environment.</st>'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="44897">The user (maker) experience of the</st> **<st c="44933">Pipelines</st>**
    <st c="44942">tab in the solution view looks</st> <st c="44974">as follows:</st>
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.9 – The Pipelines user experience in Solutions](img/B22208_04_9.jpg)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
- en: <st c="45885">Figure 4.9 – The Pipelines user experience in Solutions</st>
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
- en: '<st c="45940">We are</st> <st c="45948">within a solution (editing an unmanaged
    solution) and when pipelines are configured, an additional</st> **<st c="46047">Pipeline</st>**
    <st c="46055">tab on the left will become visible.</st> <st c="46093">In our example,
    there is a pipeline in the drop-down box that targets two environments: first
    the test and then the prod.</st> <st c="46215">Since this user has access to more
    pipelines through the shared Dataverse Deployment Pipeline table’s row, the dropdown
    provides</st> <st c="46344">more choices.</st>'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
- en: <st c="46357">To be able to execute a pipeline configured in the Deployment
    Pipeline Configuration tool from the source environment, the following conditions
    must</st> <st c="46507">be met:</st>
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
- en: <st c="46514">We need to share the pipeline record (</st>**<st c="46553">Read
    privileges</st>**<st c="46569">) with makers.</st> <st c="46585">We should use
    the appropriate Microsoft Entra groups to give this right</st> <st c="46657">to
    them.</st>
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="46665">We need to have privileges to export solutions from the source
    environments and we need to have the appropriate rights to import solutions to
    target environments.</st> <st c="46829">The</st> <st c="46832">built-in</st> **<st
    c="46842">System customizer</st>** <st c="46859">and</st> **<st c="46864">Environment
    maker</st>** <st c="46881">security</st> <st c="46891">roles have</st> <st c="46902">these
    rights.</st>
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="46915">The pipeline will then deploy the managed solution on behalf of
    the user who triggered the action by default.</st> <st c="47026">If we would like
    to use service accounts instead of users, service principals are supported.</st>
    <st c="47119">In this case, the import of the solution to the target environment
    happens on behalf of the assigned service principal with the main security benefit
    that only the service principal has access to the</st> <st c="47319">production
    environment.</st>
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
- en: <st c="47342">The real power of the</st> <st c="47365">deployment pipelines
    is that we can introduce those additional</st> *<st c="47428">quality gates</st>*
    <st c="47441">in our CD pipelines that we have discussed in</st> [*<st c="47488">Chapter
    1</st>*](B22208_01.xhtml#_idTextAnchor014) <st c="47497">by building our own deployment
    approval logic (release approvals) before new versions of solutions hit target
    environments.</st> <st c="47622">These quality gates can vary from very simple
    release manager approvals to advanced automated test executions.</st> <st c="47733">There
    is the</st> **<st c="47746">Pre-Deployment Step Required</st>** <st c="47774">option
    in each</st> **<st c="47790">deployment stage</st>** <st c="47806">that we can
    use to trigger our custom logic-based approval process via Power Automate Cloud
    Flow.</st> <st c="47905">The deployment requests will be pending until they are
    approved.</st> <st c="47970">The following figure shows the</st> **<st c="48001">Pre-Deployment
    Step Required</st>** <st c="48029">and</st> **<st c="48034">Pre-Export Step Required</st>**
    <st c="48058">options in the Deployment Pipeline</st> <st c="48094">Configuration
    tool:</st>
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.10 – Creating a new deployment in Deployment Pipeline Configuration
    tool](img/B22208_04_10.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
- en: <st c="48580">Figure 4.10 – Creating a new deployment in Deployment Pipeline
    Configuration tool</st>
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
- en: <st c="48661">With the help of</st> **<st c="48679">Pre-Export Step Required</st>**<st
    c="48703">, we can introduce custom validation logic that is executed before the
    solution is first exported from the development environment as a managed and</st>
    <st c="48851">unmanaged solution.</st>
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
- en: <st c="48870">The</st> <st c="48875">cloud flows involved in the quality gates
    shall be created in the Host Environment and their trigger conditions are Dataverse
    Action.</st> <st c="49009">We can create multiple cloud flows reacting to the
    same</st> <st c="49065">pipeline event.</st>
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
- en: <st c="49080">Currently, there are some limitations to using</st> <st c="49128">managed
    pipelines:</st>
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
- en: <st c="49146">Having multiple developers working on the same solution in dedicated
    developer environments requires a more careful process to avoid overwriting each
    other’s changes.</st> <st c="49314">Currently, pipelines only support a unidirectional
    flow from developer environments to production environments.</st> <st c="49426">This
    means that pulling the latest version of the solution and deploying it into a
    different developer environment requires careful and</st> <st c="49562">manual
    intervention.</st>
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="49582">Rollback is partially supported.</st> <st c="49616">We can already</st>
    **<st c="49631">redeploy</st>** <st c="49639">an earlier version of the solution
    to the target environment in Power Platform pipelines, but we cannot roll back
    the entire multi-stage pipeline as</st> <st c="49789">one step.</st>
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="49798">Step-by-step walkthrough – creating our first CI/CD pipeline</st>
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: <st c="49859">Let’s create our</st> <st c="49876">first end-to-end CI/CD pipeline</st>
    <st c="49908">using Power Platform pipelines.</st> <st c="49941">What we are going
    to do is take one of the environment templates and one of the solutions available
    in the GitHub repository.</st> <st c="50067">We will use these to set up a pipeline
    that will build a managed version from the unmanaged version of the solution and
    deploy it from a developer environment to a</st> <st c="50231">production environment:</st>
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
- en: <st c="50254">Install the PAC CLI (assuming .NET 6.0 is installed in</st> <st
    c="50310">our environment):</st>
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: <st c="50385">Install the</st> <st c="50398">PowerShell module:</st>
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: <st c="50483">Create an environment for hosting the managed pipelines.</st>
    <st c="50541">This environment will represent the host environment of the pipelines.</st>
    <st c="50612">We should choose the same region that our development, test, and
    production environments are</st> <st c="50705">created in:</st>
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: <st c="50953">Install the</st> <st c="50965">Power Platform Pipelines Dynamics
    365 app.</st> <st c="51009">The PAC CLI provides an easy way to install Dynamics
    365 apps</st> <st c="51070">to environments (no PowerShell cmdlet exists as of
    the time of writing</st> <st c="51142">this book):</st>
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: <st c="51360">Create a</st> <st c="51370">developer environment:</st>
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: <st c="51495">Create a target environment (managed</st> <st c="51533">and production):</st>
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![Figure 4.11 – Creating a new Deployment Environment](img/B22208_04_11.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
- en: <st c="52690">Figure 4.11 – Creating a new Deployment Environment</st>
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
- en: <st c="52741">Create</st> <st c="52749">another</st> **<st c="52757">Deployment
    Environment</st>** <st c="52779">with</st> <st c="52784">the configuration data
    of your recently created production</st> <st c="52843">environment and with the</st>
    **<st c="52869">Environment Type</st>** *<st c="52885">Target Environment</st>*<st
    c="52904">, see the previous figure</st> <st c="52930">for details.</st>
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="52942">Tip</st>
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
- en: <st c="52946">Use the</st> `<st c="52955">pac admin list</st>` <st c="52969">command
    to get the environment IDs of your recently</st> <st c="53022">created environments.</st>
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
- en: <st c="53043">Go to</st> `<st c="53138">PipelineToProd</st>` <st c="53152">name
    and save the form to be able to configure it completely.</st> <st c="53215">If
    we would like to get AI deployment notes, then we can enable this here</st> <st
    c="53289">as well:</st>
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.12 – The details of the new deployment pipeline](img/B22208_04_12.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
- en: <st c="53584">Figure 4.12 – The details of the new deployment pipeline</st>
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
- en: <st c="53640">Add</st> <st c="53645">the</st> <st c="53649">developer environment
    (</st>**<st c="53672">DevelopmentEnvironment</st>**<st c="53695">) to the</st>
    **<st c="53705">Linked Development</st>** **<st c="53724">Environments</st>**
    <st c="53736">section.</st>
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="53745">Create a new deployment stage by clicking on the</st> **<st c="53795">New
    Deployment</st>** **<st c="53810">Stage</st>** <st c="53815">button.</st>
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="53823">Set the</st> **<st c="53832">Name</st>** <st c="53836">and</st>
    **<st c="53841">Target Deployment Environment ID</st>** <st c="53873">fields on</st>
    <st c="53884">the form.</st>
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="53893">Save</st> <st c="53899">the record.</st>
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="53910">Set</st> <st c="53915">up security:</st>
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="53927">Share this new deployment pipeline Dataverse record with the users
    or group of users who will use this pipeline in the developer environment, that
    is, in</st> **<st c="54082">DevelopmentEnvironment</st>** <st c="54104">in</st>
    <st c="54108">our case.</st>
  id: totrans-210
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="54117">Add the</st> **<st c="54126">System customizer</st>** <st c="54143">or</st>
    **<st c="54147">Environment maker</st>** <st c="54164">built-in security roles
    to these members in both the</st> **<st c="54218">Production</st>** <st c="54228">and</st>
    **<st c="54233">DevelopmentEnvironment</st>** <st c="54255">environments.</st>
  id: totrans-211
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="54269">Add the</st> **<st c="54278">Deployment Pipeline User</st>** <st
    c="54302">security role to these members in the</st> **<st c="54341">Pipelinehost</st>**
    <st c="54353">environment.</st>
  id: totrans-212
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="54366">Go to</st> <st c="54373">developer environment and import</st>
    <st c="54405">the</st> **<st c="54410">unmanaged solution</st>** <st c="54428">IT
    Base Pack from Power Platform Enterprise templates.</st> <st c="54484">You can
    find it</st> <st c="54500">at</st> [<st c="54503">https://github.com/microsoft/Templates-for-Power-Platform/blob/main/Solution%20Packages%20For%20Manual%20Install/IT/IT%20Base%20Pack/mpa_ITBase_managed.zip</st>](https://github.com/microsoft/Templates-for-Power-Platform/blob/main/Solution%20Packages%20For%20Manual%20Install/IT/IT%20Base%20Pack/mpa_ITBase_managed.zip)<st
    c="54658">.</st>
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="54659">Open the</st> <st c="54669">solution and look for the pipeline
    icon (it looks like a rocket) on the left side.</st> <st c="54752">Open the pipelines
    and select the</st> **<st c="54786">PipelineToProd</st>** <st c="54800">pipeline:</st>
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 4.13 – Selecting PipelineToProd](img/B22208_04_13.jpg)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
- en: <st c="55562">Figure 4.13 – Selecting PipelineToProd</st>
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
- en: <st c="55600">Click on</st> `<st c="55633">pac pipeline</st>` `<st c="55646">deploy</st>`
    <st c="55652">command.</st>
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="55661">Check the deployment result in the</st> <st c="55697">production
    environment.</st>
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: <st c="55720">Congratulations, we have created our first CI/CD Power</st> <st
    c="55776">Platform pipeline.</st>
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
- en: <st c="55794">To make this</st> <st c="55808">pipeline even more professional
    and secure, we</st> <st c="55855">can create a service principal and an enterprise
    application</st> <st c="55916">in</st> **<st c="55919">Microsoft Entra ID</st>**
    <st c="55937">(within</st> **<st c="55946">Microsoft Azure Portal</st>**<st c="55968">)
    and assign it to the deployment stage as the following</st> <st c="56026">figure
    shows:</st>
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.14 – Using the service principal in Pipeline](img/B22208_04_14.jpg)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
- en: <st c="56581">Figure 4.14 – Using the service principal in Pipeline</st>
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
- en: <st c="56634">This is the</st> **<st c="56647">delegated deployment</st>** <st
    c="56667">process</st> <st c="56675">by which we assign</st> <st c="56695">our</st>
    **<st c="56699">Service Principal Name</st>** <st c="56721">(</st>**<st c="56723">SPN</st>**<st
    c="56726">) client ID to let the pipeline engine use it in the solution import
    phase.</st> <st c="56803">After creating this assignment, there is one last thing
    that we need to do.</st> <st c="56879">This is to create a delegated approval
    flow connecting to the Power Platform pipeline Dataverse tables by using the service
    principal and its client secret to approve the deployment.</st> <st c="57062">The
    next figure will show the simplest approval by reacting to the</st> **<st c="57129">OnApprovalStarted</st>**
    <st c="57146">Dataverse action, waiting five seconds, and setting the approval
    status to 20 (20 means approved; 30 would be the</st> <st c="57261">rejected state):</st>
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 4.15 – Delegated deployment with he service principal](img/B22208_04_15.jpg)'
  id: totrans-224
  prefs: []
  type: TYPE_IMG
- en: <st c="57474">Figure 4.15 – Delegated deployment with he service principal</st>
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
- en: <st c="57534">The underlying</st> <st c="57549">Power Platform pipeline engine
    uses</st> <st c="57585">this flow to run on behalf of the defined service principal
    and not on behalf of the user.</st> <st c="57677">With these additional steps,
    we have significantly improved the resiliency and security of</st> <st c="57768">our
    pipeline.</st>
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
- en: <st c="57781">Summary</st>
  id: totrans-227
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="57789">In this chapter, we learned about Power Platform solutions, the
    modern executables that can move between environments, their upgrade options,
    and different approaches for how solution layering and versioning can be realized.</st>
    <st c="58015">After that, we discussed Dataverse, the enterprise-grade data platform
    with advanced security and governance capabilities.</st> <st c="58138">We also
    got familiar with the CDM, a database schema to model our data that’s accepted
    industry-wide.</st> <st c="58240">We also spent time on environments, the execution
    hosts of our solutions, learned about the advanced features of Managed Environments,
    and elaborated on the environment strategy at large-scale global enterprises.</st>
    <st c="58453">At the end of the chapter, we learned how Power Platform pipelines
    – as one of the greatest features of Managed Environments – work under the hood.</st>
    <st c="58601">We also successfully created our first</st> <st c="58640">CI/CD
    pipeline.</st>
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
- en: <st c="58655">In the next chapter, we will discover the pro developer tools
    available for creating those CI/CD pipelines and other ALM automations that we
    have partially seen regarding Power</st> <st c="58833">Platform pipelines.</st>
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
- en: <st c="58852">Further reading</st>
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: <st c="58868">Solution</st> <st c="58878">layers:</st> [<st c="58886">https://learn.microsoft.com/en-us/power-apps/maker/data-platform/solution-layers</st>](https://learn.microsoft.com/en-us/power-apps/maker/data-platform/solution-layers)
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**<st c="58966">Common Data</st>** **<st c="58979">Model</st>** <st c="58984">(</st>**<st
    c="58986">CDM</st>**<st c="58989">):</st>'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[<st c="58992">https://learn.microsoft.com/en-us/common-data-model/use</st>](https://learn.microsoft.com/en-us/common-data-model/use)'
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[<st c="59048">https://github.com/microsoft/CDM</st>](https://github.com/microsoft/CDM)'
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59081">Solution</st> <st c="59091">patching:</st> [<st c="59101">https://learn.microsoft.com/en-us/power-platform/alm/create-patches-simplify-solution-updates</st>](https://learn.microsoft.com/en-us/power-platform/alm/create-patches-simplify-solution-updates)
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59194">Managed</st> <st c="59203">Environments:</st> [<st c="59217">https://learn.microsoft.com/en-us/power-platform/admin/managed-environment-overview</st>](https://learn.microsoft.com/en-us/power-platform/admin/managed-environment-overview)
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59300">Environment</st> <st c="59313">strategy:</st> [<st c="59323">https://learn.microsoft.com/en-us/power-platform/guidance/adoption/environment-strategy</st>](https://learn.microsoft.com/en-us/power-platform/guidance/adoption/environment-strategy)
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59410">Enterprise</st> <st c="59422">templates:</st> [<st c="59432">https://github.com/microsoft/Templates-for-Power-Platform</st>](https://github.com/microsoft/Templates-for-Power-Platform)
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59490">Power Platform</st> <st c="59506">pipelines:</st> [<st c="59517">https://learn.microsoft.com/en-us/power-platform/alm/pipelines</st>](https://learn.microsoft.com/en-us/power-platform/alm/pipelines)
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59579">Microsoft Entra ID service</st> <st c="59607">principals:</st>
    [<st c="59619">https://learn.microsoft.com/en-us/entra/identity-platform/app-objects-and-service-principals</st>](https://learn.microsoft.com/en-us/entra/identity-platform/app-objects-and-service-principals)
  id: totrans-240
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: <st c="59711">Service principals in</st> <st c="59734">pipelines:</st> [<st
    c="59745">https://learn.microsoft.com/en-us/power-platform/alm/delegated-deployments-setup</st>](https://learn.microsoft.com/en-us/power-platform/alm/delegated-deployments-setup)
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
