- en: '5'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '5'
- en: Understanding Bitbucket and Bitbucket Pipelines
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 Bitbucket 和 Bitbucket Pipelines
- en: Bitbucket is Atlassian’s **Source Code Management** (**SCM**) solution that
    enables developers to version control their source code. Bitbucket is tightly
    integrated with Jira and allows developers to collaboratively work on code while
    also sharing their status with stakeholders. Bitbucket doesn’t just store and
    track changes, it offers a robust deployment system known as **Bitbucket Pipelines**.
    Using Pipelines, developers can build and deploy their code to various environments
    with ease. Moreover, **runners** are machines that carry out pipeline executions
    for build and deployment. Bitbucket Pipelines can use its runners to run a pipeline
    execution, at a cost of the number of minutes needed for the execution against
    a monthly budget, or developers can define self-hosted runners that use their
    own infrastructure.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Bitbucket 是 Atlassian 的**源代码管理**（**SCM**）解决方案，帮助开发人员对源代码进行版本控制。Bitbucket 与 Jira
    紧密集成，允许开发人员协作编写代码并与利益相关者共享状态。Bitbucket 不仅仅存储和跟踪变更，它还提供了一个强大的部署系统，称为**Bitbucket
    Pipelines**。通过 Pipelines，开发人员可以轻松地构建并将代码部署到不同的环境。此外，**runners** 是执行构建和部署的机器。Bitbucket
    Pipelines 可以使用其 runners 来执行管道任务，根据执行所需的时间与月度预算进行计费，或者开发人员可以定义自托管的 runners，使用他们自己的基础设施来执行任务。
- en: 'This chapter has the following recipes – the first recipe will walk you through
    the basics and subsequent recipes will expand on this foundation:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章节包含以下教程 – 第一个教程将带您了解基础知识，后续教程将在此基础上扩展：
- en: Creating a workspace, project, and repository in Bitbucket
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中创建工作区、项目和代码库
- en: Creating branches in Bitbucket
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中创建分支
- en: Understanding pull requests and merging best practices
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解拉取请求和合并最佳实践
- en: Enabling Bitbucket Pipelines
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用 Bitbucket Pipelines
- en: Configuring runners in Bitbucket
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 Bitbucket 中的 runners
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'You will need the following software:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 您需要以下软件：
- en: Bitbucket Cloud with a repository
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有代码库的 Bitbucket Cloud
- en: Bitbucket runners
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Bitbucket runners
- en: Creating a workspace, project, and repository in Bitbucket
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中创建工作区、项目和代码库
- en: Bitbucket is a very different tool when you compare it against Jira or Confluence.
    Unlike Jira and Confluence, which require very little configuration to get started,
    Bitbucket requires some upfront technical configuration before it can be used
    by a team. This recipe focuses on building your understanding of how Bitbucket
    is structured and explains the various initial configuration steps required to
    enable Bitbucket for your team.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Jira 或 Confluence 相比，Bitbucket 是一个非常不同的工具。与几乎不需要配置即可开始使用的 Jira 和 Confluence
    不同，Bitbucket 在团队使用之前需要一些前期的技术配置。本教程重点帮助您了解 Bitbucket 的结构，并解释启用 Bitbucket 所需的各种初始配置步骤。
- en: How to do it…
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'When Bitbucket is configured for the first time, you want to first create a
    **workspace**. Workspaces contain repositories, which will be discussed later
    in this recipe. When you log in to Bitbucket, you’ll see your available workspaces,
    as shown in the following screenshot:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 当首次配置 Bitbucket 时，您需要首先创建一个**工作区**。工作区包含代码库，后续将在本教程中讨论。当您登录 Bitbucket 后，您会看到您可用的工作区，如下图所示：
- en: '![Figure 5.1 – Overview of available workspaces within Bitbucket](img/B21937_5_01.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.1 – Bitbucket 中可用工作区概览](img/B21937_5_01.jpg)'
- en: Figure 5.1 – Overview of available workspaces within Bitbucket
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.1 – Bitbucket 中可用工作区概览
- en: Important note
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: An initial workspace may have already been created when you first signed up
    for Bitbucket. In that case, you can skip to the next section or, if you want
    to create a brand-new workspace, follow along. Additionally, make sure you are
    logged into Bitbucket and that you are an administrator of Bitbucket.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在您首次注册 Bitbucket 时，可能已经创建了一个初始工作区。在这种情况下，您可以跳到下一部分，或者如果您想创建一个全新的工作区，请继续操作。此外，确保您已登录
    Bitbucket，并且是 Bitbucket 的管理员。
- en: 'To create a workspace, take the following steps:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建一个工作区，请执行以下步骤：
- en: Click on your profile icon in the top-right corner of Bitbucket.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 Bitbucket 右上角的个人资料图标。
- en: '![Figure 5.2 – Select profile icon](img/B21937_5_02.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.2 – 选择个人资料图标](img/B21937_5_02.jpg)'
- en: Figure 5.2 – Select profile icon
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.2 – 选择个人资料图标
- en: Click on **All workspaces** under **RECENT WORKSPACES**.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**所有工作区**，位于**最近的工作区**下。
- en: '![Figure 5.3 – Select All workspaces](img/B21937_5_03.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.3 – 选择所有工作区](img/B21937_5_03.jpg)'
- en: Figure 5.3 – Select All workspaces
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.3 – 选择所有工作区
- en: Click on **Create workspace**, which is located toward the top-right corner
    of Bitbucket’s user interface.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建工作区**，该按钮位于 Bitbucket 用户界面的右上角。
- en: '![Figure 5.4 – Create workspace button](img/B21937_5_04.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.4 – 创建工作区按钮](img/B21937_5_04.jpg)'
- en: Figure 5.4 – Create workspace button
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.4 – 创建工作区按钮
- en: Enter a workspace name.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入工作区名称。
- en: '![Figure 5.5 – Provide a name for the new workspace](img/B21937_5_05.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.5 – 提供新工作区的名称](img/B21937_5_05.jpg)'
- en: Figure 5.5 – Provide a name for the new workspace
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.5 – 提供新工作区的名称
- en: Important note
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: This will auto-populate **Workspace ID**. You can optionally change it or leave
    the default that Atlassian provides. The workspace ID will serve as the URL for
    the new workspace you are creating.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这将自动填充 **工作区 ID**。您可以选择更改它或保留 Atlassian 提供的默认值。工作区 ID 将作为您创建的新工作区的 URL。
- en: Update **Workspace ID**.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新 **工作区 ID**。
- en: '![Figure 5.6 – Workspace ID](img/B21937_5_06.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.6 – 工作区 ID](img/B21937_5_06.jpg)'
- en: Figure 5.6 – Workspace ID
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.6 – 工作区 ID
- en: Determine whether you want the workspace to remain private or whether you want
    it to be public by checking the checkbox.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定您是否希望工作区保持私有，或者希望将其设置为公开，可以通过选中复选框来选择。
- en: '![Figure 5.7 – Determine whether the workspace should be private or public](img/B21937_5_07.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.7 – 确定工作区是否应该是私有的还是公开的](img/B21937_5_07.jpg)'
- en: Figure 5.7 – Determine whether the workspace should be private or public
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.7 – 确定工作区是否应该是私有的还是公开的
- en: 'After you validate the reCAPTCHA, click on the **Create** button:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在验证 reCAPTCHA 后，点击 **创建** 按钮：
- en: '![Figure 5.8 – Create your first workspace](img/B21937_5_08.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.8 – 创建您的第一个工作区](img/B21937_5_08.jpg)'
- en: Figure 5.8 – Create your first workspace
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.8 – 创建您的第一个工作区
- en: Your workspace is now created, and you will now be able to create your first
    repository.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的工作区已创建，您将能够创建您的第一个仓库。
- en: There’s more…
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容…
- en: 'Once you are in your new workspace, it is time to create your first repository.
    The repository is where the source code will be stored. You can have many repositories
    within a single workspace. Let''s use the following steps to create a repository:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦进入新的工作区，就可以开始创建您的第一个仓库了。仓库是存放源代码的地方。在一个工作区内，您可以拥有多个仓库。接下来，按照以下步骤来创建仓库：
- en: Click on **Create repository**, located in either the welcome message or under
    **Recent repositories**.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建仓库**，该按钮位于欢迎消息中或 **最近的仓库** 下方。
- en: '![Figure 5.9 – Create your first repository](img/B21937_5_09.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.9 – 创建您的第一个仓库](img/B21937_5_09.jpg)'
- en: Figure 5.9 – Create your first repository
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.9 – 创建您的第一个仓库
- en: 'Bitbucket will redirect you to a new screen where you will first provide a
    project name. Repositories are grouped into projects, so it is important to provide
    a project name first:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Bitbucket 会将您重定向到一个新页面，您将在此页面首先提供项目名称。仓库被分组到项目中，因此首先提供项目名称是很重要的：
- en: '![Figure 5.10 – Create your first repository and provide a project name](img/B21937_5_10.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.10 – 创建您的第一个仓库并提供项目名称](img/B21937_5_10.jpg)'
- en: Figure 5.10 – Create your first repository and provide a project name
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.10 – 创建您的第一个仓库并提供项目名称
- en: 'Next, provide the name of your repository. This should be a name that is significant
    to the team that will be using the repository:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，提供您的仓库名称。这应该是对使用该仓库的团队有意义的名称：
- en: '![Figure 5.11 – Provide a repository name](img/B21937_5_11.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.11 – 提供仓库名称](img/B21937_5_11.jpg)'
- en: Figure 5.11 – Provide a repository name
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.11 – 提供仓库名称
- en: Determine whether the repository should be private or public.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定仓库是否应该是私有的还是公开的。
- en: '![Figure 5.12 – Determine the access level of the repository](img/B21937_5_12.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.12 – 确定仓库的访问级别](img/B21937_5_12.jpg)'
- en: Figure 5.12 – Determine the access level of the repository
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.12 – 确定仓库的访问级别
- en: Determine whether a `README` file should be included in the repository, to include
    it with a template, or to include it with a tutorial, which is recommended for
    beginners.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定仓库中是否应包含`README`文件，是否包含模板，或者是否包含适合初学者的教程，建议选择教程。
- en: '![Figure 5.13 – Determine whether a README file is included in the repository](img/B21937_5_13.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.13 – 确定仓库中是否包含 README 文件](img/B21937_5_13.jpg)'
- en: Figure 5.13 – Determine whether a README file is included in the repository
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.13 – 确定仓库中是否包含 README 文件
- en: Provide the name of your default branch. This is typically `main` or `master`.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供默认分支的名称。通常是`main`或`master`。
- en: '![Figure 5.14 – Name of the default branch](img/B21937_5_14.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.14 – 默认分支的名称](img/B21937_5_14.jpg)'
- en: Figure 5.14 – Name of the default branch
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.14 – 默认分支名称
- en: Finally, determine whether a `.gitignore` file should be included or not. It
    is recommended that a `.gitignore` file is included if you have files or directories
    that need to not be tracked by Git. These files or directories will be ignored
    and will not be committed to the repository.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，确定是否应该包含 `.gitignore` 文件。如果您的项目中有一些文件或目录不需要被 Git 跟踪，建议包含一个 `.gitignore` 文件。这些文件或目录将被忽略，不会被提交到仓库中。
- en: '![Figure 5.15 – Determine whether a .gitignore file is included or not](img/B21937_5_15.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.15 – 确定是否包含 .gitignore 文件](img/B21937_5_15.jpg)'
- en: Figure 5.15 – Determine whether a .gitignore file is included or not
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.15 – 确定是否包含 .gitignore 文件
- en: Click on **Create repository**, located in the bottom-right corner of the screen.
    Don’t worry about configuring any of the advanced settings.
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击位于屏幕右下角的 **创建仓库** 按钮。无需担心配置任何高级设置。
- en: '![Figure 5.16 – Create repository button](img/B21937_5_16.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.16 – 创建仓库按钮](img/B21937_5_16.jpg)'
- en: Figure 5.16 – Create repository button
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.16 – 创建仓库按钮
- en: Your first workspace, project, and repository have now been created. In the
    following recipe, you will learn how to start creating branches in Bitbucket.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 您的第一个工作区、项目和仓库已经创建完成。在接下来的教程中，您将学习如何在 Bitbucket 中开始创建分支。
- en: Creating branches in Bitbucket
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中创建分支
- en: Working off the default branch in Bitbucket is not the best practice as it impacts
    the main code base, which should be as stable as possible. Instead, you should
    consider utilizing branches in Bitbucket, and this recipe will cover the basics
    of branching. There are different techniques when it comes to branching strategies.
    This recipe will simply cover the mechanics of creating branches.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中直接使用默认分支并不是最佳实践，因为它会影响主代码库，而主代码库应该尽可能保持稳定。相反，您应该考虑在 Bitbucket 中使用分支，本教程将涵盖分支的基础知识。在分支策略方面有不同的技术，本教程将简单介绍创建分支的基本操作。
- en: Getting ready
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before jumping into the mechanics of how to create branches in Bitbucket, let’s
    discuss the different types of branches available. There are different branching
    strategies in the world of Git. For this example, **Gitflow** will be used to
    illustrate how branching typically works. Gitflow is well documented by Atlassian,
    so Gitflow will be used to explain branching strategies in this recipe:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在深入探讨如何在 Bitbucket 中创建分支之前，让我们先讨论一下不同类型的分支。在 Git 的世界里有不同的分支策略。在这个示例中，将使用 **Gitflow**
    来说明分支是如何工作的。Gitflow 是由 Atlassian 详细记录的，因此在本教程中将使用 Gitflow 来解释分支策略：
- en: '**Main**: The main branch should be the most stable branch in your repository.
    This means that the code in the main branch should be the most complete and the
    best working version of your code. Typically, your main branch is used to create
    releases and deploy to a production system, so this branch is the most stable.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主分支**：主分支应该是您仓库中最稳定的分支。这意味着主分支中的代码应该是最完整、最稳定的版本。通常，主分支用于创建发布版本并部署到生产系统，因此这是最稳定的分支。'
- en: '**Develop**: This is a very common branch to have when following the Gitflow
    methodology. The develop branch is the branch your team will integrate their changes
    into or where they will create feature branches from. The develop branch is initially
    branched from the main branch.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开发**：这是遵循 Gitflow 方法论时非常常见的一个分支。开发分支是您的团队将其更改集成到的分支，或者是他们从中创建特性分支的地方。开发分支最初是从主分支分出的。'
- en: '**Feature**: Whenever a story is assigned to a developer in Jira, that developer
    should create a feature branch, which should be based on the develop branch. Feature
    branches are short-lived and as soon as a developer finishes their code, a pull
    request should be initiated to merge changes back into the develop branch.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**特性**：每当一个任务被分配给 Jira 中的开发人员时，该开发人员应该创建一个特性分支，该分支应基于 develop 分支。特性分支是短暂的，一旦开发人员完成代码，应该启动一个拉取请求，将更改合并回
    develop 分支。'
- en: '**Release**: Whenever the Develop branch is ready to be shipped to production,
    a release branch is created from the latest develop branch. This release branch
    should be tested and vetted before it is merged into the main and develop branch.'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发布**：每当开发分支准备好发布到生产环境时，会从最新的开发分支创建一个发布分支。该发布分支在合并回主分支和开发分支之前，应该经过测试和验证。'
- en: '**Hotfix**: Whenever there are problems with a production system, hotfix branches
    should be created to address problems with code found in the main branch.'
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**热修复**：当生产系统出现问题时，应创建热修复分支来解决主分支中发现的代码问题。'
- en: Now that you know what all the different branches are in the Gitflow model,
    we are going to look at how to create branches within Bitbucket.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了 Gitflow 模型中的各种分支，我们将介绍如何在 Bitbucket 中创建分支。
- en: How to do it…
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Branching in Bitbucket is straightforward but is often not the most popular
    option. If you are new to using a source control management system, then using
    a user interface such as that of Bitbucket might be a good option for you:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中，分支操作非常直接，但它通常不是最受欢迎的选项。如果你是源代码管理系统的新用户，那么使用像 Bitbucket 这样的用户界面可能是一个不错的选择：
- en: In Bitbucket, enter the repository in which you want to create a branch in.
    Click on **Repositories** in the navigation bar.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中，进入你想要创建分支的仓库。点击导航栏中的**仓库**。
- en: '![Figure 5.17 – Select Repositories from the menu bar](img/B21937_5_17.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.17 – 从菜单栏中选择仓库](img/B21937_5_17.jpg)'
- en: Figure 5.17 – Select Repositories from the menu bar
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.17 – 从菜单栏中选择仓库
- en: Select the repository you will want to create your branch in.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要创建分支的仓库。
- en: '![Figure 5.18 – Select the repository of your choice from the available repositories](img/B21937_5_18.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.18 – 从可用仓库中选择你想要的仓库](img/B21937_5_18.jpg)'
- en: Figure 5.18 – Select the repository of your choice from the available repositories
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.18 – 从可用仓库中选择你想要的仓库
- en: This will take you to the main repository window.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你进入主仓库窗口。
- en: '![Figure 5.19 – Selected repository](img/B21937_5_19.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.19 – 已选择的仓库](img/B21937_5_19.jpg)'
- en: Figure 5.19 – Selected repository
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.19 – 已选择的仓库
- en: Click on **Branches** on the left-side menu.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧菜单中的**分支**。
- en: '![Figure 5.20 – Select Branches from within the selected repository](img/B21937_5_20.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.20 – 从选定的仓库中选择分支](img/B21937_5_20.jpg)'
- en: Figure 5.20 – Select Branches from within the selected repository
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.20 – 从选定的仓库中选择分支
- en: On the far-right side, toward the top of the screen, click on **Create branch**.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕的右上角，点击**创建分支**。
- en: '![Figure 5.21 – Select Create branch](img/B21937_5_21.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.21 – 选择创建分支](img/B21937_5_21.jpg)'
- en: Figure 5.21 – Select Create branch
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.21 – 选择创建分支
- en: Select the branch type and determine which branch this new branch will be forked
    from. Give the new branch a name. Click **Create** when finished.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择分支类型，并确定此新分支将从哪个分支派生。为新分支命名。完成后，点击**创建**。
- en: '![Figure 5.22 – Creating a new branch example](img/B21937_5_22.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.22 – 创建新分支示例](img/B21937_5_22.jpg)'
- en: Figure 5.22 – Creating a new branch example
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.22 – 创建新分支示例
- en: You have successfully created your first branch. The next recipe is going to
    cover what happens when you finish your code changes and how those changes are
    shared with the rest of your team.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经成功创建了第一个分支。接下来的内容将介绍当你完成代码更改后会发生什么，以及这些更改如何与团队中的其他成员共享。
- en: Understanding pull requests and merging best practices
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解拉取请求和合并最佳实践
- en: Tracking branches and changes to your code is only one of the features built
    into Bitbucket. When you are finished with your code changes, those changes need
    to be merged back to the branch that is upstream from your current branch. If
    you are following the Gitflow model, then that means that all of your code changes
    were done in a dedicated feature branch and now it is time to merge those changes
    back into the develop branch. The process of doing this merge is called a pull
    request. A pull request is more than just merging your code changes. The rest
    of this recipe will explain and walk you through how to use pull requests to maintain
    high-quality code and minimize the chances that your new code changes will break
    something.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪分支和代码更改是 Bitbucket 内置的功能之一。当你完成代码更改后，这些更改需要合并回上游分支。如果你遵循 Gitflow 模型，那么意味着所有代码更改都是在专用的功能分支中完成的，现在是时候将这些更改合并回开发分支了。这个合并的过程称为拉取请求。拉取请求不仅仅是合并代码更改。接下来的内容将解释如何使用拉取请求来维护高质量的代码，并最大程度地减少新代码更改破坏系统的可能性。
- en: How to do it…
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Once you are done with your changes, it is time to initiate a pull request.
    This pull request will trigger a chain reaction of events that is covered in the
    following steps:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 完成更改后，是时候发起拉取请求了。这个拉取请求将触发一系列事件，后续步骤中将详细说明：
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中，输入你想要创建分支的仓库。在导航栏中点击**仓库**。
- en: '![Figure 5.23 – Select Repositories from the menu bar](img/B21937_5_23.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.23 – 从菜单栏选择仓库](img/B21937_5_23.jpg)'
- en: Figure 5.23 – Select Repositories from the menu bar
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.23 – 从菜单栏选择仓库
- en: Select the repository you want to create your branch in.
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要创建分支的仓库。
- en: '![Figure 5.24 – Select the repository of your choice from the available repositories](img/B21937_5_24.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.24 – 从可用仓库中选择你选择的仓库](img/B21937_5_24.jpg)'
- en: Figure 5.24 – Select the repository of your choice from the available repositories
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.24 – 从可用仓库中选择你选择的仓库
- en: This will take you to the main repository window.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你到主仓库窗口。
- en: '![Figure 5.25 – Selected repository](img/B21937_5_25.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.25 – 选择的仓库](img/B21937_5_25.jpg)'
- en: Figure 5.25 – Selected repository
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.25 – 选择的仓库
- en: Click on **Pull requests** on the left-side menu.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧菜单中的**拉取请求**。
- en: '![Figure 5.26 – Select Pull requests from within the selected repository](img/B21937_5_26.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.26 – 从选定的仓库中选择拉取请求](img/B21937_5_26.jpg)'
- en: Figure 5.26 – Select Pull requests from within the selected repository
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.26 – 从选定的仓库中选择拉取请求
- en: Important note
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: There are many ways to start a pull request. You can initiate it when you are
    committing your changes. You can initiate it by clicking on the **Create** button
    in Bitbucket’s navigation bar. You can also initiate a pull request from the **Branches**
    menu. Not to mention that you can initiate a pull request from the command line
    and from Jira as well. The method described in this recipe is the most comprehensive
    method for creating a pull request from within Bitbucket.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 开始拉取请求有很多种方法。你可以在提交更改时启动它。你也可以通过点击 Bitbucket 导航栏中的**创建**按钮来启动它。你还可以通过**分支**菜单启动拉取请求。更不用说，你还可以通过命令行和
    Jira 启动拉取请求。本文描述的方法是从 Bitbucket 内部创建拉取请求的最全面的方法。
- en: On the far-right side, click on **Create** **pull request**.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在最右侧，点击**创建** **拉取请求**。
- en: '![Figure 5.27 – Click on Create pull request](img/B21937_5_27.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.27 – 点击创建拉取请求](img/B21937_5_27.jpg)'
- en: Figure 5.27 – Click on Create pull request
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.27 – 点击创建拉取请求
- en: You will be redirected to a screen where you will populate all the details needed
    to create the pull request.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 你将被重定向到一个屏幕，在该屏幕中你可以填写创建拉取请求所需的所有详细信息。
- en: Start by selecting **Source Branch**. This should be the feature branch you
    were working on.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先选择**源分支**。这应该是你正在工作的功能分支。
- en: '![Figure 5.28 – Select Source Branch](img/B21937_5_28.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.28 – 选择源分支](img/B21937_5_28.jpg)'
- en: Figure 5.28 – Select Source Branch
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.28 – 选择源分支
- en: 'Select the destination branch that the code changes should be merged into.
    This should be the **Develop** branch:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择代码更改应该合并到的目标分支。这应该是**Develop**分支：
- en: '![Figure 5.29 – Select the destination branch](img/B21937_5_29.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.29 – 选择目标分支](img/B21937_5_29.jpg)'
- en: Figure 5.29 – Select the destination branch
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.29 – 选择目标分支
- en: Give the pull request a title. This should be anything you want, but as a best
    practice, this should include the Jira key for the user story/bug that you were
    working on.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给拉取请求起个标题。你可以根据需要随意命名，但作为最佳实践，标题中应包括你正在处理的用户故事/缺陷的 Jira 键。
- en: '![Figure 5.30 – Pull request name](img/B21937_5_30.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.30 – 拉取请求名称](img/B21937_5_30.jpg)'
- en: Figure 5.30 – Pull request name
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.30 – 拉取请求名称
- en: Add a description that best describes your changes and anything else that may
    be helpful to the reviewers.
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加描述，最好能描述你的更改以及任何可能对审查者有帮助的内容。
- en: '![Figure 5.31 – Provide a description for the pull request](img/B21937_5_31.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.31 – 为拉取请求提供描述](img/B21937_5_31.jpg)'
- en: Figure 5.31 – Provide a description for the pull request
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.31 – 为拉取请求提供描述
- en: The next step is the most critical. Every pull request should be reviewed by
    someone else on your team. This can be other peers, but preferably, at least one
    senior-level developer should review the pull request.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是最关键的。每个拉取请求都应该由团队中的其他人进行审查。这可以是其他同行，但最好至少有一名高级开发人员来审查拉取请求。
- en: '![Figure 5.32 – Select team members that should review the pull request](img/B21937_5_32.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.32 – 选择应该审查拉取请求的团队成员](img/B21937_5_32.jpg)'
- en: Figure 5.32 – Select team members that should review the pull request
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.32 – 选择应该审查拉取请求的团队成员
- en: Optionally, determine whether Bitbucket should delete the branch after it has
    been merged. This is generally a good idea as Bitbucket will help keep your branches
    neat by removing unnecessary ones such as those that have been merged already.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，确定是否在合并后让 Bitbucket 删除该分支。通常这是一个好主意，因为 Bitbucket 会通过删除那些已经合并的、不再需要的分支，帮助保持你的分支整洁。
- en: '![Figure 5.33 – Determine whether the source branch should be deleted after
    the merge](img/B21937_5_33.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.33 – 确定合并后是否删除源分支](img/B21937_5_33.jpg)'
- en: Figure 5.33 – Determine whether the source branch should be deleted after the
    merge
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.33 – 确定合并后是否删除源分支
- en: Important note
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Before you create the pull request, review the commits and the files that were
    impacted as a result of the changes you made. This should serve as a personal
    review for yourself to ensure that commits or files/changes are not missing from
    the pull request.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建拉取请求之前，回顾一下由于你所做的更改而受到影响的提交和文件。这应该作为你个人的检查，确保拉取请求中没有遗漏提交或文件/更改。
- en: Finally, click on **Create pull request** to initiate the pull request.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击 **创建拉取请求** 以发起拉取请求。
- en: '![Figure 5.34 – Provide a description for the pull request](img/B21937_5_34.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.34 – 为拉取请求提供描述](img/B21937_5_34.jpg)'
- en: Figure 5.34 – Provide a description for the pull request
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.34 – 为拉取请求提供描述
- en: Now that the pull request has officially been made, it is time for someone to
    review it. Once it has been reviewed, the code can be approved to be merged into
    the destination branch. In the next recipe, we’ll cover how to configure your
    first pipeline in Bitbucket.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 现在拉取请求已经正式创建，是时候让某人进行审查了。一旦审查完成，代码就可以被批准合并到目标分支中。在下一章节中，我们将介绍如何在 Bitbucket 中配置你的第一个管道。
- en: Enabling Bitbucket Pipelines
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 启用 Bitbucket Pipelines
- en: After all your changes have been approved and merged into a develop branch,
    they need to be built and deployed. Deploying your changes is important because
    your source code needs to eventually live in an environment where end users will
    be able to use the functionalities that you have built. You could manually copy
    files from your computer to another, but this is not scalable and will most likely
    not be possible given the distributed world we live in. Instead, you can leverage
    the power of Bitbucket Pipelines to deploy your code automatically.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在所有更改都经过批准并合并到开发分支后，它们需要被构建和部署。部署你的更改很重要，因为你的源代码最终需要运行在一个环境中，在这个环境里，最终用户能够使用你构建的功能。你可以手动将文件从你的计算机复制到另一台计算机，但这种做法不可扩展，且在我们生活的分布式世界中很可能不可行。相反，你可以利用
    Bitbucket Pipelines 的强大功能来自动部署代码。
- en: How to do it…
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Before you can use Bitbucket Pipelines, you will need to tweak a few things:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在你能够使用 Bitbucket Pipelines 之前，你需要调整一些设置：
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中，进入你想要创建分支的仓库。点击导航栏中的 **Repositories**。
- en: '![Figure 5.35 – Select Repositories from the menu bar](img/B21937_5_35.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.35 – 从菜单栏中选择仓库](img/B21937_5_35.jpg)'
- en: Figure 5.35 – Select Repositories from the menu bar
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.35 – 从菜单栏中选择仓库
- en: Select the repository you want to create your branch in.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要在其中创建分支的仓库。
- en: '![Figure 5.36 – Select a repository of your choice from the available repositories](img/B21937_5_36.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.36 – 从可用仓库中选择你喜欢的仓库](img/B21937_5_36.jpg)'
- en: Figure 5.36 – Select a repository of your choice from the available repositories
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.36 – 从可用仓库中选择你喜欢的仓库
- en: This will take you to the main repository window.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你进入主仓库窗口。
- en: '![Figure 5.37 – Selected repository](img/B21937_5_37.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.37 – 选择的仓库](img/B21937_5_37.jpg)'
- en: Figure 5.37 – Selected repository
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.37 – 选择的仓库
- en: Click on **Pipelines** on the left-side menu.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧菜单中的 **Pipelines**。
- en: '![Figure 5.38 – Select Pipelines from within the selected repository](img/B21937_5_38.jpg)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.38 – 从选定仓库内选择 Pipelines](img/B21937_5_38.jpg)'
- en: Figure 5.38 – Select Pipelines from within the selected repository
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.38 – 从选定的仓库内选择 Pipelines
- en: Click on **Create your first pipeline**, which will take you down to the available
    templates that you can select from.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **创建你的第一个管道**，这将引导你查看可供选择的模板。
- en: '![Figure 5.39 – Create your first pipeline](img/B21937_5_39.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.39 – 创建你的第一个管道](img/B21937_5_39.jpg)'
- en: Figure 5.39 – Create your first pipeline
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.39 – 创建你的第一个管道
- en: Select **Starter pipeline**.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **Starter pipeline**。
- en: '![Figure 5.40 – Starter pipeline is recommended](img/B21937_5_40.jpg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.40 – 推荐使用起始管道](img/B21937_5_40.jpg)'
- en: Figure 5.40 – Starter pipeline is recommended
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.40 – 推荐使用起始管道
- en: Configuring your first pipeline is an involved process. In the next section,
    we are going to break down the starter template and explain the different tweaks
    you can make to the template using Bitbucket’s pipeline editor.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 配置你的第一个管道是一个复杂的过程。在接下来的部分中，我们将逐步解析起始模板，并解释你可以在 Bitbucket 的管道编辑器中对模板进行的各种调整。
- en: There’s more…
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多…
- en: 'There are many configurations to configure. This section is going to give you
    an overview of those changes. In the next chapter, you will learn how to expand
    on this quite simple pipeline configuration file:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多配置需要设置。本节将概述这些更改。在下一章中，你将学习如何扩展这个相当简单的管道配置文件：
- en: The first configuration you can change is the template for your `bitbucket-pipelines.yml`
    file. In *Step 5* of the previous section, we selected the `bitbucket-pipelines.yml`
    file, make sure you are in edit mode and you will see where you can change the
    template.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一个可以更改的配置是 `bitbucket-pipelines.yml` 文件的模板。在上一部分的 *步骤 5* 中，我们选择了 `bitbucket-pipelines.yml`
    文件，确保你处于编辑模式，你会看到可以更改模板的位置。
- en: '![Figure 5.41 – Available pipeline templates](img/B21937_5_41.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.41 – 可用的管道模板](img/B21937_5_41.jpg)'
- en: Figure 5.41 – Available pipeline templates
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.41 – 可用的管道模板
- en: Important note
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Depending on the template that you pick, the information in the template will
    change.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择的模板，模板中的信息将会有所变化。
- en: By default, the template you select is going to have recommended steps based
    on the type of template you selected. If you need to add new steps, you can do
    so by selecting from the available step types.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，你选择的模板会根据所选模板类型包含推荐的步骤。如果你需要添加新的步骤，可以通过选择可用的步骤类型来实现。
- en: '![Figure 5.42 – Available step types](img/B21937_5_42.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.42 – 可用的步骤类型](img/B21937_5_42.jpg)'
- en: Figure 5.42 – Available step types
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.42 – 可用的步骤类型
- en: Select a step that you would like to add and a popup will display, allowing
    you to copy the information so that you can add it to your template.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要添加的步骤，弹出窗口会显示，允许你复制信息，以便将其添加到你的模板中。
- en: '![Figure 5.43 – Additional step information to copy](img/B21937_5_43.jpg)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.43 – 额外的步骤信息以供复制](img/B21937_5_43.jpg)'
- en: Figure 5.43 – Additional step information to copy
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.43 – 额外的步骤信息以供复制
- en: Important note
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: '*Step 3* simply shows how to add a step to your pipeline. Ideally, you want
    to build steps for building and packaging as well. You may also want to include
    steps for testing, scanning, delivery, and so on.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '*步骤 3* 仅展示了如何向管道中添加一个步骤。理想情况下，你还想为构建和打包创建步骤。你也可以考虑加入测试、扫描、交付等步骤。'
- en: 'Once copied to your clipboard, you can add the additional step back in your
    template:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦复制到剪贴板，你可以将额外的步骤添加回你的模板中：
- en: '![Figure 5.44 – Added deployment step](img/B21937_5_44.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.44 – 添加部署步骤](img/B21937_5_44.jpg)'
- en: Figure 5.44 – Added deployment step
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.44 – 添加了部署步骤
- en: You can also add integrations to your pipeline configuration.
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还可以将集成添加到管道配置中。
- en: '![Figure 5.45 – Available pipe integrations](img/B21937_5_45.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.45 – 可用的管道集成](img/B21937_5_45.jpg)'
- en: Figure 5.45 – Available pipe integrations
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.45 – 可用的管道集成
- en: Important note
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: You can click on **Explore more pipes** to view all the available integrations.
    There are dozens to choose from based on your specific needs.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以点击 **探索更多管道** 来查看所有可用的集成。根据你的特定需求，有数十个集成可以选择。
- en: Finally, you can add variables to `bitbucket-pipelines.yml` to make your pipelines
    generic, configurable, and reusable.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，你可以向 `bitbucket-pipelines.yml` 添加变量，使你的管道更加通用、可配置和可重用。
- en: '![Figure 5.46 – Add variables to the pipeline template](img/B21937_5_46.jpg)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.46 – 向管道模板添加变量](img/B21937_5_46.jpg)'
- en: Figure 5.46 – Add variables to the pipeline template
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.46 – 向管道模板添加变量
- en: Once you have finished modifying your pipeline template, you commit the file
    back to your repository by clicking on the **Commit** button at the bottom of
    the screen.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你完成修改管道模板后，可以通过点击屏幕底部的 **提交** 按钮将文件提交回你的代码库。
- en: '![Figure 5.47 – Commit the bitbucket-pipelines.yml file](img/B21937_5_47.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.47 – 提交 bitbucket-pipelines.yml 文件](img/B21937_5_47.jpg)'
- en: Figure 5.47 – Commit the bitbucket-pipelines.yml file
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.47 – 提交 bitbucket-pipelines.yml 文件
- en: Your pipeline will then execute. After you commit, you will be redirected back
    to the **Pipelines** menu where you will be able to see the status of your pipeline.
    I recommend merging the pipeline back to your main or develop branch if needed.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，你的管道将执行。在提交后，你将被重定向回 **Pipelines** 菜单，在那里你可以看到管道的状态。如果需要，我建议将管道合并回主分支或开发分支。
- en: '![Figure 5.48 – Pipeline status](img/B21937_5_48.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.48 – 管道状态](img/B21937_5_48.jpg)'
- en: Figure 5.48 – Pipeline status
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.48 – 管道状态
- en: 'Click on your pipeline execution to obtain details about the latest build run:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你的管道执行记录以获取有关最新构建运行的详细信息：
- en: '![Figure 5.49 – Pipeline run execution details](img/B21937_5_49.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.49 – 管道运行执行详情](img/B21937_5_49.jpg)'
- en: Figure 5.49 – Pipeline run execution details
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.49 – 管道运行执行详情
- en: Back in the **Pipelines** menu, you can trigger a pipeline to run by clicking
    on the **Run** **pipeline** button.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回 **Pipelines** 菜单，你可以通过点击 **Run** **pipeline** 按钮触发管道运行。
- en: '![Figure 5.50 – Force run a pipeline](img/B21937_5_50.jpg)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.50 – 强制运行管道](img/B21937_5_50.jpg)'
- en: Figure 5.50 – Force run a pipeline
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.50 – 强制运行管道
- en: Select your branch and the pipeline you want to run.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你要运行的分支和管道。
- en: '![Figure 5.51 – Run Pipeline details](img/B21937_5_51.jpg)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.51 – 运行管道详情](img/B21937_5_51.jpg)'
- en: Figure 5.51 – Run Pipeline details
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.51 – 运行管道详情
- en: You can also schedule pipelines to run at a specific time.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还可以安排管道在特定时间运行。
- en: '![Figure 5.52 – Schedule a pipeline](img/B21937_5_52.jpg)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.52 – 安排管道](img/B21937_5_52.jpg)'
- en: Figure 5.52 – Schedule a pipeline
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.52 – 安排管道
- en: Finally, you can check your usage as Bitbucket pipelines are tracked by the
    number of minutes it takes to run the pipeline. The amount of time you have each
    month is determined by your Bitbucket subscription plan.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，你可以查看你的使用情况，因为 Bitbucket 管道是按运行管道所需的分钟数来跟踪的。每月可用的时间量由你的 Bitbucket 订阅计划决定。
- en: '![Figure 5.53 – View pipeline usage](img/B21937_5_53.jpg)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.53 – 查看管道使用情况](img/B21937_5_53.jpg)'
- en: Figure 5.53 – View pipeline usage
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.53 – 查看管道使用情况
- en: This was just an introduction to pipelines in Bitbucket. In the next chapter,
    you will learn how to create more advanced Bitbucket pipelines.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是 Bitbucket 中管道的简介。在下一章中，你将学习如何创建更高级的 Bitbucket 管道。
- en: Configuring runners in Bitbucket
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中配置运行器
- en: With Bitbucket Cloud, you must pay for every build minute. This can quickly
    add up so, as an alternative, you can utilize self-hosted runners. Runners allow
    you to save on build minutes, but you need to maintain them in your infrastructure.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Bitbucket Cloud 中，你必须为每一分钟的构建付费。这会迅速增加费用，因此，作为替代方案，你可以使用自托管运行器。运行器允许你节省构建分钟数，但你需要在你的基础设施中维护它们。
- en: How to do it…
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Runners will help you keep your Bitbucket costs down, but they do require some
    initial configurations, which are covered in the following steps:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 运行器将帮助你降低 Bitbucket 成本，但它们确实需要一些初始配置，以下步骤会对此进行介绍：
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Bitbucket 中，进入你想要创建分支的仓库。点击导航栏中的 **Repositories**。
- en: '![Figure 5.54 – Select Repositories from the menu bar](img/B21937_5_54.jpg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.54 – 从菜单栏选择仓库](img/B21937_5_54.jpg)'
- en: Figure 5.54 – Select Repositories from the menu bar
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.54 – 从菜单栏选择仓库
- en: Select the repository you want to create your branch in.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要创建分支的仓库。
- en: '![Figure 5.55 – Select the repository of your choice from the available repositories](img/B21937_5_55.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.55 – 从可用仓库中选择你需要的仓库](img/B21937_5_55.jpg)'
- en: Figure 5.55 – Select the repository of your choice from the available repositories
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.55 – 从可用仓库中选择你需要的仓库
- en: This will take you to the main repository window.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你进入主仓库窗口。
- en: '![Figure 5.56 – Selected repository](img/B21937_5_56.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.56 – 已选择的仓库](img/B21937_5_56.jpg)'
- en: Figure 5.56 – Selected repository
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.56 – 已选择的仓库
- en: Once you are in the repository where you want to add your runner, click on **Repository
    settings** on the left-hand menu.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入你想要添加运行器的仓库后，点击左侧菜单中的 **Repository settings**。
- en: '![Figure 5.57 – Select Repository settings](img/B21937_5_57.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.57 – 选择仓库设置](img/B21937_5_57.jpg)'
- en: Figure 5.57 – Select Repository settings
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.57 – 选择仓库设置
- en: Important note
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 重要说明
- en: You can only have up to 100 runners per repository.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 每个仓库最多只能有 100 个运行器。
- en: Once in **Repository settings**, scroll all the way down until you get to the
    **PIPELINES** section. From there, click on **Runners**.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入 **Repository settings** 后，向下滚动，直到找到 **PIPELINES** 部分。然后点击 **Runners**。
- en: '![Figure 5.58 – Select Runners under PIPELINES](img/B21937_5_58.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.58 – 在 PIPELINES 下选择 Runners](img/B21937_5_58.jpg)'
- en: Figure 5.58 – Select Runners under PIPELINES
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.58 – 在 PIPELINES 下选择 Runners
- en: Click on **Add runner** to add a self-hosted runner.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加运行器**以添加自托管运行器。
- en: '![Figure 5.59 – Add runner](img/B21937_5_59.jpg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.59 – 添加运行器](img/B21937_5_59.jpg)'
- en: Figure 5.59 – Add runner
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.59 – 添加运行器
- en: Select the **System and architecture** type for your new runner. There are a
    few different options, and you should select the one appropriate for the type
    of runner you are planning on utilizing.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择新运行器的**系统和架构**类型。有几种不同的选项，您应选择最适合您计划使用的运行器类型的选项。
- en: '![Figure 5.60 – Select the System and architecture type](img/B21937_5_60.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.60 – 选择系统和架构类型](img/B21937_5_60.jpg)'
- en: Figure 5.60 – Select the System and architecture type
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.60 – 选择系统和架构类型
- en: Give your runner a name.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给您的运行器命名。
- en: '![Figure 5.61 – Provide a name for the runner](img/B21937_5_61.jpg)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.61 – 为运行器提供名称](img/B21937_5_61.jpg)'
- en: Figure 5.61 – Provide a name for the runner
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.61 – 为运行器提供名称
- en: Provide runner labels.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供运行器标签。
- en: '![Figure 5.62 – Provide runner labels](img/B21937_5_62.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.62 – 提供运行器标签](img/B21937_5_62.jpg)'
- en: Figure 5.62 – Provide runner labels
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.62 – 提供运行器标签
- en: Important note
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: You can provide up to 10 runner labels. Use these labels to help schedule when
    your runners execute. Labels can only contain lowercase and alphanumerical characters
    and dots.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 您最多可以提供 10 个运行器标签。使用这些标签帮助安排运行器的执行时间。标签只能包含小写字母、数字和点。
- en: Click the **Next** button.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**按钮。
- en: '![Figure 5.63 – Click the Next button to proceed](img/B21937_5_63.jpg)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.63 – 点击“下一步”按钮继续](img/B21937_5_63.jpg)'
- en: Figure 5.63 – Click the Next button to proceed
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.63 – 点击“下一步”按钮继续
- en: On the next screen, copy the command that is displayed.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，复制显示的命令。
- en: '![Figure 5.64 – The runner command that is needed to start and configure the
    runner](img/B21937_5_64.jpg)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.64 – 启动和配置运行器所需的命令](img/B21937_5_64.jpg)'
- en: Figure 5.64 – The runner command that is needed to start and configure the runner
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.64 – 启动和配置运行器所需的命令
- en: Important note
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: You will not be able to retrieve the command information later, so make sure
    you save it in a safe location. You will need this command to install and configure
    your runner later.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 您将无法在之后获取该命令信息，因此请确保将其保存在安全的位置。您将需要这个命令来安装和配置您的运行器。
- en: Click on the **Next** button.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**按钮。
- en: '![Figure 5.65 – Click Next to proceed to the next step](img/B21937_5_65.jpg)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.65 – 点击“下一步”继续到下一个步骤](img/B21937_5_65.jpg)'
- en: Figure 5.65 – Click Next to proceed to the next step
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.65 – 点击“下一步”继续到下一个步骤
- en: Copy the labels and add them to your `bitbucket-``pipelines``.yml` file.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制标签并将其添加到您的`bitbucket-``pipelines``.yml`文件中。
- en: '![Figure 5.66 – Copy labels to include in the YAML file](img/B21937_5_66.jpg)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.66 – 复制标签以包含在 YAML 文件中](img/B21937_5_66.jpg)'
- en: Figure 5.66 – Copy labels to include in the YAML file
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.66 – 复制标签以包含在 YAML 文件中
- en: Click on the **Finish** button to finish creating your runner.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**按钮完成运行器的创建。
- en: '![Figure 5.67 – Click Finish to create the runner](img/B21937_5_67.jpg)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.67 – 点击“完成”创建运行器](img/B21937_5_67.jpg)'
- en: Figure 5.67 – Click Finish to create the runner
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.67 – 点击“完成”创建运行器
- en: Important note
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Your runner will now be available for your repository but will not be registered
    until you run the command from *Step 9* of this recipe to start the runner. In
    the next recipe, you will walk through an example of creating a valid and usable
    runner.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 您的运行器现在将在您的仓库中可用，但在您运行来自*第 9 步*的命令启动运行器之前，它将不会注册。在下一个食谱中，您将演示如何创建一个有效且可用的运行器。
- en: Your newly created runner, with a state of **UNREGISTERED** will be visible
    in the **Runners** menu within Bitbucket.
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您新创建的运行器，将处于**未注册**状态，并会在 Bitbucket 中的**运行器**菜单中可见。
- en: '![Figure 5.68 – List of available runners in the repository](img/B21937_5_68.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![图 5.68 – 仓库中可用运行器的列表](img/B21937_5_68.jpg)'
- en: Figure 5.68 – List of available runners in the repository
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.68 – 仓库中可用运行器的列表
- en: Now that you have a runner, you can save on build-minute costs. While you need
    to host your own runners, it might be an effective way to save a little money
    if you are consuming a lot of build minutes.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经有了一个自托管的运行器，您可以节省构建时长费用。如果您消耗了大量的构建时长，虽然需要托管您自己的运行器，但这可能是节省一些费用的有效方式。
