- en: '5'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Understanding Bitbucket and Bitbucket Pipelines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Bitbucket is Atlassian’s **Source Code Management** (**SCM**) solution that
    enables developers to version control their source code. Bitbucket is tightly
    integrated with Jira and allows developers to collaboratively work on code while
    also sharing their status with stakeholders. Bitbucket doesn’t just store and
    track changes, it offers a robust deployment system known as **Bitbucket Pipelines**.
    Using Pipelines, developers can build and deploy their code to various environments
    with ease. Moreover, **runners** are machines that carry out pipeline executions
    for build and deployment. Bitbucket Pipelines can use its runners to run a pipeline
    execution, at a cost of the number of minutes needed for the execution against
    a monthly budget, or developers can define self-hosted runners that use their
    own infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: 'This chapter has the following recipes – the first recipe will walk you through
    the basics and subsequent recipes will expand on this foundation:'
  prefs: []
  type: TYPE_NORMAL
- en: Creating a workspace, project, and repository in Bitbucket
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating branches in Bitbucket
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding pull requests and merging best practices
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Enabling Bitbucket Pipelines
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring runners in Bitbucket
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You will need the following software:'
  prefs: []
  type: TYPE_NORMAL
- en: Bitbucket Cloud with a repository
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Bitbucket runners
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Creating a workspace, project, and repository in Bitbucket
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Bitbucket is a very different tool when you compare it against Jira or Confluence.
    Unlike Jira and Confluence, which require very little configuration to get started,
    Bitbucket requires some upfront technical configuration before it can be used
    by a team. This recipe focuses on building your understanding of how Bitbucket
    is structured and explains the various initial configuration steps required to
    enable Bitbucket for your team.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'When Bitbucket is configured for the first time, you want to first create a
    **workspace**. Workspaces contain repositories, which will be discussed later
    in this recipe. When you log in to Bitbucket, you’ll see your available workspaces,
    as shown in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.1 – Overview of available workspaces within Bitbucket](img/B21937_5_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.1 – Overview of available workspaces within Bitbucket
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: An initial workspace may have already been created when you first signed up
    for Bitbucket. In that case, you can skip to the next section or, if you want
    to create a brand-new workspace, follow along. Additionally, make sure you are
    logged into Bitbucket and that you are an administrator of Bitbucket.
  prefs: []
  type: TYPE_NORMAL
- en: 'To create a workspace, take the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Click on your profile icon in the top-right corner of Bitbucket.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.2 – Select profile icon](img/B21937_5_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.2 – Select profile icon
  prefs: []
  type: TYPE_NORMAL
- en: Click on **All workspaces** under **RECENT WORKSPACES**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.3 – Select All workspaces](img/B21937_5_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.3 – Select All workspaces
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Create workspace**, which is located toward the top-right corner
    of Bitbucket’s user interface.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.4 – Create workspace button](img/B21937_5_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.4 – Create workspace button
  prefs: []
  type: TYPE_NORMAL
- en: Enter a workspace name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.5 – Provide a name for the new workspace](img/B21937_5_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.5 – Provide a name for the new workspace
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: This will auto-populate **Workspace ID**. You can optionally change it or leave
    the default that Atlassian provides. The workspace ID will serve as the URL for
    the new workspace you are creating.
  prefs: []
  type: TYPE_NORMAL
- en: Update **Workspace ID**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.6 – Workspace ID](img/B21937_5_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.6 – Workspace ID
  prefs: []
  type: TYPE_NORMAL
- en: Determine whether you want the workspace to remain private or whether you want
    it to be public by checking the checkbox.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.7 – Determine whether the workspace should be private or public](img/B21937_5_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.7 – Determine whether the workspace should be private or public
  prefs: []
  type: TYPE_NORMAL
- en: 'After you validate the reCAPTCHA, click on the **Create** button:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.8 – Create your first workspace](img/B21937_5_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.8 – Create your first workspace
  prefs: []
  type: TYPE_NORMAL
- en: Your workspace is now created, and you will now be able to create your first
    repository.
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Once you are in your new workspace, it is time to create your first repository.
    The repository is where the source code will be stored. You can have many repositories
    within a single workspace. Let''s use the following steps to create a repository:'
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Create repository**, located in either the welcome message or under
    **Recent repositories**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.9 – Create your first repository](img/B21937_5_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.9 – Create your first repository
  prefs: []
  type: TYPE_NORMAL
- en: 'Bitbucket will redirect you to a new screen where you will first provide a
    project name. Repositories are grouped into projects, so it is important to provide
    a project name first:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.10 – Create your first repository and provide a project name](img/B21937_5_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.10 – Create your first repository and provide a project name
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, provide the name of your repository. This should be a name that is significant
    to the team that will be using the repository:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.11 – Provide a repository name](img/B21937_5_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.11 – Provide a repository name
  prefs: []
  type: TYPE_NORMAL
- en: Determine whether the repository should be private or public.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.12 – Determine the access level of the repository](img/B21937_5_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.12 – Determine the access level of the repository
  prefs: []
  type: TYPE_NORMAL
- en: Determine whether a `README` file should be included in the repository, to include
    it with a template, or to include it with a tutorial, which is recommended for
    beginners.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.13 – Determine whether a README file is included in the repository](img/B21937_5_13.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.13 – Determine whether a README file is included in the repository
  prefs: []
  type: TYPE_NORMAL
- en: Provide the name of your default branch. This is typically `main` or `master`.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.14 – Name of the default branch](img/B21937_5_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.14 – Name of the default branch
  prefs: []
  type: TYPE_NORMAL
- en: Finally, determine whether a `.gitignore` file should be included or not. It
    is recommended that a `.gitignore` file is included if you have files or directories
    that need to not be tracked by Git. These files or directories will be ignored
    and will not be committed to the repository.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.15 – Determine whether a .gitignore file is included or not](img/B21937_5_15.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.15 – Determine whether a .gitignore file is included or not
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Create repository**, located in the bottom-right corner of the screen.
    Don’t worry about configuring any of the advanced settings.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.16 – Create repository button](img/B21937_5_16.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.16 – Create repository button
  prefs: []
  type: TYPE_NORMAL
- en: Your first workspace, project, and repository have now been created. In the
    following recipe, you will learn how to start creating branches in Bitbucket.
  prefs: []
  type: TYPE_NORMAL
- en: Creating branches in Bitbucket
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Working off the default branch in Bitbucket is not the best practice as it impacts
    the main code base, which should be as stable as possible. Instead, you should
    consider utilizing branches in Bitbucket, and this recipe will cover the basics
    of branching. There are different techniques when it comes to branching strategies.
    This recipe will simply cover the mechanics of creating branches.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before jumping into the mechanics of how to create branches in Bitbucket, let’s
    discuss the different types of branches available. There are different branching
    strategies in the world of Git. For this example, **Gitflow** will be used to
    illustrate how branching typically works. Gitflow is well documented by Atlassian,
    so Gitflow will be used to explain branching strategies in this recipe:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Main**: The main branch should be the most stable branch in your repository.
    This means that the code in the main branch should be the most complete and the
    best working version of your code. Typically, your main branch is used to create
    releases and deploy to a production system, so this branch is the most stable.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Develop**: This is a very common branch to have when following the Gitflow
    methodology. The develop branch is the branch your team will integrate their changes
    into or where they will create feature branches from. The develop branch is initially
    branched from the main branch.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Feature**: Whenever a story is assigned to a developer in Jira, that developer
    should create a feature branch, which should be based on the develop branch. Feature
    branches are short-lived and as soon as a developer finishes their code, a pull
    request should be initiated to merge changes back into the develop branch.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Release**: Whenever the Develop branch is ready to be shipped to production,
    a release branch is created from the latest develop branch. This release branch
    should be tested and vetted before it is merged into the main and develop branch.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Hotfix**: Whenever there are problems with a production system, hotfix branches
    should be created to address problems with code found in the main branch.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Now that you know what all the different branches are in the Gitflow model,
    we are going to look at how to create branches within Bitbucket.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Branching in Bitbucket is straightforward but is often not the most popular
    option. If you are new to using a source control management system, then using
    a user interface such as that of Bitbucket might be a good option for you:'
  prefs: []
  type: TYPE_NORMAL
- en: In Bitbucket, enter the repository in which you want to create a branch in.
    Click on **Repositories** in the navigation bar.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.17 – Select Repositories from the menu bar](img/B21937_5_17.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.17 – Select Repositories from the menu bar
  prefs: []
  type: TYPE_NORMAL
- en: Select the repository you will want to create your branch in.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.18 – Select the repository of your choice from the available repositories](img/B21937_5_18.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.18 – Select the repository of your choice from the available repositories
  prefs: []
  type: TYPE_NORMAL
- en: This will take you to the main repository window.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.19 – Selected repository](img/B21937_5_19.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.19 – Selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Branches** on the left-side menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.20 – Select Branches from within the selected repository](img/B21937_5_20.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.20 – Select Branches from within the selected repository
  prefs: []
  type: TYPE_NORMAL
- en: On the far-right side, toward the top of the screen, click on **Create branch**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.21 – Select Create branch](img/B21937_5_21.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.21 – Select Create branch
  prefs: []
  type: TYPE_NORMAL
- en: Select the branch type and determine which branch this new branch will be forked
    from. Give the new branch a name. Click **Create** when finished.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.22 – Creating a new branch example](img/B21937_5_22.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.22 – Creating a new branch example
  prefs: []
  type: TYPE_NORMAL
- en: You have successfully created your first branch. The next recipe is going to
    cover what happens when you finish your code changes and how those changes are
    shared with the rest of your team.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding pull requests and merging best practices
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Tracking branches and changes to your code is only one of the features built
    into Bitbucket. When you are finished with your code changes, those changes need
    to be merged back to the branch that is upstream from your current branch. If
    you are following the Gitflow model, then that means that all of your code changes
    were done in a dedicated feature branch and now it is time to merge those changes
    back into the develop branch. The process of doing this merge is called a pull
    request. A pull request is more than just merging your code changes. The rest
    of this recipe will explain and walk you through how to use pull requests to maintain
    high-quality code and minimize the chances that your new code changes will break
    something.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Once you are done with your changes, it is time to initiate a pull request.
    This pull request will trigger a chain reaction of events that is covered in the
    following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.23 – Select Repositories from the menu bar](img/B21937_5_23.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.23 – Select Repositories from the menu bar
  prefs: []
  type: TYPE_NORMAL
- en: Select the repository you want to create your branch in.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.24 – Select the repository of your choice from the available repositories](img/B21937_5_24.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.24 – Select the repository of your choice from the available repositories
  prefs: []
  type: TYPE_NORMAL
- en: This will take you to the main repository window.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.25 – Selected repository](img/B21937_5_25.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.25 – Selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Pull requests** on the left-side menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.26 – Select Pull requests from within the selected repository](img/B21937_5_26.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.26 – Select Pull requests from within the selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: There are many ways to start a pull request. You can initiate it when you are
    committing your changes. You can initiate it by clicking on the **Create** button
    in Bitbucket’s navigation bar. You can also initiate a pull request from the **Branches**
    menu. Not to mention that you can initiate a pull request from the command line
    and from Jira as well. The method described in this recipe is the most comprehensive
    method for creating a pull request from within Bitbucket.
  prefs: []
  type: TYPE_NORMAL
- en: On the far-right side, click on **Create** **pull request**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.27 – Click on Create pull request](img/B21937_5_27.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.27 – Click on Create pull request
  prefs: []
  type: TYPE_NORMAL
- en: You will be redirected to a screen where you will populate all the details needed
    to create the pull request.
  prefs: []
  type: TYPE_NORMAL
- en: Start by selecting **Source Branch**. This should be the feature branch you
    were working on.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.28 – Select Source Branch](img/B21937_5_28.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.28 – Select Source Branch
  prefs: []
  type: TYPE_NORMAL
- en: 'Select the destination branch that the code changes should be merged into.
    This should be the **Develop** branch:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.29 – Select the destination branch](img/B21937_5_29.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.29 – Select the destination branch
  prefs: []
  type: TYPE_NORMAL
- en: Give the pull request a title. This should be anything you want, but as a best
    practice, this should include the Jira key for the user story/bug that you were
    working on.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.30 – Pull request name](img/B21937_5_30.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.30 – Pull request name
  prefs: []
  type: TYPE_NORMAL
- en: Add a description that best describes your changes and anything else that may
    be helpful to the reviewers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.31 – Provide a description for the pull request](img/B21937_5_31.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.31 – Provide a description for the pull request
  prefs: []
  type: TYPE_NORMAL
- en: The next step is the most critical. Every pull request should be reviewed by
    someone else on your team. This can be other peers, but preferably, at least one
    senior-level developer should review the pull request.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.32 – Select team members that should review the pull request](img/B21937_5_32.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.32 – Select team members that should review the pull request
  prefs: []
  type: TYPE_NORMAL
- en: Optionally, determine whether Bitbucket should delete the branch after it has
    been merged. This is generally a good idea as Bitbucket will help keep your branches
    neat by removing unnecessary ones such as those that have been merged already.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.33 – Determine whether the source branch should be deleted after
    the merge](img/B21937_5_33.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.33 – Determine whether the source branch should be deleted after the
    merge
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: Before you create the pull request, review the commits and the files that were
    impacted as a result of the changes you made. This should serve as a personal
    review for yourself to ensure that commits or files/changes are not missing from
    the pull request.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, click on **Create pull request** to initiate the pull request.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.34 – Provide a description for the pull request](img/B21937_5_34.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.34 – Provide a description for the pull request
  prefs: []
  type: TYPE_NORMAL
- en: Now that the pull request has officially been made, it is time for someone to
    review it. Once it has been reviewed, the code can be approved to be merged into
    the destination branch. In the next recipe, we’ll cover how to configure your
    first pipeline in Bitbucket.
  prefs: []
  type: TYPE_NORMAL
- en: Enabling Bitbucket Pipelines
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: After all your changes have been approved and merged into a develop branch,
    they need to be built and deployed. Deploying your changes is important because
    your source code needs to eventually live in an environment where end users will
    be able to use the functionalities that you have built. You could manually copy
    files from your computer to another, but this is not scalable and will most likely
    not be possible given the distributed world we live in. Instead, you can leverage
    the power of Bitbucket Pipelines to deploy your code automatically.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before you can use Bitbucket Pipelines, you will need to tweak a few things:'
  prefs: []
  type: TYPE_NORMAL
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.35 – Select Repositories from the menu bar](img/B21937_5_35.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.35 – Select Repositories from the menu bar
  prefs: []
  type: TYPE_NORMAL
- en: Select the repository you want to create your branch in.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.36 – Select a repository of your choice from the available repositories](img/B21937_5_36.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.36 – Select a repository of your choice from the available repositories
  prefs: []
  type: TYPE_NORMAL
- en: This will take you to the main repository window.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.37 – Selected repository](img/B21937_5_37.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.37 – Selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Pipelines** on the left-side menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.38 – Select Pipelines from within the selected repository](img/B21937_5_38.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.38 – Select Pipelines from within the selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Create your first pipeline**, which will take you down to the available
    templates that you can select from.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.39 – Create your first pipeline](img/B21937_5_39.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.39 – Create your first pipeline
  prefs: []
  type: TYPE_NORMAL
- en: Select **Starter pipeline**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.40 – Starter pipeline is recommended](img/B21937_5_40.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.40 – Starter pipeline is recommended
  prefs: []
  type: TYPE_NORMAL
- en: Configuring your first pipeline is an involved process. In the next section,
    we are going to break down the starter template and explain the different tweaks
    you can make to the template using Bitbucket’s pipeline editor.
  prefs: []
  type: TYPE_NORMAL
- en: There’s more…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'There are many configurations to configure. This section is going to give you
    an overview of those changes. In the next chapter, you will learn how to expand
    on this quite simple pipeline configuration file:'
  prefs: []
  type: TYPE_NORMAL
- en: The first configuration you can change is the template for your `bitbucket-pipelines.yml`
    file. In *Step 5* of the previous section, we selected the `bitbucket-pipelines.yml`
    file, make sure you are in edit mode and you will see where you can change the
    template.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.41 – Available pipeline templates](img/B21937_5_41.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.41 – Available pipeline templates
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: Depending on the template that you pick, the information in the template will
    change.
  prefs: []
  type: TYPE_NORMAL
- en: By default, the template you select is going to have recommended steps based
    on the type of template you selected. If you need to add new steps, you can do
    so by selecting from the available step types.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.42 – Available step types](img/B21937_5_42.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.42 – Available step types
  prefs: []
  type: TYPE_NORMAL
- en: Select a step that you would like to add and a popup will display, allowing
    you to copy the information so that you can add it to your template.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.43 – Additional step information to copy](img/B21937_5_43.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.43 – Additional step information to copy
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: '*Step 3* simply shows how to add a step to your pipeline. Ideally, you want
    to build steps for building and packaging as well. You may also want to include
    steps for testing, scanning, delivery, and so on.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Once copied to your clipboard, you can add the additional step back in your
    template:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.44 – Added deployment step](img/B21937_5_44.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.44 – Added deployment step
  prefs: []
  type: TYPE_NORMAL
- en: You can also add integrations to your pipeline configuration.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.45 – Available pipe integrations](img/B21937_5_45.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.45 – Available pipe integrations
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: You can click on **Explore more pipes** to view all the available integrations.
    There are dozens to choose from based on your specific needs.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, you can add variables to `bitbucket-pipelines.yml` to make your pipelines
    generic, configurable, and reusable.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.46 – Add variables to the pipeline template](img/B21937_5_46.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.46 – Add variables to the pipeline template
  prefs: []
  type: TYPE_NORMAL
- en: Once you have finished modifying your pipeline template, you commit the file
    back to your repository by clicking on the **Commit** button at the bottom of
    the screen.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.47 – Commit the bitbucket-pipelines.yml file](img/B21937_5_47.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.47 – Commit the bitbucket-pipelines.yml file
  prefs: []
  type: TYPE_NORMAL
- en: Your pipeline will then execute. After you commit, you will be redirected back
    to the **Pipelines** menu where you will be able to see the status of your pipeline.
    I recommend merging the pipeline back to your main or develop branch if needed.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.48 – Pipeline status](img/B21937_5_48.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.48 – Pipeline status
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on your pipeline execution to obtain details about the latest build run:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.49 – Pipeline run execution details](img/B21937_5_49.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.49 – Pipeline run execution details
  prefs: []
  type: TYPE_NORMAL
- en: Back in the **Pipelines** menu, you can trigger a pipeline to run by clicking
    on the **Run** **pipeline** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.50 – Force run a pipeline](img/B21937_5_50.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.50 – Force run a pipeline
  prefs: []
  type: TYPE_NORMAL
- en: Select your branch and the pipeline you want to run.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.51 – Run Pipeline details](img/B21937_5_51.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.51 – Run Pipeline details
  prefs: []
  type: TYPE_NORMAL
- en: You can also schedule pipelines to run at a specific time.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.52 – Schedule a pipeline](img/B21937_5_52.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.52 – Schedule a pipeline
  prefs: []
  type: TYPE_NORMAL
- en: Finally, you can check your usage as Bitbucket pipelines are tracked by the
    number of minutes it takes to run the pipeline. The amount of time you have each
    month is determined by your Bitbucket subscription plan.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.53 – View pipeline usage](img/B21937_5_53.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.53 – View pipeline usage
  prefs: []
  type: TYPE_NORMAL
- en: This was just an introduction to pipelines in Bitbucket. In the next chapter,
    you will learn how to create more advanced Bitbucket pipelines.
  prefs: []
  type: TYPE_NORMAL
- en: Configuring runners in Bitbucket
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: With Bitbucket Cloud, you must pay for every build minute. This can quickly
    add up so, as an alternative, you can utilize self-hosted runners. Runners allow
    you to save on build minutes, but you need to maintain them in your infrastructure.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it…
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Runners will help you keep your Bitbucket costs down, but they do require some
    initial configurations, which are covered in the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: In Bitbucket, enter the repository in which you want to create a branch. Click
    on **Repositories** in the navigation bar.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.54 – Select Repositories from the menu bar](img/B21937_5_54.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.54 – Select Repositories from the menu bar
  prefs: []
  type: TYPE_NORMAL
- en: Select the repository you want to create your branch in.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.55 – Select the repository of your choice from the available repositories](img/B21937_5_55.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.55 – Select the repository of your choice from the available repositories
  prefs: []
  type: TYPE_NORMAL
- en: This will take you to the main repository window.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.56 – Selected repository](img/B21937_5_56.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.56 – Selected repository
  prefs: []
  type: TYPE_NORMAL
- en: Once you are in the repository where you want to add your runner, click on **Repository
    settings** on the left-hand menu.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.57 – Select Repository settings](img/B21937_5_57.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.57 – Select Repository settings
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: You can only have up to 100 runners per repository.
  prefs: []
  type: TYPE_NORMAL
- en: Once in **Repository settings**, scroll all the way down until you get to the
    **PIPELINES** section. From there, click on **Runners**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.58 – Select Runners under PIPELINES](img/B21937_5_58.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.58 – Select Runners under PIPELINES
  prefs: []
  type: TYPE_NORMAL
- en: Click on **Add runner** to add a self-hosted runner.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.59 – Add runner](img/B21937_5_59.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.59 – Add runner
  prefs: []
  type: TYPE_NORMAL
- en: Select the **System and architecture** type for your new runner. There are a
    few different options, and you should select the one appropriate for the type
    of runner you are planning on utilizing.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.60 – Select the System and architecture type](img/B21937_5_60.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.60 – Select the System and architecture type
  prefs: []
  type: TYPE_NORMAL
- en: Give your runner a name.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.61 – Provide a name for the runner](img/B21937_5_61.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.61 – Provide a name for the runner
  prefs: []
  type: TYPE_NORMAL
- en: Provide runner labels.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.62 – Provide runner labels](img/B21937_5_62.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.62 – Provide runner labels
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: You can provide up to 10 runner labels. Use these labels to help schedule when
    your runners execute. Labels can only contain lowercase and alphanumerical characters
    and dots.
  prefs: []
  type: TYPE_NORMAL
- en: Click the **Next** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.63 – Click the Next button to proceed](img/B21937_5_63.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.63 – Click the Next button to proceed
  prefs: []
  type: TYPE_NORMAL
- en: On the next screen, copy the command that is displayed.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.64 – The runner command that is needed to start and configure the
    runner](img/B21937_5_64.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.64 – The runner command that is needed to start and configure the runner
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: You will not be able to retrieve the command information later, so make sure
    you save it in a safe location. You will need this command to install and configure
    your runner later.
  prefs: []
  type: TYPE_NORMAL
- en: Click on the **Next** button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.65 – Click Next to proceed to the next step](img/B21937_5_65.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.65 – Click Next to proceed to the next step
  prefs: []
  type: TYPE_NORMAL
- en: Copy the labels and add them to your `bitbucket-``pipelines``.yml` file.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.66 – Copy labels to include in the YAML file](img/B21937_5_66.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.66 – Copy labels to include in the YAML file
  prefs: []
  type: TYPE_NORMAL
- en: Click on the **Finish** button to finish creating your runner.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.67 – Click Finish to create the runner](img/B21937_5_67.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.67 – Click Finish to create the runner
  prefs: []
  type: TYPE_NORMAL
- en: Important note
  prefs: []
  type: TYPE_NORMAL
- en: Your runner will now be available for your repository but will not be registered
    until you run the command from *Step 9* of this recipe to start the runner. In
    the next recipe, you will walk through an example of creating a valid and usable
    runner.
  prefs: []
  type: TYPE_NORMAL
- en: Your newly created runner, with a state of **UNREGISTERED** will be visible
    in the **Runners** menu within Bitbucket.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 5.68 – List of available runners in the repository](img/B21937_5_68.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.68 – List of available runners in the repository
  prefs: []
  type: TYPE_NORMAL
- en: Now that you have a runner, you can save on build-minute costs. While you need
    to host your own runners, it might be an effective way to save a little money
    if you are consuming a lot of build minutes.
  prefs: []
  type: TYPE_NORMAL
