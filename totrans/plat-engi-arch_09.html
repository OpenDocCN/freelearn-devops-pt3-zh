<html><head></head><body>
		<div id="_idContainer128">
			<h1 id="_idParaDest-222" class="chapter-number"><a id="_idTextAnchor479"/><st c="0">9</st></h1>
			<h1 id="_idParaDest-223"><a id="_idTextAnchor480"/><st c="2"> Choosing Technical Debt to Unbreak Platforms</st></h1>
			<p><st c="47">What is </st><strong class="bold"><st c="56">technical debt</st></strong><st c="70"> and </st><a id="_idIndexMarker913"/><st c="75">how does it unbreak a platform? </st><st c="107">Technical debt is the ongoing cost of maintenance for a piece of software. </st><st c="182">This is the literal money that’s spent on the runtime environment, the time spent operating and updating it, and customer satisfaction. </st><st c="318">Just like monetary debt, technical debt can pile up. </st><st c="371">As the amount snowballs, the team can’t incur new debt or deliver new features as all their working hours are spent on mitigating the </st><span class="No-Break"><st c="505">current issues.</st></span></p>
			<p><st c="520">Indicators that a team is inundated with technical debt are easy to spot: are your teams attempting to maintain extremely outdated software? </st><st c="662">Do you have systems that are operationally fragile and/or prone to crashing? </st><st c="739">Do you use unnecessarily </st><span class="No-Break"><st c="764">complex software?</st></span></p>
			<p><st c="781">If you answer any of those questions with yes, there’s a corresponding cost. </st><st c="859">For instance, updating, securing, and operating outdated software ranges from very costly to impractical. </st><st c="965">Operationally fragile software requires frequent manual intervention, so it will eat up your operations team’s time and increase the chance of burnout. </st><st c="1117">Last but not least, overcomplicated software is usually just plain hard to understand. </st><st c="1204">It’s hard to read and maintain, and this means ongoing development and </st><span class="No-Break"><st c="1275">maintenance costs.</st></span></p>
			<p><st c="1293">No software can be built or adopted that is debt-free, but when that is evaluated alongside its features, it can help guarantee a more successful running state for the platform. </st><st c="1472">In this chapter, we’ll cover the </st><span class="No-Break"><st c="1505">following topics:</st></span></p>
			<ul>
				<li><st c="1522">Taking technical </st><span class="No-Break"><st c="1540">debts consciously</st></span></li>
				<li><st c="1557">Using data to drive </st><span class="No-Break"><st c="1578">design decisions</st></span></li>
				<li><st c="1594">Maintaining and reworking </st><span class="No-Break"><st c="1621">technical debts</st></span></li>
				<li><st c="1636">Rewriting versus refactoring – a </st><span class="No-Break"><st c="1670">practical guide</st></span></li>
				<li><st c="1685">Architectural decision records – document for </st><span class="No-Break"><st c="1732">the Afterworld</st></span></li>
			</ul>
			<h1 id="_idParaDest-224"><a id="_idTextAnchor481"/><st c="1746">Taking technical debts consciously</st></h1>
			<p><st c="1781">“</st><em class="italic"><st c="1783">Choose your technical debt wisely</st></em><st c="1816">,” your author, Hilliary, says all the time. </st><st c="1861">But what does it mean to choose your technical debt? </st><st c="1914">Aren’t we supposed to be solving problems and </st><span class="No-Break"><st c="1960">identifying solutions?</st></span></p>
			<p><st c="1982">Yes. </st><st c="1988">But these two</st><a id="_idIndexMarker914"/><st c="2001"> things are not mutually exclusive. </st><st c="2037">There’s not likely to be a perfect solution readymade off the shelf. </st><st c="2106">Typically, products are designed with specific use cases in mind, but those use cases are not all-encompassing. </st><st c="2218">No product can cover every permutation of every user’s potential needs and workflows. </st><st c="2304">Indeed, it will be the same for your platform as you progress through its life cycle. </st><st c="2390">When we commit to accepting the shortcomings of a solution or technology, that means we’re committing to compensating for that in another way. </st><st c="2533">Such compensation should be managed so that we don’t create additional overhead or manual workflows that result in unsustainable toil for the platform team or the developers. </st><st c="2708">Too much technical debt takes away from the return on investment in </st><span class="No-Break"><st c="2776">the platform.</st></span></p>
			<p><st c="2789">Technical decisions should be made collaboratively. </st><st c="2842">It’s important to try to arrive at a consensus as a team to ensure that the path forward is one at least the majority feel comfortable with. </st><st c="2983">To take on technical debt consciously, you must be able to assess it and understand the answers to </st><span class="No-Break"><st c="3082">important questions.</st></span></p>
			<p><st c="3102">The following is a</st><a id="_idIndexMarker915"/><st c="3121"> technical debt assessment for you to </st><span class="No-Break"><st c="3159">try out:</st></span></p>
			<ol>
				<li><st c="3167">What problems are you </st><span class="No-Break"><st c="3190">solving today?</st></span></li>
				<li><st c="3204">What problems do you not </st><span class="No-Break"><st c="3230">have (yet)?</st></span></li>
				<li><st c="3241">What will this cost us in time to build </st><span class="No-Break"><st c="3282">or adopt?</st></span></li>
				<li><st c="3291">What will this cost us </st><span class="No-Break"><st c="3315">to run?</st></span></li>
				<li><st c="3322">What is necessary to </st><span class="No-Break"><st c="3344">maintain it?</st></span></li>
				<li><st c="3356">What is our </st><span class="No-Break"><st c="3369">expected return?</st></span></li>
				<li><st c="3385">Can the team sustain </st><span class="No-Break"><st c="3407">it </st></span><span class="No-Break"><em class="italic"><st c="3410">as-is</st></em></span><span class="No-Break"><st c="3415">?</st></span><ul><li><st c="3416">If not, is the team prepared to upskill and do they </st><span class="No-Break"><st c="3468">have time?</st></span></li><li><st c="3478">If it’s open source software, how strong is the community? </st><st c="3538">How does the team join </st><span class="No-Break"><st c="3561">that community?</st></span></li></ul></li>
				<li><st c="3576">What will it take for any new team members to get up </st><span class="No-Break"><st c="3630">to speed?</st></span></li>
				<li><st c="3639">When will we know if it’s time </st><span class="No-Break"><st c="3671">to scale?</st></span></li>
				<li><st c="3680">How will </st><span class="No-Break"><st c="3690">we scale?</st></span></li>
				<li><st c="3699">What are our deprecation criteria for </st><span class="No-Break"><st c="3738">this solution?</st></span></li>
			</ol>
			<p><st c="3752">Visualize the answers to these questions as an accounting ledger. </st><st c="3819">After you total everything up, are you coming out ahead or behind? </st><st c="3886">Like your books, these values must be balanced. </st><st c="3934">The balance of technical debt for a team or an organization is more socio-technical than technical. </st><st c="4034">The artistry of engineering can lead to an emotional connection that may create blind spots and flaws that impact the long-term sustainability of a solution. </st><st c="4192">For example, tools written by passionate engineers on the cutting edge more often fall into disuse and disrepair if they weren’t written in a way that invited collaboration from the team, and if the technical pieces exclude a number of the team without the skills necessary to maintain </st><span class="No-Break"><st c="4478">those tools.</st></span></p>
			<p><st c="4490">A solution can be as </st><a id="_idIndexMarker916"/><st c="4512">clever, elegant, and simple as possible and still be unsustainable if it’s not suited for the team or the environment in which the problem being solved exists. </st><st c="4672">For example, if the solution is written in Rust, and the team to date has been using Ruby, then it’s unlikely the team will be able to sustain the solution if the person who designed and implemented </st><span class="No-Break"><st c="4871">it leaves.</st></span></p>
			<p><st c="4881">That’s why of all the questions, the last becomes the most important. </st><st c="4952">Deprecation criteria tell us when it’s time to retire or replace a tool, a system, or any piece of code. </st><st c="5057">All things eventually become legacy software, so a deprecation plan or criteria against which you evaluate the notion of deprecating is an important aspect of sustaining </st><span class="No-Break"><st c="5227">technical debt.</st></span></p>
			<h2 id="_idParaDest-225"><a id="_idTextAnchor482"/><st c="5242">Moving beyond the thinnest viable platform (TVP) sustainably</st></h2>
			<p><st c="5303">When we build a TVP, we </st><a id="_idIndexMarker917"/><st c="5328">commit to the notion of </st><em class="italic"><st c="5352">good enough</st></em><st c="5363">, but as we evolve, what was good enough at one point may start becoming not right. </st><st c="5447">This is the first iteration of the platform’s technical debt. </st><st c="5509">Technical debt is a sign of growth and evolution. </st><st c="5559">It may sometimes be the result of having taken what in retrospect was the wrong decision, but it is just as often the result of moving beyond the point you were at when the decision made sense. </st><st c="5753">To some degree, technical debt is the cost of doing business, while in other respects, it can be considered growing pains. </st><st c="5876">However you look at it, it’s a symptom that needs to be managed </st><span class="No-Break"><st c="5940">or mitigated.</st></span></p>
			<p><st c="5953">When it’s time for the platform to move beyond its thinnest and start on its path toward being the robust solution expected to sustain an organization at scale, we start to reevaluate our past decisions. </st><st c="6158">Do we expand our existing features? </st><st c="6194">Do we replace any components? </st><st c="6224">Do we retire anything that didn’t perform how we expected? </st><st c="6283">This transition into the next generation of the IDP is led by the same data used to define </st><span class="No-Break"><st c="6374">the TVP.</st></span></p>
			<h3><st c="6382">Critical user journeys</st></h3>
			<p><st c="6405">Initially defined in </st><a id="_idIndexMarker918"/><st c="6427">the discovery or planning phase for your IDP, the </st><strong class="bold"><st c="6477">critical user journey</st></strong><st c="6498"> defines the expected workflow of interactions between a user and the IDP and where and how they expect to </st><span class="No-Break"><st c="6605">be successful.</st></span></p>
			<p><st c="6619">However, as organizations evolve, so do these critical user journeys. </st><st c="6690">It’s possible for things that used to be very important to an organization to cease to be as important or to become of lesser importance to something else that has emerged </st><span class="No-Break"><st c="6862">over time.</st></span></p>
			<p><st c="6872">Additionally, if you followed the TVP pattern, then it’s likely that the initial phase of building out the platform excluded some use cases and potential critical user journeys. </st><st c="7051">A regular review of these journeys and consciously deciding to add another or expand on an existing one will shape how your platform grows and how your </st><span class="No-Break"><st c="7203">team innovates.</st></span></p>
			<p><st c="7218">A critical user journey is built around a user story. </st><st c="7273">For </st><em class="italic"><st c="7277">Financial One ACME</st></em><st c="7295">, there will be a need to cater to a certain geographical region, so a user journey would be phrased in the following way: “</st><em class="italic"><st c="7419">As a user of the platform, I want to deploy an application only accessible from North America.</st></em><st c="7514">” Once a user story has been accepted by the platform team, the user journey should be created. </st><st c="7611">Not every proposed user story should be accepted right away. </st><st c="7672">For example, in the preceding story, the regional boundary to access requires supporting infrastructure. </st><st c="7777">If that use case is not business-critical, could be satisfied without additional work, even if sub-optimally, or can be supported outside of the platform, then a different user story may be more important to </st><span class="No-Break"><st c="7985">tackle first.</st></span></p>
			<p><st c="7998">Assuming the user journey “</st><em class="italic"><st c="8026">Deploy an application only accessible from North America</st></em><st c="8083">” is accepted, we could implement it using tools such as Crossplane and the composite feature, which allows the platform engineering team to define a template to deploy an application in a certain region. </st><st c="8289">The user in their journey then simply needs to create an instance of that template, specify all the values, and commit it to Git. </st><st c="8419">The rest is taken care of by the platform’s core delivery tools. </st><st c="8484">The result will be the application that gets deployed, which is only accessible from the specified region. </st><st c="8591">Technically, this can be done through specific ingress routing rules for regional-specific domain names, as shown in the following </st><span class="No-Break"><st c="8722">example definition:</st></span></p>
			<pre class="source-code"><st c="8741">
apiVersion: composites.financialone.acme/v1alpha1
kind: FinancialBackend
metadata:
  name: tenantABC-us
spec:
  service-versions:
    fund-transfer: 2.34.3
    account-info: 1.17.0
  redis-cache:
    version: 7.4.2
    name: transfer-cache
    size: medium
  database:
    size: large
    name: accounts-db
  region: "us-east"
  ingress:
    url: "https://tenantABC.financialone-us.acme"</st></pre>
			<p><st c="9085">For more details on </st><a id="_idIndexMarker919"/><st c="9106">Crossplane, please revisit the </st><em class="italic"><st c="9137">Workload and application life cycle orchestration</st></em><st c="9186"> section of </st><a href="B31164_04.xhtml#_idTextAnchor201"><span class="No-Break"><em class="italic"><st c="9198">Chapter 4</st></em></span></a><span class="No-Break"><st c="9207">.</st></span></p>
			<p><st c="9208">Evaluating the importance and the value of each user story helps to grow the platform sustainably. </st><st c="9308">The team won’t be able to do everything all at once, so it’s important to keep the scope from creeping up at a rate the team </st><span class="No-Break"><st c="9433">cannot sustain.</st></span></p>
			<p><st c="9448">This is the same principle that should be applied to all software engineering, and in this way, the platform and an end-user-facing application are </st><span class="No-Break"><st c="9597">no different.</st></span></p>
			<h2 id="_idParaDest-226"><a id="_idTextAnchor483"/><st c="9610">Avoid over-engineering</st></h2>
			<p><st c="9633">What is </st><a id="_idIndexMarker920"/><st c="9642">over-engineering? </st><strong class="bold"><st c="9660">Over-engineering</st></strong><st c="9676"> is typically characterized by making a very robust and fully featured system that tries to solve every conceivable problem, even before the problem exists. </st><st c="9833">Over-engineering is an </st><a id="_idIndexMarker921"/><st c="9856">easy but dangerous trap to fall into. </st><st c="9894">The first two questions in our assessment help us to avoid over-engineering solutions. </st><st c="9981">Essentially, we’re using those questions to define our goals and our non-goals for each decision. </st><st c="10079">Understanding what problems and use cases we’re solving for and defining what we’re not solving for – or at least not yet – can help guide our decisions and keep our project </st><span class="No-Break"><st c="10253">scope sane.</st></span></p>
			<p><st c="10264">For example, in an observability solution, it’s reasonable to expect a lot of data over time. </st><st c="10359">It’s easy to fall into the antipattern of planning for infinite data and building infrastructure accordingly. </st><st c="10469">Instead, ask </st><span class="No-Break"><st c="10482">targeted questions:</st></span></p>
			<ul>
				<li><st c="10501">How much data is </st><span class="No-Break"><st c="10519">really useful?</st></span></li>
				<li><st c="10533">For how long is it worth it for us to keep </st><span class="No-Break"><st c="10577">this data?</st></span></li>
				<li><st c="10587">How long </st><em class="italic"><st c="10597">must</st></em><st c="10601"> we keep </st><span class="No-Break"><st c="10610">the data?</st></span></li>
				<li><st c="10619">Who needs access to </st><span class="No-Break"><st c="10640">the data?</st></span></li>
			</ul>
			<p><st c="10649">By defining parameters based on your answers, you will allow the data to remain manageable. </st><st c="10742">If there isn’t a use case for keeping data beyond a month or a year, then the solution shouldn’t be to write a system that can handle huge amounts of data. </st><st c="10898">A better solution is a system that handles small amounts of data and regularly purges what it doesn’t need. </st><st c="11006">Alternatively, if full purges don’t meet your use cases or feel too extreme, then data aggregation may be the correct approach. </st><st c="11134">For example, telemetry data that’s collected over several seconds can be rolled up into days, weeks, months, or even years. </st><st c="11258">Data aggregation can allow for data that covers a long period to still exist but without the same need to engineer storage and retrieval mechanisms for vast amounts of data. </st><st c="11432">If you’re feeling like you’re having flashbacks to </st><a href="B31164_07.xhtml#_idTextAnchor381"><span class="No-Break"><em class="italic"><st c="11483">Chapter 7</st></em></span></a><st c="11492">, well spotted. </st><st c="11508">The same questions that help prevent over-engineering also help us to understand our security posture in </st><span class="No-Break"><st c="11613">many cases.</st></span></p>
			<p><st c="11624">Avoiding over-engineering doesn’t mean never planning for the problems you don’t have yet. </st><st c="11716">Failure to plan for the future can also lead to creating solutions that may need to be replaced entirely down the line. </st><st c="11836">Now, this can be good when we look at composable system </st><a id="_idIndexMarker922"/><st c="11892">architectures and the power of microservices. </st><st c="11938">Sometimes, a complete swap of a component is the best way to get the best results. </st><st c="12021">However, it’s not usually an easy or quick thing to do, so if that’s what’s desired, it still needs to be carefully planned and executed along that plan. </st><st c="12175">A general recommendation to avoid overengineering is to solve today’s problems and roadmap tomorrow’s. </st><st c="12278">Keeping systems simpler allows them to be more easily maintained and can help ensure more flexibility as the </st><span class="No-Break"><st c="12387">product evolves.</st></span></p>
			<h2 id="_idParaDest-227"><a id="_idTextAnchor484"/><st c="12403">Build versus buy – building a decision tree</st></h2>
			<p><st c="12447">In the </st><a id="_idIndexMarker923"/><st c="12455">process of adding a new component and evaluating technical debt, one of the most important questions is whether we should build it or buy it. </st><st c="12597">This tends to be more sociotechnical than technical as it involves balancing the innate desire to build with the need to buy if that’s what’s right for </st><span class="No-Break"><st c="12749">the team.</st></span></p>
			<p><st c="12758">It’s natural for engineers to want to engineer things. </st><st c="12814">Our identities, strengths, experiences, and interests bias us toward decisions that align with them. </st><st c="12915">However, it’s critical to take a step back from the emotional and intellectual attachment to solving the problem and look at the options with as unbiased an eye as </st><span class="No-Break"><st c="13079">we can.</st></span></p>
			<p><st c="13086">The following figure is of a decision tree on whether or not to build or buy a solution. </st><st c="13176">Please note that </st><em class="italic"><st c="13193">buy</st></em><st c="13196"> doesn’t always mean spending money; it may also refer to the adoption of a free or open </st><span class="No-Break"><st c="13285">source tool:</st></span></p>
			<div>
				<div id="_idContainer123" class="IMG---Figure">
					<img src="image/B31164_09_01.jpg" alt="Figure 9.1: Build versus buy decision tree"/><st c="13297"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="13538">Figure 9.1: Build versus buy decision tree</st></p>
			<p><st c="13580">Following this </st><a id="_idIndexMarker924"/><st c="13596">decision tree should be done as a group. </st><st c="13637">Some of the questions may have answers that are more subjective or that different team members have differing opinions on. </st><st c="13760">Collaboration is key for moving these </st><span class="No-Break"><st c="13798">decisions sustainably.</st></span></p>
			<p><st c="13820">Let’s work out an example decision tree together. </st><st c="13871">In this case, our fictitious company </st><em class="italic"><st c="13908">Financial One ACME</st></em><st c="13926"> is looking to modernize an older technology stack. </st><st c="13978">As they aim to do this, they’ll likely need to address technical challenges that didn’t exist for them previously, or look to integrate new functionality that wouldn’t have been possible in a system that didn’t use more </st><span class="No-Break"><st c="14198">modern architectures.</st></span></p>
			<p><st c="14219">One such example of new or different functionality might be assessing the adoption of data transformation tools. </st><st c="14333">With more data capabilities existing in a cloud-native architecture, either the product team, the platform team, or both might consider utilizing such a tool to make raw data </st><span class="No-Break"><st c="14508">more useful.</st></span></p>
			<p><st c="14520">For example, if the platform team wanted to collect usage metrics for the platform with Prometheus and help turn that into DORA metrics, a data transformation would be useful in that workflow. </st><st c="14714">Similarly, other use cases for data transformation could be useful across the company, so the implementation would need to take several user needs </st><span class="No-Break"><st c="14861">into account.</st></span></p>
			<p><st c="14874">If we oversimplify this example, we would follow the decision tree </st><span class="No-Break"><st c="14942">as such:</st></span></p>
			<p><em class="italic"><st c="14950">Q: What problem are we trying </st></em><span class="No-Break"><em class="italic"><st c="14981">to solve?</st></em></span></p>
			<p><em class="italic"><st c="14990">A: We need to enable automated </st></em><span class="No-Break"><em class="italic"><st c="15022">data transformations.</st></em></span></p>
			<p><em class="italic"><st c="15043">Q: Is there an </st></em><span class="No-Break"><em class="italic"><st c="15059">existing solution?</st></em></span></p>
			<p><em class="italic"><st c="15077">A: Yes – Apache Airflow and </st></em><span class="No-Break"><em class="italic"><st c="15106">Argo Workflows.</st></em></span></p>
			<p><st c="15121">Note that in this case, the team has identified two potential solutions. </st><st c="15195">From there, the next set of questions should be conducted for both solutions. </st><st c="15273">Does it meet the requirements? </st><st c="15304">Can the team maintain it? </st><st c="15330">And can we afford it? </st><st c="15352">Since both solutions are open source, the affordability question would be more about comparative costs to run, which may not be easily discernable up front. </st><st c="15509">In assessing open source, the most important question when a tool meets the requirements is the team’s ability to maintain the solution. </st><st c="15646">The capabilities of the team can’t be answered in a vacuum and require the team</st><a id="_idIndexMarker925"/><st c="15725"> to weigh in on their capabilities and comfort for a new integration. </st><st c="15795">If upskilling is required, that doesn’t mean that the technical debt isn’t reasonable to take on, but that time must be added to the schedule for everyone to get up to speed so that an answer of </st><em class="italic"><st c="15990">This is potentially sustainable</st></em><st c="16021"> doesn’t become </st><em class="italic"><st c="16037">This </st></em><span class="No-Break"><em class="italic"><st c="16042">is unsustainable</st></em></span><span class="No-Break"><st c="16058">.</st></span></p>
			<h2 id="_idParaDest-228"><a id="_idTextAnchor485"/><st c="16059">The criticality of team buy-in</st></h2>
			<p><st c="16090">While many </st><a id="_idIndexMarker926"/><st c="16102">platform architects will be involved in the day-to-day running of an IDP, it’s equally likely that they will not be. </st><st c="16219">As such, the folks who will be hands-on keyboard managing and maintaining the day-to-day need to be fully invested in the direction of the IDP and its offerings. </st><st c="16381">This will often be the platform team, but if you’ve been building a platform that encourages self-service and collaboration with the entire engineering organization at large, the team will be much larger </st><span class="No-Break"><st c="16585">in scope.</st></span></p>
			<p><st c="16594">There may be cases where it’s impossible to gain 100% consensus, at which stage it will be necessary to </st><em class="italic"><st c="16699">disagree</st></em><st c="16707"> and </st><em class="italic"><st c="16712">commit</st></em><st c="16718">. Team consensus can reduce burnout, but that must be balanced with the need to ensure the IDP continues to evolve along </st><span class="No-Break"><st c="16839">its roadmap.</st></span></p>
			<p><st c="16851">Team buy-in is incredibly important in decisions that will require the team to upskill in some way, such as learning the tool itself or a new programming language. </st><st c="17016">If the team is unwilling or unable to adapt to the technological solution, the solution will not provide value in the end, regardless of its other </st><span class="No-Break"><st c="17163">redeeming qualities.</st></span></p>
			<p><st c="17183">Now that we’re familiar with the concept of technical debt, we can investigate mitigation strategies for that debt by </st><span class="No-Break"><st c="17302">leveraging data.</st></span></p>
			<h1 id="_idParaDest-229"><a id="_idTextAnchor486"/><st c="17318">Using data to drive design decisions</st></h1>
			<p><st c="17355">So far, we’ve </st><a id="_idIndexMarker927"/><st c="17370">discussed the importance of observability data for self-service and developer satisfaction, but not all other use cases for the telemetry data an IDP can collect. </st><st c="17533">Data is a powerful asset that can be used to aid decision-making and help in cost and time savings. </st><st c="17633">For example, when looking at two solutions </st><a id="_idIndexMarker928"/><st c="17676">that seem to split the middle on solution fit and technical debt, it can be hard to know which direction to go. </st><st c="17788">This is where you can leverage data to make your decisions, and to keep track of your </st><span class="No-Break"><st c="17874">technical debt.</st></span></p>
			<p><st c="17889">Nearly all the data your team will need to leverage for decisions will either already be in your observability solution or be an easy addition </st><span class="No-Break"><st c="18033">to it.</st></span></p>
			<h2 id="_idParaDest-230"><a id="_idTextAnchor487"/><st c="18039">Observability is key</st></h2>
			<p><st c="18060">After spending </st><a id="_idIndexMarker929"/><st c="18076">all the time and effort to set up an observability stack and collect and retain data, it would be almost irresponsible to only use that data for incident management and response. </st><st c="18255">Fortunately, platform teams are rarely accused of being irresponsible, so it’s likely you already know that this data can be used in more meaningful ways. </st><st c="18410">Applying observability data to decision-making and using it to identify and manage technical debt are key use cases for your observability stack that are sometimes overlooked or under-emphasized. </st><st c="18606">In </st><a href="B31164_06.xhtml#_idTextAnchor341"><span class="No-Break"><em class="italic"><st c="18609">Chapter 6</st></em></span></a><st c="18618">, we talked about where and how that observability will be applied, but let’s look at those same aspects now for </st><span class="No-Break"><st c="18731">technical debt.</st></span></p>
			<h3><st c="18746">Operational data and toil</st></h3>
			<p><st c="18772">We briefly</st><a id="_idIndexMarker930"/><st c="18783"> introduced the concept of a </st><strong class="bold"><st c="18812">service-level objective</st></strong><st c="18835"> (</st><strong class="bold"><st c="18837">SLO</st></strong><st c="18840">) in </st><a href="B31164_03.xhtml#_idTextAnchor133"><span class="No-Break"><em class="italic"><st c="18846">Chapter 3</st></em></span></a><st c="18855">. We looked at it again in </st><a href="B31164_06.xhtml#_idTextAnchor341"><span class="No-Break"><em class="italic"><st c="18882">Chapter 6</st></em></span></a><st c="18891">, as a </st><a id="_idIndexMarker931"/><st c="18898">key factor in ensuring customer happiness. </st><st c="18941">However, SLO data can also be used to examine and identify </st><span class="No-Break"><st c="19000">technical debt.</st></span></p>
			<p><st c="19015">A SLO is a target. </st><st c="19035">Rarely is that target defined in the first round at the most ideal state since it can be impossible to achieve that out of the gate on a new project. </st><st c="19185">A good SLO definition for a new project will be far more conservative but have a roadmap to the final desired target. </st><st c="19303">Good SLOs are SLOs that evolve with the system </st><span class="No-Break"><st c="19350">they measure.</st></span></p>
			<p><st c="19363">For example, if the ideal SLO is that 99% of application deployments over 28 days will be successful, then an initial target may be as low as 60%. </st><st c="19511">In a situation where everything is greenfield, it’s reasonable to start at a much higher target, but if we look at </st><em class="italic"><st c="19626">Financial One ACME</st></em><st c="19644">, which</st><a id="_idIndexMarker932"/><st c="19651"> is a company that is migrating a significant legacy offering, you know that the team there is starting in a disadvantaged position. </st><st c="19784">Therefore, setting reasonably achievable targets and defining the next after those have been met is a more sustainable approach. </st><st c="19913">This allows the team to stack rank the issues that are impeding success and demonstrate wins. </st><st c="20007">You may be asking yourself, “</st><em class="italic"><st c="20036">Is this gamification?</st></em><st c="20058">” </st><em class="italic"><st c="20061">Yes. </st><st c="20066">Yes, it is</st></em><st c="20076">. However, positive feedback loops are proven effective for reducing burnout and increasing developer happiness. </st><st c="20189">Teams should be set up to win, </st><span class="No-Break"><st c="20220">not fail.</st></span></p>
			<p><st c="20229">SLOs are not the only operational data that matters, however. </st><st c="20292">It’s entirely possible to maintain an SLO through manual intervention and not automation. </st><st c="20382">This is where reliability engineers typically start discussing th</st><a id="_idTextAnchor488"/><st c="20447">e concept of toil. </st><st c="20467">Toil is a boring, repetitive task that must be done regularly or manually. </st><st c="20542">Even a partially automated process is still toil if it requires a human to push the button to get </st><span class="No-Break"><st c="20640">it started.</st></span></p>
			<p><st c="20651">Some toil is</st><a id="_idIndexMarker933"/><st c="20664"> acceptable, such as manually starting a release pipeline for an organization that’s not ready for a full CI/CD implementation. </st><st c="20792">But other toil is not, such as an engineer executing the release for each component of the software every time an upgrade is necessary. </st><st c="20928">Since toil is done by humans, it can be harder to track since tracking toil is toil itself. </st><st c="21020">However, to manage technical debt, maintaining an awareness of toil and creating an action plan to reduce it is critical for ensuring the team has an acceptable level of cognitive load and a continued ability </st><span class="No-Break"><st c="21229">to innovate.</st></span></p>
			<p><st c="21241">Toil for the team and the developers must be looked at both on a case-by-case basis and holistically to avoid death by a thousand papercuts. </st><st c="21383">Just as we interrogate each piece of data we store or each new component we add, every manual task must meet the </st><span class="No-Break"><st c="21496">same scrutiny:</st></span></p>
			<ul>
				<li><st c="21510">Why do we need to </st><span class="No-Break"><st c="21529">do this?</st></span></li>
				<li><st c="21537">How long does </st><span class="No-Break"><st c="21552">it take?</st></span></li>
				<li><st c="21560">How long do we need to </st><span class="No-Break"><st c="21584">do it?</st></span></li>
				<li><st c="21590">Can we </st><span class="No-Break"><st c="21598">automate it?</st></span></li>
			</ul>
			<p><st c="21610">If the answer to “</st><em class="italic"><st c="21629">Can we automate it?</st></em><st c="21649">” is “</st><em class="italic"><st c="21656">Yes,</st></em><st c="21661">” then that must be immediately prioritized and ranked in the backlog of team items, preferably highly since developer time is one of the most valuable assets of the organization aside from data. </st><st c="21858">Each team’s tolerance for toil will vary as it can depend on the composition of the team and their skills. </st><st c="21965">The </st><em class="italic"><st c="21969">Google SRE</st></em><st c="21979"> (</st><a href="https://sre.google/sre-book/table-of-contents/"><st c="21981">https://sre.google/sre-book/table-of-contents/</st></a><st c="22027">) book defines a target maximum for toil at 50%, but teams are going to have their own tolerances based on team personality and other </st><span class="No-Break"><st c="22162">organizational factors.</st></span></p>
			<p><st c="22185">Let’s look at an extremely time-consuming task that needs to be done only once. </st><st c="22266">Imagine one you’ve done before; it doesn’t have to be anything in particular. </st><st c="22344">Some engineers will see the manual task and will just get it out of the way. </st><st c="22421">Others will assess the task, and they’ll automate it even if it’s a one-off and even if that makes the process </st><span class="No-Break"><st c="22532">take longer.</st></span></p>
			<p><st c="22544">This might be because automation that’s been peer-reviewed feels safer to use than steps that can risk human error or because they want to never have to do it again and they’d rather not risk being wrong about the task being a one-off task. </st><st c="22786">This may also be simply because codifying what was done ensures it’s not lost to time and tribal knowledge. </st><st c="22894">Both doing the task and creating the automation for it were examples of toil, but despite taking longer, the process of automation handles technical </st><span class="No-Break"><st c="23043">debt better.</st></span></p>
			<p><st c="23055">Finding your actual tolerance for toil will be a case of trial and error, but one tactic for keeping on top of toil is to set a SLO against it. </st><st c="23200">By treating time spent on toil as a SLO, when that SLO is breached because, say, no more than 50% of our time is spent on toil, then a root cause should be conducted to determine why more time is/was spent and identify the corrective actions to get toil back within expected boundaries. </st><st c="23487">However, teams should feel safe in doing things correctly, even if that means the error budget for toil is burned for one </st><span class="No-Break"><st c="23609">reporting period.</st></span></p>
			<h3><st c="23626">DORA metrics</st></h3>
			<p><st c="23639">If we look back</st><a id="_idIndexMarker934"/><st c="23655"> on the DORA metrics and ratings we defined in </st><a href="B31164_02.xhtml#_idTextAnchor055"><span class="No-Break"><em class="italic"><st c="23702">Chapter 2</st></em></span></a><st c="23711">, it’s easy to see how these metrics can help you remain aware of your </st><span class="No-Break"><st c="23782">technical debt:</st></span></p>
			<table id="table001-8" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style"/>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold"><st c="23797">Elite</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold"><st c="23803">High</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold"><st c="23808">Medium</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><strong class="bold"><st c="23815">Low</st></strong></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold"><st c="23819">Deployment </st></strong><span class="No-Break"><strong class="bold"><st c="23831">Frequency</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><st c="23840">On-demand</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="23850">Between once a day and once </st><span class="No-Break"><st c="23879">a week</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="23885">Between once a week and once </st><span class="No-Break"><st c="23915">per month</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="23924">Between once per week and once </st><span class="No-Break"><st c="23956">per month</st></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold"><st c="23965">Change </st></strong><span class="No-Break"><strong class="bold"><st c="23973">Lead Time</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="23982">Less than </st><span class="No-Break"><st c="23993">1 day</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="23998">Between 1 day and </st><span class="No-Break"><st c="24017">1 week</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24023">Between 1 week and </st><span class="No-Break"><st c="24043">1 month</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24050">Between 1 week and </st><span class="No-Break"><st c="24070">1 month</st></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold"><st c="24077">Change </st></strong><span class="No-Break"><strong class="bold"><st c="24085">Failure Rate</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><st c="24097">5%</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><st c="24100">10%</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><st c="24104">15%</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><span class="No-Break"><st c="24108">64%</st></span></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold"><st c="24112">Failed Deployment </st></strong><span class="No-Break"><strong class="bold"><st c="24131">Recovery Time</st></strong></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24144">Less than </st><span class="No-Break"><st c="24155">1 hour</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24161">Less than </st><span class="No-Break"><st c="24172">1 day</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24177">Between 1 day and </st><span class="No-Break"><st c="24196">1 week</st></span></p>
						</td>
						<td class="No-Table-Style">
							<p><st c="24202">Between 1 month and </st><span class="No-Break"><st c="24223">6 months</st></span></p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="24231">Table 9.1: DORA metrics competencies</st></p>
			<p><st c="24268">If you’ve implemented </st><a id="_idIndexMarker935"/><st c="24291">something such </st><a id="_idIndexMarker936"/><st c="24306">as </st><strong class="bold"><st c="24309">Keptn</st></strong><st c="24314"> or another DORA metrics gathering solution within your IDP, then you’ve likely started tracking these metrics on every component within your IDP. </st><st c="24461">As you track these metrics over time, you may notice </st><span class="No-Break"><st c="24514">certain trends.</st></span></p>
			<p><st c="24529">For example, if lead time to change or deployment failure rates are still in the low to medium range after 6 months, then it would be worth investigating the reasons behind that to see if there’s unaddressed </st><span class="No-Break"><st c="24738">technical debt.</st></span></p>
			<h3><st c="24753">Application performance data</st></h3>
			<p><st c="24782">Relevant to </st><a id="_idIndexMarker937"/><st c="24795">DORA metrics but adjacent in other ways is the performance data for the applications and components within an IDP. </st><st c="24910">While the platform team isn’t responsible for end user applications, the platform knows the state of the pods and containers the application uses. </st><st c="25057">It can also know the success of API calls and response times. </st><st c="25119">The platform team must enable the developers they serve to understand that state as well so that they can evaluate those metrics and determine if something is amiss. </st><st c="25285">This will allow developers to manage their technical debt. </st><st c="25344">This is a key aspect of the serviceability and self-service of the platform for the ongoing success of the company. </st><st c="25460">Remember that the platform, once in use, is the most critical application within the company; it needs to support the success of itself and the end-user-facing </st><span class="No-Break"><st c="25620">application equally.</st></span></p>
			<p><st c="25640">An application may be architected in a highly available way, fully leveraging the power of the K8s platform, but this could also allow it to unintentionally disguise problems or patterns that may be concerning. </st><st c="25852">As such, application performance should be measured and surfaced regularly. </st><st c="25928">As an example, in a system designed for high availability, a pod with three </st><em class="italic"><st c="26004">ReplicaSets</st></em><st c="26015"> may allow the application to run uninterrupted or with the appearance of no interruptions, even if there’s an occasional OOM or other crash. </st><st c="26157">However, the platform would know about those crashes and observability can be used to ensure that the developers who own the application are aware </st><span class="No-Break"><st c="26304">as well.</st></span></p>
			<p><st c="26312">In </st><a href="B31164_06.xhtml#_idTextAnchor341"><span class="No-Break"><em class="italic"><st c="26316">Chapter 6</st></em></span></a><st c="26325">, we discussed ways for the platform to support observability, be a little prescriptive where necessary, and allow developer self-service. </st><st c="26464">Let’s look at an example of where the IDP can be prescriptive about what’s being measured since the state of the application is visible most easily to </st><span class="No-Break"><st c="26615">the platform.</st></span></p>
			<h3><st c="26628">Identifying other critical data</st></h3>
			<p><st c="26660">In </st><a href="B31164_02.xhtml#_idTextAnchor055"><span class="No-Break"><em class="italic"><st c="26664">Chapter 2</st></em></span></a><st c="26673">, we </st><a id="_idIndexMarker938"/><st c="26678">defined KPIs to help advance the adoption of the IDP. </st><st c="26732">Those same data points and metrics that drive adoption can be leveraged to help drive innovation and manage technical debt as well. </st><st c="26864">Additionally, when measuring adoption, a natural consequence is that you’ve measured any failures around adoption. </st><st c="26979">Those failures are a key data point that can help your team understand how developers are relating to </st><span class="No-Break"><st c="27081">the platform.</st></span></p>
			<p><st c="27094">In </st><a href="B31164_06.xhtml#_idTextAnchor341"><span class="No-Break"><em class="italic"><st c="27098">Chapter 6</st></em></span></a><st c="27107">, how to integrate the platform into the company’s way of working was highlighted and we gave the example of a failure to adopt Tekton in favor of GitHub Workflows. </st><st c="27272">This is an example of managing technical debt, as well as an underutilized component that may not be providing</st><a id="_idIndexMarker939"/><st c="27382"> sufficient </st><strong class="bold"><st c="27394">return on investment</st></strong><st c="27414"> (</st><strong class="bold"><st c="27416">ROI</st></strong><st c="27419">) to justify the ongoing cost of maintenance. </st><st c="27466">Usage metrics such as the number of logins or – in the case of Tekton – jobs scheduled per day, week, and month constitute important metrics. </st><st c="27608">If the platform or a component of the platform is failing to see an increase in utilization over time, especially compared to the platform holistically, then it’s time to evaluate </st><span class="No-Break"><st c="27788">that component.</st></span></p>
			<p><st c="27803">Is the component providing ROI, is it reducing cognitive load, is it meeting SLO targets, and are developers happy with it? </st><st c="27928">If the platform or a component is failing along these lines, then it has more marks on the technical debt side of the ledger compared to </st><span class="No-Break"><st c="28065">the returns.</st></span></p>
			<h2 id="_idParaDest-231"><a id="_idTextAnchor489"/><st c="28077">Data retention is technical debt</st></h2>
			<p><st c="28110">While</st><a id="_idIndexMarker940"/><st c="28116"> observability data is incredibly useful to decisions for the future of the platform, it’s important to keep only as much data as you need. </st><st c="28256">As the amount of stored data increases, you’re likely to find that keeping it has diminishing returns and upkeep is a large effort. </st><st c="28388">The more data storage a system requires, the more critical the design of that data storage becomes as it can start to negatively impact system performance as the amount of stored data grows. </st><st c="28579">Additionally, since data is the most critical asset and the most at risk in the event of a security incident, keeping only what is strictly necessary helps manage the surface level of risk and effort involved in measuring the impact of any data leak event. </st><st c="28836">While we authors can’t guarantee how much or how little data you need to keep application performance metrics while carefully deciding to keep the data and following the best practices, what we’ve laid out here and in </st><a href="B31164_07.xhtml#_idTextAnchor381"><span class="No-Break"><em class="italic"><st c="29054">Chapter 7</st></em></span></a><st c="29063"> should help ensure the data that is kept is manageable. </st><st c="29120">Something to keep in mind is that the platform, the users, and the technology will </st><a id="_idIndexMarker941"/><st c="29203">all be very different year over year, so data that’s retained for longer periods becomes less and less applicable as the platform continues to modernize with the industry. </st><st c="29375">It’s best to ensure that any data that’s kept has a compelling reason to be there; otherwise, it’s just another tick on the debt side of </st><span class="No-Break"><st c="29512">the ledger.</st></span></p>
			<p><st c="29523">Now that we know more about how we can use data to identify and manage technical debt, let’s apply it more practically to </st><span class="No-Break"><st c="29646">our platform.</st></span></p>
			<h1 id="_idParaDest-232"><a id="_idTextAnchor490"/><st c="29659">Maintaining and reworking technical debt</st></h1>
			<p><st c="29700">Every </st><a id="_idIndexMarker942"/><st c="29707">aspect of creating an IDP up to now represents a technical debt. </st><st c="29772">Idealists </st><a id="_idIndexMarker943"/><st c="29782">would tell you that if you’ve made smart decisions, there is no technical debt, but frankly, that’s not accurate. </st><st c="29896">A once-thriving open source project can be shuttered with no notice or an unexpected CVE can appear. </st><st c="29997">There will always be debt, regardless of best efforts. </st><st c="30052">What’s critical for organizational health is the ability to manage the fallout from such events and maintain a reasonable pace </st><span class="No-Break"><st c="30179">for innovation.</st></span></p>
			<h2 id="_idParaDest-233"><a id="_idTextAnchor491"/><st c="30194">Own your technical debt</st></h2>
			<p><st c="30218">Owning your </st><a id="_idIndexMarker944"/><st c="30231">architecture means owning the technical debt that it incurs. </st><st c="30292">While this sounds like an abstract concept, it’s very easy to realize the breadth of impact when we start assessing the components of our architecture. </st><st c="30444">Remember this important note from </st><a href="B31164_02.xhtml#_idTextAnchor055"><span class="No-Break"><em class="italic"><st c="30478">Chapter 2</st></em></span></a><span class="No-Break"><st c="30487">?</st></span></p>
			<p class="callout-heading"><st c="30488">Important note</st></p>
			<p class="callout"><st c="30502">The environment you choose for your platform automatically prescribes some parts of your platform, whether you like it or not! </st><st c="30630">Increasing the number of cloud and infrastructure providers exponentially increases the challenges for your </st><span class="No-Break"><st c="30738">platform design.</st></span></p>
			<p><st c="30754">The infrastructure</st><a id="_idIndexMarker945"/><st c="30773"> required to support the IDP can be one of the most sprawling items on the technical ledger. </st><st c="30866">Ownership means that the debt and the surface area of risks associated with it are well-defined and understood. </st><st c="30978">Sometimes, that risk may mean security or compliance-related risks, but usually, in the context of technical debt, we mean risk to the team’s ability to maintain and deliver a product without burning out. </st><st c="31183">It’s on the platform architect to embody that ownership, but they can’t be a superhero here. </st><st c="31276">Ownership of technical debt, including reacting to unexpected situations, is a </st><span class="No-Break"><st c="31355">team effort.</st></span></p>
			<h3><st c="31367">Technical debt and team ceremonies</st></h3>
			<p><st c="31402">The most straightforward</st><a id="_idIndexMarker946"/><st c="31427"> way to engage the entire team in the ownership of technical debt is to bake it into the ceremonies the team participates in. </st><st c="31553">The final look of this should be designed by the team. </st><st c="31608">In an agile working environment, this can include a dedicated review of technical debt during the planning phase of each sprint or project, and it can also look like dedicated time per sprint spent on reducing technical debt, such as toil reductions or tackling identified opportunities </st><span class="No-Break"><st c="31895">for improvement.</st></span></p>
			<p><st c="31911">If your platform team is working in a Kanban fashion, ensuring the backlog is stack-ranked so that technical debt items get picked up among the rest of the work can also be a </st><span class="No-Break"><st c="32087">good strategy.</st></span></p>
			<p class="callout-heading"><st c="32101">Important note</st></p>
			<p class="callout"><st c="32116">There’s a very real and very serious risk of these items being constantly de-prioritized in favor of something else. </st><st c="32234">However, this has a snowball effect: the level of effort required to address technical debt will become greater the longer work </st><span class="No-Break"><st c="32362">is deferred.</st></span></p>
			<p><st c="32374">It’s important to develop immutable ways of keeping technical debt under control. </st><st c="32457">Many organizations have different strategies for solving unexpected problems. </st><st c="32535">What’s important is to master the sociotechnical aspects of your organization to ensure the scales do not tip out </st><span class="No-Break"><st c="32649">of balance.</st></span></p>
			<h2 id="_idParaDest-234"><a id="_idTextAnchor492"/><st c="32660">Platform composability</st></h2>
			<p><st c="32683">The </st><a id="_idIndexMarker947"/><st c="32688">composable nature of the platform lends itself well to being reworked. </st><st c="32759">The components of the IDP should be fairly standalone with few – if any – interdependencies. </st><st c="32852">Thus, the team should feel empowered to decide to leverage this aspect of the platform and deprecate and replace components </st><span class="No-Break"><st c="32976">where appropriate.</st></span></p>
			<p><st c="32994">The team would need to take this decision carefully as replacing an existing component is a little more complicated than just adding a new one. </st><st c="33139">In addition to answering the questions for evaluating new technical debt, another set of questions must be answered for retiring </st><span class="No-Break"><st c="33268">the old.</st></span></p>
			<p><st c="33276">Here are some deprecation criteria </st><span class="No-Break"><st c="33312">to consider:</st></span></p>
			<ul>
				<li><st c="33324">Do we permanently lose the functionality we need or </st><span class="No-Break"><st c="33377">care about?</st></span></li>
				<li><st c="33388">How will this impact </st><span class="No-Break"><st c="33410">the users?</st></span></li>
				<li><st c="33420">What would the transition </st><span class="No-Break"><st c="33447">plan be?</st></span></li>
				<li><st c="33455">What is </st><span class="No-Break"><st c="33464">the timeline?</st></span></li>
				<li><st c="33477">Are we replacing it or just </st><span class="No-Break"><st c="33506">removing it?</st></span></li>
				<li><st c="33518">How long would the original and </st><span class="No-Break"><st c="33551">replacement overlap?</st></span></li>
				<li><st c="33571">Is there a cost difference? </st><st c="33600">If </st><span class="No-Break"><st c="33603">so, what?</st></span></li>
				<li><st c="33612">What are the new </st><span class="No-Break"><st c="33630">maintenance requirements?</st></span></li>
			</ul>
			<h2 id="_idParaDest-235"><a id="_idTextAnchor493"/><st c="33655">Dependencies</st></h2>
			<p><st c="33668">Managing dependencies</st><a id="_idIndexMarker948"/><st c="33690"> is one of the key areas of managing technical debt. </st><st c="33743">While taking on several solutions that the team doesn’t control might initially feel like an anti-pattern for some, the reality is it’s typically easier to manage the state of your dependencies than it is to try to write a fully functional bespoke IDP in a reasonable amount </st><span class="No-Break"><st c="34018">of time.</st></span></p>
			<p><st c="34026">If we look at our dependency matrix from </st><a href="B31164_02.xhtml#_idTextAnchor055"><span class="No-Break"><em class="italic"><st c="34068">Chapter 2</st></em></span></a><st c="34077">, we can apply it to discussions around maintaining the platform and </st><span class="No-Break"><st c="34146">its debt:</st></span></p>
			<div>
				<div id="_idContainer124" class="IMG---Figure">
					<img src="image/B31164_09_02.jpg" alt="Figure 9.2: Dependency matrix"/><st c="34155"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="34286">Figure 9.2: Dependency matrix</st></p>
			<p><st c="34315">Your platform may have a few different types of dependencies. </st><st c="34378">Here are some </st><span class="No-Break"><st c="34392">obvious examples:</st></span></p>
			<ul>
				<li><st c="34409">Open </st><span class="No-Break"><st c="34415">source components</st></span></li>
				<li><st c="34432">Networking and </st><span class="No-Break"><st c="34448">network appliances</st></span></li>
				<li><span class="No-Break"><st c="34466">Databases</st></span></li>
				<li><span class="No-Break"><st c="34476">Paid components</st></span></li>
				<li><st c="34492">Internal or </st><span class="No-Break"><st c="34505">bespoke services</st></span></li>
			</ul>
			<p><st c="34521">In a perfect world, an IDP would always be perfectly uniform, regardless of where it was deployed. </st><st c="34621">However, in multi-cloud or multi-architecture deployments, the infrastructure dependencies are likely</st><a id="_idIndexMarker949"/><st c="34722"> to be similar but different. </st><st c="34752">As such, you may need to build and maintain a couple of different versions of this matrix to be accurate to the environment.  </st><st c="34877">Whatever you decide to do, you will need to ensure these documents are kept up to date to prevent mistakes or security-related issues in </st><span class="No-Break"><st c="35014">the future.</st></span></p>
			<h2 id="_idParaDest-236"><a id="_idTextAnchor494"/><st c="35025">Security</st></h2>
			<p><st c="35034">Often </st><a id="_idIndexMarker950"/><st c="35041">referred to as a moving target, security best practices evolve and change with the industry. </st><st c="35134">When those changes occur, your software has fallen behind, and needing to catch up becomes a tick on your technical debt ledger. </st><st c="35263">For example, if we look at workload identities on the major cloud providers, we see a somewhat real-time example of the industry transforming and a new wave of technical debt </st><span class="No-Break"><st c="35438">being identified.</st></span></p>
			<p><st c="35455">Before, the use of secrets by applications was the norm, and the risks with those secrets were accepted. </st><st c="35561">While mitigating those risks constituted technical debt, there was no better alternative at the time. </st><st c="35663">However, the invention of workload identities removed the need for applications to use secrets to interact with the cloud providers. </st><st c="35796">Instead, they have a role-based identity that they can use to get short</st><a id="_idTextAnchor495"/><st c="35867">-lived tokens, similar to what a human user </st><span class="No-Break"><st c="35912">would have.</st></span></p>
			<p><st c="35923">Now that this technology has hit all three big cloud providers, there are ongoing efforts across the industry to modernize applications and leverage workload identities instead of secrets. </st><st c="36113">For some applications, this will be possible with a refactor, but for others, this may mean a new component will be added or a full-scale rewrite </st><span class="No-Break"><st c="36259">is required.</st></span></p>
			<h2 id="_idParaDest-237"><a id="_idTextAnchor496"/><st c="36271">Not all technical debt has equal weight</st></h2>
			<p><st c="36311">The previous subheading of security is probably the most obvious case of this, but not all technical debt is of equal weight. </st><st c="36438">Anything that compromises the integrity of the system, such as security and compliance, will be very heavily weighted, though other items that may come with a high time cost may find themselves also at the top of </st><span class="No-Break"><st c="36651">the list.</st></span></p>
			<p><st c="36660">For example, while the release of a new application may be done by hand the first time or two, that quickly gets automated away. </st><st c="36790">From there, automation, which is less timely to kick off and less difficult to maintain, takes over. </st><st c="36891">This is a quick and obvious reduction of the effort required to manage the software, but automation still needs maintenance and that would be considered technical debt. </st><st c="37060">However, since it’s unlikely to change often, that debt is less weighty than the release process would have been if left as a </st><span class="No-Break"><st c="37186">manual process.</st></span></p>
			<p><st c="37201">This is why it’s important to regularly review and understand where your team’s time is spent when they’re not innovating, or what gaps have been identified in the </st><span class="No-Break"><st c="37366">platform’s offering.</st></span></p>
			<p><st c="37386">Now that we’ve discussed how to get a handle on your technical debt, let’s expand on this to understand when that debt should be refactored </st><span class="No-Break"><st c="37527">or rewritten.</st></span></p>
			<h1 id="_idParaDest-238"><a id="_idTextAnchor497"/><st c="37540">Rewriting versus refactoring data – a practical guide</st></h1>
			<p><st c="37594">When technical </st><a id="_idIndexMarker951"/><st c="37610">debt snowballs, the team will spend more and more time addressing that debt or the fallout from it, and less time innovating. </st><st c="37736">This looks functionally like higher degrees of operational toil, longer ramp-up and onboarding periods for newer team members and users, and team burnout. </st><st c="37891">It’s important to stay on top of technical debt to ensure developer happiness and innovation are both front and center for the </st><span class="No-Break"><st c="38018">platform team.</st></span></p>
			<p><st c="38032">Sometimes, this snowball can be that things have stopped behaving as expected or took more time than expected. </st><st c="38144">Alternatively, it could be that what was once seen as an acceptable amount of work to run the platform prevents the platform and the team from scaling as the user base grows. </st><st c="38319">Regardless of which exactly it is, as those technical debt items begin to exceed the predefined expectations for normal, the team needs to look at what it would take to return to normal or to find a new </st><span class="No-Break"><st c="38522">good state.</st></span></p>
			<p><st c="38533">The options for this may be to refactor some of the platforms. </st><st c="38597">A refactor could allow for a fairly quick change for long-term gain. </st><st c="38666">For example, when Golang changed how it did version addressing for dependencies, many teams had to go in and adjust their imports to match the new, better, method. </st><st c="38830">Here are some other reasons </st><span class="No-Break"><st c="38858">to refactor:</st></span></p>
			<ul>
				<li><span class="No-Break"><st c="38870">Improve efficiency</st></span></li>
				<li><span class="No-Break"><st c="38889">Improve security</st></span></li>
				<li><st c="38906">Add or change </st><span class="No-Break"><st c="38921">an interface</st></span></li>
			</ul>
			<p><st c="38933">However, when </st><a id="_idIndexMarker952"/><st c="38948">there’s no way to take the current code base or components list and get to a desired state with it, a rewrite may be considered. </st><st c="39077">We’ve already established that at its baseline, the system should be composable, meaning few – if any – serverless functions or scripts acting as helpers. </st><st c="39232">One reason to approach a rewrite of a service would be if the continued use of the service would result in the need to add that</st><a id="_idIndexMarker953"/><st c="39359"> type of helper workload. </st><strong class="bold"><st c="39385">Envoy Proxy</st></strong><st c="39396"> is an example of such a helper workload. </st><st c="39438">Their documentation describes it as “</st><em class="italic"><st c="39475">a high-performance C++ distributed proxy designed for single services and applications, as well as a communication bus and “universal data plane” designed for large microservice “service mesh” architectures” that “runs alongside every application and abstracts the network by providing common features in a platform-agnostic manner.</st></em><st c="39808">” (Source: </st><a href="https://www.envoyproxy.io/"><st c="39820">https://www.envoyproxy.io/</st></a><st c="39846">). </st><st c="39850">However, for</st><a id="_idIndexMarker954"/><st c="39862"> this example, as powerful as Envoy Proxy is, if the only reason to implement it is to support a singular service that is written in another language to the rest of the services, then it may be more worthwhile to rewrite the outlier compared to adding the Envoy </st><span class="No-Break"><st c="40124">Proxy layer.</st></span></p>
			<p><st c="40136">While adding Envoy Proxy would be an elegant and ready-to-go solution, it’s a fairly complex layer to add to the Kubernetes platform, and doing so for only one service would need to be justified compared to that service </st><span class="No-Break"><st c="40357">being rewritten.</st></span></p>
			<h2 id="_idParaDest-239"><a id="_idTextAnchor498"/><st c="40373">Determining whether a rewrite is necessary</st></h2>
			<p><st c="40416">Imagine </st><a id="_idIndexMarker955"/><st c="40425">you’re on a platform team and you’re looking at a component and trying to decide on its future. </st><st c="40521">What would lead you to determine it was time to say goodbye to the component in its current state? </st><st c="40620">One reason could be licensing changes. </st><st c="40659">If the tool you were using used to be open source but has now changed license types, then it might be time to replace it. </st><st c="40781">After all, the open source version may not see any security-related updates, and your team may not have the skills needed to maintain the </st><span class="No-Break"><st c="40919">tool as-is.</st></span></p>
			<p><st c="40930">The decision</st><a id="_idIndexMarker956"/><st c="40943"> tree for rewriting a component should look nearly identical to the decision tree for build versus buy. </st><st c="41047">When you’re at the point where a rewrite feels required, the build versus buy conversation needs to be navigated once again. </st><st c="41172">Where an open source solution or an affordable solution for sale exists, your rewrite could be reduced to implementing a new integration. </st><st c="41310">But if that’s not the case, then a bespoke service may need to </st><span class="No-Break"><st c="41373">be created.</st></span></p>
			<p><st c="41384">However, if you’re looking to expand functionality or achieve some performance gains, this is very unlikely and an entire rewrite is necessary. </st><st c="41529">Unless the component is super old or hasn’t been maintained at all since being written, you’re likely going to be better off refactoring your </st><span class="No-Break"><st c="41671">code base.</st></span></p>
			<h2 id="_idParaDest-240"><a id="_idTextAnchor499"/><st c="41681">Examining the external influences on refactoring with an example</st></h2>
			<p><st c="41746">Sometimes, the</st><a id="_idIndexMarker957"/><st c="41761"> need to refactor doesn’t come from within but is a result of a change in a tool or technology within your ecosystem. </st><st c="41879">Unfortunately, the decisions that are made by the maintainers of these dependencies directly influence your team’s technical debt and can result in a need to refactor the implementation of </st><span class="No-Break"><st c="42068">that tool.</st></span></p>
			<p><st c="42078">A good example of a time to refactor would be when transitioning from using Helm (</st><a href="https://helm.sh/"><st c="42161">https://helm.sh/</st></a><st c="42178">) version </st><strong class="source-inline"><st c="42189">2</st></strong><st c="42190"> to Helm version </st><strong class="source-inline"><st c="42207">3</st></strong><st c="42208"> for Kubernetes package management. </st><st c="42244">Helm is a package manager for Kubernetes deployments. </st><st c="42298">It’s an open source tool that uses a packaging format known as </st><strong class="bold"><st c="42361">charts</st></strong><st c="42367"> to orchestrate the process of installing and upgrading applications on a cluster. </st><st c="42450">A chart is not one file, but rather a collection of files that define the Kubernetes resources required to run an application. </st><st c="42577">For example, Argo CD can be installed on a Kubernetes cluster with </st><span class="No-Break"><st c="42644">Helm charts.</st></span></p>
			<p><st c="42656">Helm 2 was a popular version of Helm until Helm 3 was released in November 2019, but it had some downsides in </st><a id="_idIndexMarker958"/><st c="42767">how it handled </st><strong class="bold"><st c="42782">customer resource definitions</st></strong><st c="42811"> (</st><strong class="bold"><st c="42813">CRDs</st></strong><st c="42817">). </st><st c="42821">While Helm today still doesn’t support upgrading or deleting CRDs, the new method helps Helm to work better for users </st><span class="No-Break"><st c="42939">leveraging CRDs.</st></span></p>
			<p><st c="42955">So, what was</st><a id="_idIndexMarker959"/><st c="42968"> the problem that Helm 3 solved? </st><st c="43001">First, let’s look at what a CRD is. </st><st c="43037">This was explained in greater detail in </st><a href="B31164_04.xhtml#_idTextAnchor201"><span class="No-Break"><em class="italic"><st c="43077">Chapter 4</st></em></span></a><st c="43086">, but if you’ve forgotten, a CRD extends the Kubernetes API. </st><st c="43147">Functionally, what this means is that your Kubernetes cluster now has a concept of your custom resource. </st><st c="43252">In Helm 2, the handling for CRDs was done via the </st><strong class="source-inline"><st c="43302">crd-install hook</st></strong><st c="43318"> method. </st><st c="43327">The hook mechanism in Helm allows a chart to reach out to another dependency and leverage it before the chart is run. </st><st c="43445">While this should have worked in theory, this still resulted in situations where Helm didn’t know about a CRD, so the API extension wasn’t understood by Helm to validate a chart. </st><st c="43624">If a new CRD was added after an installation, upgrades would fail because the </st><strong class="source-inline"><st c="43702">crd-install hook</st></strong><st c="43718"> method wouldn’t be run. </st><st c="43743">This meant previous versions of the charts would have to be completely blown away and replaced if a CRD changed. </st><st c="43856">This was quite disruptive for users of Helm and many teams had to implement workarounds for this in their </st><span class="No-Break"><st c="43962">CI/CD pipelines.</st></span></p>
			<p><st c="43978">Helm 3 changed this user experience by deprecating the previous </st><strong class="source-inline"><st c="44043">crd-install hook</st></strong><st c="44059"> method and removing the underlying functionality that supported it. </st><st c="44128">Now, a CRD directory is needed. </st><st c="44160">The directory path is nested within the chart, and the use of this directory, called </st><strong class="source-inline"><st c="44245">crds/</st></strong><st c="44250">, allows Helm to pause while the CRDs are added to a cluster before continuing with the chart’s execution. </st><st c="44357">Helm upgrades do allow for CRD installation, whereas they didn’t before. </st><st c="44430">Essentially, Helm now knows about new API functionality when it does its chart validation, ensuring a smoother operations experience </st><span class="No-Break"><st c="44563">for users.</st></span></p>
			<p><st c="44573">While the underlying Helm changes were pretty significant, for users of Helm, this equated to refactoring existing charts and upgrading the version of Helm in use. </st><st c="44738">However, this also allowed many users to remove whatever workarounds they had implemented and instead allowed them to leverage Helm’s built-in upgrade functionality. </st><st c="44904">Depending on the size and complexity of the charts being used, these refactors could have been a somewhat significant effort, but nowhere near as much as migrating to a different way of handling software installations and </st><span class="No-Break"><st c="45126">upgrades altogether.</st></span></p>
			<p><st c="45146">To understand the rough scope of the refactoring changes, let’s look at today’s Argo CD Helm Charts</st><a id="_idIndexMarker960"/><st c="45246"> using Helm 3 (</st><a href="https://github.com/argoproj/argo-helm/tree/main/charts"><st c="45261">https://github.com/argoproj/argo-helm/tree/main/charts</st></a><st c="45316">). </st><st c="45320">Within the repository, there’s a collection of charts that are each installed as part of the overall </st><a id="_idIndexMarker961"/><st c="45421">Argo CD project. </st><st c="45438">With Helm, directory structure is very important; without the correct structure, a chart </st><span class="No-Break"><st c="45527">can’t function.</st></span></p>
			<p><st c="45542">If we look at one of the charts, we’ll see that the new CRD directory </st><span class="No-Break"><st c="45613">is present:</st></span></p>
			<div>
				<div id="_idContainer125" class="IMG---Figure">
					<img src="image/B31164_09_03.jpg" alt="Figure 9.3: Argo CD Helm Chart directory structure"/><st c="45624"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="45804">Figure 9.3: Argo CD Helm Chart directory structure</st></p>
			<p><st c="45854">If we take a look at the </st><strong class="source-inline"><st c="45880">values.yaml</st></strong><st c="45891"> file within one of these charts, we’ll see that the CRD usage is </st><span class="No-Break"><st c="45957">very straightforward:</st></span></p>
			<div>
				<div id="_idContainer126" class="IMG---Figure">
					<img src="image/B31164_09_04.jpg" alt="Figure 9.4: CRD configuration in a Helm Chart values.yaml file"/><st c="45978"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="46458">Figure 9.4: CRD configuration in a Helm Chart values.yaml file</st></p>
			<p><st c="46520">The real bulk of the</st><a id="_idIndexMarker962"/><st c="46541"> work to leverage CRDs from a development perspective is within the CRD definitions themselves. </st><st c="46637">Here, the CRD annotations are defined and any other logic that’s required, such as the resource policy, </st><span class="No-Break"><st c="46741">is stated:</st></span></p>
			<div>
				<div id="_idContainer127" class="IMG---Figure">
					<img src="image/B31164_09_05.jpg" alt="Figure 9.5: A CRD from the Argo CD project"/><st c="46751"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><st c="47654">Figure 9.5: A CRD from the Argo CD project</st></p>
			<p><st c="47696">After seeing how CRDs are used with Helm charts today, a natural question would be, “</st><em class="italic"><st c="47782">What did it look like before?</st></em><st c="47812">” The answer is “</st><em class="italic"><st c="47830">It depends.</st></em><st c="47842">” Before the </st><strong class="source-inline"><st c="47856">crd-intall</st></strong><st c="47866"> hook was added to Helm, a common way of working around this issue was to actually break out CRDs into separate charts and then use a bash script to ensure charts were installed in a specific order. </st><st c="48065">The </st><strong class="source-inline"><st c="48069">Istio</st></strong><st c="48074"> project is an example of where this was done. </st><st c="48121">This worked but created more overhead to maintain since the scripts for ensuring proper installations were yet another thing for Helm Chart maintainers to keep up </st><span class="No-Break"><st c="48284">to date.</st></span></p>
			<p><st c="48292">After Helm </st><a id="_idIndexMarker963"/><st c="48304">added the install hook, the ability to deprecate such scripts became possible. </st><st c="48383">While keeping the same CRD files, a user could add the </st><strong class="source-inline"><st c="48438">crd-install</st></strong><st c="48449"> hook annotation. </st><st c="48467">Then, Helm’s underlying component tiller would ensure that the CRD creation was triggered before the rest of the chart </st><span class="No-Break"><st c="48586">was actioned.</st></span></p>
			<p><st c="48599">The</st><a id="_idIndexMarker964"/><st c="48603"> Helm 2 docs explain this further (</st><a href="https://v2.helm.sh/docs/charts_hooks/#hooks"><st c="48638">https://v2.helm.sh/docs/charts_hooks/#hooks</st></a><st c="48682">). </st><st c="48686">The essential thing to know is that a YAML file containing the </st><strong class="source-inline"><st c="48749">crd</st></strong><st c="48752"> hook would look like </st><span class="No-Break"><st c="48774">this initially:</st></span></p>
			<pre class="source-code"><st c="48789">
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: crontabs.stable.example.com
spec:
  group: stable.example.com
  version: v1
  scope: Namespaced
  names:
    plural: crontabs
    singular: crontab
    kind: CronTab
    shortNames:
    - ct</st></pre>
			<p><st c="49040">After, it would</st><a id="_idIndexMarker965"/><st c="49056"> look </st><span class="No-Break"><st c="49062">like this:</st></span></p>
			<pre class="source-code"><st c="49072">
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: crontabs.stable.example.com
  annotations:
    "helm.sh/hook": crd-install
spec:
  group: stable.example.com
  version: v1
  scope: Namespaced
  names:
    plural: crontabs
    singular: crontab
    kind: CronTab
    shortNames:
    - ct</st></pre>
			<p><st c="49364">In itself, this is a very small change. </st><st c="49405">The Helm version in use needed to be updated as well, but overall, this was a very small amount of work that allowed many custom bash scripts to be</st><a id="_idIndexMarker966"/><st c="49552"> taken off the plate of people maintaining Helm Charts for </st><span class="No-Break"><st c="49611">their applications.</st></span></p>
			<p><st c="49630">Sometimes, the process of refactoring is pretty small. </st><st c="49686">It can be as simple as identifying a few areas of inefficiencies or a place where the code could encounter race conditions and making changes to the code so that those situations are improved. </st><st c="49879">Other times, the refactoring could be more sweeping, such as replacing a library or updating the language version to a version with some breaking changes. </st><st c="50034">Whatever the reason for refactoring, it’s typically less effort with a higher return on investment than </st><span class="No-Break"><st c="50138">a rewrite.</st></span></p>
			<h2 id="_idParaDest-241"><a id="_idTextAnchor500"/><st c="50148">Examining a famous rewrite</st></h2>
			<p><st c="50175">If it’s still </st><a id="_idIndexMarker967"/><st c="50190">unclear when a rewrite may be the appropriate choice, we can look to open source software projects for some famous rewrite scenarios. </st><st c="50324">Within the Linux kernel, as well as container technology itself and therefore Kubernetes, we can find a perfect example in cgroups. </st><st c="50456">Cgroups, also known as control groups, are the technology that exists within the Linux kernel to manage computational processes. </st><st c="50585">Cgroups manage resource allocation and generally control processes. </st><st c="50653">Recently, however, in response to community calls for performance improvements, there was a rewrite, and cgroupsv2 </st><span class="No-Break"><st c="50768">was born.</st></span></p>
			<p><st c="50777">This example is particularly interesting because of the pile-on effect. </st><st c="50850">While cgroupsv2 is generally considered superior to v1, and most applications will see performance gains, legacy applications may suffer. </st><st c="50988">In Kubernetes, where one cgroups version or the other must be specified, the issue with legacy applications is apparent. </st><st c="51109">In particular, older Java and Node.js applications will have compatibility issues with the memory querying functions of cgroupsv2 and are likely to </st><a id="_idIndexMarker968"/><st c="51257">experience </st><strong class="bold"><st c="51268">out-of-memory</st></strong><st c="51281"> (</st><strong class="bold"><st c="51283">OOM</st></strong><st c="51286">) errors crashing the workload. </st><st c="51319">For companies using more dated applications, an upgrade of the stack is indicated. </st><st c="51402">This could mean either a rewrite or a refactor, depending on how far behind the legacy code is and what’s needed to bring it up to a compatible version with the </st><span class="No-Break"><st c="51563">new cgroupsv2.</st></span></p>
			<p><st c="51577">Those with</st><a id="_idIndexMarker969"/><st c="51588"> more knowledge of Kubernetes might note that as of current version 1.30 of K8s, Kubernetes still contains the capabilities of using cgroups v1. </st><st c="51733">This is true, and any organization that doesn’t wish to modernize can leverage that capability. </st><st c="51829">However, counting on the continuation of cgroupsv1 over the rewritten version would be remiss as it’s more likely that v1 will be deprecated instead of two versions being maintained. </st><st c="52012">If a modernization wasn’t desired, then instead of a new piece of technical debt, the cluster configurations that specify cgroupsv1 would be added to the team ledger. </st><st c="52179">All new clusters must be created using the cgroupsv1 specifications for as long as it’s supported or for as long as the legacy applications aren’t modernized. </st><st c="52338">If there’s any automation in creating the clusters, then that would need to be refactored and added to the additional configuration. </st><st c="52471">Additionally, while more modern applications will be able to run with cgroupsv1, they may not be as performant as they might have been with cgroupsv2. </st><st c="52622">Regardless of whether the decision was to refactor cluster creation or to modernize workloads that were running on older language versions, the effects of this rewrite rippled across </st><span class="No-Break"><st c="52805">the industry.</st></span></p>
			<p><st c="52818">A final consequence of the rewrite and subsequent adoption of cgroupsv2 as the default is that some new innate Kubernetes features are only compatible with the newer version. </st><st c="52994">In other words, you limit your capabilities by sticking to cgroupsv1 and miss out on leveraging some of the Kubernetes enhancements for </st><span class="No-Break"><st c="53130">workload management.</st></span></p>
			<h2 id="_idParaDest-242"><a id="_idTextAnchor501"/><st c="53150">Transitioning after rewrite</st></h2>
			<p><st c="53178">You’ve</st><a id="_idIndexMarker970"/><st c="53185"> done the rewrite (or maybe replacement) and it’s time to switch things over. </st><st c="53263">Unfortunately, these types of transitions are rarely – if ever – clean and typically require precise planning and execution. </st><st c="53388">The messier the process, the longer the original component must stick around, and the longer the team must balance the operational costs associated with both. </st><st c="53547">To help foster a healthier transition, define a transition plan early and test your transition plan, if possible, to ensure nothing was missed. </st><st c="53691">Additionally, there’s another benefit to writing out and testing a transition plan. </st><st c="53775">The completed plan and tests become a record of the events and a blueprint for future migrations that may need to occur. </st><st c="53896">While we always hope a rewrite is something that only happens once, the reality is that in any business that survives for long periods, multiple rewrites will occur. </st><st c="54062">By documenting this </st><a id="_idIndexMarker971"/><st c="54082">process, you help curb the technical debt of the rewrite. </st><st c="54140">This will help future engineers untangle the history of the system and save them time generating transition plans in </st><span class="No-Break"><st c="54257">the future.</st></span></p>
			<h1 id="_idParaDest-243"><a id="_idTextAnchor502"/><st c="54268">Architectural decision records – document for the Afterworld</st></h1>
			<p><st c="54329">An </st><strong class="bold"><st c="54333">architectural decision record</st></strong><st c="54362"> helps </st><a id="_idIndexMarker972"/><st c="54369">future owners of the platform to understand not just what was done, but why it was done. </st><st c="54458">Maintaining accurate architectural diagrams and documentation is critical to understanding any software system, but the reasoning behind those decisions and final states help future leaders know what to do with the platform in </st><span class="No-Break"><st c="54685">the future.</st></span></p>
			<h2 id="_idParaDest-244"><a id="_idTextAnchor503"/><st c="54696">Why document software architecture?</st></h2>
			<p><st c="54732">Software architecture should be </st><a id="_idIndexMarker973"/><st c="54765">documented for several reasons. </st><st c="54797">First, it can help onboard new team members and users to the project. </st><st c="54867">A good architecture document helps these people understand how the system is used and how data flows </st><span class="No-Break"><st c="54968">through it.</st></span></p>
			<p><st c="54979">Second, it can aid with security and compliance as all security and compliance audits require thorough software architecture documents </st><span class="No-Break"><st c="55115">and diagrams.</st></span></p>
			<p><st c="55128">Finally, it gives you a starting point from which to grow. </st><st c="55188">By documenting the current state, you provide a reference document to plan against. </st><st c="55272">How could a future architect figure out where the platform should go without a good understanding of where </st><span class="No-Break"><st c="55379">it is?</st></span></p>
			<h2 id="_idParaDest-245"><a id="_idTextAnchor504"/><st c="55385">What does good technical documentation look like?</st></h2>
			<p><st c="55435">A </st><a id="_idIndexMarker974"/><st c="55438">good architecture document will have a mixture of images and descriptions. </st><st c="55513">Depending on the granularity of the document, it should show how the users interact with the system, the dependencies of the system, how data moves, how data is stored, where data is changed (if at all), and what the expected outcomes of interactions are. </st><st c="55769">In other words, the documentation should capture what the system does and how it </st><span class="No-Break"><st c="55850">does it.</st></span></p>
			<p><st c="55858">An additional function of the documentation is to record not just the what and how but also the why. </st><st c="55960">Possibly more important than the what and how, the why behind each decision helps guide future decision-making processes. </st><st c="56082">For example, the architect of tomorrow will need to know key information about the </st><span class="No-Break"><st c="56165">decisions made:</st></span></p>
			<ul>
				<li><st c="56180">Was there a limiting factor that caused a </st><span class="No-Break"><st c="56223">less-than-optimal solution?</st></span></li>
				<li><st c="56250">What bar would a replacement solution need to reach to </st><span class="No-Break"><st c="56306">be considered?</st></span></li>
				<li><st c="56320">What were the known risks and mitigations at </st><span class="No-Break"><st c="56366">the time?</st></span></li>
				<li><st c="56375">What were the goals and non-goals </st><span class="No-Break"><st c="56410">and why?</st></span></li>
				<li><st c="56418">What impact does each component have </st><span class="No-Break"><st c="56456">on another?</st></span></li>
			</ul>
			<p><st c="56467">By ensuring you record these aspects of a decision, you’re building a legacy, not </st><span class="No-Break"><st c="56550">legacy software.</st></span></p>
			<p><st c="56566">However, as critical as architectural decision records are, they are not the only important document for your platform. </st><st c="56687">Other types of documentation mentioned in the chapter and book should be compiled and maintained so that you stay on top of the technical debt the system incurs. </st><st c="56849">While managing the documentation’s organization and keeping the documentation updated can feel like toil, and is indeed debt, the time savings gained by doing so pays dividends over time. </st><st c="57037">Searchable, well-organized documentation is the key to a system that stands the test </st><span class="No-Break"><st c="57122">of time.</st></span></p>
			<h2 id="_idParaDest-246"><a id="_idTextAnchor505"/><st c="57130">Our fictitious company – a final look</st></h2>
			<p><em class="italic"><st c="57168">ACME Financial One</st></em><st c="57187"> is a</st><a id="_idIndexMarker975"/><st c="57192"> company that’s designed for our purposes – to feel like many real companies modernizing their technical stacks. </st><st c="57305">In our example, they’re dealing with both legacy systems and new or greenfield systems. </st><st c="57393">As with any real company, this would result in an initial duplication of technical debt. </st><st c="57482">To support engineers during this transition period where two systems exist, a well-designed platform will provide the flexibility required for smooth transitions between the </st><span class="No-Break"><st c="57656">two environments.</st></span></p>
			<p><em class="italic"><st c="57673">ACME Financial One</st></em><st c="57692"> would need to support this with the thinnest viable platform that scales and grows to meet users where they are. </st><st c="57806">Clear documentation of the platform and the processes for leveraging the platform will support the developers in their transition and their adoption of the </st><span class="No-Break"><st c="57962">new environment.</st></span></p>
			<h1 id="_idParaDest-247"><a id="_idTextAnchor506"/><st c="57978">Summary</st></h1>
			<p><st c="57986">If there’s one lesson to take away from this chapter on technical debt, it’s that asking the correct questions at the correct time can help your team build a platform that’s designed to last. </st><st c="58179">The platform may never be </st><em class="italic"><st c="58205">finished</st></em><st c="58213">. There will always be improvements to be found and gains to be made. </st><st c="58283">However, a polished process for managing the platform and its corresponding documentation will allow the team to sustain it while maintaining the </st><span class="No-Break"><st c="58429">team’s health.</st></span></p>
			<p><st c="58443">As you’re tackling technical debt, remember the example indicators and questions we discussed in the introduction to this chapter. </st><st c="58575">Spotting technical debt and knowing the corresponding costs will allow you to better communicate and prioritize addressing those items with those teams that need to address them. </st><st c="58754">While addressing technical debt is time-consuming and costly on its own, it will help you set the foundation for a platform that can last and is ready for </st><span class="No-Break"><st c="58909">future changes.</st></span></p>
			<p><st c="58924">In the next and final chapter, we will discuss changes and how your platform can provide these changes as a stable foundation for your IT organization. </st><st c="59077">You will learn about the idea of sustainable and lightweight architectures and how you can enable your users to follow those approaches. </st><st c="59214">We will challenge the perspective of the golden path as a user-oriented term and question whether we, as platform engineers and architects, don’t also require a golden path. </st><st c="59388">Finally, we’ll close the book with some final thoughts about the next </st><span class="No-Break"><st c="59458">trending topics.</st></span></p>
		</div>
	<div id="charCountTotal" value="59474"/></body></html>