

# 持续测试、质量、安全和反馈的重要性

本 章节 解释了 为什么 **持续测试**、 **质量**、 **安全**和 **反馈** 策略对 **DevOps** 、 **DevSecOps**和 **站点可靠性工程（SRE）** (**SRE**) 至关重要。 为了理解这一点，首先需要了解 DevOps、DevSecOps 和 SRE 的原则和支柱如何依赖于持续测试、质量、安全和反馈的原则与支柱。 这一点在某种程度上得到了简化，因为 DevOps 和 DevSecOps 等 **持续交付** (**CD**) 策略的支柱是相似的，因此可以将其组合在一起进行比较。 持续运营的原则和支柱等同于 SRE，因此它们会在一个 单独的章节中进行比较。

本章分为 三个部分：

+   为什么持续策略对 DevOps 和 DevSecOps 很重要

+   为什么持续策略对 SRE 很重要 对于 SRE

+   没有正确实施持续实践的情况下实施 DevOps、DevSecOps 和 SRE 的后果 持续实践

让我们 开始吧！

# 为什么持续策略对 DevOps 和 DevSecOps 很重要

本 部分 介绍 DevOps 和 DevSecOps CD 策略的原则与支柱。 这一部分解释了这些实践的原则和支柱为何依赖于持续测试、质量、安全和 反馈策略的原则和支柱。

## DevOps 和 DevSecOps 的原则与支柱

DevOps 和 DevSecOps 是相关的策略，它们都促进了 CD，尽管它们强调软件开发和 交付过程的不同方面。

### DevOps 实践的九大支柱

DevOps 主要关注改善软件 **开发** (**Dev**)与 **运维** (**Ops**)团队之间的协作。 其目标是简化开发 流水线，实施 自动化，并实现更快速、更高效的软件交付。 软件交付。

正如 Marc Hornbeek 在 *《工程化 DevOps》* (2019 年与 Bookbaby 出版)中定义的那样，DevOps 的九大支柱代表了成功实施 DevOps 所必需的基本原则和实践。 每个支柱在支持和增强 DevOps 哲学中都扮演着独特的角色，DevOps 哲学专注于改善协作、自动化和软件开发及交付的整体效率。 以下是每个支柱的解释： 这些支柱：

+   **领导力**：有效的领导力 对于推动 DevOps 所需的文化和组织变革至关重要。 领导者必须倡导 DevOps 原则，促进部门间的协作，并确保团队配备必要的工具和培训。 他们在打破部门壁垒和营造支持持续改进 与创新的环境中发挥着关键作用。

+   **协作文化**：DevOps 强调软件开发人员、IT 运维人员及软件交付过程中其他相关方之间的协作和沟通文化。 协作文化涉及共享责任、透明度和开放的沟通，这对于快速高效地进行软件开发、测试和部署至关重要。 这些文化元素是推动软件开发和交付顺利进行的基础。

+   **为 DevOps 设计**：这涉及到 以支持 DevOps 实践的方式设计软件和系统。 它包括模块化、可扩展性和可维护性等方面的考虑。 设计应便于快速更新、快速部署和高效操作，符合自动化 和持续交付（CD）原则。

+   **持续集成（CI）**：CI 是 将代码更改频繁集成到共享代码库中的实践。 每次集成都通过自动构建和测试过程进行验证，以尽可能快速地检测集成错误，从而减少集成问题并提高 软件质量。

+   **持续测试**: 持续测试 包括作为软件交付管道一部分执行自动化测试。 这确保了软件质量在整个开发过程中得到保持，使团队能够及早识别和解决问题，从而实现更快和更可靠的 软件发布。

+   **弹性基础设施**: 弹性基础设施 指的是根据需求动态调整资源的能力。 在 DevOps 的背景下，这意味着使用虚拟化和基于云的服务 以及 **基础设施即服务** 技术，这些技术 支持计算资源的灵活分配，促进应用程序的快速和高效部署与运行。

+   **持续安全**: 持续安全，或 DevSecOps，将安全实践融入到每一个软件 开发 和部署过程中。 它包括对安全威胁的持续监控、定期的漏洞评估，并将安全控制集成到 CI/CD 管道中。

+   **持续交付（CD）**: CD 是 一种软件工程 方法，团队通过短周期地生产软件，确保随时可以可靠地发布。 其目标是以更快的速度和频率构建、测试和发布软件，从而降低交付变更的成本、时间和风险。

+   **持续监控**: 持续监控 包括持续收集、处理和分析来自软件应用程序和基础设施的数据（性能指标、日志等）。 这一实践有助于主动识别和解决问题，了解系统性能，并确保系统可靠 且高效地运行。

这九大支柱共同构成了一个全面的框架，用于实施和优化 DevOps 实践。 它们鼓励采取一种整体方法来进行软件开发和交付，侧重于协作、自动化、持续改进和高度 的运营效率。 通过整合这些实践，DevOps 旨在缩短开发周期，提高软件质量，并增加发布频率，从而更快速地响应市场需求和 用户需求。

### DevSecOps 实践的九大支柱

DevSecOps 扩展了 DevOps 模型，通过将安全实践融入所有 DevOps 支柱中。 这一策略强调安全不应是事后的考虑，而应是开发过程中的核心组成部分。 DevSecOps 致力于在 CI/CD 流水线中嵌入自动化的安全检查和平衡机制，确保安全性持续被考虑，并且不会影响 交付过程。

正如 Marc Hornbeek 在 *《工程化 DevOps》*中定义的那样，DevOps 的九大支柱同样适用于 DevSecOps。 虽然这些支柱相同，但每个支柱下的具体实践是互为补充的。 DevSecOps 的九大支柱确保安全性不是一个独立的元素，而是无缝地嵌入到软件开发和交付流程的每一个阶段。 以下是对 DevSecOps 每个支柱的解释：

+   **领导力**：强有力的领导力 在推动将安全性成功融入 DevOps 实践所需的文化转变中至关重要。 领导者必须将安全性作为核心价值观，确保在组织的各个层级都将其优先考虑，并确保团队拥有实现 DevSecOps 的资源和支持。

+   **协作文化**：在 DevSecOps 中，协作文化至关重要，开发、运维和安全团队需要紧密合作。 这种协作确保了对安全的共同理解和责任，能够更快速、更有效地识别和解决 安全问题。 安全问题。

+   **为 DevOps 设计**：这意味着在设计系统和应用程序时，要同时考虑 DevOps 和 安全性因素。 这包括从一开始就以模块化、可扩展性和安全性为目标进行构建，确保系统既具有敏捷性 又是安全的。

+   **持续集成（CI）：** 在 DevSecOps 中，CI 包括频繁地集成代码更改，并且 确保每个更改都会自动进行安全性测试。 这种方法有助于在 开发过程中及早识别和解决安全漏洞。

+   **持续测试**：在 DevSecOps 中，持续测试不仅仅是功能性和 性能的测试， 还包括定期的自动化安全测试。 这确保了在软件开发的每个阶段，安全性都在持续验证。 生命周期中。

+   **弹性基础设施**：在 DevSecOps 中，弹性基础设施强调根据不同需求迅速扩展资源的能力，同时保持安全性。 它涉及使用云服务和虚拟化，配合版本控制和灵活的配置控制，以支持操作灵活性和 安全要求。

+   **持续安全**：持续安全 是 DevSecOps 的核心。 它涉及将安全实践融入软件开发和部署过程的每个阶段，从最初的设计到操作，确保持续的监控 和合规性。

+   **持续交付（CD）**：在 DevSecOps 的背景下，CD 是指一个过程，其中代码变更会自动 构建、测试（包括安全测试），并为发布到生产环境做准备，确保软件能够随时以 高度安全性进行部署。

+   **持续监控**：这 涉及不断 监控已部署的软件和基础设施中的安全威胁。 持续监控使得能够快速检测并响应安全事件、漏洞 和异常情况。

这些支柱中的每一项都在将安全嵌入 DevOps 流水线中发挥着至关重要的作用，确保安全考量成为开发和 部署过程中的一个不可或缺且持续的部分。 它们共同构成了一个全面的框架，旨在有效实施 DevSecOps，使安全与现代 软件开发的快速和敏捷特性相契合。

### DevOps 与 DevSecOps 的对齐

DevOps 和 DevSecOps 都共享促进 CD 的共同目标，但它们的重点不同：DevOps 优先考虑效率和速度，而 DevSecOps 在快速的环境中更注重安全性。 这一点是其主要区别。

尽管实现 DevOps 而不实施 DevSecOps 是可行的（不幸的是，行业中有很多这样的例子），但这样做存在一些问题：

+   **安全作为事后考虑**：在纯 DevOps 方法中，过于关注速度和效率可能导致安全被忽视，或者在开发过程的最后才被补充进来。 这可能导致软件中出现漏洞，若漏洞在管道的后期被发现，则需要进行修复、集成， 并验证。

+   **被动而非主动的安全**：如果没有将安全整合到 CD 管道中，组织可能会发现自己在部署后才开始应对安全事件，这可能会导致高昂的成本并损害组织的 声誉。

+   **合规风险**：对安全的忽视可能导致不符合行业法规和标准，尤其是在数据保护和隐私 至关重要的领域。

+   **增加对网络威胁的脆弱性**：没有持续安全的 CD 可能会使软件产品更容易受到新兴网络威胁的攻击，因为安全措施可能无法跟上更新和 新功能快速部署的步伐。

+   **碎片化的风险管理方法**：将开发与安全工作分开，可能会导致风险管理方法的碎片化，在开发过程中，安全考虑因素无法充分融入决策过程中 。

总之，尽管 DevOps 和 DevSecOps 都旨在促进持续交付，但从一开始就将安全融入其中——正如 DevSecOps 所强调的——对确保 DevOps 的速度和效率提升不妥协软件的安全性和完整性至关重要。 因此，结合 DevOps 和 DevSecOps 的原则，采用九大支柱的共同框架来实现平衡、高效和安全的软件交付管道，是至关重要的。 。

*图 2**.1* 来自 *《工程化 DevOps》* 展示了 DevOps 和 DevSecOps 的九大支柱。 如图所示，九大支柱模型展示了所有支柱如何共享一个共同的基础，即编排、自动化和治理，并且有一个共同的“屋顶”，即 CI/CD 管道、应用发布自动化和价值 流管理。

![图 2.1 – DevOps 和 DevSecOps 的九大支柱](img/B21936_02_1.jpg)

图 2.1 – DevOps 和 DevSecOps 的九大支柱

下一个 子部分 将解释 DevOps 和 DevSecOps 的九大支柱如何依赖于持续测试、质量、安全和反馈。

## DevOps 和 DevSecOps 对持续测试、质量、安全和反馈的依赖

DevOps 和 DevSecOps 的九大支柱以各种方式与持续测试、持续质量、持续安全和持续反馈的支柱相交织并相互支持。 每一组支柱都相互补充并强化对方，形成了一个全面的软件开发与运维方法。 它们是这样相互关联的： 

+   **领导力**：通过为测试、质量、安全和反馈倡议提供战略方向、资源和支持，领导力支持所有支柱。

+   **协作文化**：这与持续测试、质量和安全中的协作与沟通，以及在持续反馈中的利益相关者和用户参与相一致，促进了对这些方面的共同责任。

+   **为 DevOps 设计**：这依赖于主动的质量保证、基于风险的测试以及生命周期中的安全集成，确保系统的设计有助于这些实践。

+   **持续集成（CI）**：这直接得到了测试自动化、与开发的集成以及自动化安全测试的支持，使得变更能够频繁且可靠地集成。

+   **持续测试**：这体现了持续测试支柱的原则，确保测试是自动化、集成的，并且不断改进。

+   **弹性基础设施**：这通过持续测试中的测试环境和测试数据管理，以及持续安全中的持续监控和合规性得到支持，确保基础设施在保持质量和安全标准的同时能够适应变化。

+   **持续安全**：这包括了持续安全的支柱，在 DevOps 流水线的每个步骤中都融入了安全实践。

+   **持续交付（CD）**：这依赖于持续质量的稳定和可靠的发布，以及与开发的反馈集成和持续安全的快速事件响应，确保软件能够快速 且安全地发布。

+   **持续监控**：这通过持续安全中的持续监控和合规性支持，并通过持续反馈中的影响和效果度量，提供有关 系统性能、质量和安全性的洞察。

这些 相互依赖性 表明 九大 DevOps 和 DevSecOps 支柱并不是孤立的元素，而是与持续测试、质量、安全性 和反馈的基础方面紧密相连。

![图 2.2 – DevOps 和 DevSecOps 对持续测试、质量、安全性和反馈的依赖](img/B21936_02_2.jpg)

图 2.2 – DevOps 和 DevSecOps 对持续测试、质量、安全性和反馈的依赖

每一组支柱相互增强和强化，形成一种整体且集成的软件开发与交付方法。 这种协同作用对于实现 DevOps 和 DevSecOps 的目标至关重要：快速、可靠、安全和高质量的 软件 交付 满足用户需求和 业务目标。

为什么持续策略对于 SRE 至关重要

本节 介绍了 针对持续运营 SRE 策略的实践原则和支柱。 本节解释了这些实践原则和支柱如何依赖于持续测试、质量、安全性和 反馈策略的原则和支柱。

## SRE 的原则和支柱

SRE 是一门 融合了软件工程方面的学科，并将其应用于基础设施和运营问题。 目标是创建可扩展且高度可靠的 软件系统。

![图 2.3 – SRE 的原则和支柱](img/B21936_02_3.jpg)

图 2.3 – SRE 的原则和支柱

以下是 在*图 2**.3*中说明的 SRE 九大支柱的解释：

+   **文化 – 向左转的生产智慧**：这一支柱强调在软件开发生命周期的早期阶段融入运营知识的重要性。*向左转*意味着从开发过程一开始就考虑可靠性、可扩展性和运营方面的问题，而不仅仅是在结束或部署之后才考虑。这有助于形成一种文化，让生产经验能够影响开发决策。

+   **减少繁琐工作和自动化**：繁琐工作指的是可以自动化的重复性、手动且非战略性的工作。通过自动化减少繁琐工作，使 SRE（站点可靠性工程师）能够专注于更有影响力的工作，从而提高系统的可靠性和效率。这一支柱强调识别并自动化日常任务的重要性。

+   **SLAs / SLOs / SLIs 和错误预算**：**服务级别协议**（**SLAs**）、**服务级别目标**（**SLOs**）和**服务级别指标**（**SLIs**）对于衡量服务的可靠性至关重要。SLAs 是对客户的承诺，SLOs 是服务级别的目标，SLIs 是用于衡量这些级别的指标。错误预算定义了可接受的错误阈值，并帮助平衡可靠性需求与创新进程。

+   **度量与可观测性**：这一支柱关注的是能够衡量和观察系统及基础设施的内部状态。有效的可观测性对于理解系统的性能和行为至关重要，进而为可靠性和效率的决策提供依据。

+   **反脆弱性、演习、混沌工程与安全防御**：反脆弱性不仅仅是抗压能力，它通过应对压力源和挑战来提升系统的韧性。像演习和混沌工程（故意注入故障以测试系统）这样的实践用于使系统更加稳健。该支柱还强调主动的安全防御措施的重要性。

+   **工作共享和渐进的技术债务**：这一支柱倡导开发和运维团队之间的协作工作共享 以便传播知识和责任。 它还强调了渐进管理技术债务的重要性 ，防止其积累到 无法管理的程度。

+   **使用蓝绿部署、A/B 测试和金丝雀发布**：这些部署策略用于 降低发布新版本软件时的风险。 蓝绿部署、A/B 测试和金丝雀发布允许对新变化进行受控曝光，支持在生产环境中测试，并在必要时进行快速回滚。 。

+   **应用和基础设施的性能管理**：这涉及监控和优化 应用程序及其底层基础设施的性能。 这意味着确保软件和其运行的硬件都经过优化，以提高效率、可扩展性和可靠性。 这一支柱包括容量规划，SRE 会确定系统是否能承受峰值负载，并实施应对需求激增的缓解策略 。

+   **事件管理、值班、紧急情况和事后回顾**：有效的事件管理 和在紧急情况下拥有结构化的值班响应对于 SRE 至关重要。 这一支柱还强调了在事件发生后进行回顾的重要性，以便学习和改进。 这关乎于创建一个应对、学习和预防 未来事件的过程。 。

这些 SRE 支柱为构建和维护可靠的系统提供了框架。 它们强调主动和预防性措施、持续改进以及在创新与稳定之间保持平衡的方法。 。

## SRE 依赖于持续测试、质量、安全性和反馈

SRE 的九大支柱 与持续测试、持续质量、持续安全和 持续反馈的原则和支柱紧密相连。

![图 2.4 – SRE 对持续测试、质量、安全性和反馈的依赖](img/B21936_02_4.jpg)

图 2.4 – SRE 对持续测试、质量、安全性和反馈的依赖

*图 2**.4* 和 以下 解释 展示了它们是如何相互关联的：

+   **文化 – 向左迁移的智慧** **生产**：

    +   **持续测试**：与开发和持续学习适应的集成对于左移至关重要。

    +   **持续质量**：主动的质量保证确保质量考虑在早期就已提出。

    +   **持续安全**：生命周期中的安全集成与开发过程中的安全考虑向左迁移保持一致。

+   **减少繁重工作** **和自动化**：

    +   **持续测试**：测试自动化是减少人工测试工作量的关键。

    +   **持续质量**：质量保证自动化有助于自动化质量检查。

    +   **持续安全**：自动化安全测试减少了人工安全检查。

+   **服务级别协议（SLA）/ 服务级别目标（SLO）/ 服务级别指标（SLI）和** **错误预算**：

    +   **持续反馈**：数据驱动的决策和衡量影响与效果的度量与定义和监控 SLA、SLO 以及 SLI 保持一致。

    +   **持续质量**：集成质量度量支持有效 SLO 的建立。

+   **度量** **和可观察性**：

    +   **持续测试**：测试度量提供了可观察性所需的关键信息。

    +   **持续质量**：持续改进依赖于有效的度量。

    +   **持续安全**：持续监控和合规性是可观察性的核心组成部分。

+   **反脆弱性、应急演练、混沌工程和** **安全防护**：

    +   **持续测试**：基于风险的测试与为最坏情况做好准备相一致。

    +   **持续安全**：主动的风险管理和快速的事件响应在这里至关重要。

    +   **持续反馈**：持续学习和适应对于从 这些活动中发展至关重要。

+   **工作共享与增量** **技术债务**：

    +   **持续测试**：协作和沟通促进了 工作共享。

    +   **持续质量**：管理技术债务是持续改进和 风险管理的一部分。

+   **蓝绿部署、A/B 测试** **和金丝雀部署**：

    +   **持续测试**：测试环境和测试数据管理支持这些 部署策略。

    +   **持续质量**：稳定 和可靠的发布对于成功的 蓝绿部署、A/B 测试和 金丝雀部署至关重要。

+   **应用与基础设施的性能管理** **：**：

    +   **持续测试**：测试自动化和测试指标有助于 性能管理。

    +   **持续质量**：以用户为中心的焦点和集成的质量指标对于确保性能与 用户期望一致至关重要。

+   **事件管理、值班、紧急情况** **和回顾**：

    +   **持续反馈**：反馈的透明度和沟通，以及持续学习和适应，对于有效的事件管理和从 回顾中学习至关重要。

    +   **持续安全**：快速响应事件、持续监控和合规性是 这一支柱的基础。

这些 相互依赖关系 表明 SRE 的 支柱并不是独立的元素，而是与持续测试、质量、安全性和反馈深度关联。 每组支柱都相互补充，形成了可靠、安全和高效软件开发 与运维的全面方法。

# 实施 DevOps、DevSecOps 和 SRE 时，如果没有正确实施持续实践，将带来哪些后果

如果在实施 DevOps、DevSecOps 和 SRE 时未正确整合持续测试、质量、安全和反馈的支柱，可能会导致一系列负面后果。 这些方法论旨在与持续实践协同工作，忽视任何一个方面都可能削弱其效果。 以下是每种方法论可能出现的后果示例：

+   **没有适当的 DevOps** **持续实践**：

    +   **测试不足**：如果在 DevOps 中未正确实施持续测试，可能会导致频繁的生产故障，原因是漏洞和性能问题，从而破坏了快速可靠的软件交付目标。

    +   **质量差**：忽视持续的质量保障可能导致软件未能满足用户期望或可用性差，从而降低客户满意度并可能导致信任丧失。

    +   **安全漏洞**：没有持续的安全保障，DevOps 可能会加速部署不安全的软件，从而增加数据泄露和网络攻击的风险。

    +   **与用户需求不匹配**：缺乏持续的反馈会导致开发出的产品与用户实际需求之间存在脱节，从而导致产品未能有效满足市场需求。

+   **没有适当的 DevSecOps** **持续实践**：

    +   **安全漏洞**：如果在 DevSecOps 中未有效实施持续的安全实践，可能会导致漏洞未被检查，暴露组织面临安全风险和合规性问题。

    +   **对安全事件的响应延迟**：没有持续的反馈和监控，可能导致对安全事件的响应较慢，从而加剧泄漏事件的影响。

    +   **忽视质量与测试**：如果未将持续测试和质量集成，即使是以安全为重点的流水线也可能部署存在功能缺陷或性能问题的软件，影响用户满意度和系统可靠性。

+   **没有适当的 SRE** **持续实践**：

    +   **系统不稳定**：未将持续测试和质量集成到 SRE 中，可能导致系统不够健壮或可扩展，从而导致频繁的停机或性能下降。

    +   **运营效率低下**：没有持续反馈和通过自动化减少劳累，SRE 团队可能会花费过多时间应对运营火灾，而不是进行战略性改进，导致精疲力竭 和低效。

    +   **安全措施不足**：忽视 SRE 实践中的持续安全，可能会使系统易受安全威胁，危及系统的可靠性和 用户信任。

    +   **事故管理不当**：缺乏持续反馈机制会阻碍有效的事故管理，导致系统停机时间延长和 恢复速度减慢 从故障中恢复。

总之，缺乏强有力的持续测试、质量、安全和反馈实践，可能会显著削弱 DevOps、DevSecOps 和 SRE 的实施效果。 这可能导致部署不可靠、不安全且质量低劣的软件，增加运营挑战，并无法有效满足用户和业务需求。 因此，全面集成这些持续实践是实现 DevOps、DevSecOps 和 SRE 方法论最大效益的关键。

# 总结

本章阐明了 DevOps、DevSecOps、SRE 与持续测试、质量、安全和反馈实践之间的内在联系，展示了它们在实现高效、安全、可靠的软件交付中的相互依赖性。 软件交付。

DevOps 通过协作和自动化来桥接开发和运维，天然依赖于持续集成（CI）来进行测试和质量保证，以确保软件的快速高效交付。 在 DevOps 工作流中集成持续测试和质量实践，使组织能够在加速开发周期的同时，保持高标准的软件性能和可靠性。 开发周期。

DevSecOps 通过将安全性融入 DevOps 实践的核心，扩展了这一模型。 持续安全的原则，如主动风险管理和自动化安全测试，是 DevSecOps 的关键，确保在追求速度和效率的过程中不妥协安全措施。 持续安全为在软件开发生命周期的每个阶段嵌入安全提供了框架，使其成为 DevOps 实践的基本组成部分，而不是 事后的补充。

SRE 专注于软件系统的可靠性和可扩展性，广泛利用持续实践来实现其目标。 持续测试和质量在设定和维持系统性能和稳定性的高标准方面至关重要。 此外，SRE 通过自动化减少机械工作，并通过持续反馈实践强调性能管理。 这些实践确保 SRE 不仅仅是维持现状，而且不断学习和适应新的挑战和用户需求。 用户需求。

本章强调，尽管 DevOps、DevSecOps 和 SRE 有各自不同的关注点和方法论，但它们的成功基本上取决于持续实践的整合。 持续测试、质量、安全性和反馈并非孤立的策略，而是纳入了软件开发和运营生命周期中这些方法的重要组成部分。 它们为组织提供了开发和维护软件所需的工具、流程和文化心态，这些软件不仅快速高效，而且健壮、安全，并与用户期望保持一致。 用户期望。

总之，本章明确指出，软件开发和运营的未来在于将 DevOps、DevSecOps 和 SRE 与持续测试、质量、安全性和反馈和谐整合起来。 这些策略和实践一旦共同实施，将形成强大的协同效应，推动创新，增强运营效率，并确保交付高质量、可靠和安全的软件产品。 它们代表了现代软件工程的综合方法，具有适应性、韧性，并且以用户为中心。

下一章将解释我个人对持续测试、质量、安全性和反馈策略的终身经验和陷阱。 反馈策略。
