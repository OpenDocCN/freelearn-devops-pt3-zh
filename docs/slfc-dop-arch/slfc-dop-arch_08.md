# 8

# 工单系统

在本章中，我们将讨论在工单系统中跟踪 Salesforce 变更的好处，以及它如何有助于更高效的 DevOps 流程。然后，我们将介绍三款最常用的工具来跟踪 Salesforce 中变更的进度：

+   **JIRA** 是由 Atlassian 开发的一个问题跟踪和项目管理软件，允许团队规划、跟踪和发布软件。

+   **Asana** 是一款工作管理平台，帮助团队在项目中协作、沟通和协调工作。

+   **Azure Work Items** 是在 Azure DevOps 中跟踪的开发任务，用于管理敏捷开发过程并更频繁地发布软件。

到本章结束时，您不仅会清楚地了解这些不同类型的工具包之间的区别，还会知道何时使用它们，以及如何在 Salesforce 中构建它们。

# 技术要求

本章并非旨在提供涉及的产品的逐步指南，但如果您希望深入了解它们，每个产品都提供了一个免费的试用版本以供学习：

+   JIRA – [`www.atlassian.com/software/jira`](https://www.atlassian.com/software/jira)

+   Asana – [`asana.com/`](https://asana.com/)

+   Azure DevOps – [`azure.microsoft.com/en-gb/free`](https://azure.microsoft.com/en-gb/free)

# 跟踪工作带来的好处

任何成功项目的基础都依赖于组织良好的任务管理和跟踪方法。在 Salesforce DevOps 中使用工单系统提供了多重优势。

## 透明度

所有任务及其状态对团队成员可见，促进开放的沟通并推动团队合作。当每个人都能看到需要做什么以及由谁来做时，就能消除重复的工作，并使协调变得更容易。

这种可见性在多个层面上提供了好处——对个别团队成员、团队经理、跨职能利益相关者和领导层都有帮助。对于团队成员来说，所有任务和当前状态都集中在一个工单系统中，让每个人都能看到需要完成的工作以及由谁负责。开发人员可以立即查看哪些工单是**进行中**，哪些是**代码审核中**或**待测试**。测试人员可以查看哪些项目排队等待验证。

实时的可见性消除了重复劳动，因为团队成员可以基于最新的信息进行协调。团队成员不会浪费时间在相同的任务上，或者错过那些阻碍进展的瓶颈。对于管理者来说，工单的透明度有助于评估团队工作负载、识别瓶颈和评估资源需求。工单积压提供了规划容量的数据。等待接受的工单揭示了哪些流程在放慢速度。

在产品、用户体验、开发和质量保证等团队之间，工单系统提供了跨职能的透明度。利益相关者可以监控需要合作的功能或项目的进展。了解彼此的工作流能够促进更好的协调。

对于领导层来说，工单数据会汇总成报告，反映完成率、周期时间和吞吐量。这种高层次的透明度帮助高管了解团队生产力、优先级排序以及战略目标的进展情况。

## 责任

每个工单都分配给特定的团队成员，这有助于跟踪个人绩效。通过将工单与个人绑定，明确了谁负责完成具体任务，支持生产力监控。

将工单分配给特定人员后，谁负责这项工作就不再存在任何模糊之处。责任明确，避免了因为没有人负责而导致任务被忽视。团队成员可以因按时完成任务和交付结果而被追责。

将工单与负责人绑定，有助于在个人层面监控生产力。团队成员和经理可以快速检查某人分配的工单状态，以评估工作负载和完成率。这有助于跟踪绩效和进展。

如果某些工单被阻塞，显然可以知道需要联系哪位团队成员来清除障碍。同样，当工单超出**服务水平协议**（**SLAs**）时，可以通知责任人采取紧急行动。从项目管理的角度来看，能够按负责人过滤和查看工单，使得衡量团队容量和分配工作负载变得容易。为工单添加或移除团队成员有助于适当扩展资源。

除了分配任务之外，一些工单系统还允许设置截止日期、时间估算和提醒。这些功能提供了进一步的责任保障，帮助团队成员管理自己的时间和优先事项。

## 优先级排序

工单系统还促进了优先级排序。工单可以标记优先级或添加标签，从而使团队能够首先关注最为关键的业务事项。

一种方法是为工单分配优先级，例如 P1、P2 和 P3。P1 工单是需要优先处理的关键问题或高优先级特性。P2 和 P3 工单优先级较低，可以排在更高优先级的工作后面。

团队还可以根据工作类型（如 Bug、改进、新特性等）对工单进行分类。影响生产系统的关键 Bug 会被优先处理，而特性增强则会排在后面。

在敏捷框架（如 Scrum）中，优先级排序通过产品待办事项来管理。待办事项按价值排序，最高价值的事项排在最前面，优先在接下来的冲刺中完成。一些工单系统内建了验证和排名功能，在将工单添加到待办事项之前，根据业务价值对请求的工作进行排序。这为待办事项提供了优先级的“入口关”。在冲刺待办事项中，还可以根据估算工作量为工单分配点数，从而按照优先级排序。点数较大的工单会更早开始处理。

在团队层面，每日站会提供了重新调整优先级的机会，以应对紧急或被阻塞的任务。调整工单优先级能够让团队保持专注。从项目组合的角度看，通过战略主题或目标对工单进行标记，帮助领导层评估多个项目和产品之间的优先级。

## 文档记录

此外，工单系统提供了集中化文档记录。避免了有价值的信息分散在各种工具和对话中，任务的详细信息会在每个工单内进行记录，形成一个随着时间推移而持续的知识库。这包括背景信息、需求、验收标准、设计规格、配置、流程、代码片段、测试步骤、沟通记录等。

没有使用工单系统时，这些重要的工作细节会分散在 Slack 对话、电子邮件、维基、文档、便签和个人笔记本中。关键信息被孤立，难以找到。然而，使用统一的工单系统时，与任务相关的所有内容都会以有序的方式记录在一个地方。团队成员可以通过查看工单的历史和附件，轻松了解工单的进展。

搜索工单可以快速找到过去的解决方案，并将其应用于当前的问题或需求。它防止了重复工作，避免了在类似工作已完成并记录的情况下再次进行相同的努力。记录良好的工单为组织创建了记忆，即使团队成员离开或角色发生变化，这些信息也能持续存在。历史工单成为了有价值的参考资料和培训资源。

从流程的角度来看，工单系统能够规范化团队之间的文档实践。可以定义模板工单类型，以指导一致的信息收集，确保任务在工作流中流转时信息一致。

## 协作

在之前的章节中，协作是成功的 Salesforce DevOps 策略中一个反复出现的要素。拥有一个统一的工单系统也有助于跨团队的协作，例如产品、开发、质量保证、支持等。它为跨职能团队提供了一个共享的真实信息来源，确保透明度。

这种透明性具有很大的实际优势。虽然个别事项仍会在初期阶段由产品负责人控制，但可视化的待办事项清单为开发团队提供了一个机会，让他们能够参与到故事的讨论中，特别是当他们觉得某些故事可能过大或过于复杂，需拆解时。它还允许团队为故事绘制出高层次的实施计划，并将它们整理在一起，这样就不会让个别开发人员独自创建解决方案，也能确保无论谁负责工单，都有一定的一致性。

票务系统为这些不同的团队提供了一个共同的平台，使他们可以了解彼此的工作流。例如，产品团队可以监控工程工单，以跟踪新功能的进展。支持团队可以检查待解决的 bug 修复状态。跨部门的洞察力有助于及早识别依赖关系和风险。提前看到障碍使得团队可以主动合作解决问题，而不是后期做出反应。

工单提供了一个集中的沟通渠道，不仅仅是状态更新。团队可以使用`@mention`功能提及相关成员进行意见反馈、澄清需求、请求批准或通过评论进行问题升级。对于复杂项目，不同团队的人可以共同被指派到协作工单上。这确保了通过共同拥有实现一致性。

一些票务系统具有敏捷项目管理功能，例如看板。它提供了一个可视化的协作工作空间，用于管理在不同阶段流转的工单。将问题转换为可操作的工单，反之亦然，有助于简化团队之间的交接。无缝的过渡可以减少跨职能工作流程中的遗漏。看板的另一个好处是能够限制在生命周期中的任何时刻进行中的工作量。这不仅帮助防止开发团队过载，还能提供清晰的流程效率可视化。某一列中的限制可能意味着任务流转不够迅速，或者任务进入过快，或两者兼有。

## 报告与分析

票务系统收集的有价值数据可以用于生成有见地的报告和开发工作流指标。这支持基于数据的决策和流程改进。常见的工单报告包括按分配人、工单类型、优先级、项目等总结工作量。这些视图有助于识别瓶颈和资源缺口。

趋势报告跟踪诸如工单开闭情况等内容。关于周期时间的分析——从工单创建到完成——有助于监控开发过程的效率。按工单类型或项目的周期时间为分析提供了需要简化的领域的洞察。仪表板视图可以直观地跟踪工单积压和服务水平协议（SLA）遵守情况。其他关键指标包括交付时间、吞吐量和在制品限制——所有这些都有助于优化流程。

根据工单记录的时间进行报告有助于基于历史速度提高发布和迭代计划的准确性。通过比较预估时间和实际时间，可以改进工作量估算。对于生产力，报告可以显示各个团队成员的工单完成率。分析模式可能表明需要进行培训、工具改进或资源重新分配。

总体而言，数据分析有助于关联流程变化如何影响工单吞吐量和周期时间。这指导优化工作重点，以实现最大收益。

## 潜在的陷阱

虽然 Salesforce DevOps 中的工单系统提供了相当大的优势，但必须承认它们可能带来的潜在问题。一个主要的风险是将积压的工单误认为是实际的计划。一个良好的维护的积压工单无疑是有益的，但它不能替代全面的计划，比如季度路线图，这些计划能提供项目目标和时间线的更广泛战略视角。

另一个挑战在于工单中内容的性质。单纯依赖工单进行文档记录可能导致信息的零散和分散。这种碎片化使得形成项目的连贯、最新的全貌变得困难，而如果有良好组织和集中管理的文档可用，则可以避免这种情况。补充强有力的文档管理实践是确保清晰和连续性的关键，不能仅依赖工单系统。

最后，如果不加以谨慎管理，团队之间的工单交接可能导致操作孤岛。这与 DevOps 的理念相悖，DevOps 强调不同团队之间的协作与整合。必须培养一种文化，使工单系统增强沟通与合作，而不是在组织的不同部分之间设立壁垒。

# JIRA

JIRA 由 Atlassian 开发，是最受欢迎的工单和项目管理工具之一，广泛用于错误跟踪、问题跟踪和敏捷项目管理。它的主要优势之一是灵活性。团队可以定制他们的工作流程、创建自定义字段，并使用各种插件来满足他们的独特需求。它与 Salesforce 无缝集成，提供统一而高效的工作空间。

在 Salesforce DevOps 环境中，JIRA 可以通过为每个任务、错误或功能创建工单来简化工作流程。这些工单可以被分配、优先级排序，并跟踪直到完成。JIRA 的报告功能为团队表现提供了有用的洞察，而其强大的搜索功能则帮助快速查找问题或工单。

JIRA 在管理端到端 Salesforce 开发过程和通过其灵活的工作流程和可定制性增强 DevOps 协作中起着至关重要的作用。

让我们来看一个典型的使用 JIRA 来管理任务的项目工作流程。我们的示例假设了一个由多个角色组成的相对较大的企业团队，因为这是 JIRA 实施中最典型的使用场景。

## JIRA 项目生命周期

在开始季度路线图规划过程时，产品经理依赖 JIRA 史诗来定义即将发布的主要主题、功能和计划的举措。这些高层次的史诗为团队确立目标和方向。当产品团队进一步深入细节时，这些广泛的史诗会被细化为更具体的用户故事、错误、任务和子任务。这个问题的层级结构既捕捉了大局视角，也涵盖了实现这些目标所需的增量工作。

到达冲刺规划阶段时，JIRA 包含一大批准备执行的明确定义的问题。Scrum 团队充分利用 JIRA 的敏捷能力来估算问题，应用故事点，并为冲刺协商范围。通过映射依赖关系和将问题结构化为连贯冲刺，释放计划开始形成。分配所有者，讨论风险，并挑战假设，以确保团队一致。

一旦冲刺开始，开发人员将负责 JIRA 问题，为复杂问题构建解决方案。JIRA 与整个开发工作流程紧密集成，以实现可追溯性和自动化。用户故事在 Git 的功能分支中进行工作，引用 JIRA 问题编号。所有提交都解释了所做的工作，并在提交消息中映射到问题。用于同行代码审查的拉取请求也指出它们解决的问题。

Git 与 JIRA 之间的这种连接提供了与问题相关的代码更改的端到端可追溯性。它还提供了自动化机会。代码构建可以接受 JIRA 问题 ID，自动将失败和测试结果链接为注释或子问题。通过工作流程阶段转换问题可以触发持续集成中的事件，如构建作业，部署或通知。

例如，当开发人员完成用户故事的编码后，他们将功能分支合并到主分支。这会触发一个持续集成作业，运行 Apex 测试和静态分析。如果出现任何失败，它们将作为 JIRA 中故事的子问题记录，供开发人员解决。成功的构建可以自动将代码更改部署到 Salesforce 沙箱进行 QA 测试。然后，JIRA 问题将进入 QA 测试和验证工作流程的阶段。

QA 工程师通过自动化验证在 Salesforce DevOps 中扮演着积极角色，从而加速发布周期同时提高质量。JIRA 通过链接的测试用例，缺陷和与 CI/CD 管道的紧密集成来支持这一点。QA 记录详细的测试步骤，结果，问题，媒体和其他问题评论，以验证用户故事是否符合验收标准。

为了高效的回归测试，他们使用诸如 Selenium 和 Jasmine 的框架来构建自动化测试套件进行 UI 测试，以及使用 Apex 单元测试进行逻辑测试。这些自动化测试作为持续集成的一部分执行，针对功能分支和主线代码。QA 设置质量门，只有在测试通过并且代码覆盖率达到阈值时，构建才能继续进行。

静态代码分析也包含在构建中，以检查漏洞并强制执行围绕代码质量和最佳实践的自定义规则集。来自任何这些检查的失败都作为子问题或错误记录，提供了质量演变的审计追踪。

当所有自动化验证通过并且质量保证完成探索性测试时，用户故事会通过 JIRA 工作流转移。这往往会触发持续交付工作流程，自动在 Salesforce 沙盒中部署和验证更改。通知下游团队进行用户验收测试。然而，在此方法中有一些需要注意的地方——如果由于某些原因部署失败，您还需要处理并将状态回滚到之前的状态，这显然会更加复杂。值得注意的是，一些团队在他们的 JIRA 看板上实施了“泳道限制”，以防止太多工作停留在任何一个状态。因此，即使您设法将与失败部署相关联的工单状态回滚，可能也没有足够的空间将其移回工作进行中的状态。为了解决这些问题，许多团队采取了相反的方法，即仅在成功部署后更新 JIRA 工单状态。

这种对单元测试、集成测试、UI 测试、性能测试、安全性测试、合规性测试和部署测试的全面自动化，可以快速反馈质量问题。JIRA 提供了关于测试、验证和与交付问题相关的代码更改的可追溯性，同时自动化释放了质量保证人员，让他们可以进行更高价值的测试，同时强化质量标准。

JIRA 在促进 Salesforce DevOps 协作中所需的沟通节奏和透明度方面不可或缺。围绕 JIRA 问题展开的站立会议能够快速检查阻碍因素和进展状态。回顾会议利用 JIRA 数据中的周期时间和速度，持续改进流程。

即使没有明确的敏捷框架，JIRA 也有助于嵌入 DevOps 实践。将工作拆分为小问题可以实现快速交付和反馈。通过定义的工作流跟踪问题，实现管道编排。基于 JIRA 转换的自动交接增加了跨团队的协作。

强大的报告和仪表板突出显示趋势、风险和依赖关系。活动流和通知保持每个人对实时问题变更的了解。JIRA 提供的这种透明度有助于跨部门共享责任。

在 JIRA 中记录的需求和验收标准促进了开发人员、质量保证、安全性以及其他团队之间的协作。通过早期对齐问题详情而非最后一刻的惊喜，实现了流畅的交接。

JIRA 提供了数字化支撑，使 Salesforce 团队能够根据实时数据快速审视和调整。与版本控制、测试自动化和 CI/CD 流水线的紧密集成加速了反馈周期。

JIRA 围绕着站立会议、回顾会议、冲刺规划和工作协调展开。它是一款不可或缺的工具，赋予团队更快交付的能力，同时提升质量和流程。JIRA 可以帮助巩固持续改进、透明化、自动化和协作的环境，这些是 DevOps 的基础。

## 一个高层次的 JIRA 工作流

你的第一步应该是为 Salesforce 发布创建一个 JIRA 项目，其中包括用户故事、缺陷、任务等问题类型。在这个项目中，你应该创建史诗来捕获发布的主要特性和任务，然后将这些史诗拆分为用户故事。

开发人员从待办事项中选择用户故事进行冲刺计划。故事在进行冲刺之前会被估算和优先排序，然后将冲刺中的用户故事移至**进行中**。

开发人员将代码提交到 Git 功能分支，引用与用户故事相关的 JIRA 问题编号。当一个用户故事的工作完成后，开发人员在功能分支准备好进行审查时，会打开拉取请求。拉取请求会链接回 JIRA。

在经过同事的一些代码审查后，拉取请求会被合并到主分支，这可能会触发自动构建。这些构建会执行 Apex 测试和静态代码分析，任何失败都会作为问题追踪到 JIRA 中。

成功的构建可以将代码部署到完整的沙盒环境中进行 QA 测试。QA 测试用户故事，并将任何错误记录为 JIRA 中的问题，供开发人员修复。当用户故事的接受标准满足时，QA 会将该故事移动到**QA** **已批准**状态。

项目经理应审查已完成的故事，由产品负责人提供最终批准。项目经理随后将批准的故事批量部署到生产环境，使用变更集进行部署。

发布经理通常协调用户验收测试（UAT）过程和最终的生产部署。在成功发布后，用户故事将标记为关闭。

在发布后的最终评审阶段，可以收集团队速度、缺陷率等指标，之后该过程会在随后的冲刺和发布中重复进行。

这涵盖了主要步骤，如冲刺计划、CI/CD、与问题相关的代码更改、QA 测试、审批和发布。这个工作流程可以在 JIRA 中根据每个团队的需求高度定制——这只是一个相对典型的示例。

# Asana

Asana 提供了一个强大的工作管理平台，旨在帮助团队有效协调、跟踪并交付组织内的工作。Asana 的核心功能是支持创建灵活的工作流，这些工作流映射到团队流程，并具有可定制的阶段来跟踪任务状态。任务可以根据每个团队的需求，通过列表视图、看板样式的板视图或日历视图进行组织。

选择 Asana 作为首选项目管理平台，可以显著提升 Salesforce 开发团队在从新功能请求到生产环境缺陷修复等方面的计划、跟踪和协作能力。通过在多个不同的 Asana 项目中映射整个开发生命周期，团队可以在整个过程中获得端到端的可视性和控制。

例如，创建单独的项目来管理**待办事项**、**开发中**、**代码审查**、**QA 测试**和**生产发布**，提供了一种逻辑的方法，将工作从创意到部署的各个阶段进行分段。团队还可以通过根据工作流、应用程序或项目进一步划分每个项目的部分来进行组织。这有助于将相关任务聚集在一起，并确保工作的一致性。

在此基础上，我们来看看 Asana 如何从最初的需求收集到最终发布，优化生产力和协调工作。

## Asana 项目生命周期

首先，通过为每个新特性或增强功能请求创建任务，简化了需求收集过程。任务可以包括高级描述、预期交付时间、分配给相应的开发人员或团队、相关文档或工单的链接，以及任何其他支持细节。

在 Asana 中捕捉请求提供了可追溯性，并且便于后续流程中的参考。可以定义自定义字段以匹配团队的工作方式——例如，标明每个任务的优先级、工作量、依赖关系或相关发布版本。

在冲刺规划和待办事项梳理过程中，管理人员可以检查未完成请求的概况，并将最具价值的任务安排到即将到来的迭代中。设置任务之间的里程碑和依赖关系，确保功能的正确顺序和交付。

一旦任务准备好进行开发，就可以将其移入**开发中**项目。这为开发人员提供了清晰的工作负载视图。随着工作的完成，开发人员可以轻松更新任务状态、记录工时、附加截图或代码片段，并在 Asana 内提供任何其他相关评论。

对于开发人员来说，Asana 作为一个中央工作空间，用于跟踪和执行他们在开发阶段分配的任务。一旦在冲刺规划期间识别出工作任务，相应的任务会在**开发中** Asana 项目中创建，并根据开发人员的角色和能力分配给他们。

这些任务包含所有必要的上下文信息，如描述、截止日期、故事点、链接到工单或规范的链接，以及标明正在处理的应用程序或特性的标签。通过将所有这些信息集中在 Asana 中，开发人员可以清楚地知道需要做什么，而无需翻阅收件箱或聊天记录。

随着工作的开始，开发人员可以将较大的任务分解为更细粒度的子任务，以代表完成的各个阶段。他们还可以直接在 Asana 中记录工时，以便捕捉每个任务所花费的时间。内联评论允许开发人员提供进度更新、提出澄清问题或请求反馈。

代码示例、截图和其他相关资料可以在生成时附加到任务中。提及同事会将他们引入到对话中。这创建了一个持续的进展记录和知识共享，伴随任务一起存续。

对于被阻塞或延迟的任务，开发人员可以通过更新状态并通知管理者迅速提出警告。完成后，任务会标记为**准备好进行 QA**，并自动将其路由到工作流程的下一个阶段。与 Git 和 Jenkins 等源代码管理工具的集成意味着代码提交和构建可以自动推动任务通过流水线。

功能完成后，工作转入**代码审查**项目，由 QA 工程师根据规范验证实现。如果发现问题，可以生成与父任务关联的新 bug 任务，便于追踪。这加快了开发者的反馈循环。一旦 QA 批准，经过充分测试的代码将进入用户验收测试和预发布阶段。

可以配置自动化集成，以在每个环境成功部署后更新任务状态。这为团队节省了手动跟踪发布活动的时间。随着工作接近生产准备，Asana 中的变更日志为管理者提供了关于即将发布的完整背景。他们可以立即审查所有已完成的任务、受影响的组件、依赖关系和预期的影响。

这种透明度使得管理者始终保持信息更新，并能及早发现任何障碍。团队成员还可以在评论中被`@提及`，将他们拉入讨论或征求对正在进行工作的反馈。如果有额外的需求，可以在保留与原始父任务关联的情况下，定义新的子任务。

在完整的叙事可见的情况下，任何临时的变更都可以最小化。签字后，点击批准的生产任务上的**Go**按钮。部署后的同行评审和抽查提供了验证，确保一切顺利发布。

任务完成后，在 Asana 中标记为**已关闭**，从开始到完成创建一个永久的审计轨迹。正确估算任务时，每个冲刺中关闭的任务可以反映团队的工作速度，这有助于未来的规划和资源配置。检查每个任务的周期时间还可以揭示环境之间的任何延迟。

需要持续管理 Asana，以制定基于角色的权限、定制字段、设置自动化和监控采用情况。项目和任务模板有助于规范最佳实践并为团队提供起步的基础。定期的 Asana 培训将确保团队成员能够充分利用其全部功能。

与其他基于票证的任务管理系统类似，Asana 对成熟的 DevOps 团队中的沟通和协作作出了重要贡献。在站立会议中，分配给每个开发人员的任务一目了然，最新的更新可见。团队成员可以轻松查看被阻塞的任务、新的障碍以及解除阻碍所需的帮助。管理者能获得各工作线程的速度情况。

回顾环节通过查看历史 Asana 数据（如周期时间、工作负载分配和开发人员的完成率）得到增强。这激发了基于数据的根本原因分析和流程改进。

通过将所有候选故事和缺陷按优先级、范围和工作量详细信息在 Asana 中进行排序，支持对待办事项的整理。这些信息为决定即将进入的冲刺提供指导。

共同的联系点是 Asana 将所有任务、状态和支持性上下文集中化，便于沟通。与聊天或电子邮件不同，这些知识会附加在任务上，供未来参考。Asana 的灵活性支持任何团队仪式的偏好节奏。

通过提供透明的信息，明确谁在做什么以及何时完成，Asana 推动了协作式问题解决、消除障碍和持续改进——这些是 DevOps 的核心原则。通过这种方式，Asana 对于 Salesforce 团队在 DevOps 之旅中的对齐、可见性和速度做出了重要贡献。

## 高级 Asana 工作流

首先创建 Asana 项目，表示 Salesforce 开发生命周期的每个阶段（例如，**待办事项**、**开发中**、**代码审查**、**QA 测试**和**生产发布**）。在每个 Asana 项目中，为不同的工作流创建部分，如新特性、缺陷、增强功能等。当在 Asana 中创建新任务时，将它们与项目的对应 Git 仓库和包含每个任务代码更改的分支关联起来。

当开发人员在任务上工作时，他们会频繁地将代码更改提交到与相关 Asana 任务 ID 相对应的 Git 分支。完成开发后，开发人员将其特性分支推送到 Git 并将 Asana 任务移至**代码审查**。

然后，QA 团队拉取特性分支，在本地验证 Asana 任务中描述的更改，并将任何失败记录为新任务。一旦通过审核，QA 团队会将已验证的代码合并到 Git 中的发布候选分支。这将触发下游环境的部署。

在最终生产部署之前，会对 Git diff 和 Asana 变更日志进行审查，作为最后的检查。发布分支部署到生产环境后，会将其合并到主分支。

所有与发布相关的任务都在 Asana 中关闭，并且可选地将 Git 提交日志链接到 Asana 任务，以保持端到端的可追溯性。作为发布审查过程的一部分，会从 Git 中获取代码覆盖率和质量指标，以提供关于开发人员表现和需要改进的领域的反馈。

通过将 Git 版本控制集成到这一工作流中，代码更改与 Asana 中的项目计划和测试过程同步。这提供了全面的可见性和可追溯性。

# Azure 工作项

与前两种解决方案不同，Azure 工作项是一个更大整体 DevOps 解决方案的子集——该解决方案面向多个平台，而不仅仅是 Salesforce。Azure DevOps 提供了一套完整的协作开发工具，包括 Azure Boards 及其包含的 Azure 工作项，用于工作追踪。当我们专门看与 JIRA 或 Asana 的对比时，Azure Boards 及其工作项功能帮助团队规划、跟踪并讨论整个开发周期中的工作。

Azure DevOps 中的工作项是一种跟踪任务、缺陷、功能等的方式。它们可以组织成一个层次结构，因此你可以将一个大型功能拆解为可管理的任务，并在每个层级上跟踪进展。你可以通过看板、待办事项、定制仪表盘和报告工具来可视化你的工作。

Azure DevOps 充当开发任务的真实来源，而 Salesforce 则直接从服务、销售和市场团队提供客户洞察。查看每个数据源，并且从不同的角度了解 Salesforce 系统当前的状态，能够创建一个有价值的优先级视图。例如，客户服务代理可以在 Salesforce 案件中查看 Azure DevOps 中的 bug 和功能，实时更新客户问题的解决情况。代理可以轻松地将 bug 与支持案件关联起来，向开发人员展示客户的影响。

同时，开发人员可以看到哪些 bug 与高价值账户和即将成交的机会相关。这帮助技术团队将最关键的缺陷优先处理，而不是那些次要的项。通过看到每个工作项的完整上下文，能够实现更智能的缺陷处理，并有效利用开发资源。更快解决高优先级缺陷有助于提高客户留存率和满意度。

另一方面，当开发团队完成与 Salesforce 记录相关的工作项时，变更会立即进行双向同步。例如，当开发人员解决一个关键 bug 时，客户服务代理会立即在 Salesforce 中看到更新。这避免了不必要的来回沟通，并通过集中数据保持客户的更新。

通过这种双向同步，任一系统中的工作项更新始终保持实时同步。避免过时或重复的数据确保了准确性，并在各部门之间提供了唯一的真实来源。这提高了在缺陷解决方面的协作效率。

进一步增强协作，Salesforce 用户可以在熟悉的 CRM 视图中轻松跟踪 Azure DevOps 工作的进展。例如，客户服务经理可以创建自定义的 Salesforce 仪表盘来监控 bug 解决的时间表。客户经理可以直接在账户记录中查看为客户规划的功能。所有数据都原生存在 Salesforce 中，因此无需交叉引用不同的系统。这简化了非技术用户与关键开发任务的互动，而无需学习 Azure DevOps。

转到开发人员端，将 Azure DevOps 工作项导入 Salesforce，可以为技术任务提供更深层次的客户洞察。在传统的孤岛模型中，开发人员对客户需求和业务目标的可见性有限。通过将工作项与账户、机会和支持案例关联，每个工作项的完整背景变得清晰。

通过这种以客户为中心的方式，开发人员可以理解某些 bug 背后的体验和挫败感。看到带有精确用户操作步骤的支持案例来重现错误，比传统的孤立票证更能迅速带来清晰度。工程师们获得了对客户旅程的共鸣和感激，从而激发了构建真正解决痛点的功能。

## Azure 工作项生命周期

现在，我们深入探讨 Azure DevOps 在 DevOps 生命周期中开发阶段的作用，Azure 无缝集成促进了开发人员的生产力和协作。在一个 Azure DevOps 工作区内，开发团队可以规划敏捷 sprint，创建工作项，管理源代码库，执行构建，管理测试，跟踪缺陷，部署到预发布环境等。

例如，开发人员在处理用户故事时，可以轻松查看所有关联的 bug、测试用例、分支和构建，所有信息都集中在一个地方。这消除了在不同的系统之间切换以拼凑上下文的麻烦。Azure Boards 将连接的项目聚合在一起，提高编码效率，减少开销。在 Boards 内，开发人员可以将具体的任务分配给个人，并跟踪每个任务花费的时间。这个级别的可见性使得能够准确追踪工作负载和 sprint 进展。自动化的燃尽图可以绘制完成进度，帮助识别范围蔓延或需要解决的阻碍。

在任务管理方面，Azure Boards 提供的可定制工作流允许创建子任务、优先级指定、状态更改、分配给个人、跟踪剩余工作等。开发人员可以将较大的故事拆解为可执行的开发项目清单。

在任务管理方面，开发人员使用 Azure Repos 进行安全的源代码管理，支持 Git 和 GitHub。诸如分支和合并等高级版本控制功能使开发人员能够在创建新功能时隔离更改。Repos 在整个编码过程中保护代码完整性。

接下来，通过与 Azure Pipelines 集成，开发人员可以在每次代码变更时自动进行构建、测试和部署，从而提供快速反馈。从提交到部署的完整可追溯性简化了根本原因分析。故障能够迅速被标记，以保持开发速度。

在测试方面，开发人员利用 Azure Test Plans 创建测试用例，并与构建自动集成。测试人员可以轻松跟踪需要执行的测试用例，查看测试运行状态，并记录缺陷。将 bug 与失败的测试用例关联起来加速了解决问题。

在开发过程中，团队利用协作工具，如可自定义的团队仪表盘、内置的维基和讨论线程来提高可见性和协调性。所有内容都集中在 Azure 中，开发人员可以减少任务切换，保持专注。通过将开发生命周期集中到 Azure DevOps 中，开发人员获得了一个敏捷、高效且协作的环境，专为现代开发而设计。将这些功能与来自 Salesforce 的客户数据相结合，形成了开发人员交付创新解决方案所需的完整背景。

## 高层次的 Azure Work Items 工作流

若要使用 Azure Work Items 跟踪使用 Azure DevOps Repos 作为 Git 提供者的系统中的更改，你首先需要在 Azure DevOps 中设置一个项目。这个项目是你在 Azure Repos 中的代码和在 Azure Boards 中的项目管理活动（包括你的工作项）的集中枢纽。

一旦你的项目建立，下一步就是在这个项目中配置 Azure Repos。这包括初始化一个新的代码库或将现有代码库导入到 Azure Repos。这个代码库将存储你的代码，并跟踪随着时间推移所做的更改。

设置好你的代码库后，重点转向 Azure Boards，在那里你管理你的工作项。这些工作项可以包括特性、用户故事、任务、缺陷等，代表项目的不同方面。关键是将这些工作项直接与 Azure Repos 中的更改关联。这种关联提供了可追溯性，并清晰地记录了哪些代码更改与哪些项目任务相关联。

为了建立这种关联，在提交更改到 Azure Repos 的代码库时，你需要在提交信息中包含对这些工作项的引用。Azure DevOps 会自动将这些提交与提到的工作项链接。例如，在提交信息中加入类似 `Fixes AB#123` 的短语，将会把该提交与 Azure Boards 中的工作项 123 关联起来。

在 Azure Boards 中，你可以查看每个工作项的开发状态及相关的提交记录。这种可见性让你可以直接从工作项跟踪开发进度，提供了编码和项目管理活动的全面视图。

这个高层次的工作流对于使用 Azure DevOps 进行软件开发的团队至关重要。它确保了代码管理与项目追踪之间的无缝集成，提高了开发过程的整体效率和透明度。

如果需要更详细的说明和最佳实践，你应该参考微软提供的官方 Azure DevOps 文档，其中包含了关于如何设置和管理这些集成的全面指南和逐步教程。

## 使用 Azure Work Items 工作流与 GitHub

同样可以将 GitHub 用作主要的 Git 提供者，同时仍然能够利用 Azure 工作项的追踪功能。我们首先从 GitHub Marketplace 安装 Microsoft Azure Boards 应用程序，这样就授权了两个系统之间的集成。在 GitHub 中，进入**组织设置**，我们可以验证 Azure Boards GitHub 应用是否已正确授权。

接下来，在 Azure DevOps 门户中，我们通过**GitHub 连接**将 Azure Boards 组织连接到指定的 GitHub 账户。在这里，我们指定要与 GitHub 同步的 Azure DevOps 组织、项目和代码库。然后，在 Azure Boards 中的*代码库映射*部分配置关键映射，将 GitHub 仓库与 Azure DevOps 团队和分支对齐。

配置完集成后，开发人员现在可以在 GitHub 中创建拉取请求并提交代码更改，在提交信息中直接引用相关的 Azure DevOps 工作项，使用工作项 ID 格式，前缀为 `AB`（表示 Azure Boards）。例如，在提交信息中添加 `AB#206` 将链接到工作项 ID 为 206 的工作项。

在另一方向上，你可以点击工作项上的**添加链接**按钮，并选择**现有项**，将 GitHub 提交、拉取请求或问题的 URL 链接添加到工作项中。两个系统之间的双向链接提供了编码活动和项目任务、用户故事、缺陷以及在 Azure Boards 中管理的其他工作项之间的完整可追溯性。这种集成提供了一种高效的开发工作流，可以在代码演进时保持进度可视性。

# 总结

在本章中，我们讨论了将任务跟踪或工单系统集成到 DevOps 工作流中所能带来的巨大价值和好处——无论是在通过 Git 集成实现技术层面的支持，还是在提供工作可视化和组织性方面。

我们考察了一些常见的工具选择，这些工具提供了在 DevOps 流水线中管理任务所需的功能，并为每个系统的入门提供了一个高级工作流。希望这能为你带来洞察和灵感，帮助你通过这些解决方案为开发生命周期带来秩序。为了帮助你的决策过程，以下是每个工具的优缺点简要概述：

| **特性** | **JIRA** | **Asana** | **Azure** **工作项** |
| --- | --- | --- | --- |
| **优点** |  |  |  |
| **项目管理** | 高级敏捷管理，强大的缺陷跟踪 | 用户友好，适合任务和项目管理 | 综合的敏捷规划，集成 Azure DevOps |
| **定制化** | 高度可定制，适应复杂工作流 | 简单，易于使用，提供基础定制功能 | 高度可定制，支持复杂工作流 |
| **集成** | 与其他 Atlassian 产品的深度集成 | 与包括 Salesforce 在内的各种应用良好集成 | 与 Microsoft 产品和服务的强大集成 |
| **报告功能** | 强大的报告和分析功能 | 基本但易于使用的报告 | 详细的报告、分析和仪表板 |
| **协作** | 适合技术团队，详细的追踪功能 | 非常适合跨职能团队的协作 | 对与微软生态系统深度集成的团队非常有效 |
| **可扩展性** | 适合大规模和复杂项目的扩展 | 适用于各种规模的团队 | 非常适合大型团队，特别是在企业环境中 |
| **缺点** |  |
| **用户界面** | 界面复杂，学习曲线较陡 | 适用于复杂项目管理的功能有限 | 对非技术用户来说可能显得令人不知所措 |
| **定价** | 对大型团队来说可能非常昂贵 | 高级功能需要付费计划 | 可能会很昂贵，尤其是需要额外的 Azure 服务时 |
| **灵活性** | 对简单项目来说可能过于复杂 | 对复杂技术项目来说灵活性差 | 与其他 Azure 服务紧密关联，独立性较差 |
| **初始设置和学习曲线** | 需要时间进行设置和学习，特别是对非技术用户而言 | 入门简单，但扩展性有限 | 需要熟悉微软生态系统 |
| **跨技术团队的协作** | 对非技术团队成员来说不太直观 | 适用于所有类型的团队 | 最适合已经使用微软工具的团队 |

表 8.1 – 工单系统的优缺点对比

在下一章中，我们将介绍 Salesforce DevOps 的另一个核心支柱——备份你的数据和元数据。我们将探讨为什么将两者都纳入强大备份策略是很重要的，并讨论任何备份的有效性都取决于你能否快速且轻松地恢复它。
