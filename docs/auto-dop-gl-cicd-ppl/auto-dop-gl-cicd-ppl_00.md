# 前言

近年来，组织已经认识到更具协作性和迭代性的开发方法的好处。传统模式下，开发和运维团队各自为政，导致公司难以快速、可靠地交付新功能。DevOps 的推广解决了这一挑战，通过促进开发与运维之间的集成和沟通。而工具和自动化工作流的广泛应用，进一步提高了软件质量和稳定性。

DevOps 的一个关键要素是持续集成与持续交付（或部署）（**CI/CD**）。CI/CD 是将开发人员的贡献定期集成到共享代码库中，并自动构建、测试和发布应用程序的实践。其目标是最小化部署软件更新所需的周期时间，同时减少过程中的人为错误。

本书介绍并教授如何使用 GitLab 作为一个统一的 DevOps 平台来管理软件开发生命周期的各个阶段。内容主要聚焦于概念和示例，而不拘泥于可能随着时间变化的功能特性和 UI 流程。在完成本书后，您将能够使用 GitLab 管理几乎任何软件项目，同时了解适用于其他 DevOps 工作流和 CI/CD 工具的最佳实践。

# 本书适合的人群

本书面向所有参与软件开发生命周期的人，无论项目大小。如果您觉得这个范围很广，那是因为它确实很广！GitLab 提供的功能适用于各种角色的人员。传统的 GitLab 用户包括开发人员、QA、安保测试人员、性能测试人员、产品负责人、项目经理、UX 设计师、技术写作人员、发布工程师，以及那些属于模糊概念“DevOps”和“DevSecOps”范畴的各种角色。所以，如果您参与了软件的规划、编写、测试、安全、构建、打包或部署，或者管理任何相关任务，并且正在考虑如何自动化您当前手动执行的缓慢且容易出错的任务，那么本书几乎肯定能为您提供使用 GitLab 和其自动化 CI/CD 管道来改善工作的思路。

本书假设读者具备一定的软件开发生命周期主要阶段的基础知识。我们预计每位读者会参与到生命周期的不同部分，因此本书将重点介绍与读者相关的内容。这是一种很好的学习方式，尽管我们建议每个读者都先阅读构成第一部分的四章内容，因为它们解释了所有 GitLab 用户都需要了解的背景概念和术语。

# 本书内容

*第一章**，理解 DevOps 之前的生活*，简要回顾了主要的软件开发生命周期阶段，以及在手动执行时可能遇到的问题。

*第二章**，实践基本的 Git 命令*，介绍了 Git，这一强大的版本控制系统，GitLab 正是基于它构建的。

*第三章**，理解 GitLab 组件*，介绍了每个 GitLab 用户都需要熟悉的 GitLab 主要组件。

*第四章**，理解 GitLab CI/CD 管道结构*，解释了 GitLab CI/CD 管道的目的和结构：它们如何工作，如何配置它们，以及如何查看其结果。

*第五章**，安装和配置 GitLab Runner*，探讨了支持 GitLab CI/CD 管道的关键工具。

*第六章**，验证你的代码*，介绍了 GitLab CI/CD 管道功能，专门用于确保你的代码质量高且功能正确。

*第七章**，保护你的代码*，讨论了 GitLab CI/CD 管道扫描器，这些工具能识别你代码中的安全漏洞。

*第八章**，打包和部署你的代码*，解释了如何使用 GitLab CI/CD 管道自动化使用常见的构建和打包工具，使你的代码成为可部署的形式。

*第九章**，提高 CI/CD 管道的速度和可维护性*，介绍了一些加速 GitLab CI/CD 管道并使其易于阅读和维护的技巧。

*第十章**，扩展 CI/CD 管道的应用范围*，解释了如何使用 GitLab CI/CD 管道发现代码中的性能问题，如何在 GitLab 仪表板中启用或禁用产品功能，以及如何使用 GitLab 开发移动应用程序。

*第十一章**，端到端示例*，演示了一个端到端的示例，将你学到的许多 GitLab 技术整合成一个单一、现实的软件开发工作流。

*第十二章**，排除故障及 GitLab 的未来发展*，提供了一些 GitLab CI/CD 管道故障排除的技巧，同时也分享了使用 GitOps 来管理基础设施的思路，以及 GitLab 未来可能的发展方向。

# 为了最大化地利用本书

如果您在[gitlab.com](http://gitlab.com)（即软件即服务实例）或自托管实例上有 GitLab 账户，您将能从本书中获得最大收益。若能访问已安装 Git 的 Linux、macOS 或 Windows 终端，也将非常有帮助。对软件开发生命周期的主要阶段有所了解会更有助于理解本书内容。书中不假设您具有编程知识，但对 YML 或其他结构化数据格式的基本了解将使书中的许多部分更易于理解。

本书中的代码示例是使用 GitLab 15.x 版本测试的，应该也适用于未来的版本。所有截图也来自 GitLab 15.x 版本。未来的版本可能会在 GUI 上产生一些差异，但基本概念和操作应该保持不变。

| **书中涵盖的** **软件/硬件** | **操作系统** **要求** |
| --- | --- |
| GitLab 15+ | Linux、macOS 或 Windows |
| Git | Linux、macOS 或 Windows |

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`：表示文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账号。例如：“将下载的`WebStorm-10*.dmg`磁盘映像文件挂载为系统中的另一个磁盘。”

代码块如下所示：

```
employee_name = get_user_input() 
sql = "SELECT salary FROM employee_records WHERE employee_name = $employee_name" ENTERcall_database(sql) 
```

当我们希望引起您对代码块中特定部分的注意时，相关的行或项目会用粗体显示：

```
deploy-to-staging: 
stage: staging 
script: ./deploy-staging.sh 
tags: 
- windows 
- staging 
```

任何命令行输入或输出如下所示：

```
$ git --version 
git version 2.25.1
```

**粗体**：表示新术语、重要单词或您在屏幕上看到的词汇。例如，菜单或对话框中的词汇通常以**粗体**显示。举个例子：“从**管理**面板中选择**系统信息**。”

提示或重要说明

以这种方式出现。

# 联系我们

我们总是欢迎读者的反馈。

**常见反馈**：如果您对本书的任何内容有疑问，请通过电子邮件联系我们：customercare@packtpub.com，并在邮件主题中注明书名。

**勘误表**：尽管我们已尽一切努力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现错误，我们将非常感激您向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表单。

**盗版**：如果您在互联网上发现我们作品的任何非法复制品，我们将非常感激您提供相关的地址或网站名称。请通过版权@packt.com 与我们联系，并附上该材料的链接。

**如果您有意成为作者**：如果您在某个领域拥有专业知识，并且有兴趣撰写或参与书籍编写，请访问 authors.packtpub.com。

# 分享您的想法

阅读完*《使用 GitLab CI/CD 管道自动化 DevOps》*后，我们很想听听您的想法！请[点击此处直接前往 Amazon 评论页面](https://packt.link/r/1803233001)并分享您的反馈。

您的评价对我们以及技术社区非常重要，将帮助我们确保提供优质的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢随时随地阅读，但无法随身携带印刷书籍吗？您的电子书购买是否无法与您选择的设备兼容？

不用担心，现在每本 Packt 书籍都能免费获得无 DRM 的 PDF 版本。

随时随地在任何设备上阅读。可以从您最喜欢的技术书籍中直接搜索、复制并粘贴代码到您的应用程序中。

特权并不止于此，您还可以获得独家折扣、新闻简报以及每天发送到您邮箱的精彩免费内容

按照这些简单的步骤来获取好处：

1.  扫描二维码或访问下面的链接

![](img/B18073_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803233000`](https://packt.link/free-ebook/9781803233000)

1.  提交您的购买证明

1.  就是这样！我们会将您的免费 PDF 和其他好处直接发送到您的邮箱。

# 第一部分 开始使用 DevOps、Git 和 GitLab

在本书的这一部分，您将了解在 GitLab 出现之前，软件开发生命周期为何如此缓慢且容易出错，这将帮助您理解 GitLab 所解决的问题。您还将了解 Git 版本控制系统的基础知识，并将接触到 GitLab 的基本概念和组件。最后，您将首次接触 GitLab CI/CD 管道，它将是本书其余部分的主要内容。

本部分包括以下章节：

+   *第一章*，*理解 DevOps 之前的生活*

+   *第二章*，*练习基本的 Git 命令*

+   *第三章*，*理解 GitLab 组件*

+   *第四章*，*理解 GitLab CI/CD 管道结构*
