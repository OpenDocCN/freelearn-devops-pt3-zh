

# 结论

本结论提供了本书内容的概述，包括前几章的核心收获。接着，解释了如何在自己的工作中使用反模式方法和视角，以提高架构技能。最后，它还提供了如何在这一方向上进一步发展的指引。

本章我们将讨论以下几个主要内容：

+   本书的关键内容——特别是我们将讨论一些反模式的根本原因

+   如何在自己的建筑实践中使用反模式来提高你创建的架构质量

+   如何进一步理解反模式并发展你自己的架构技能

完成本章后，你将能够较好地理解如何进一步发展自己的架构能力，并知道如何将基于反模式的思维整合到你作为架构师的日常实践中。

# 总结关键内容

本书涵盖了七个不同架构领域的几十种反模式。然而，细心的读者会发现，许多问题及其建议的解决方案在多个看似不同的领域中是相似的。

这表明，从更深层次看，反模式有着相似的根本原因，通常源于更大的组织因素甚至心理因素。我们来看看这些重复出现的原因：

+   **一厢情愿的想法**：一些反模式基于某种形式的一厢情愿的想法——也就是说，不愿面对眼前的技术现实。在“Project Pieism”中，它表现为无法面对取舍和不确定性；在“Golden Hammer”中，是过度乐观地相信单一工具；在“Unplanned Growth”中，是认为可以在以后找到解决方案。这也扩展到了新模式，比如*AI 架构与常规架构相同*，其中团队未能意识到 AI 所面临的独特挑战。在技术架构中，始终要警惕过度乐观的情绪。

+   **系统性盲点**：许多反模式源于无法看到整个系统，专注于局部解决方案而忽视整体架构。这包括反模式，如*孤立的实体*、*忽视生态系统*、*用包创建孤岛*和*事件地狱*。现代 Salesforce 实现的复杂性日益增加，特别是在 AI 集成和 DevOps 实践的背景下，使得这一问题变得更加重要。忽视你所处的整体社会技术系统，肯定会导致反模式的出现。

+   **用实际问题替代简单问题**：许多反模式源于希望简化问题。许多架构问题是棘手的，只能提供不完美且高度复杂的解决方案。通常，这对于那些寻求简单易懂答案的利益相关者来说并不完全令人满意，而这种需求的满足往往会导致反模式。例如，安全领域中的*合规即安全*和*声明式即安全*，就是我们用简单的答案替代复杂现实的两个例子。这也扩展到新的模式，如*让我们加点 AI*，将复杂的 AI 实施挑战过度简化。

+   **组织约束**：另一个常见的反模式根本原因是受到当前组织结构的约束。无论是因为组织内部的孤岛、与供应商的糟糕关系，还是政治游戏，你所处的组织环境有时会导致甚至迫使你走上反模式的道路。这在新的模式中尤为明显，比如*忽视利益相关者关切*和*低估变更的影响*。

+   **技术治理薄弱**：缺乏有效的技术治理是另一个常见的反模式原因。当你没有任何架构权威、明确的标准或规范时，通常会出现漂移，从而产生反模式。这包括许多模式，如*强耦合*、*系统扩散*和*不受约束的数据同步*。DevOps 实践和 AI 能力的日益普及使得强有力的治理变得更加重要。

+   **缺乏纪律性**：最终，一些反模式归结为软件开发生命周期中缺乏纪律性。这包括*泥球*、*意大利面共享模型*、*臃肿接口*和*虚拟单元测试*等模式。新的模式，如*不频繁提交代码*，也属于这一类。这些在某种程度上是最容易解决的，因为解决方案显而易见，但推动团队走捷径的潜在压力往往更难应对。

# 解释如何在实践中使用反模式

如果你已经通读了本书，你会遇到大量关于 Salesforce 项目可能出错的模式。我们按架构领域进行结构化，以帮助你理解并提供更多的背景信息。

然而，你可能仍然对如何在日常工作中应用这份新知识库存在一些疑问。我们建议你可以通过两种主要方式，主动利用反模式知识来提升你的架构实践并磨练你的架构技能：

1.  首先，你可以将其作为架构和设计过程的一部分，建设性地使用。

1.  其次，你可以将它作为诊断工具的一部分，用来理解其他人设计的架构

## 建设性地使用反模式

建设性地使用反模式意味着你将基于反模式的思维纳入到你的正常架构过程当中。你可以通过几种方式做到这一点，从简单地拥有一个常见反模式的心理检查清单，来验证你的工作是否符合要求，到系统地检查所有适用于当前架构过程阶段的反模式。

我们建议在这两种极端之间选择一个折衷方案，你可以采取以下步骤：

1.  在架构过程的开始，基于上一节中提到的六个因素进行评估。对于每个因素，按照标准的 1-5 评分标准评估你的环境，看看它可能对你的工作产生多大影响。

1.  对于你在评估中评分为 4 或 5 的所有因素，列出在你的环境中可能发生的各种反模式。特别关注与 AI 集成、DevOps 实践和变更管理相关的新挑战。

1.  对于你选择的那些反模式，在初步设计时以及项目的整个过程中定期进行检查，看看它们是否开始出现。

1.  如果你开始看到某个反模式的倾向，按照模式描述中*更好的解决方案*部分的指示，采取主动措施。

### 诊断性地使用反模式

当你作为架构师进入一个现有环境时，基于反模式进行分析以诊断现有架构的健康状况是一个非常有成效的努力，我们强烈推荐这样做。这个分析不仅有助于你理解当前环境的优缺点，还可以指示出你可能开始重构它的方式。

我们建议你执行以下操作：

1.  收集来自现有用户和熟悉现有环境的团队成员的信息，特别是那些可能表明存在反模式的非功能性特征。

1.  根据你收集的信息，列出可能出现在该架构中的潜在反模式，包括与 AI、DevOps 和变更管理相关的新模式。

1.  对相关技术文档进行彻底检查，确认或驳斥每个反模式的存在。

1.  根据你的发现，开始考虑潜在的缓解措施，并评估你被带入的工作对环境的影响。

# 更进一步使用反模式

虽然这本书提供了大量信息，但显然你的架构学习之旅并不会止步于此。我们建议你考虑以下三条前进路径：

+   更深入地研究反模式文献

+   扩展你对 Salesforce 架构的知识

+   扩展你的一般架构知识

对于这些领域，我们已经精选了一系列有用的资源，并将在接下来的章节中进行讲解。

## 深入反模式文献

有三个资源，我们特别推荐它们来深入理解反模式的概念：

+   原版书籍是*反模式：重构软件、架构和危机中的项目*，作者为 Raphael C. Malveau、William J. Brown、Hays W. “Skip” McCormick 和 Thomas J. Mowbray。尽管这本书已经非常过时，但它在正式化和普及反模式概念方面起到了极为重要的作用。书中介绍的多个反模式可以追溯到这本书。

+   对反模式的整体讨论，无论是通用反模式还是具体反模式，都可以在 WikiWikiWeb 上找到，网址是[`wiki.c2.com/?Anti-patter`](https://wiki.c2.com/?AntiPattern)。

+   DevIQ 拥有一个极好的反模式资源库，讨论了许多在多个平台上常见的反模式，可以在[`deviq.com/anti-patterns/anti-patterns-overview`](https://deviq.com/antipatterns/antipatterns-overview)找到。

接下来，我们将探讨如何将对反模式的知识与对 Salesforce 架构的深入理解结合起来，以取得更好的成果。

## 扩展你的 Salesforce 架构知识

运用你新获得的 Salesforce 反模式知识的最佳方式之一是将其与对关键 Salesforce 架构领域的深入了解结合起来。我们推荐以下几本书：

+   首先，我们推荐 Tameem Bahri 的*成为 Salesforce 认证技术架构师*，适合那些正在准备 CTA 认证或未来有意向的读者。像这本书一样，它按照 CTA 架构领域进行结构化，因此具有很高的互补性。

+   另一本非常好的 Salesforce 架构书籍是 Mike King 的*Salesforce B2C 解决方案架构师手册*。

+   对于那些特别关注数据领域的人，我们强烈推荐 Ahsan Zafar 的*Salesforce 数据架构与管理*。

然而，Salesforce 架构只是需要考虑的一个方面。你还应该考虑扩展你的通用架构知识。

## 扩展你的通用架构知识

尽管反模式很重要，我们也应该努力提升我们对架构的整体理解。以下是一些可以帮助做到这一点的资源：

+   首先，我们推荐 Saurabh Shrivastava 和 Neelanjali Srivastav 的*解决方案架构师手册*，这本书很好地介绍了许多通用架构主题。

+   对于 CRM 及其架构的通用介绍，我们推荐 Max Fatouretchi 的*CRM 的艺术*。

+   最后，我们推荐 Jeroen Mulder 的*多云架构与治理*，以获得对日益普及的多云架构场景的良好概述。

我们已经覆盖了本章内容和书籍的要点，接下来将以最终总结结束。

# 总结

做得好，你成功了！这是本书的最后一章，现在你已经成为一名正式的反模式爱好者。

在这一章中，我们总结了本书的主要内容。特别是，我们分析了六个普遍存在于许多反模式中的根本因素，它们是这些反模式的根源。这些因素为架构师提供了指示标志，帮助他们在特定的架构环境中识别出可能出现的反模式，并了解可以采取哪些措施来缓解这些问题。

为了将这些知识应用于实践中，我们概述了两种将反模式融入架构流程的方法。首先，我们探讨了如何在自己的架构中建设性地运用反模式，其次是如何在检查现有架构时以诊断的方式使用它。

最后，我们探讨了你接下来可能的学习方向，以进一步扩展你的知识。我们概述了你可以采取的三条路径，并给出了一些书籍和其他资源的建议。

反模式是通用架构中最有趣的领域之一，因为它们告诉你事物是如何以可重复的方式出错的。从他人的错误中学习通常比自己犯所有错误要好，我真诚地希望阅读本书能让你更不容易重复这些反模式，并且能在你的环境中识别出他人即将犯的错误。

软件系统至关重要。组织依赖于它们。用户在工作中花费大量时间与它们互动。作为架构师，我们有责任帮助避免那些导致系统无法发挥最佳效能的常见错误。随着人工智能、DevOps 实践的普及以及架构解决方案中对有效变更管理的需求，这一责任变得愈加重要。
