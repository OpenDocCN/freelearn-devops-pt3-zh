# 序言

在如今快速发展的 DevOps 世界里，传统的部门壁垒已经成为过去。数据库管理员的角色不再是单一的；取而代之的是，SRE 或 DevOps 工程师现在也成为了数据库专家。这种角色的模糊化导致了更多的责任，在高效能的 DevOps 团队中，这意味着对整个流程的端到端负责。

本书是您掌握数据库领域 DevOps 的终极指南。书中从 DevOps 实施的真实案例及其在现代数据持久技术中的重要性开始，接着探讨不同类型的数据库技术，突出了它们的优缺点和共性。您将通过实践案例学习设计、实施、测试和运维。然后，您将了解常见的设计模式，并将它们与工具、技术及策略结合应用于不同类型的数据持久技术。此外，本书还将指导您创建端到端的复杂实施、部署和云基础设施策略，并将其定义为代码。

通过本书的学习，您将具备设计、构建和高效运维复杂系统的知识和工具。无论您是经验丰富的 DevOps 专家还是新手，本书都是在不断变化的 DevOps 世界中取得成功的必备资源。

# 本书的读者对象

本书主要面向对大规模系统感兴趣的 SRE、DevOps 工程师和系统工程师，重点关注数据持久技术。本书还将帮助那些希望进入 DevOps 领域的数据库管理员。

# 本书的内容简介

*第一章*，*将 DevOps 应用于现实生活*，开启了一段探索之旅，深入探讨 DevOps 的丰富历史和基本原理。我们将揭示其诞生的深刻原因，评估它对科技行业的变革性影响，并深入研究它为组织工作流带来的巨大价值。此外，本章还作为一本实践指南，概述了 DevOps 中的常见目标、任务和实施模式。这些洞察力旨在为您提供清晰的路线图，帮助您在实际场景中应用这些概念，节省大量时间和精力。

*第二章*，*大规模数据持久化系统*，聚焦于现代基础设施设计中的前沿实践和流行趋势，尤其是与大规模数据持久化系统相关的内容。我们将剖析这些实践对数据持久化技术的重大影响以及它们带来的独特挑战。此外，本章还弥合了这些不断发展的技术与 DevOps 之间的鸿沟，强调了 DevOps 方法论如何成为应对日益增长的需求和更高期望的关键，即使在精简的团队结构下。此次讨论旨在提供对集成 DevOps 策略如何有效解决并简化这些复杂的数据持久化挑战的全面理解。

*第三章*，*DevOps 中的 DBA*，介绍了**数据库管理员**（**DBA**）在动态 DevOps 世界中的关键角色转变。我们将探索“DevOps DBA”这一概念——一个超越传统 DBA 角色界限，作为 DevOps/**站点可靠性工程**（**SRE**）专家专注于数据库的专业人士。通过实际案例和真实生活中的轶事，我们将深入探讨 DevOps DBA 的最佳实践，审视这一角色演变带来的扩展期望和责任。您将了解 DBA 如何过渡到这一多面角色，理解这些实践在现实场景中的应用以及它们带来的益处。本章强调了实施实践的重要性，突出了开发团队、测试人员和运维人员之间协作在成功 DevOps 模型中的关键作用。

*第四章*，*数据库演变*，提供了数据库演变的全景视图，勾画了重要技术里程碑的发展历程，如首个非关系型数据库的出现。我们的探索将重点理解每项新技术出现的原因，分析它们为满足客户需求而开发的背景及其在今天快节奏的技术环境中的持久相关性。我们还将简要探讨分析系统的崛起及其与前沿的**机器学习**（**ML**）和 AI 技术的协同配合。本章旨在提供数据库演变的全面概述，深入分析这些发展如何塑造并继续影响数据管理领域。

*第五章*，*关系数据库*，详细探讨了若干关键的关系数据库。我们将深入研究定义这些数据库的复杂设计模式，并对它们的配置细节进行详细分析。本章的一个关键焦点是理解这些系统的性能特征和弹性特性。通过全面审视这些关键方面，本章旨在为您提供对关系数据库的深入理解，这是在各种技术环境中进行有效数据库管理和优化的基础。

*第六章*，*非关系数据库*，深入分析了若干重要的非关系数据库。我们将深入探讨它们独特的设计模式，剖析它们的配置细节。本章的一个重要部分将专注于分析这些数据库的性能特征和弹性特性。通过这本全面的概述，旨在为您提供对非关系数据库的深刻理解，突出它们独特的优势和应用。这些知识对于在各种技术环境中有效利用和优化这些数据库至关重要，尤其是在传统关系数据库可能不适合的场景中。

*第七章*，*大数据、人工智能和机器学习*，全面概述了当今技术领域前沿的各种数据持久化技术，包括分析系统、大数据湖以及人工智能与机器学习的集成。我们将深入探讨这些技术的设计模式，仔细分析它们的配置细节，并评估它们的性能和弹性特性。本章特别强调理解采用这些技术的预期成果和基本原因。此外，我们还将探讨一些常见的应用实例，例如人工智能绘图功能如何利用数据湖、视觉存储、人工智能服务和算法的结合。本章旨在提供这些先进技术的整体视角，突出它们在现代数字世界中的角色和影响。

*第八章*，*零接触操作*，作为一本全面指南，帮助掌握需求收集技术，这是确定适合您需求的正确技术和配置的关键步骤。我们将向您展示如何从各方利益相关者——包括业务、技术和客户角度——收集有意义的见解，以便在启动任何项目之前汇总一个强大的数据集。这些知识，结合之前章节中涉及的 DevOps 原则和技术洞察，将为您提供必要的框架，帮助您做出明智的战略和技术决策。

本章的一个关键重点是在不同场景中定义“看起来好”的内容，提供了各种策略和技术组合的清晰模式。我们还深入探讨了“零触碰操作”的概念，这是现代运营最佳实践的基石。本章解释了这一严格政策的关键性需求，禁止在运营生命周期事件中进行手动干预，并说明其实施如何显著提升运营效率，减少**平均修复时间**（**MTTR**），并提高系统可用性。我们还将讨论将零触碰原则应用于数据持久化技术时面临的独特挑战和微妙差异，为成功实施提供详细的路线图。

*第九章*，*设计与实施*，深入探讨了数据库设计和实施的实际方面，突出了 DevOps DBA 的核心角色。我们将呈现一系列常见的设计模式，现在通过结合工具、技术和策略的综合方法进行了丰富，适用于各种类型的数据持久化技术。

本章的结构旨在全面理解实施不同数据库系统的方法。我们将探讨两种关系数据库的实施，每种都采用不同的工具和策略方法。同样，我们将审视两种非关系数据库系统的实现，再次使用独特的工具和策略组合。此外，我们还将深入探讨集成 AI 和 ML 技术的分析系统的实施。

通过提供这些多样化的示例，本章旨在为您提供广泛的知识和实用见解。这将使 DevOps DBA 和技术专业人士能够有效地在数据库设计和实施的复杂性中导航，从概念初步到生产环境。

*第十章*，*数据库自动化工具*，致力于探讨 DevOps 和 SRE 团队在数据库管理领域常用的一系列工具。我们将深入探讨数据自动化的概念和重要性，即以程序方式更新开放数据门户上的数据，而非手动更新。这种方法对于任何开放数据项目的可持续性和效率至关重要。

我们将研究多种有助于实现此自动化的工具，讨论它们的功能、应用以及它们如何整合到更广泛的数据库管理和维护流程中。本章旨在全面理解这些工具如何优化数据库操作，确保数据始终更新、准确和可访问。这些见解对于希望通过有效自动化增强其数据库管理策略的专业人士至关重要。

*第十一章*，*端到端所有权模型*，专注于从传统基础设施和运营策略的转变，传统策略通常涉及团队职能的分割，而如今则更倾向于与 DevOps 核心目标——端到端团队所有权——一致的集成方法。我们将探讨这一策略的影响，并提供行业中目前成功实施此类整体方法的实际案例。

这一转变的一个关键方面是越来越重视赋能开发团队。这导致了传统团队结构的变革，逐步从角色特定的职能转向为开发团队提供管理从头到尾整个流程所需的能力。本章将深入探讨在数据库及相关技术背景下出现的独特挑战，并提供有效应对这些挑战的见解。

通过本讨论，我们旨在清晰阐明端到端所有权模型，展示团队如何成功过渡到这一模型，从而在 DevOps 领域提升效率、协作和整体项目成功率。

*第十二章*，*不可变和幂等逻辑*，探讨了使用不可变对象和幂等编排在管理和运营基础设施资源中的现代战略方法，特别是这些概念如何应用于数据库技术。这里的固有挑战在于，数据本质上是可变的，而与数据库相关的服务器或服务通常无法与基于不可变性的战略完美契合。

我们将探讨如何在数据库领域采用不可变性和幂等性的核心原则。重点将放在如何利用这些概念提升数据库系统的弹性和可用性，同时不损害数据的完整性和安全性。本章旨在架起现代操作策略与数据库管理实践之间的桥梁，提供关于如何构建更加健壮、高效和可靠的数据库系统的见解。

*第十三章*，*运算符和自愈*，深入探讨了 DevOps DBA 的自动化进阶领域，基于前几章讨论的自动化主题，特别关注 Kubernetes 运算符在数据库技术中的应用。我们将通过实际案例，如 Couchbase 运算符，来了解这些运算符如何促进数据库系统中的自愈机制，以及在何种情况下它们可能未能达到预期效果。

本章还将带领你了解完全托管的数据库解决方案的概念，并将其与基于操作员的系统进行比较分析。通过这种对比分析，我们将揭示每种方法的优缺点，帮助你做出明智的决策，选择最适合你特定需求和环境的策略。目标是为 DevOps DBA 专业人员提供必要的知识和工具，以应对数据库自动化不断发展的格局，确保数据库操作的稳健、高效和自给自足。

*第十四章*，*将它们融合在一起*，是整本书中所有概念和策略的总结。我们将进行一项有趣的练习，追溯一个理论项目的生命周期，从它的起始到在生产环境中的运行。这项练习将涵盖项目开发的每个阶段，从需求收集开始，经过设计、实施、部署，直到运营和维护。

在这段旅程中，我们将应用前面章节中涵盖的多种技术和方法论，将它们整合起来，展示它们如何协同工作。这种实践方法不仅将加深已学知识的印象，还将提供实际的见解，说明这些技术和策略如何在现实场景中协同运作。我们的目标是提供一个关于 DevOps 环境下项目管理的全面视角，展示从数据库管理到自动化和操作策略等各种元素如何融合，创造一个连贯且高效的工作流。

*第十五章*，*专注于数据——作者的个人经验及其在 DevOps 和数据库 DevOps 中的演变*，在这一章中，我将讲述过去 15 年多来的职业历程，随着快速变化的科技行业不断发展。这一叙述不仅仅是职业经验的记录；它还是一段关于高潮与低谷、面对的挑战和取得的胜利的故事。

我将分享我如何专注于数据、DevOps 和数据库 DevOps 领域的见解，提供我所见证并适应的变化和趋势的幕后故事。本章旨在提供一个独特的视角，揭示为什么这段旅程如此令人兴奋且充实，并且至今仍然充满活力。

通过轶事和反思，目标是启发和告知你，展示技术职业生涯的动态性和不断发展的本质，特别是在像 DevOps 和数据库管理这样至关重要且具有变革性的领域。这个个人叙述不仅旨在记录职业旅程，还要传达支撑我在这个激动人心领域中职业生涯的热情和激情。

*第十六章*，*数据的激动人心的世界——DevOps DBA 未来可能的样貌*，进入了推测领域，展望数据管理的未来和 DevOps DBA 角色的演变。我们将借助当前趋势和行业发展，展望未来，预测这个动态领域中即将出现的挑战和机会。

本章将探讨可能的技术进步、行业变化以及新兴方法，这些因素可能会重新塑造 DevOps 和数据库管理的格局。我们将讨论这些变化如何影响 DevOps DBA 的日常职责，以及哪些技能集将变得愈加重要。

我们的目标是提供一个深思熟虑、信息丰富的视角，展望未来，并提供可以帮助本领域专业人士为即将到来的变化做好准备并适应的见解。通过预测行业的发展方向，本章旨在激励 DevOps DBA 始终走在创新的前沿，并继续推动他们的职业生涯朝着令人兴奋且有意义的方向发展。

# 为了从本书中获得最大收益

为了最大化本书在数据库 DevOps 方面的收益，理想情况下，你应具备以下条件：

+   对云技术和环境有基础了解，因为本书深入探讨了云基础设施策略及其与数据库技术的整合。

+   熟悉自动化工具，如 Ansible 和 Terraform，它们对于实现书中讨论的基础设施部署和数据库编排的“代码化”策略至关重要

+   对数据库系统（包括关系型和非关系型数据库）有基本了解，因为本书通过 DevOps 的视角涵盖了多种数据库技术

+   对 DevOps 原则和实践的理解，因为本书特别为那些希望将这些方法应用于数据持久化技术和大规模系统的人士量身定制

这种背景将帮助你充分理解本书中呈现的先进概念和实际应用。

# 使用的约定

本书中使用了许多文本约定。

`文本中的代码`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账号。例如：“这是一个 Kubernetes 的 YAML 文件（`deployment-and-service.yaml`）。”

代码块如下所示：

```
import redis
# create a Redis client
client = redis.Redis(host='my-redis-host', port=6379)
# cache a value
client.set('my-key', 'my-value')
# retrieve a cached value
value = client.get('my-key')
```

当我们希望引起你对代码块中特定部分的注意时，相关行或项将用**粗体**标出：

```
import redis
# create a Redis client
client = redis.Redis(host='my-redis-host', port=6379)
```

任何命令行输入或输出如下所示：

```
 ansible-playbook -i inventory/hosts playbooks/postgres.yml
```

**粗体**：表示一个新术语、一个重要的词或屏幕上看到的文字。例如，菜单或对话框中的词汇通常会显示为**粗体**。例如：“要在 Datadog 中创建一个新仪表板，请访问**仪表板**页面并点击**新建仪表板**。”

提示或重要注意事项

以这种方式显示。

# 与我们联系

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请通过电子邮件联系我们：customercare@packtpub.com，并在邮件主题中注明书名。

**勘误**：尽管我们已尽最大努力确保内容的准确性，但错误难免发生。如果您在本书中发现了错误，我们将非常感谢您向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果您在互联网上遇到任何非法复制的我们的作品，感谢您提供相关网址或网站名称。请通过 copyright@packtpub.com 联系我们，并附上链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且有兴趣撰写或参与编写书籍，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

阅读完 *《数据库的 DevOps》* 后，我们很乐意听取您的意见！请 [点击这里直接进入亚马逊评论页面](https://packt.link/r/183763730X) 并分享您的反馈。

您的评论对我们和技术社区都非常重要，能够帮助我们确保提供优质内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢随时随地阅读，但又无法携带纸质书籍吗？您的电子书购买无法与您选择的设备兼容吗？

不用担心，现在购买每本 Packt 书籍，您都可以免费获得该书的无 DRM 版 PDF。

任何地方、任何设备上都能阅读。搜索、复制并将您最喜欢的技术书籍中的代码直接粘贴到您的应用程序中。

好处不仅仅如此，您还可以获得独家折扣、时事通讯和每日免费优质内容，直接发送到您的邮箱。

按照以下简单步骤获取福利：

1.  扫描二维码或访问下面的链接

![](img/B19315_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-83763-730-0`](https://packt.link/free-ebook/978-1-83763-730-0)

1.  提交您的购买证明

1.  就是这样！我们将直接把您的免费 PDF 和其他福利发送到您的电子邮件。

# 第一部分：数据库 DevOps

欢迎来到我们对数据管理和数据库技术领域中 DevOps 的深入探索。本书将带您走过 DevOps 的各个方面，结合理论与实践，涵盖从 DevOps 基础到数据库、大数据、人工智能和机器学习的高级讨论。每一章都在上一章的基础上展开，为新手和经验丰富的专业人士提供一个连贯的叙事。

如果你是 DevOps 世界的新手，本书的这一部分将带你进入 DevOps 的精彩世界。如果你是一个有经验的数据库专业人士，但尚未有机会在大规模上体验 DevOps 实践，那么你将会在这一部分中展开一段充满惊喜的旅程。DevOps 在现代软件开发和运营最佳实践中扮演着核心角色，统一了系统的构建和运行，强调在各个阶段的自动化和监控。DevOps 在现代系统设计和运营中起着至关重要的作用，重点关注端到端的所有权和自主运营。你将会学习到 DevOps 的基本原理和最佳实践。

本部分包含以下章节：

+   *第一章*，*在现实生活中实施 DevOps*

+   *第二章*，*大规模数据持久化系统*

+   *第三章*，*DevOps 世界中的数据库管理员（DBA）*
