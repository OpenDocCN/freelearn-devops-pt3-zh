- en: '13'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '13'
- en: The Tools to Take Your DevOps to the Next Level
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将你的DevOps提升到新水平的工具
- en: I do nothing but go about persuading you all, old and young alike, not to take
    thought for your persons or your properties, but and chiefly to care about the
    greatest improvement of the soul.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我所做的就是劝说你们所有人，无论老幼，不要只顾自己的人身安全或财产，而是主要关心灵魂的最大改善。
- en: – Socrates
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: – 苏格拉底
- en: Alright, here we are, the final chapter, the final stop on our journey together
    in this book. It has been fun; I hope you’ve learned a few things – I certainly
    have experienced a lot of joy in teaching you and trying to help you in your journey.
    This whole book has been a journey for me as well. We will now conclude with a
    few tools that will help you further your journey into DevOps and Python on your
    own.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，我们到了，最后一章，我们共同旅程的最后一站。过程非常愉快；希望你学到了些东西——我在教授你并试图帮助你进行你的旅程时也经历了许多快乐。整本书对我来说也是一段旅程。现在我们将以一些工具结束，本章将帮助你进一步推进你自己的DevOps和Python之旅。
- en: 'Consider this chapter to be an epilogue: a quick perusal of everything that
    has happened over the course of this book and a recap of all your learnings put
    into a functional context. In *The Lord of the Rings*, when the war is over, we
    see all of the characters have their individual endings of how their lives continued.
    That is my aim with this chapter, to leave you with something that rouses your
    curiosity and encourages you to walk even further down this path of DevOps and
    learn for yourselves what you can achieve.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 将本章视为一个尾声：快速浏览本书中发生的一切，并回顾所有你所学到的知识，并将其放入实际的背景中。在《指环王》中，当战争结束时，我们看到所有角色都有自己生活继续的结局。这也是我写本章的目标，给你留下些能够激发你好奇心的东西，鼓励你进一步走上DevOps的道路，并自己去了解你能够实现什么。
- en: On a personal note, I can say that over the course of writing this book, I have
    changed in many ways as well. The concepts of collaboration that I have preached
    throughout this book have come to help me greatly in collaborating with all of
    the wonderful people who have made this book possible. It has helped me level
    up in a way, and has pushed the boundaries of my ability and made me understand
    the responsibility of being an author.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 说到个人感受，我可以说，在写这本书的过程中，我也在许多方面发生了变化。我在书中提到的协作概念帮助我与所有使这本书成为可能的优秀人士进行了很好的合作。它帮助我在某种程度上成长，并推动了我的能力的边界，让我明白了作为一名作者的责任。
- en: The journeys that we undertake change us, mostly for the better. They make us
    confront who we are and what we want to do. The journey that I undertook writing
    this book has made me appreciative of the knowledge I had beforehand and the knowledge
    that I gained during the research of this book. It has made me a professional
    writer, and while this book won’t be as big a part of your life as it was mine,
    I hope it has helped facilitate your journey as well.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 我们所进行的旅程会改变我们，通常是变得更好。它们迫使我们面对自己是谁，以及我们想做什么。我在写这本书的过程中所进行的旅程让我更加欣赏我之前拥有的知识以及在本书研究过程中获得的知识。它让我成为了一名职业作家，虽然这本书不会像它对我一样成为你生活中的重要部分，但我希望它也能帮助你在自己的旅程中有所推进。
- en: 'So, for the final time, in this chapter, you will learn about the following:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，最后一次，在本章中，你将学习以下内容：
- en: Advanced automation tools that will allow you to make even more complex automation
    into a reality
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许你将更复杂的自动化变为现实的高级自动化工具
- en: Advanced monitoring tools to combine your monitoring and data analysis workloads
    and use both skills
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于结合监控和数据分析工作负载并运用两项技能的高级监控工具
- en: Advanced event response strategies for when those events and alerts really get
    out of hand
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当事件和警报真的失控时的高级事件响应策略
- en: Technical requirements
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with this chapter, you will require the following:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 要跟随本章，你将需要以下内容：
- en: A Grafana account at [grafana.com](http://grafana.com)
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[grafana.com](http://grafana.com)上的Grafana账户
- en: An AWS account with the ability to use AWS Step Functions and Compute Engine
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个AWS账户，能够使用AWS Step Functions和Compute Engine
- en: A GitHub account to use the code in this book’s repository ([https://github.com/PacktPublishing/Hands-On-Python-for-DevOps](https://github.com/PacktPublishing/Hands-On-Python-for-DevOps))
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个GitHub账户，用于使用本书代码库中的代码 ([https://github.com/PacktPublishing/Hands-On-Python-for-DevOps](https://github.com/PacktPublishing/Hands-On-Python-for-DevOps))
- en: A Google Cloud Platform project with Google Kubernetes API enabled
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启用了Google Kubernetes API的Google Cloud Platform项目
- en: A sense of achievement that you have reached this far in your learning process
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你在学习过程中达到这一阶段所获得的成就感
- en: Advanced automation tools
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级自动化工具
- en: Throughout this book, I have emphasized the value of automation and how important
    it is to the DevOps realm and the increase of your productivity in general. It
    is very hard to go overboard with automation as long as you’re careful with it
    and understand your use case. We have expanded our toolbelts throughout this book
    to allow us to automate tasks in a number of scenarios. We even figured out how
    to automate those automations. But now, let’s look into a tool that may take this
    process a step further. It also happens to be a personal favorite of mine.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我强调了自动化的价值，它对于 DevOps 领域的重要性以及提高整体生产力的作用。只要小心使用并理解你的使用场景，自动化是很难过度的。在本书中，我们已经扩展了我们的工具箱，让我们可以在多个场景中自动化任务。我们甚至弄清楚了如何自动化那些自动化任务。但现在，让我们看看一个可能会将这个过程推进到更高层次的工具。它也恰好是我个人的最爱之一。
- en: '**AWS Step Functions** is something that I am always excited to talk about
    and use. Whenever I look for the gold standard of automation workflow tools, it
    is this that I think of. Any other automation tool that I have seen that works
    well has had very similar functionality and usability to Step Functions. There
    are, of course, equivalent services in the other major clouds that can be used
    as a replacement and that work well in those environments, but the UX on Step
    Functions is the one that I prefer and is the one that will be the easiest to
    explain in this workflow.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '**AWS Step Functions** 是我总是非常兴奋地讨论和使用的工具。每当我寻找自动化工作流工具的金标准时，我总是想到它。我看到的任何其他表现良好的自动化工具，都具有与
    Step Functions 非常相似的功能和可用性。当然，其他主要云服务也有可以替代的等效服务，并且在那些环境中也能很好地工作，但我更喜欢 Step Functions
    的用户体验，并且它是最容易在这个工作流中解释的工具。'
- en: 'Let’s go into a few steps (and steps inside of steps) in Step Functions:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下 Step Functions 中的一些步骤（以及步骤中的步骤）：
- en: Log in to your AWS account, and on the console, search for `Step Functions`.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录到你的 AWS 账户，在控制台中搜索 `Step Functions`。
- en: Go to the **Step Functions** page, and at the top right, click on **Create**
    **state machine**.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入 **Step Functions** 页面，在右上角点击 **Create** **state machine**。
- en: '![Figure 13.1 – Creating a state machine](img/B21320_13_01.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.1 – 创建状态机](img/B21320_13_01.jpg)'
- en: Figure 13.1 – Creating a state machine
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.1 – 创建状态机
- en: The Step Functions workflow consists of actions, which are the invocation of
    services, completely based on the parameters that their APIs take, and flows,
    which direct the flow of the data.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Step Functions 工作流由动作组成，动作是服务的调用，完全基于它们的 API 参数；还有流程，流程决定数据的流向。
- en: 'The example function that we will demonstrate consists entirely of flows since
    using actions simply requires calling APIs, and you can apply them wherever you
    see fit. Here is a diagram of this flow:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将演示的示例函数完全由流程组成，因为使用动作仅需要调用 API，你可以在任何需要的地方应用它们。以下是该流程的示意图：
- en: '![Figure 13.2 – State machine diagram](img/B21320_13_02.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.2 – 状态机图](img/B21320_13_02.jpg)'
- en: Figure 13.2 – State machine diagram
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.2 – 状态机图
- en: 'This was exported directly from the Step Functions console, which you can see
    here:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这是直接从 Step Functions 控制台导出的，你可以在这里看到：
- en: '![Figure 13.3 – State machine console](img/B21320_13_03.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.3 – 状态机控制台](img/B21320_13_03.jpg)'
- en: Figure 13.3 – State machine console
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.3 – 状态机控制台
- en: It has also been exported in code format and placed in the GitHub repository
    of this book for use.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 它也已经以代码格式导出，并放置在本书的 GitHub 仓库中以供使用。
- en: 'We can break down the diagram in *Figure 13**.2* like this:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以像这样分解图中的内容 *图 13.2*：
- en: The parallel state runs two different functions, **Ping** and **Pong**.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 并行状态运行两个不同的功能，**Ping** 和 **Pong**。
- en: Both of them produce random numbers between a start and end value that the user
    inputs.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它们都产生介于用户输入的起始值和结束值之间的随机数。
- en: Once this is done, both numbers are compared to see which one is greater than
    the other.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，会比较这两个数字，看看哪一个大于另一个。
- en: If **Ping** is greater than **Pong**, the state machine stops its execution;
    otherwise, it executes the parallel state instead.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 **Ping** 大于 **Pong**，状态机会停止执行；否则，它将执行并行状态。
- en: Once you have saved your state machine, you can access it and run it using the
    **Start** **execution** button.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦保存了状态机，你可以访问它并使用 **Start** **execution** 按钮运行它。
- en: '![Figure 13.4 – Starting an execution on a state machine](img/B21320_13_04.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.4 – 在状态机上启动执行](img/B21320_13_04.jpg)'
- en: Figure 13.4 – Starting an execution on a state machine
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.4 – 在状态机上启动执行
- en: You will be asked what you would want to input in this state machine. In this
    case, we will choose the starting number as `5` and the ending number as `100`.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会被问到在此状态机中希望输入什么。在这种情况下，我们将选择起始数字为 `5`，结束数字为 `100`。
- en: '![Figure 13.5 – Parameters given to start the state machine](img/B21320_13_05.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.5 – 启动状态机所需的参数](img/B21320_13_05.jpg)'
- en: Figure 13.5 – Parameters given to start the state machine
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.5 – 启动状态机所需的参数
- en: The machine will go until **Ping** and **Pong** give us equal values, which
    takes about two seconds for numbers as small as this.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该机器将继续直到 **Ping** 和 **Pong** 给出相等的值，对于像这样的较小数字，约需两秒钟。
- en: 'Step Functions logs all of the states that it passes, along with the results:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Step Functions 记录了它通过的所有状态以及结果：
- en: '![Figure 13.6 – Events that occurred during the state machine](img/B21320_13_06.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.6 – 状态机中发生的事件](img/B21320_13_06.jpg)'
- en: Figure 13.6 – Events that occurred during the state machine
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.6 – 状态机中发生的事件
- en: 'This particular application seems rather mundane, but it is a great proof of
    concept for how Step Functions can be used to make workflows. An example of a
    real-world application for this could be a simple one that we have used before:
    deleting all the objects in an S3 bucket. There is no clear way in the user interface
    of AWS to delete all your objects at once; you need to do it one by one. But with
    Step Functions (which is integrated with every AWS service), you can list out
    and delete all the objects in an S3 bucket in parallel if you want to. Now, we
    will pivot to the monitoring of such applications to learn some insights into
    how to make them even better.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这个特定的应用看起来相当普通，但它是一个很好的概念验证，展示了如何使用 Step Functions 来创建工作流。一个实际应用的例子可以是我们以前用过的简单例子：删除
    S3 存储桶中的所有对象。AWS 的用户界面中没有清晰的方式一次性删除所有对象；你需要一个一个地删除。但通过 Step Functions（它与每个 AWS
    服务都集成），你可以选择并行列出并删除 S3 存储桶中的所有对象。如果你愿意的话。现在，我们将转向监控这些应用，了解如何进一步优化它们。
- en: Advanced monitoring tools
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级监控工具
- en: The purpose behind monitoring has always been to make sure that the things you
    said were working are still working. And it is often the case that they won’t
    be. It could be your fault or not; the concept of fault gets in the way of solving
    the problem. The proper monitoring of your workloads provides the path to more
    easily solving your problems.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 监控的目的一直是确保你所说的工作项仍然在正常运行。而实际情况往往是，它们不会正常工作。这可能是你的错，也可能不是；故障的概念会妨碍解决问题。对工作负载进行适当的监控为更容易地解决问题提供了途径。
- en: The simplest workloads can be monitored and the reactions to the information
    received can be automated so that you don’t even have to be involved most of the
    time when it comes to dealing with something going wrong. In more complex workloads,
    it is still important to keep up monitoring for faster reaction times to any situation,
    as well as to get more information on the situation in real time.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的工作负载可以进行监控，并且对于接收到的信息的反应可以实现自动化，这样大部分时间你甚至无需参与处理问题。对于更复杂的工作负载，保持监控仍然很重要，以便能够快速响应任何情况，并且实时获得更多关于情况的信息。
- en: Often, your solution, as it gets more complex, starts using more tools. More
    tools and services means the requirement for more monitoring and also more complex
    monitoring. If your monitoring comes from multiple places at the same time, it
    can become quite a hassle to deal with. So, a good solution in this case would
    be to centralize the monitoring in a central location that can hold and manage
    all of that data.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，随着你的解决方案变得越来越复杂，它开始使用更多的工具。更多的工具和服务意味着需要更多的监控，而且监控的复杂度也会增加。如果你的监控来自多个地方，它会变得相当麻烦。因此，一个好的解决方案是将监控集中在一个可以存储和管理所有数据的中心位置。
- en: 'This is where **Grafana** comes in, and it is the tool I want to talk about
    because it provides not only a ridiculously wide range of monitoring options but
    also an incredible range of deployment options with which you can make your Grafana
    instance managed or customized, meaning that it is a solution for both kinds of
    people: those who prefer self-made solutions and those who prefer ready-made.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这时，**Grafana** 就派上用场了，它是我想要谈论的工具，因为它不仅提供了极为广泛的监控选项，还提供了令人惊叹的部署选项，允许你对 Grafana
    实例进行管理或定制，这意味着它是针对两类人群的解决方案：那些偏好自制解决方案的人和那些偏好现成解决方案的人。
- en: When I first started looking into Grafana, I was writing a blog on how to monitor
    multiple compute instances over several different clouds using the monitoring
    services of one cloud, and I found that while that is pretty simple, there are
    still a few awkward hitches to the solution. Most of the time, choosing one cloud
    over the other resulted in complications arising in other services on the platform.
    A lot of these problems were solved by Grafana and all the love and work that
    has gone into making it.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 当我第一次开始研究 Grafana 时，我正在写一篇关于如何通过一个云的监控服务来监控多个计算实例的博客。我发现，虽然这相对简单，但仍然存在一些尴尬的问题。大多数时候，选择一个云平台往往会在其他服务上带来一些复杂问题。很多这些问题都被
    Grafana 解决了，并且得益于它所投入的所有精力与工作。
- en: 'So, let’s dive into the use of Grafana with its free account tier:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们深入了解使用 Grafana 的免费账户等级：
- en: Firstly, create a Grafana account. It is completely free and has a lot of SSO
    options, which I appreciate.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，创建一个 Grafana 账户。它是完全免费的，并且提供了很多单点登录（SSO）选项，这是我非常喜欢的。
- en: '![Figure 13.7 – Grafana signup](img/B21320_13_07.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.7 – Grafana 注册](img/B21320_13_07.jpg)'
- en: Figure 13.7 – Grafana signup
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.7 – Grafana 注册
- en: It will then ask you for your own personal monitoring subdomain URL and the
    region for deploying your instance. Once you set those, you are good to go.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，它会要求你输入个人监控子域名的 URL 以及部署实例的区域。设置好这些后，你就可以开始了。
- en: 'Alternatively, you can download and install Grafana on a custom server from
    here: [https://grafana.com/grafana/download?edition=oss](https://grafana.com/grafana/download?edition=oss).
    It has installation instructions for practically every OS that you can think of.'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 或者，你也可以从这里下载并安装 Grafana 到自定义服务器：[https://grafana.com/grafana/download?edition=oss](https://grafana.com/grafana/download?edition=oss)。它几乎提供了所有操作系统的安装说明。
- en: 'Let’s take a look at our dashboard:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们来看看我们的仪表盘：
- en: '![Figure 13.8 – Grafana dashboard](img/B21320_13_08.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.8 – Grafana 仪表盘](img/B21320_13_08.jpg)'
- en: Figure 13.8 – Grafana dashboard
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.8 – Grafana 仪表盘
- en: 'As you can see, Grafana offers us a lot of monitoring options, integrations,
    and data sources. For this exercise, we will use a data source that is very ubiquitous
    that just about anyone can access: Google Sheets.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，Grafana 为我们提供了许多监控选项、集成和数据源。在这个练习中，我们将使用一个非常普遍的数据源，几乎任何人都能访问：Google 表格。
- en: 'In your console’s search tab, search for `Google Sheets`. You will then have
    to install the plugin. It is the blue button at the far right:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在控制台的搜索标签页中，搜索`Google Sheets`。接着，你需要安装插件。它位于最右侧的蓝色按钮：
- en: '![Figure 13.9 – Google Sheets connector](img/B21320_13_09.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.9 – Google 表格连接器](img/B21320_13_09.jpg)'
- en: Figure 13.9 – Google Sheets connector
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.9 – Google 表格连接器
- en: Then, wait a minute for the plugin to install, and add a new data source from
    that same page.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，等待插件安装完成，并从同一页面添加新的数据源。
- en: '![Figure 13.10 – Google Sheets connector activated](img/B21320_13_10.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.10 – 激活 Google 表格连接器](img/B21320_13_10.jpg)'
- en: Figure 13.10 – Google Sheets connector activated
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.10 – 激活 Google 表格连接器
- en: Grafana will then ask you to create authentication credentials for your Google
    Sheets instance that you want to access, and it will even give you the proper
    instructions to do so.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，Grafana 会要求你为要访问的 Google 表格实例创建身份验证凭据，并会提供适当的操作说明。
- en: '![Figure 13.11 – Instructions provided by Grafana on its dashboard](img/B21320_13_11.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.11 – Grafana 在其仪表盘上提供的说明](img/B21320_13_11.jpg)'
- en: Figure 13.11 – Instructions provided by Grafana on its dashboard
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.11 – Grafana 在其仪表盘上提供的说明
- en: 'In this case, security-wise, the JWT token option is probably the best. You
    do not want to keep stray API keys lying around; therefore, please do the following:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，从安全角度来看，JWT 令牌选项可能是最好的。你不希望随便放置 API 密钥，因此请按以下步骤操作：
- en: Follow the steps given to create a service account and give that service account’s
    email address access to your sample Google Sheet.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照给出的步骤创建一个服务账户，并将该服务账户的电子邮件地址授权访问你的示例 Google 表格。
- en: Once you have uploaded your JWT key, you will have access to anything that the
    service account we used has access to. I used a Google Sheet that contained some
    sample web traffic data, but you can use any sheet that you want for this operation.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你上传了 JWT 密钥，你就可以访问该服务账户可以访问的所有内容。我使用了一个包含一些示例网页流量数据的 Google 表格，但你可以使用任何你想要的表格进行此操作。
- en: The cache time for this dashboard has been set to zero seconds, meaning that
    it will refresh as the information on the Google Sheet changes.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 该仪表盘的缓存时间已设置为零秒，这意味着它会在 Google 表格中的信息发生变化时自动刷新。
- en: '![Figure 13.12 – Sample exploration with the option to add to a dashboard](img/B21320_13_12.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.12 – 可添加到仪表盘的样本探索](img/B21320_13_12.jpg)'
- en: Figure 13.12 – Sample exploration with the option to add to a dashboard
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.12 – 可添加到仪表盘的样本探索
- en: You can then add this exploration to a new monitoring dashboard. As seen in
    *Figure 13**.12*, you can select the **Add** button and then the **Add to** **dashboard**
    option.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 然后你可以将此探索添加到新的监控仪表盘中。如*图 13.12*所示，你可以选择**添加**按钮，然后选择**添加到** **仪表盘**选项。
- en: '![Figure 13.13 – Creating a new dashboard with a panel](img/B21320_13_13.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.13 – 创建带有面板的新仪表盘](img/B21320_13_13.jpg)'
- en: Figure 13.13 – Creating a new dashboard with a panel
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.13 – 创建带有面板的新仪表盘
- en: 'This will create a new dashboard with your data table. We can now add some
    visualizations for our data on top of it. In the new dashboard, click on **Add**
    and then **Visualization**. You’ll get a panel similar to the one for the Google
    Sheets table where you can add a chart like this:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这将创建一个包含你的数据表的新仪表盘。现在我们可以在其上添加一些数据可视化。在新的仪表盘中，点击**添加**，然后选择**可视化**。你会看到一个类似于Google
    Sheets表格的面板，在这里你可以添加像这样的图表：
- en: '![Figure 13.14 – Bar graph produced by visualization](img/B21320_13_14.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.14 – 通过可视化生成的条形图](img/B21320_13_14.jpg)'
- en: Figure 13.14 – Bar graph produced by visualization
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.14 – 通过可视化生成的条形图
- en: You can see we have a highly customizable chart containing all of the information
    in a visualized form.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以看到我们有一个高度可自定义的图表，包含所有以可视化形式呈现的信息。
- en: 'Once you have made your visualization, go back to your newly created dashboard.
    Your final visualization will look something like this:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你完成了可视化，返回到你新创建的仪表盘。你的最终可视化将像这样：
- en: '![Figure 13.15 – Final Grafana dashboard](img/B21320_13_15.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.15 – 最终的Grafana仪表盘](img/B21320_13_15.jpg)'
- en: Figure 13.15 – Final Grafana dashboard
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.15 – 最终的Grafana仪表盘
- en: Again, this changes according to changes in data.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，这会随着数据的变化而改变。
- en: So far, we have seen events and automations that deal with events. But what
    happens when an event occurs that you can’t just reset your way out of? What happens
    when you are on the back foot and are forced to run damage control? Well, we are
    going to find out in the next section.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经看到了处理事件和自动化的事件。那么，当发生一个无法通过重置来解决的事件时会发生什么呢？当你处于不利的局面，被迫进行损害控制时又会怎样呢？好吧，我们将在下一部分找到答案。
- en: Advanced event response strategies
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 高级事件响应策略
- en: An event response should be simple and organized, and it should bring about
    the solution to whatever caused the event in the first place. But, once again,
    no matter how hard we try, it is never that simple. Sometimes you’re working with
    a system you haven’t had the chance to work with much. Sometimes the team that
    you work with is not experienced enough to help out in any meaningful way. These
    circumstances cannot be helped because of time and personnel constraints, and
    they are largely out of our control. In such situations, we simply have to make
    do with what we have.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 事件响应应该简单且有条理，应该解决最初导致事件发生的问题。但是，再次强调，不管我们如何努力，它永远不会那么简单。有时候你正在处理一个你不太熟悉的系统。有时候你所在的团队经验不足，无法提供有意义的帮助。这些情况由于时间和人员的限制是不可避免的，并且在很大程度上超出了我们的控制范围。在这种情况下，我们只能利用现有的资源应对。
- en: But there is one scenario that happens very often and causes widespread damage
    to the point where the response to the event stops being about damage recovery
    and starts being about what you can recover from the damage already done. This
    will occur if any sort of incident goes unreported or unmonitored for a long period
    of time. These situations often occur when there is some sort of data breach,
    or an unknown/undiscovered error is present in the system.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 但有一种情况非常常见，会造成广泛的损害，以至于对事件的响应不再是关于恢复损害，而是关于从已经造成的损害中恢复。这种情况通常发生在任何形式的事件长时间没有被报告或监控时。当发生数据泄露，或者系统中存在未知/未发现的错误时，这种情况尤其常见。
- en: So, what do you do when you suffer such a scenario? Well, the first thing to
    do is not to panic. But don’t think *don’t panic* – that’ll make you panic more!
    Approach the situation logically. I will now give you insight into how I would
    approach such a situation. It is based on situations that I have faced in the
    past, as well as everything I have learned about problem-solving from all sorts
    of places. I think it’s a good way to solve a lot of problems, IT or otherwise.
    So let’s get into it.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，当你遇到这种情况时，你该怎么办？首先，不要慌张。但也不要想“不要慌张”——那会让你更慌！以逻辑的方式面对问题。我现在会给你一些关于如何处理这种情况的见解。这是基于我过去面对的情况，以及我从各个地方学到的解决问题的经验。我认为这是一种很好的解决很多问题的方法，无论是IT问题还是其他问题。那么，接下来我们就开始吧。
- en: '*Step* *0: Read*'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*步骤* *0：阅读*'
- en: '*Because: You don’t do* *that enough*'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '*因为：你没有* *做过够多。*'
- en: Seriously, a lot of errors can be solved just by reading the outputs of those
    errors or glitches. Trust the thing you see and you will be rewarded; the solutions
    to your problems lie right in front of you. Well, the first steps to the solutions,
    anyway. But if you want to get there, you need to read and understand the process
    of getting there. You cannot get to step 1 without knowing all of the details
    in front of you.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 说真的，很多错误仅仅通过阅读错误信息或者故障的输出就能解决。相信你所看到的，它会给你回报；问题的解决方案就在你眼前。好吧，至少是解决方案的第一步。但如果你想走到那里，你需要阅读并理解解决这个问题的过程。你不能在没有了解所有细节的情况下就跳到第一步。
- en: '*Step 1: If it is a single problem,* *google it*'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '*步骤 1：如果是一个单一的问题，* *谷歌它*'
- en: '*Because: You are* *not alone.*'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '*因为：你不是* *一个人。*'
- en: 'This is serious advice. 90% of any sort of error that you encounter can be
    solved by Googling the error. This is because someone else has probably encountered
    your problem before. They have probably had the correct solution given to them
    before too. Chances are really high that you will find the solution to your problem
    on a *Stack Overflow* forum, a GitHub repository comment, an obscure YouTube video,
    or somewhere like that. You might be thinking to yourself: “It’s not that easy
    – no way can I solve my biggest problems just by googling them.” Stop thinking
    that right now! I once saw someone spend a full two hours trying a migration bridge,
    which we managed in about five minutes after looking at a YouTube tutorial. It
    happens – stop wasting your time and look for quick, informed results. They’ll
    handle the minor problems, and believe me, most problems are minor.'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 这是非常严肃的建议。90%你遇到的错误都可以通过谷歌搜索解决。这是因为别人可能也遇到过你面临的问题，他们可能也已经得到了正确的解决方案。你很有可能在*Stack
    Overflow*论坛、GitHub仓库的评论、一个不太知名的YouTube视频或者类似的地方找到解决方案。你可能会想：“这不可能这么简单——我怎么可能仅仅通过谷歌就能解决我最大的难题。”马上停下这种想法！我曾经看到有人花了整整两个小时尝试一个迁移桥，我们在看完一个YouTube教程后五分钟就搞定了。事情就是这样——别浪费时间，寻找快速、知情的解决方案。它们能处理那些小问题，信我，大多数问题都是小问题。
- en: '*Step 2: If it is several problems, google it several times (or, now,* *ChatGPT
    it)*'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '*步骤 2：如果是多个问题，就多次谷歌（或者，现在可以* *用ChatGPT）*'
- en: '*Because: One big problem is several small problems combined* *into one*'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '*因为：一个大问题是几个小问题* *合成的一个。*'
- en: 'It’s true: any problem can be broken down into its smallest components and
    solved at that level. It is basic logic; if you have a big problem, turn it into
    smaller problems and google those. If it is a really big problem or breaking down
    the problem will be mundane and take a lot of your time, you can use ChatGPT for
    that now; it is fairly good at that. Digesting a large amount of useless text
    into smaller, useful versions is probably what ChatGPT is best at. Use it. Use
    these great tools that you have at your disposal.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这是真的：任何问题都可以分解成最小的组成部分，并在那个层面上解决。这是基本的逻辑；如果你有一个大问题，把它转化成更小的问题，然后去谷歌一下。如果它是一个真的大问题，或者将问题分解的过程琐碎且会占用你大量时间，你现在可以使用ChatGPT来解决；它在这方面相当不错。将大量无用的文字转化成更小、更有用的版本，可能是ChatGPT最擅长的事情。好好利用它，充分利用这些你手头的强大工具。
- en: '*Step 3: Follow the methods of induction* *and deduction*'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '*步骤 3：遵循归纳和演绎的方法* *。*'
- en: '*Because: It will solve any everyday problem* *you have*'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '*因为：它能解决你所遇到的任何日常问题* *。*'
- en: 'Solutions and solving problems are very different from having ideas. Ideas
    are like lightning bolts from God; they are ghosts in our system, appearing out
    of the oddest of places. Grabbing an idea and bringing it to fruition is an ethereal
    experience, like having a religious revelation. Solutions are not that. They are
    simple, fundamental, and – if you know how to solve a problem – much easier to
    approach. The logic can be summarized in two words: induction and deduction.'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 解决方案和解决问题与产生想法截然不同。想法像是来自上帝的闪电，它们是我们系统中的幽灵，从最奇怪的地方冒出来。抓住一个想法并将其付诸实践是一种虚无的体验，就像是一次宗教启示。解决方案不是这样的。它们简单、基础，且—如果你懂得如何解决问题—更容易处理。其逻辑可以用两个词来概括：归纳和演绎。
- en: Every major problem that I have ever solved where I had access to a sample environment,
    I have solved with this logic. It’s something I found in *Zen and the Art of Motorcycle
    Maintenance*, where the narrator solves the most mundane problems through these
    two methods and connects these concepts to those of quantum physics and Zen Buddhism.
    These are not complex concepts, but all problem-solving can be defined within
    their parameters.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 我解决过的每一个重大问题，只要我能接触到样本环境，我都会用这种逻辑来解决。这是我在《禅与摩托车维修艺术》一书中学到的理念，书中的叙述者通过这两种方法解决最平凡的问题，并将这些概念与量子物理和禅宗相联系。这些概念并不复杂，但所有问题的解决都可以在它们的框架内定义。
- en: Induction is recreating the elements that cause the problem in a system to know
    exactly where the problem has occurred. This is useful in incident management
    when an incident needs to be recreated in a sample application and then breaking
    down those steps to find out where it all went wrong.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 归纳是重现导致问题的元素，以准确了解问题发生的位置。在事件管理中，这对于在样本应用程序中重现事件并通过分解步骤找出问题所在非常有用。
- en: Deduction is starting at the end and going back to the beginning. This is used
    when the logic of the error is not recreatable or an incident has occurred already
    with no idea of how it occurred. In this case, you work back from the end result
    and figure out what could possibly have caused these results.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 演绎是从结果出发，回溯到开始。这种方法适用于错误的逻辑无法重现，或者事件已经发生，但不知道如何发生。在这种情况下，你从最终结果开始，推理出可能导致这些结果的原因。
- en: 'So, summarizing these results in a diagram, you can look at them like this:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，将这些结果总结成图表，你可以这样来看待它们：
- en: '![Figure 13.16 – The steps to solving any IT problem you want](img/B21320_13_16.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图 13.16 – 解决任何 IT 问题的步骤](img/B21320_13_16.jpg)'
- en: Figure 13.16 – The steps to solving any IT problem you want
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图 13.16 – 解决任何 IT 问题的步骤
- en: And that is how you solve all of your problems. Try it out on a few of them
    and see how far you get. If you want to know about the formation of ideas, well,
    they are quite random, but they can be specified and turned into action points
    based on methods similar to these. So, now you have learned everything. Use your
    knowledge wisely.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是你解决所有问题的方法。试着在几个问题上应用看看，看看你能走多远。如果你想了解创意的形成过程，嗯，它们是相当随机的，但它们可以通过类似这些方法的手段被明确并转化为行动点。现在，你已经学会了一切。明智地使用你的知识吧。
- en: Summary
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: 'Alright, this is the end, not just of the chapter but of the book. The end
    of your journey as a reader of this book and of mine as a first-time author. It
    has been quite the journey. Talking about this chapter in general, it was a lot
    more abstract and a lot less code-focused than a lot of the other chapters, but
    that is because I’ve come to understand one thing when it comes to all of these
    systems: everything is code. Everything you touch will have been coded in some
    way; it is just up to you to understand and manipulate the logic behind it.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 好的，这不仅仅是本章的结束，也是整本书的结束。作为这本书的读者，你的旅程结束了，而我作为首次作者的旅程也结束了。这是一次不小的历程。总体来说，谈到这一章，它比许多其他章节更加抽象，代码内容也相对较少，但那是因为我已经意识到一件事：所有这些系统归根结底都是代码。你接触到的每一件事，都一定是以某种方式被编码过的；关键在于你是否能够理解并操控背后的逻辑。
- en: In the section regarding Step Functions, you learned about a very useful automation
    tool, but you also learned that it is a way to use coding logic visually while
    integrating that way into a lot of powerful tools and services.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 在关于步骤函数的部分，你学习了一个非常有用的自动化工具，但你也学到，这是一种以视觉化方式使用编码逻辑，并将这种方式整合进许多强大工具和服务的手段。
- en: In the section on advanced monitoring, we learned about a powerful monitoring
    and visualization tool in Grafana and the importance of centralized monitoring
    in preserving your sanity by not having to look through data from multiple locations
    and then parsing through them, and instead having one location that will work
    for all your workloads.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在高级监控部分，我们学习了一个强大的监控和可视化工具——Grafana，以及集中监控的重要性，通过集中管理，避免了从多个位置查看数据并解析数据的繁琐过程，而是有一个统一的位置来管理所有工作负载。
- en: Finally, you learned about how I approach problem-solving, an effective method
    if I do say so myself. I hope you get the chance to use it on your own workloads.
    This is a sort of meta code, an algorithm that is not beholden to any platform
    or technology but will work effectively on all of them.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你了解了我解决问题的方法，确实是一种有效的方式，如果我自己说的话。希望你能有机会在自己的工作负载中应用这个方法。这是一种元代码，一种不依赖于任何平台或技术，但能够在所有平台上有效工作的算法。
- en: 'And so, I must bid you adieu. We have come to the end, but look at it only
    as the end of the beginning, because what happens after is the most important
    part. This is what will define the person you are and the things that you will
    do. Now comes the part where you apply all of this knowledge in your own daily
    dealings. *Remember: the power is with you; it is time to* *use it*.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，我必须向你告别了。我们已经走到了尽头，但请将其视为开始的结束，因为接下来发生的才是最重要的部分。这将定义你是谁以及你将做什么。现在是时候将所有这些知识应用到你自己日常事务中了。*记住：力量掌握在你手中；是时候*
    *使用它*。
